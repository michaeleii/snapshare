
import { createRequire as topLevelCreateRequire } from 'module';
const require = topLevelCreateRequire(import.meta.url);
import { fileURLToPath as topLevelFileUrlToPath, URL as topLevelURL } from "url"
const __dirname = topLevelFileUrlToPath(new topLevelURL(".", import.meta.url))

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __require = /* @__PURE__ */ ((x) => typeof require !== "undefined" ? require : typeof Proxy !== "undefined" ? new Proxy(x, {
  get: (a, b) => (typeof require !== "undefined" ? require : a)[b]
}) : x)(function(x) {
  if (typeof require !== "undefined")
    return require.apply(this, arguments);
  throw Error('Dynamic require of "' + x + '" is not supported');
});
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require2() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all23) => {
  for (var name in all23)
    __defProp(target, name, { get: all23[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));

// <define:$app>
var define_app_default;
var init_define_app = __esm({
  "<define:$app>"() {
    define_app_default = { name: "snapshare", stage: "michael", removal: "remove", providers: { aws: { defaultTags: { tags: { "sst:app": "snapshare", "sst:stage": "michael" } }, region: "us-west-2" } }, home: "aws", backend: "", removalPolicy: "" };
  }
});

// <define:$cli>
var define_cli_default;
var init_define_cli = __esm({
  "<define:$cli>"() {
    define_cli_default = { command: "up", dev: true, env: { AWS_ACCESS_KEY_ID: "AKIATXWDG3NKYUNW5L53", AWS_DEFAULT_REGION: "us-west-2", AWS_REGION: "us-west-2", AWS_SECRET_ACCESS_KEY: "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", AWS_SESSION_TOKEN: "", BUN_INSTALL: "/home/michael/.bun", CHROME_DESKTOP: "code-url-handler.desktop", COLORTERM: "truecolor", DBUS_SESSION_BUS_ADDRESS: "unix:path=/run/user/1000/bus,guid=5bfcf8f5a129b2bacb4a7b9a660910ad", DBUS_STARTER_ADDRESS: "unix:path=/run/user/1000/bus,guid=5bfcf8f5a129b2bacb4a7b9a660910ad", DBUS_STARTER_BUS_TYPE: "session", DESKTOP_SESSION: "ubuntu", DISPLAY: ":1", DOTNET_BUNDLE_EXTRACT_BASE_DIR: "/home/michael/.cache/dotnet_bundle_extract", DOTNET_ROOT: "/usr/share/dotnet", DOTNET_WATCH_RESTART_ON_RUDE_EDIT: "true", FNM_ARCH: "x64", FNM_COREPACK_ENABLED: "false", FNM_DIR: "/home/michael/.local/share/fnm", FNM_LOGLEVEL: "info", FNM_MULTISHELL_PATH: "/run/user/1000/fnm_multishells/4258_1711870181159", FNM_NODE_DIST_MIRROR: "https://nodejs.org/dist", FNM_RESOLVE_ENGINES: "false", FNM_VERSION_FILE_STRATEGY: "local", FPATH: "/home/michael/.oh-my-zsh/plugins/fnm:/home/michael/.oh-my-zsh/plugins/dotnet:/home/michael/.oh-my-zsh/plugins/web-search:/home/michael/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting:/home/michael/.oh-my-zsh/custom/plugins/zsh-autosuggestions:/home/michael/.oh-my-zsh/plugins/git:/home/michael/.oh-my-zsh/functions:/home/michael/.oh-my-zsh/completions:/home/michael/.oh-my-zsh/cache/completions:/home/linuxbrew/.linuxbrew/share/zsh/site-functions:/home/michael/.oh-my-zsh/plugins/fnm:/home/michael/.oh-my-zsh/plugins/dotnet:/home/michael/.oh-my-zsh/plugins/web-search:/home/michael/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting:/home/michael/.oh-my-zsh/custom/plugins/zsh-autosuggestions:/home/michael/.oh-my-zsh/plugins/git:/home/michael/.oh-my-zsh/functions:/home/michael/.oh-my-zsh/completions:/home/michael/.oh-my-zsh/cache/completions:/home/linuxbrew/.linuxbrew/share/zsh/site-functions:/usr/local/share/zsh/site-functions:/usr/share/zsh/vendor-functions:/usr/share/zsh/vendor-completions:/usr/share/zsh/functions/Calendar:/usr/share/zsh/functions/Chpwd:/usr/share/zsh/functions/Completion:/usr/share/zsh/functions/Completion/AIX:/usr/share/zsh/functions/Completion/BSD:/usr/share/zsh/functions/Completion/Base:/usr/share/zsh/functions/Completion/Cygwin:/usr/share/zsh/functions/Completion/Darwin:/usr/share/zsh/functions/Completion/Debian:/usr/share/zsh/functions/Completion/Linux:/usr/share/zsh/functions/Completion/Mandriva:/usr/share/zsh/functions/Completion/Redhat:/usr/share/zsh/functions/Completion/Solaris:/usr/share/zsh/functions/Completion/Unix:/usr/share/zsh/functions/Completion/X:/usr/share/zsh/functions/Completion/Zsh:/usr/share/zsh/functions/Completion/openSUSE:/usr/share/zsh/functions/Exceptions:/usr/share/zsh/functions/MIME:/usr/share/zsh/functions/Math:/usr/share/zsh/functions/Misc:/usr/share/zsh/functions/Newuser:/usr/share/zsh/functions/Prompts:/usr/share/zsh/functions/TCP:/usr/share/zsh/functions/VCS_Info:/usr/share/zsh/functions/VCS_Info/Backends:/usr/share/zsh/functions/Zftp:/usr/share/zsh/functions/Zle", FZF_ALT_C_OPTS: "--preview 'tree -C {}'", FZF_CTRL_T_OPTS: "\n  --preview 'batcat -n --color=always {}'\n  --bind 'ctrl-/:change-preview-window(down|hidden|)'", FZF_DEFAULT_OPTS: "--height 100% --border", GDK_BACKEND: "x11", GDMSESSION: "ubuntu", GIT_ASKPASS: "/usr/share/code/resources/app/extensions/git/dist/askpass.sh", GNOME_DESKTOP_SESSION_ID: "this-is-deprecated", GNOME_SHELL_SESSION_MODE: "ubuntu", GNOME_TERMINAL_SCREEN: "/org/gnome/Terminal/screen/18d9f1b2_754b_410c_9d27_64d84eae3408", GNOME_TERMINAL_SERVICE: ":1.89", GPG_AGENT_INFO: "/run/user/1000/gnupg/S.gpg-agent:0:1", GTK_IM_MODULE: "ibus", GTK_MODULES: "gail:atk-bridge", HOME: "/home/michael", HOMEBREW_CELLAR: "/home/linuxbrew/.linuxbrew/Cellar", HOMEBREW_PREFIX: "/home/linuxbrew/.linuxbrew", HOMEBREW_REPOSITORY: "/home/linuxbrew/.linuxbrew/Homebrew", INFOPATH: "/home/linuxbrew/.linuxbrew/share/info:/home/linuxbrew/.linuxbrew/share/info:", LANG: "en_CA.UTF-8", LANGUAGE: "en_CA:en", LESS: "-R", LOGNAME: "michael", LSCOLORS: "Gxfxcxdxbxegedabagacad", LS_COLORS: "rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:", MANPATH: "/home/linuxbrew/.linuxbrew/share/man:/home/linuxbrew/.linuxbrew/share/man:::", OLDPWD: "/home/michael/Documents/projects/snapshare", ORIGINAL_XDG_CURRENT_DESKTOP: "ubuntu:GNOME", P9K_SSH: "0", P9K_TTY: "old", PAGER: "less", PATH: "/home/michael/.config/sst/bin:/home/michael/.config/sst/bin:/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/home/michael/.bun/bin:/run/user/1000/fnm_multishells/4258_1711870181159/bin:/home/michael/.local/share/fnm:/home/michael/.local/share/pnpm:/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/home/michael/.bun/bin:/run/user/1000/fnm_multishells/3885_1711870176093/bin:/home/michael/.local/share/fnm:/home/michael/.rye/shims:/home/michael/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:/home/michael/.dotnet/tools:/home/michael/.config/composer/vendor/laravel/installer/bin:/home/linuxbrew/.linuxbrew/opt/fzf/bin:/home/michael/.config/composer/vendor/laravel/installer/bin", PNPM_HOME: "/home/michael/.local/share/pnpm", PULUMI_CONFIG_PASSPHRASE: "9Ff0PFjFonyua/1mD+qouAxPtHNlLmwlfsCPhWeb420=", PWD: "/home/michael/Documents/projects/snapshare", QT_ACCESSIBILITY: "1", QT_IM_MODULE: "ibus", SESSION_MANAGER: "local/michael-MS-7C95:@/tmp/.ICE-unix/2132,unix/michael-MS-7C95:/tmp/.ICE-unix/2132", SHELL: "/bin/zsh", SHLVL: "2", SSH_AGENT_LAUNCHER: "gnome-keyring", SSH_AUTH_SOCK: "/run/user/1000/keyring/ssh", SYSTEMD_EXEC_PID: "2132", TERM: "xterm-256color", TERM_PROGRAM: "vscode", TERM_PROGRAM_VERSION: "1.87.2", TURSO_CONNECTION_URL: "http://127.0.0.1:8080", USER: "michael", USERNAME: "michael", VSCODE_GIT_ASKPASS_EXTRA_ARGS: "", VSCODE_GIT_ASKPASS_MAIN: "/usr/share/code/resources/app/extensions/git/dist/askpass-main.js", VSCODE_GIT_ASKPASS_NODE: "/usr/share/code/code", VSCODE_GIT_IPC_HANDLE: "/run/user/1000/vscode-git-91569f23d4.sock", VTE_VERSION: "6800", WINDOWPATH: "2", XAUTHORITY: "/run/user/1000/gdm/Xauthority", XDG_CONFIG_DIRS: "/etc/xdg/xdg-ubuntu:/etc/xdg", XDG_CURRENT_DESKTOP: "Unity", XDG_DATA_DIRS: "/usr/share/ubuntu:/usr/share/gnome:/usr/local/share/:/usr/share/:/var/lib/snapd/desktop", XDG_MENU_PREFIX: "gnome-", XDG_RUNTIME_DIR: "/run/user/1000", XDG_SESSION_CLASS: "user", XDG_SESSION_DESKTOP: "ubuntu", XDG_SESSION_TYPE: "x11", XMODIFIERS: "@im=ibus", ZSH: "/home/michael/.oh-my-zsh", _: "/home/linuxbrew/.linuxbrew/bin/sst", _P9K_SSH_TTY: "/dev/pts/1", _P9K_TTY: "/dev/pts/1" }, paths: { home: "/home/michael/.config/sst", platform: "/home/michael/Documents/projects/snapshare/.sst/platform", root: "/home/michael/Documents/projects/snapshare", work: "/home/michael/Documents/projects/snapshare/.sst" } };
  }
});

// .sst/platform/src/components/naming.ts
import crypto from "crypto";
function sanitizeToPascalCase(str) {
  const strNorm = str.replace(/[^a-zA-Z0-9]/g, "");
  return strNorm.charAt(0).toUpperCase() + strNorm.slice(1);
}
function prefixName(maxLength, name, suffix) {
  const suffixStr = suffix ?? "";
  const prefixedName = (() => {
    const L = maxLength - suffixStr.length;
    const appLen = define_app_default.name.length;
    const stageLen = define_app_default.stage.length;
    const nameLen = name.length;
    if (appLen + stageLen + nameLen + 2 <= L) {
      return `${define_app_default.name}-${define_app_default.stage}-${name}`;
    }
    if (stageLen + nameLen + 1 <= L) {
      const appTruncated = define_app_default.name.substring(0, L - stageLen - nameLen - 2);
      return appTruncated === "" ? `${define_app_default.stage}-${name}` : `${appTruncated}-${define_app_default.stage}-${name}`;
    }
    const stageTruncated = define_app_default.stage.substring(
      0,
      Math.max(8, L - nameLen - 1)
    );
    const nameTruncated = name.substring(0, L - stageTruncated.length - 1);
    return `${stageTruncated}-${nameTruncated}`;
  })();
  return `${prefixedName}${suffixStr}`;
}
function hashNumberToPrettyString(number, length) {
  const charLength = PRETTY_CHARS.length;
  let hash = "";
  while (number > 0) {
    hash = PRETTY_CHARS[number % charLength] + hash;
    number = Math.floor(number / charLength);
  }
  hash = hash.slice(0, length);
  while (hash.length < length) {
    hash = "s" + hash;
  }
  return hash;
}
function hashStringToPrettyString(str, length) {
  const hash = crypto.createHash("sha256");
  hash.update(str);
  const num = Number("0x" + hash.digest("hex").substring(0, 16));
  return hashNumberToPrettyString(num, length);
}
var PRETTY_CHARS;
var init_naming = __esm({
  ".sst/platform/src/components/naming.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    PRETTY_CHARS = "abcdefhkmnorstuvwxz";
  }
});

// .sst/platform/src/components/error.ts
var VisibleError;
var init_error = __esm({
  ".sst/platform/src/components/error.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    VisibleError = class extends Error {
      constructor(...message) {
        super(message.join("\n"));
      }
    };
  }
});

// .sst/platform/src/components/component.ts
import {
  ComponentResource,
  output as output2
} from "@pulumi/pulumi";
function transform(transform3, args) {
  if (typeof transform3 === "function") {
    const ret = transform3(args);
    return ret ?? args;
  }
  return { ...args, ...transform3 };
}
var Component;
var init_component = __esm({
  ".sst/platform/src/components/component.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_naming();
    init_error();
    Component = class extends ComponentResource {
      constructor(type, name, args, opts) {
        super(type, name, args, {
          transformations: [
            (args2) => {
              if (args2.type !== type && // @ts-expect-error
              !args2.name.startsWith(args2.opts.parent.__name)) {
                throw new Error(
                  `In "${name}" component, the name of "${args2.name}" (${args2.type}) is not prefixed with parent's name`
                );
              }
              if (args2.type.startsWith("sst:"))
                return void 0;
              if (args2.type === "pulumi-nodejs:dynamic:Resource")
                return void 0;
              if (args2.type === "random:index/randomId:RandomId")
                return void 0;
              let overrides;
              switch (args2.type) {
                case "aws:cloudwatch/eventRule:EventRule":
                case "aws:iam/user:User":
                case "aws:lambda/function:Function":
                  overrides = { name: prefixName(64, args2.name) };
                  break;
                case "aws:apigatewayv2/api:Api":
                case "aws:apigatewayv2/authorizer:Authorizer":
                  overrides = { name: prefixName(128, args2.name) };
                  break;
                case "aws:dynamodb/table:Table":
                  overrides = { name: prefixName(255, args2.name) };
                  break;
                case "aws:sns/topic:Topic":
                  overrides = {
                    name: output2(args2.props.fifoTopic).apply(
                      (fifo) => prefixName(256, args2.name, fifo ? ".fifo" : void 0)
                    )
                  };
                  break;
                case "cloudflare:index/r2Bucket:R2Bucket":
                case "cloudflare:index/workerScript:WorkerScript":
                  overrides = {
                    name: prefixName(64, args2.name).toLowerCase()
                  };
                  break;
                case "cloudflare:index/workersKvNamespace:WorkersKvNamespace":
                  overrides = {
                    title: prefixName(64, args2.name).toLowerCase()
                  };
                  break;
                case "aws:rds/cluster:Cluster":
                  overrides = {
                    clusterIdentifier: prefixName(63, args2.name).toLowerCase()
                  };
                  break;
                case "aws:rds/clusterInstance:ClusterInstance":
                  overrides = {
                    identifier: prefixName(63, args2.name).toLowerCase()
                  };
                  break;
                case "aws:sqs/queue:Queue":
                  overrides = {
                    name: output2(args2.props.fifoQueue).apply(
                      (fifo) => prefixName(80, args2.name, fifo ? ".fifo" : void 0)
                    )
                  };
                  break;
                case "aws:iam/role:Role":
                case "aws:s3/bucketV2:BucketV2":
                  break;
                case "aws:apigatewayv2/apiMapping:ApiMapping":
                case "aws:apigatewayv2/domainName:DomainName":
                case "aws:apigatewayv2/integration:Integration":
                case "aws:apigatewayv2/route:Route":
                case "aws:apigatewayv2/stage:Stage":
                case "aws:acm/certificate:Certificate":
                case "aws:acm/certificateValidation:CertificateValidation":
                case "aws:iam/accessKey:AccessKey":
                case "aws:iam/policy:Policy":
                case "aws:iam/rolePolicyAttachment:RolePolicyAttachment":
                case "aws:iam/userPolicy:UserPolicy":
                case "aws:cloudfront/cachePolicy:CachePolicy":
                case "aws:cloudfront/distribution:Distribution":
                case "aws:cloudfront/function:Function":
                case "aws:cloudfront/originAccessIdentity:OriginAccessIdentity":
                case "aws:cloudwatch/eventRule:EventRule":
                case "aws:cloudwatch/eventTarget:EventTarget":
                case "aws:cloudwatch/logGroup:LogGroup":
                case "aws:lambda/eventSourceMapping:EventSourceMapping":
                case "aws:lambda/functionUrl:FunctionUrl":
                case "aws:lambda/invocation:Invocation":
                case "aws:lambda/permission:Permission":
                case "aws:route53/record:Record":
                case "aws:s3/bucketCorsConfigurationV2:BucketCorsConfigurationV2":
                case "aws:s3/bucketNotification:BucketNotification":
                case "aws:s3/bucketObject:BucketObject":
                case "aws:s3/bucketObjectv2:BucketObjectv2":
                case "aws:s3/bucketPolicy:BucketPolicy":
                case "aws:s3/bucketPublicAccessBlock:BucketPublicAccessBlock":
                case "aws:s3/bucketWebsiteConfigurationV2:BucketWebsiteConfigurationV2":
                case "aws:sns/topicSubscription:TopicSubscription":
                case "cloudflare:index/workerDomain:WorkerDomain":
                  break;
                default:
                  throw new VisibleError(
                    `In "${name}" component, the physical name of "${args2.name}" (${args2.type}) is not prefixed`
                  );
              }
              return {
                props: { ...args2.props, ...overrides },
                opts: args2.opts
              };
            }
          ],
          ...opts
        });
      }
    };
  }
});

// .sst/platform/src/util/fs.ts
import fs from "fs/promises";
import path from "path";
async function findAbove(dir, target) {
  if (dir === "/")
    return void 0;
  if (await existsAsync(path.join(dir, target)))
    return dir;
  return findAbove(path.resolve(path.join(dir, "..")), target);
}
async function existsAsync(input) {
  return fs.access(input).then(() => true).catch(() => false);
}
var init_fs = __esm({
  ".sst/platform/src/util/fs.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
  }
});

// .sst/platform/src/runtime/node.ts
import path2 from "path";
import fs2 from "fs/promises";
import { exec } from "child_process";
import esbuild from "esbuild";
import fsSync from "fs";
async function build(name, input) {
  const out = path2.join(define_cli_default.paths.work, "artifacts", `${name}-src`);
  const sourcemapOut = path2.join(define_cli_default.paths.work, "artifacts", `${name}-map`);
  await fs2.rm(out, { recursive: true, force: true });
  await fs2.mkdir(out, { recursive: true });
  await fs2.mkdir(sourcemapOut, { recursive: true });
  const parsed = path2.parse(input.handler);
  const file = [".ts", ".tsx", ".mts", ".cts", ".js", ".jsx", ".mjs", ".cjs"].map((ext) => path2.join(parsed.dir, parsed.name + ext)).find((file2) => fsSync.existsSync(file2));
  if (!file)
    return {
      type: "error",
      errors: [`Could not find file for handler "${input.handler}"`]
    };
  const nodejs = input.nodejs || {};
  const isESM = (nodejs.format || "esm") === "esm";
  const relative = path2.relative(define_cli_default.paths.root, path2.resolve(parsed.dir));
  const extension = isESM ? ".mjs" : ".cjs";
  const target = path2.join(
    out,
    !relative.startsWith("..") && !path2.isAbsolute(input.handler) ? relative : "",
    // Lambda handler can only contain 1 dot separating the file name and function name
    parsed.name.replace(".", "-") + extension
  );
  const handler = path2.relative(out, target.replace(extension, parsed.ext)).split(path2.sep).join(path2.posix.sep);
  const forceExternal = ["sharp", "pg-native"];
  const { external, ...override } = nodejs.esbuild || {};
  const links = Object.fromEntries(
    input.links?.map((item) => [item.name, item.properties]) || []
  );
  const options = {
    entryPoints: [path2.resolve(file)],
    platform: "node",
    external: [
      ...forceExternal,
      ...nodejs.install || [],
      ...external || []
    ],
    loader: nodejs.loader,
    keepNames: true,
    bundle: true,
    logLevel: "silent",
    splitting: nodejs.splitting,
    metafile: true,
    outExtension: nodejs.splitting ? { ".js": ".mjs" } : void 0,
    ...isESM ? {
      format: "esm",
      target: "esnext",
      mainFields: ["module", "main"],
      banner: {
        js: [
          `import { createRequire as topLevelCreateRequire } from 'module';`,
          `const require = topLevelCreateRequire(import.meta.url);`,
          `import { fileURLToPath as topLevelFileUrlToPath, URL as topLevelURL } from "url"`,
          `const __dirname = topLevelFileUrlToPath(new topLevelURL(".", import.meta.url))`,
          `globalThis.$SST_LINKS = ${JSON.stringify(links)};`,
          nodejs.banner || ""
        ].join("\n")
      }
    } : {
      format: "cjs",
      target: "node14",
      banner: {
        js: [
          `globalThis.$SST_LINKS = ${JSON.stringify(links)};`,
          nodejs.banner || ""
        ].join("\n")
      }
    },
    outfile: !nodejs.splitting ? target : void 0,
    outdir: nodejs.splitting ? path2.dirname(target) : void 0,
    // always generate sourcemaps in local
    // never generate sourcemaps if explicitly false
    // otherwise generate sourcemaps
    sourcemap: nodejs.sourcemap === false ? false : true,
    minify: nodejs.minify,
    ...override
  };
  try {
    const result2 = await esbuild.build(options);
    const installPackages = [
      ...nodejs.install || [],
      ...forceExternal.filter((pkg) => !external?.includes(pkg)).filter(
        (pkg) => Object.values(result2.metafile?.inputs || {}).some(
          ({ imports }) => imports.some(({ path: path17 }) => path17 === pkg)
        )
      )
    ];
    const warnings = [];
    Object.entries(result2.metafile?.inputs || {}).forEach(
      ([inputPath, { imports }]) => imports.filter(({ path: path17 }) => path17.includes("sst/constructs")).forEach(({ path: path17 }) => {
        warnings.push(
          `You are importing from "${path17}" in "${inputPath}". Did you mean to import from "sst/node"?`
        );
      })
    );
    if (installPackages.length) {
      const src = await findAbove(parsed.dir, "package.json");
      if (!src) {
        return {
          type: "error",
          errors: [
            `Could not find package.json for handler "${input.handler}"`
          ]
        };
      }
      const json = JSON.parse(
        await fs2.readFile(path2.join(src, "package.json")).then((x) => x.toString())
      );
      await fs2.writeFile(
        path2.join(out, "package.json"),
        JSON.stringify({
          dependencies: Object.fromEntries(
            installPackages.map((x) => [x, json.dependencies?.[x] || "*"])
          )
        })
      );
      const cmd = ["npm install"];
      if (installPackages.includes("sharp")) {
        cmd.push(
          "--platform=linux",
          input.architecture === "arm64" ? "--arch=arm64" : "--arch=x64"
        );
      }
      await new Promise((resolve, reject) => {
        exec(cmd.join(" "), { cwd: out }, (error) => {
          if (error) {
            reject(error);
          }
          resolve();
        });
      });
    }
    const moveSourcemap = async () => {
      if (nodejs.sourcemap)
        return;
      const map = Object.keys(result2.metafile?.outputs || {}).find(
        (item) => item.endsWith(".map")
      );
      if (!map)
        return;
      const oldPath = path2.resolve(out, map);
      const newPath = path2.join(sourcemapOut, path2.basename(map));
      await fs2.rename(oldPath, newPath);
      return newPath;
    };
    return {
      type: "success",
      out,
      handler,
      sourcemap: await moveSourcemap()
    };
  } catch (ex) {
    const result2 = ex;
    if ("errors" in result2) {
      return {
        type: "error",
        errors: result2.errors.flatMap((x) => [x.text]).filter(Boolean)
      };
    }
    return {
      type: "error",
      errors: [ex.toString()]
    };
  }
}
var init_node = __esm({
  ".sst/platform/src/runtime/node.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_fs();
  }
});

// .sst/platform/src/util/lazy.ts
function lazy(callback) {
  let loaded = false;
  let result2;
  return () => {
    if (!loaded) {
      result2 = callback();
      loaded = true;
    }
    return result2;
  };
}
var init_lazy = __esm({
  ".sst/platform/src/util/lazy.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
  }
});

// .sst/platform/src/components/aws/helpers/client.ts
import { StandardRetryStrategy } from "@aws-sdk/middleware-retry";
var useClientCache, useClient;
var init_client = __esm({
  ".sst/platform/src/components/aws/helpers/client.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_lazy();
    useClientCache = lazy(() => /* @__PURE__ */ new Map());
    useClient = (client, opts) => {
      const cache = useClientCache();
      const existing = cache.get(client.name);
      if (existing)
        return existing;
      const printNoInternet = /* @__PURE__ */ (() => {
        let lastPrinted = 0;
        return () => {
          const now = Date.now();
          if (now - lastPrinted > 5e3) {
            console.log("Waiting for internet connection...");
            lastPrinted = now;
          }
        };
      })();
      const result2 = new client({
        region: opts?.region,
        retryStrategy: new StandardRetryStrategy(async () => 1e4, {
          retryDecider: (e) => {
            if (e.code === "ENOTFOUND") {
              printNoInternet();
              return true;
            }
            if ([
              "ThrottlingException",
              "Throttling",
              "TooManyRequestsException",
              "OperationAbortedException",
              "TimeoutError",
              "NetworkingError",
              ...opts?.retrableErrors ?? []
            ].includes(e.name)) {
              return true;
            }
            return false;
          },
          delayDecider: (_, attempts) => {
            return Math.min(1.5 ** attempts * 100, 5e3);
          },
          // AWS SDK v3 has an idea of "retry tokens" which are used to
          // prevent multiple retries from happening at the same time.
          // This is a workaround to disable that.
          retryQuota: {
            hasRetryTokens: () => true,
            releaseRetryTokens: () => {
            },
            retrieveRetryTokens: () => 1
          }
        })
      });
      cache.set(client.name, result2);
      return result2;
    };
  }
});

// .sst/platform/src/components/aws/providers/function-code-updater.ts
import { dynamic } from "@pulumi/pulumi";
import {
  LambdaClient,
  UpdateFunctionCodeCommand,
  GetFunctionCommand
} from "@aws-sdk/client-lambda";
var Provider, FunctionCodeUpdater;
var init_function_code_updater = __esm({
  ".sst/platform/src/components/aws/providers/function-code-updater.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_client();
    Provider = class {
      async create(inputs) {
        const version = await this.updateCode(inputs);
        await this.waitForUpdate(inputs);
        return {
          id: inputs.functionName,
          outs: { version }
        };
      }
      async update(id, olds, news) {
        const version = await this.updateCode(news);
        await this.waitForUpdate(news);
        return { outs: { version } };
      }
      async updateCode(inputs) {
        const client = useClient(LambdaClient, {
          region: inputs.region,
          retrableErrors: [
            // Lambda is not ready to accept updates right after creation
            "ServiceException"
          ]
        });
        const ret = await client.send(
          new UpdateFunctionCodeCommand({
            FunctionName: inputs.functionName,
            S3Bucket: inputs.s3Bucket,
            S3Key: inputs.s3Key
          })
        );
        return ret.Version ?? "unknown";
      }
      async waitForUpdate(inputs) {
        const client = useClient(LambdaClient, {
          region: inputs.region,
          retrableErrors: [
            // Lambda is not ready to accept updates right after creation
            "ServiceException"
          ]
        });
        const ret = await client.send(
          new GetFunctionCommand({
            FunctionName: inputs.functionName
          })
        );
        if (ret.Configuration?.LastUpdateStatus === "Successful")
          return;
        if (ret.Configuration?.LastUpdateStatus === "Failed") {
          throw new Error(
            `Failed to update function ${ret.Configuration.LastUpdateStatusReasonCode}: ${ret.Configuration.LastUpdateStatusReason}`
          );
        }
        await new Promise((resolve) => setTimeout(resolve, 300));
        return this.waitForUpdate(inputs);
      }
    };
    FunctionCodeUpdater = class extends dynamic.Resource {
      constructor(name, args, opts) {
        super(
          new Provider(),
          `${name}.sst.aws.FunctionCodeUpdater`,
          { ...args, version: void 0 },
          opts
        );
      }
    };
  }
});

// .sst/platform/src/components/aws/helpers/bootstrap.ts
import {
  SSMClient,
  GetParameterCommand,
  ParameterNotFound,
  PutParameterCommand
} from "@aws-sdk/client-ssm";
import {
  S3Client,
  CreateBucketCommand,
  PutBucketVersioningCommand
} from "@aws-sdk/client-s3";
var VERSION, bootstrapBuckets, bootstrap;
var init_bootstrap = __esm({
  ".sst/platform/src/components/aws/helpers/bootstrap.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_naming();
    VERSION = 1;
    bootstrapBuckets = {};
    bootstrap = {
      forRegion(region) {
        if (region in bootstrapBuckets) {
          return bootstrapBuckets[region];
        }
        const ssm = new SSMClient({
          // credentials: {
          //   accessKeyId: process.env.AWS_ACCESS_KEY_ID!,
          //   sessionToken: process.env.AWS_SESSION_TOKEN!,
          //   secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY!,
          // },
          region
        });
        const s34 = new S3Client({
          region
          // credentials: {
          //   accessKeyId: process.env.AWS_ACCESS_KEY_ID!,
          //   sessionToken: process.env.AWS_SESSION_TOKEN!,
          //   secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY!,
          // },
        });
        try {
          const bucket = (async () => {
            const result2 = await ssm.send(
              new GetParameterCommand({
                Name: `/sst/bootstrap`
              })
            ).catch((err) => {
              if (err instanceof ParameterNotFound)
                return;
              throw err;
            });
            if (result2?.Parameter?.Value) {
              try {
                const parsed = JSON.parse(result2.Parameter.Value);
                return parsed;
              } catch (ex) {
              }
            }
            const suffixLength = 12;
            const minNumber = Math.pow(PRETTY_CHARS.length, suffixLength);
            const numberSuffix = Math.floor(Math.random() * minNumber) + minNumber;
            const rand = hashNumberToPrettyString(numberSuffix, suffixLength);
            const asset2 = `sst-asset-${rand}`;
            const state = `sst-state-${rand}`;
            const data = {
              asset: asset2,
              state,
              version: VERSION
            };
            await s34.send(
              new CreateBucketCommand({
                Bucket: asset2
              })
            );
            await s34.send(
              new CreateBucketCommand({
                Bucket: state
              })
            );
            await s34.send(
              new PutBucketVersioningCommand({
                Bucket: asset2,
                VersioningConfiguration: {
                  Status: "Enabled"
                }
              })
            );
            await ssm.send(
              new PutParameterCommand({
                Name: `/sst/bootstrap`,
                Value: JSON.stringify(data),
                Type: "String"
              })
            );
            return asset2;
          })();
          return bootstrapBuckets[region] = bucket;
        } finally {
          s34.destroy();
          ssm.destroy();
        }
      }
    };
  }
});

// .sst/platform/src/components/duration.ts
function toSeconds(duration) {
  const [count, unit] = duration.split(" ");
  const countNum = parseInt(count);
  const unitLower = unit.toLowerCase();
  if (unitLower.startsWith("second")) {
    return countNum;
  } else if (unitLower.startsWith("minute")) {
    return countNum * 60;
  } else if (unitLower.startsWith("hour")) {
    return countNum * 3600;
  } else if (unitLower.startsWith("day")) {
    return countNum * 86400;
  }
  throw new Error(`Invalid duration ${duration}`);
}
var init_duration = __esm({
  ".sst/platform/src/components/duration.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
  }
});

// .sst/platform/src/components/size.ts
function toMBs(size) {
  const [count, unit] = size.split(" ");
  const countNum = parseInt(count);
  if (unit === "MB") {
    return countNum;
  } else if (unit === "GB") {
    return countNum * 1024;
  }
  throw new Error(`Invalid size ${size}`);
}
var init_size = __esm({
  ".sst/platform/src/components/size.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
  }
});

// .sst/platform/src/components/link.ts
import { runtime, output as output3, all as all2 } from "@pulumi/pulumi";
var Link;
var init_link = __esm({
  ".sst/platform/src/components/link.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_error();
    ((Link2) => {
      let links = {};
      function reset() {
        links = {};
        runtime.registerStackTransformation((args) => {
          const resource = args.resource;
          process.nextTick(() => {
            if (Link2.isLinkable(resource) && !args.opts.parent) {
              if (links[args.name]) {
                throw new Error(`Component name ${args.name} is not unique`);
              }
              const link = resource.getSSTLink();
              links[args.name] = output3(link.properties).apply((props) => ({
                type: args.type.replaceAll(":", "."),
                ...props
              }));
            }
          });
          return {
            opts: args.opts,
            props: args.props
          };
        });
      }
      Link2.reset = reset;
      function isLinkable(obj) {
        return "getSSTLink" in obj;
      }
      Link2.isLinkable = isLinkable;
      function build3(links2) {
        return links2.map((l) => {
          if (isLinkable(l)) {
            const link = l.getSSTLink();
            return all2([l.urn, link.properties]).apply(([urn, properties]) => ({
              name: urn.split("::").at(-1),
              properties: {
                ...properties,
                type: urn.split("::").at(-2)
              }
            }));
          }
          throw new VisibleError(`${l} is not a linkable component`);
        });
      }
      Link2.build = build3;
      function makeLinkable2(obj, cb) {
        obj.prototype.getSSTLink = cb;
      }
      Link2.makeLinkable = makeLinkable2;
      function list() {
        return links;
      }
      Link2.list = list;
      let AWS;
      ((AWS2) => {
        function isLinkable2(obj) {
          return "getSSTAWSPermissions" in obj;
        }
        AWS2.isLinkable = isLinkable2;
        function makeLinkable3(obj, cb) {
          obj.prototype.getSSTAWSPermissions = cb;
        }
        AWS2.makeLinkable = makeLinkable3;
      })(AWS = Link2.AWS || (Link2.AWS = {}));
      let Receiver;
      ((Receiver2) => {
        let receivers = {};
        function register(directory, links2, environment) {
          receivers[directory] = {
            links: links2,
            environment
          };
        }
        Receiver2.register = register;
        function list2() {
          return receivers;
        }
        Receiver2.list = list2;
      })(Receiver = Link2.Receiver || (Link2.Receiver = {}));
    })(Link || (Link = {}));
  }
});

// .sst/platform/src/components/warp.ts
var Warp;
var init_warp = __esm({
  ".sst/platform/src/components/warp.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    ((Warp2) => {
      let warps = {};
      function reset() {
        warps = {};
      }
      Warp2.reset = reset;
      function list() {
        return warps;
      }
      Warp2.list = list;
      function register(functionID, definition) {
        warps[functionID] = definition;
      }
      Warp2.register = register;
    })(Warp || (Warp = {}));
  }
});

// .sst/platform/src/components/aws/logging.ts
var RETENTION;
var init_logging = __esm({
  ".sst/platform/src/components/aws/logging.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    RETENTION = {
      "1 day": 1,
      "3 days": 3,
      "5 days": 5,
      "1 week": 7,
      "2 weeks": 14,
      "1 month": 30,
      "2 months": 60,
      "3 months": 90,
      "4 months": 120,
      "5 months": 150,
      "6 months": 180,
      "1 year": 365,
      "13 months": 400,
      "18 months": 545,
      "2 years": 731,
      "3 years": 1096,
      "5 years": 1827,
      "6 years": 2192,
      "7 years": 2557,
      "8 years": 2922,
      "9 years": 3288,
      "10 years": 3653,
      forever: 0
    };
  }
});

// .sst/platform/src/components/aws/function.ts
import fs3 from "fs";
import path3 from "path";
import crypto2 from "crypto";
import archiver from "archiver";
import {
  asset,
  output as output4,
  all as all3,
  interpolate as interpolate3
} from "@pulumi/pulumi";
import * as aws from "@pulumi/aws";
var Function;
var init_function = __esm({
  ".sst/platform/src/components/aws/function.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_node();
    init_function_code_updater();
    init_bootstrap();
    init_duration();
    init_size();
    init_component();
    init_link();
    init_error();
    init_warp();
    init_naming();
    init_logging();
    Function = class _Function extends Component {
      function;
      role;
      logGroup;
      fnUrl;
      missingSourcemap;
      constructor(name, args, opts) {
        super("sst:aws:Function", name, args, opts);
        const parent = this;
        const dev = output4(args.live).apply((v) => v !== false);
        const region = normalizeRegion();
        const injections = normalizeInjections();
        const runtime3 = normalizeRuntime();
        const timeout = normalizeTimeout();
        const memory = normalizeMemory();
        const architectures = normalizeArchitectures();
        const environment = normalizeEnvironment();
        const streaming = normalizeStreaming();
        const logging = normalizeLogging();
        const url = normalizeUrl();
        const copyFiles = normalizeCopyFiles();
        const linkData = buildLinkData();
        const linkPermissions = buildLinkPermissions();
        const { bundle, handler: handler0 } = buildHandler();
        const { handler, wrapper } = buildHandlerWrapper();
        const role = createRole();
        const zipPath = zipBundleFolder();
        const bundleHash = calculateHash();
        const file = createBucketObject();
        const logGroup = createLogGroup();
        const fn = createFunction();
        const codeUpdater = updateFunctionCode();
        const fnUrl = createUrl();
        const links = output4(linkData).apply(
          (input) => input.map((item) => item.name)
        );
        this.function = codeUpdater.version.apply(() => fn);
        this.role = role;
        this.logGroup = logGroup;
        this.fnUrl = fnUrl;
        Warp.register(
          name,
          all3([
            dev,
            name,
            links,
            args.handler,
            args.bundle,
            args.runtime,
            args.nodejs
          ]).apply(([dev2, name2, links2, handler2, bundle2, runtime4, nodejs]) => {
            if (!dev2)
              return void 0;
            return {
              functionID: name2,
              links: links2,
              handler: handler2,
              bundle: bundle2,
              runtime: runtime4 || "nodejs20.x",
              properties: nodejs
            };
          })
        );
        all3([args.bundle, args.handler]).apply(([bundle2, handler2]) => {
          Link.Receiver.register(bundle2 || handler2, links, environment);
        });
        this.registerOutputs({
          _metadata: {
            handler: args.handler,
            internal: args._skipMetadata
          }
        });
        function normalizeRegion() {
          return aws.getRegionOutput(void 0, { provider: opts?.provider }).name;
        }
        function normalizeInjections() {
          return output4(args.injections).apply((injections2) => injections2 ?? []);
        }
        function normalizeRuntime() {
          return all3([args.runtime, dev]).apply(
            ([v, dev2]) => dev2 ? "provided.al2023" : v ?? "nodejs20.x"
          );
        }
        function normalizeTimeout() {
          return output4(args.timeout).apply((timeout2) => timeout2 ?? "20 seconds");
        }
        function normalizeMemory() {
          return output4(args.memory).apply((memory2) => memory2 ?? "1024 MB");
        }
        function normalizeArchitectures() {
          return output4(args.architecture).apply(
            (arc) => arc === "arm64" ? ["arm64"] : ["x86_64"]
          );
        }
        function normalizeEnvironment() {
          return all3([args.environment, dev]).apply(([environment2, dev2]) => {
            const result2 = environment2 ?? {};
            if (dev2) {
              result2.SST_FUNCTION_ID = name;
              result2.SST_APP = define_app_default.name;
              result2.SST_STAGE = define_app_default.stage;
            }
            return result2;
          });
        }
        function normalizeStreaming() {
          return output4(args.streaming).apply((streaming2) => streaming2 ?? false);
        }
        function normalizeLogging() {
          return output4(args.logging).apply((logging2) => ({
            ...logging2,
            retention: logging2?.retention ?? "forever"
          }));
        }
        function normalizeUrl() {
          return output4(args.url).apply((url2) => {
            if (url2 === false || url2 === void 0)
              return;
            if (url2 === true) {
              url2 = {};
            }
            const defaultAuthorization = "none";
            const authorization = url2.authorization ?? defaultAuthorization;
            const defaultCors = {
              allowHeaders: ["*"],
              allowMethods: ["*"],
              allowOrigins: ["*"]
            };
            const cors = url2.cors === false ? {} : url2.cors === true || url2.cors === void 0 ? defaultCors : {
              ...defaultCors,
              ...url2.cors,
              maxAge: url2.cors.maxAge && toSeconds(url2.cors.maxAge)
            };
            return { authorization, cors };
          });
        }
        function normalizeCopyFiles() {
          return output4(args.copyFiles ?? []).apply(
            (copyFiles2) => Promise.all(
              copyFiles2.map(async (entry) => {
                const from = path3.join(define_cli_default.paths.root, entry.from);
                const to = entry.to || entry.from;
                if (path3.isAbsolute(to))
                  throw new VisibleError(
                    `Copy destination path "${to}" must be relative`
                  );
                const stats = await fs3.promises.stat(from);
                const isDir = stats.isDirectory();
                return { from, to, isDir };
              })
            )
          );
        }
        function calculateHash() {
          return zipPath.apply(async (zipPath2) => {
            const hash = crypto2.createHash("sha256");
            hash.update(await fs3.promises.readFile(zipPath2));
            return hash.digest("hex");
          });
        }
        function buildLinkData() {
          if (!args.link)
            return output4([]);
          return output4(args.link).apply((links2) => {
            const linkData2 = Link.build(links2);
            return linkData2;
          });
        }
        function buildLinkPermissions() {
          return output4(args.link ?? []).apply(
            (links2) => links2.flatMap((l) => {
              if (!Link.AWS.isLinkable(l))
                return [];
              return l.getSSTAWSPermissions();
            })
          );
        }
        function buildHandler() {
          return dev.apply((dev2) => {
            if (args._ignoreCodeChanges) {
              return {
                bundle: path3.join(
                  define_cli_default.paths.platform,
                  "functions",
                  "empty-function"
                ),
                handler: "index.handler"
              };
            }
            if (dev2) {
              return {
                handler: "bootstrap",
                bundle: path3.join(define_cli_default.paths.platform, "dist", "bridge")
              };
            }
            if (args.bundle) {
              return {
                bundle: output4(args.bundle),
                handler: output4(args.handler)
              };
            }
            const buildResult = all3([args, linkData]).apply(
              async ([args2, linkData2]) => {
                const result2 = await build(name, {
                  ...args2,
                  links: linkData2
                });
                if (result2.type === "error") {
                  throw new Error(
                    "Failed to build function: " + result2.errors.join("\n").trim()
                  );
                }
                return result2;
              }
            );
            return {
              handler: buildResult.handler,
              bundle: buildResult.out
            };
          });
        }
        function buildHandlerWrapper() {
          const ret = all3([
            dev,
            bundle,
            handler0,
            linkData,
            streaming,
            injections
          ]).apply(
            async ([dev2, bundle2, handler2, linkData2, streaming2, injections2]) => {
              if (dev2)
                return { handler: handler2 };
              const hasUserInjections = injections2.length > 0;
              const hasLinkInjections = args.bundle && linkData2.length > 0;
              if (!hasUserInjections && !hasLinkInjections)
                return { handler: handler2 };
              const linkInjection = hasLinkInjections ? linkData2.map((item) => [
                `process.env.SST_RESOURCE_${item.name} = ${JSON.stringify(
                  JSON.stringify(item.properties)
                )};
`
              ]).join("") : "";
              const parsed = path3.posix.parse(handler2);
              const handlerDir = parsed.dir;
              const oldHandlerFileName = parsed.name;
              const oldHandlerFunction = parsed.ext.replace(/^\./, "");
              const newHandlerFileName = "server-index";
              const newHandlerFunction = "handler";
              const newHandlerFileExt = [".js", ".mjs", ".cjs"].find(
                (ext) => fs3.existsSync(
                  path3.join(bundle2, handlerDir, oldHandlerFileName + ext)
                )
              );
              if (!newHandlerFileExt)
                throw new VisibleError(
                  `Could not find handler file "${handler2}" for function "${name}"`
                );
              return {
                handler: path3.posix.join(
                  handlerDir,
                  `${newHandlerFileName}.${newHandlerFunction}`
                ),
                wrapper: {
                  dir: handlerDir,
                  name: `${newHandlerFileName}.mjs`,
                  content: streaming2 ? [
                    linkInjection,
                    `export const ${newHandlerFunction} = awslambda.streamifyResponse(async (event, context) => {`,
                    ...injections2,
                    `  const { ${oldHandlerFunction}: rawHandler} = await import("./${oldHandlerFileName}${newHandlerFileExt}");`,
                    `  return rawHandler(event, context);`,
                    `});`
                  ].join("\n") : [
                    linkInjection,
                    `export const ${newHandlerFunction} = async (event, context) => {`,
                    ...injections2,
                    `  const { ${oldHandlerFunction}: rawHandler} = await import("./${oldHandlerFileName}${newHandlerFileExt}");`,
                    `  return rawHandler(event, context);`,
                    `};`
                  ].join("\n")
                }
              };
            }
          );
          return {
            handler: ret.handler,
            wrapper: ret.wrapper
          };
        }
        function createRole() {
          if (args.role)
            return;
          const policy = all3([args.permissions || [], linkPermissions, dev]).apply(
            ([argsPermissions, linkPermissions2, dev2]) => aws.iam.getPolicyDocumentOutput({
              statements: [
                ...argsPermissions,
                ...linkPermissions2,
                ...dev2 ? [
                  {
                    actions: ["iot:*"],
                    resources: ["*"]
                  }
                ] : []
              ]
            })
          );
          return new aws.iam.Role(
            `${name}Role`,
            transform(args.transform?.role, {
              name: region.apply(
                (region2) => prefixName(
                  64,
                  `${name}Role`,
                  `-${region2.toLowerCase().replace(/-/g, "")}`
                )
              ),
              assumeRolePolicy: aws.iam.assumeRolePolicyForPrincipal({
                Service: "lambda.amazonaws.com"
              }),
              // if there are no statements, do not add an inline policy.
              // adding an inline policy with no statements will cause an error.
              inlinePolicies: policy.apply(
                ({ statements }) => statements ? [
                  {
                    name: "inline",
                    policy: policy.json
                  }
                ] : []
              ),
              managedPolicyArns: [
                "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
                ...args.vpc ? [
                  "arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
                ] : []
              ]
            }),
            { parent }
          );
        }
        function zipBundleFolder() {
          return all3([bundle, wrapper, copyFiles]).apply(
            async ([bundle2, wrapper2, copyFiles2]) => {
              const zipPath2 = path3.resolve(
                define_cli_default.paths.work,
                "artifacts",
                name,
                "code.zip"
              );
              await fs3.promises.mkdir(path3.dirname(zipPath2), {
                recursive: true
              });
              await new Promise(async (resolve, reject) => {
                const ws = fs3.createWriteStream(zipPath2);
                const archive = archiver("zip", {
                  // Ensure deterministic zip file hashes
                  // https://github.com/archiverjs/node-archiver/issues/397#issuecomment-554327338
                  statConcurrency: 1
                });
                archive.on("warning", reject);
                archive.on("error", reject);
                ws.once("close", () => {
                  resolve(zipPath2);
                });
                archive.pipe(ws);
                archive.glob(
                  "**",
                  { cwd: bundle2, dot: true },
                  { date: /* @__PURE__ */ new Date(0), mode: 511 }
                );
                if (wrapper2) {
                  archive.append(wrapper2.content, {
                    name: wrapper2.name,
                    date: /* @__PURE__ */ new Date(0)
                  });
                }
                copyFiles2.forEach(async (entry) => {
                  entry.isDir ? archive.directory(entry.from, entry.to, { date: /* @__PURE__ */ new Date(0) }) : archive.file(entry.from, {
                    name: entry.to,
                    date: /* @__PURE__ */ new Date(0)
                  });
                });
                await archive.finalize();
              });
              return zipPath2;
            }
          );
        }
        function createBucketObject() {
          return new aws.s3.BucketObjectv2(
            `${name}Code`,
            {
              key: interpolate3`assets/${name}-code-${bundleHash}.zip`,
              bucket: region.apply(
                (region2) => bootstrap.forRegion(region2).then((d) => d.asset)
              ),
              source: zipPath.apply((zipPath2) => new asset.FileArchive(zipPath2))
            },
            {
              parent,
              ignoreChanges: args._ignoreCodeChanges ? ["key", "source"] : void 0,
              retainOnDelete: true
            }
          );
        }
        function createLogGroup() {
          return new aws.cloudwatch.LogGroup(
            `${name}LogGroup`,
            transform(args.transform?.logGroup, {
              name: `/aws/lambda/${prefixName(64, `${name}Function`)}`,
              retentionInDays: logging.apply(
                (logging2) => RETENTION[logging2.retention]
              )
            }),
            { parent }
          );
        }
        function createFunction() {
          return new aws.lambda.Function(
            `${name}Function`,
            transform(args.transform?.function, {
              description: all3([args.description, dev]).apply(
                ([description, dev2]) => dev2 ? description ? `${description.substring(0, 240)} (live)` : "live" : `${description ?? ""}`
              ),
              code: new asset.FileArchive(
                path3.join(define_cli_default.paths.platform, "functions", "empty-function")
              ),
              handler,
              role: args.role ?? role.arn,
              runtime: runtime3,
              timeout: timeout.apply((timeout2) => toSeconds(timeout2)),
              memorySize: memory.apply((memory2) => toMBs(memory2)),
              environment: {
                variables: environment
              },
              architectures,
              loggingConfig: {
                logFormat: "Text",
                logGroup: logGroup.name
              },
              vpcConfig: args.vpc && {
                securityGroupIds: output4(args.vpc).securityGroups,
                subnetIds: output4(args.vpc).subnets
              },
              layers: args.layers
            }),
            {
              parent,
              ignoreChanges: args._ignoreCodeChanges ? ["code", "handler"] : void 0
            }
          );
        }
        function createUrl() {
          return url.apply((url2) => {
            if (url2 === void 0)
              return;
            return new aws.lambda.FunctionUrl(
              `${name}Url`,
              {
                functionName: fn.name,
                authorizationType: url2.authorization.toUpperCase(),
                invokeMode: streaming.apply(
                  (streaming2) => streaming2 ? "RESPONSE_STREAM" : "BUFFERED"
                ),
                cors: url2.cors
              },
              { parent }
            );
          });
        }
        function updateFunctionCode() {
          return new FunctionCodeUpdater(
            `${name}CodeUpdater`,
            {
              functionName: fn.name,
              s3Bucket: file.bucket,
              s3Key: file.key,
              functionLastModified: fn.lastModified,
              region
            },
            { parent }
          );
        }
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The IAM Role the function will use.
           */
          role: this.role,
          /**
           * The AWS Lambda function.
           */
          function: this.function,
          /**
           * The CloudWatch Log Group the function logs are stored.
           */
          logGroup: this.logGroup
        };
      }
      /**
       * The Lambda function URL if `url` is enabled.
       */
      get url() {
        return this.fnUrl.apply((url) => {
          if (!url)
            throw new Error("Function URL is not enabled");
          return url.functionUrl;
        });
      }
      /**
       * The name of the Lambda function.
       */
      get name() {
        return this.function.name;
      }
      /**
       * The ARN of the Lambda function.
       */
      get arn() {
        return this.function.arn;
      }
      /** @internal */
      static fromDefinition(parent, name, definition, override) {
        return output4(definition).apply((definition2) => {
          if (typeof definition2 === "string") {
            return new _Function(
              name,
              { handler: definition2, ...override },
              { parent }
            );
          } else if (definition2.handler) {
            return new _Function(
              name,
              {
                ...definition2,
                ...override,
                permissions: all3([
                  definition2.permissions,
                  override?.permissions
                ]).apply(([permissions, overridePermissions]) => [
                  ...permissions ?? [],
                  ...overridePermissions ?? []
                ])
              },
              { parent }
            );
          }
          throw new Error(`Invalid function definition for the "${name}" Function`);
        });
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            name: this.name
          }
        };
      }
      /** @internal */
      getSSTAWSPermissions() {
        return [
          {
            actions: ["lambda:InvokeFunction"],
            resources: [this.function.arn]
          }
        ];
      }
    };
  }
});

// .sst/platform/src/components/aws/providers/hosted-zone-lookup.ts
import { dynamic as dynamic2 } from "@pulumi/pulumi";
import {
  Route53Client,
  ListHostedZonesCommand
} from "@aws-sdk/client-route-53";
var Provider2, HostedZoneLookup;
var init_hosted_zone_lookup = __esm({
  ".sst/platform/src/components/aws/providers/hosted-zone-lookup.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_client();
    Provider2 = class {
      async create(inputs) {
        const zoneId = await this.lookup(inputs.domain);
        return { id: zoneId, outs: { zoneId } };
      }
      async update(id, olds, news) {
        const zoneId = await this.lookup(news.domain);
        return { outs: { zoneId } };
      }
      async lookup(domain) {
        const client = useClient(Route53Client);
        const zones = [];
        let nextMarker;
        do {
          const res = await client.send(
            new ListHostedZonesCommand({ Marker: nextMarker })
          );
          zones.push(...res.HostedZones || []);
          nextMarker = res.NextMarker;
        } while (nextMarker);
        const parts = domain.split(".");
        for (let i = 0; i <= parts.length - 2; i++) {
          const zone = zones.find((z) => z.Name === parts.slice(i).join(".") + ".");
          if (zone?.Id) {
            return zone.Id.replace("/hostedzone/", "");
          }
        }
        throw new Error(`Could not find hosted zone for domain ${domain}`);
      }
    };
    HostedZoneLookup = class extends dynamic2.Resource {
      constructor(name, args, opts) {
        super(
          new Provider2(),
          `${name}.sst.aws.HostedZoneLookup`,
          { ...args, zoneId: void 0 },
          opts
        );
      }
    };
  }
});

// .sst/platform/src/components/aws/dns-validated-certificate.ts
import { output as output5 } from "@pulumi/pulumi";
import * as aws2 from "@pulumi/aws";
var DnsValidatedCertificate;
var init_dns_validated_certificate = __esm({
  ".sst/platform/src/components/aws/dns-validated-certificate.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    init_naming();
    DnsValidatedCertificate = class extends Component {
      certificateValidation;
      constructor(name, args, opts) {
        super("sst:aws:Certificate", name, args, opts);
        const parent = this;
        const { domainName, alternativeNames, zoneId } = args;
        const certificate = output5(zoneId).apply((zoneId2) => {
          return new aws2.acm.Certificate(
            `${name}Certificate`,
            {
              domainName,
              validationMethod: "DNS",
              subjectAlternativeNames: alternativeNames ?? []
            },
            { parent }
          );
        });
        const records = certificate.domainValidationOptions.apply(
          (options) => options.map((option) => {
            return new aws2.route53.Record(
              `${name}Record${sanitizeToPascalCase(option.resourceRecordName)}`,
              {
                name: option.resourceRecordName,
                zoneId,
                type: option.resourceRecordType,
                records: [option.resourceRecordValue],
                ttl: 60
              },
              { parent }
            );
          })
        );
        const certificateValidation = new aws2.acm.CertificateValidation(
          `${name}Validation`,
          {
            certificateArn: certificate.arn,
            validationRecordFqdns: records.apply(
              (records2) => records2.map((record) => record.fqdn)
            )
          },
          { parent }
        );
        this.certificateValidation = certificateValidation;
      }
      get arn() {
        return this.certificateValidation.certificateArn;
      }
    };
  }
});

// .sst/platform/src/components/hint.ts
import { all as all4 } from "@pulumi/pulumi";
var Hint;
var init_hint = __esm({
  ".sst/platform/src/components/hint.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    ((Hint7) => {
      let hints = {};
      function reset() {
        hints = {};
      }
      Hint7.reset = reset;
      function register(name, hint) {
        all4([name]).apply(([name2]) => {
          hints[name2] = hint;
        });
      }
      Hint7.register = register;
      function list() {
        return hints;
      }
      Hint7.list = list;
    })(Hint || (Hint = {}));
  }
});

// .sst/platform/src/components/aws/apigatewayv2.ts
import {
  all as all5,
  interpolate as interpolate4,
  output as output6
} from "@pulumi/pulumi";
import * as aws3 from "@pulumi/aws";
var ApiGatewayV2;
var init_apigatewayv2 = __esm({
  ".sst/platform/src/components/aws/apigatewayv2.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    init_function();
    init_naming();
    init_error();
    init_hosted_zone_lookup();
    init_dns_validated_certificate();
    init_hint();
    init_logging();
    ApiGatewayV2 = class extends Component {
      constructorName;
      api;
      apigDomain;
      apiMapping;
      authorizers = {};
      logGroup;
      constructor(name, args = {}, opts = {}) {
        super("sst:aws:ApiGatewayV2", name, args, opts);
        const parent = this;
        const accessLog = normalizeAccessLog();
        const domain = normalizeDomain();
        const api = createApi();
        const logGroup = createLogGroup();
        createStage();
        const zoneId = lookupHostedZoneId();
        const certificate = createSsl();
        const apigDomain = createDomainName();
        createRoute53Records();
        const apiMapping = createDomainMapping();
        this.constructorName = name;
        this.api = api;
        this.apigDomain = apigDomain;
        this.apiMapping = apiMapping;
        this.logGroup = logGroup;
        Hint.register(this.urn, this.url);
        function normalizeAccessLog() {
          return output6(args.accessLog).apply((accessLog2) => ({
            ...accessLog2,
            retention: accessLog2?.retention ?? "forever"
          }));
        }
        function normalizeDomain() {
          if (!args.domain)
            return;
          return output6(args.domain).apply((domain2) => {
            if (typeof domain2 === "string") {
              return { domainName: domain2 };
            }
            if (!domain2.domainName) {
              throw new Error(`Missing "domainName" for domain.`);
            }
            if (domain2.hostedZone && domain2.hostedZoneId) {
              throw new Error(`Do not set both "hostedZone" and "hostedZoneId".`);
            }
            return domain2;
          });
        }
        function createApi() {
          return new aws3.apigatewayv2.Api(
            `${name}Api`,
            transform(args.transform?.api, {
              protocolType: "HTTP",
              corsConfiguration: {
                allowCredentials: false,
                allowHeaders: ["*"],
                allowMethods: ["*"],
                allowOrigins: ["*"]
              }
            }),
            { parent }
          );
        }
        function createLogGroup() {
          return new aws3.cloudwatch.LogGroup(
            `${name}AccessLog`,
            transform(args.transform?.accessLog, {
              name: `/aws/vendedlogs/apis/${prefixName(64, name)}`,
              retentionInDays: accessLog.apply(
                (accessLog2) => RETENTION[accessLog2.retention]
              )
            }),
            { parent }
          );
        }
        function createStage() {
          new aws3.apigatewayv2.Stage(
            `${name}Stage`,
            transform(args.transform?.stage, {
              apiId: api.id,
              autoDeploy: true,
              name: "$default",
              accessLogSettings: {
                destinationArn: logGroup.arn,
                format: JSON.stringify({
                  // request info
                  requestTime: `"$context.requestTime"`,
                  requestId: `"$context.requestId"`,
                  httpMethod: `"$context.httpMethod"`,
                  path: `"$context.path"`,
                  routeKey: `"$context.routeKey"`,
                  status: `$context.status`,
                  // integer value, do not wrap in quotes
                  responseLatency: `$context.responseLatency`,
                  // integer value, do not wrap in quotes
                  // integration info
                  integrationRequestId: `"$context.integration.requestId"`,
                  integrationStatus: `"$context.integration.status"`,
                  integrationLatency: `"$context.integration.latency"`,
                  integrationServiceStatus: `"$context.integration.integrationStatus"`,
                  // caller info
                  ip: `"$context.identity.sourceIp"`,
                  userAgent: `"$context.identity.userAgent"`
                  //cognitoIdentityId:`"$context.identity.cognitoIdentityId"`, // not supported in us-west-2 region
                })
              }
            }),
            { parent }
          );
        }
        function lookupHostedZoneId() {
          if (!domain)
            return;
          return domain.apply((domain2) => {
            if (domain2.hostedZoneId)
              return output6(domain2.hostedZoneId);
            return new HostedZoneLookup(
              `${name}HostedZoneLookup`,
              {
                domain: domain2.hostedZone ?? domain2.domainName
              },
              { parent }
            ).zoneId;
          });
        }
        function createSsl() {
          if (!domain || !zoneId)
            return;
          return new DnsValidatedCertificate(
            `${name}Ssl`,
            {
              domainName: domain.domainName,
              zoneId
            },
            { parent }
          );
        }
        function createDomainName() {
          if (!domain || !certificate)
            return;
          return new aws3.apigatewayv2.DomainName(
            `${name}DomainName`,
            transform(args.transform?.domainName, {
              domainName: domain?.domainName,
              domainNameConfiguration: {
                certificateArn: certificate.arn,
                endpointType: "REGIONAL",
                securityPolicy: "TLS_1_2"
              }
            }),
            { parent }
          );
        }
        function createRoute53Records() {
          if (!domain || !zoneId || !apigDomain) {
            return;
          }
          domain.domainName.apply((domainName) => {
            for (const type of ["A", "AAAA"]) {
              new aws3.route53.Record(
                `${name}${type}Record${sanitizeToPascalCase(domainName)}`,
                {
                  name: domain.domainName,
                  zoneId,
                  type,
                  aliases: [
                    {
                      name: apigDomain.domainNameConfiguration.targetDomainName,
                      zoneId: apigDomain.domainNameConfiguration.hostedZoneId,
                      evaluateTargetHealth: true
                    }
                  ]
                },
                { parent }
              );
            }
          });
        }
        function createDomainMapping() {
          if (!domain || !apigDomain)
            return;
          return domain.path?.apply(
            (path17) => new aws3.apigatewayv2.ApiMapping(
              `${name}DomainMapping`,
              {
                apiId: api.id,
                domainName: apigDomain.id,
                stage: "$default",
                apiMappingKey: path17
              },
              { parent }
            )
          );
        }
      }
      /**
       * The URL of the API.
       *
       * If the `domain` is set, this is the URL with the custom domain.
       * Otherwise, it's the autogenerated API Gateway URL.
       */
      get url() {
        return this.apigDomain && this.apiMapping ? all5([this.apigDomain.domainName, this.apiMapping.apiMappingKey]).apply(
          ([domain, key]) => key ? `https://${domain}/${key}/` : `https://${domain}`
        ) : this.api.apiEndpoint;
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The Amazon API Gateway HTTP API
           */
          api: this.api
        };
      }
      /**
       * Add a route to the API Gateway HTTP API. The route is a combination of
       * - An HTTP method and a path, `{METHOD} /{path}`.
       * - Or a `$default` route.
       *
       * :::tip
       * The `$default` route is a default or catch-all route. It'll match if no other route matches.
       * :::
       *
       * A method could be one of `GET`, `POST`, `PUT`, `DELETE`, `PATCH`, `HEAD`, `OPTIONS`, or `ANY`. Here `ANY` matches any HTTP method.
       *
       * The path can be a combination of
       * - Literal segments, `/notes`, `/notes/new`, etc.
       * - Parameter segments, `/notes/{noteId}`, `/notes/{noteId}/attachments/{attachmentId}`, etc.
       * - Greedy segments, `/{proxy+}`, `/notes/{proxy+}`,  etc. The `{proxy+}` segment is a greedy segment that matches all child paths. It needs to be at the end of the path.
       *
       * :::tip
       * The `{proxy+}` is a greedy segment, it matches all its child paths.
       * :::
       *
       * The `$default` is a reserved keyword for the default route. It'll be matched if no other route matches.
       *
       * :::note
       * You cannot have duplicate routes.
       * :::
       *
       * When a request comes in, the API Gateway will look for the most specific match. If no route matches, the `$default` route will be invoked.
       *
       * @param route The path for the route.
       * @param handler The function that'll be invoked.
       * @param args Configure the route.
       *
       * @example
       * Here's how you add a simple route.
       *
       * ```js
       * api.route("GET /", "src/get.handler");
       * ```
       *
       * Add multiple routes.
       *
       * ```js
       * api
       *   .route("GET /", "src/get.handler")
       *   .route("POST /", "src/post.handler");
       * ```
       *
       * Match any HTTP method.
       *
       * ```js
       * api.route("ANY /", "src/route.handler");
       * ```
       *
       * Add a default route.
       *
       * ```js
       * api
       *   .route("GET /", "src/get.handler")
       *   .route($default, "src/default.handler");
       * ```
       *
       * Add a parameterized route.
       *
       * ```js
       * api.route("GET /notes/{id}", "src/get.handler");
       * ```
       *
       * Add a greedy route.
       *
       * ```js
       * api.route("GET /notes/{proxy+}", "src/greedy.handler");
       * ```
       *
       * Enable auth for a route.
       *
       * ```js
       * api
       *   .route("GET /", "src/get.handler")
       *   .route("POST /", "src/post.handler", {
       *     auth: {
       *       iam: true
       *     }
       *   });
       * ```
       *
       * Customize the route handler.
       *
       * ```js
       * api.route("GET /", {
       *   handler: "src/get.handler",
       *   memory: "2048 MB"
       * });
       * ```
       */
      route(route, handler, args = {}) {
        const parent = this;
        const parentName = this.constructorName;
        const routeKey = parseRoute();
        const id = sanitizeToPascalCase(hashStringToPrettyString(routeKey, 4));
        const fn = Function.fromDefinition(
          parent,
          `${parentName}Handler${id}`,
          handler,
          {
            description: `${parentName} route ${routeKey}`
          }
        );
        const permission = new aws3.lambda.Permission(
          `${parentName}Handler${id}Permissions`,
          {
            action: "lambda:InvokeFunction",
            function: fn.arn,
            principal: "apigateway.amazonaws.com",
            sourceArn: interpolate4`${this.nodes.api.executionArn}/*`
          },
          { parent }
        );
        const integration = new aws3.apigatewayv2.Integration(
          `${parentName}Integration${id}`,
          transform(args.transform?.integration, {
            apiId: this.api.id,
            integrationType: "AWS_PROXY",
            integrationUri: fn.arn,
            payloadFormatVersion: "2.0"
          }),
          { parent, dependsOn: [permission] }
        );
        const authArgs = createAuthorizer();
        authArgs.apply(
          (authArgs2) => new aws3.apigatewayv2.Route(
            `${parentName}Route${id}`,
            transform(args.transform?.route, {
              apiId: this.api.id,
              routeKey,
              target: interpolate4`integrations/${integration.id}`,
              ...authArgs2
            }),
            { parent }
          )
        );
        return this;
        function parseRoute() {
          if (route.toLowerCase() === "$default")
            return "$default";
          const parts = route.split(" ");
          if (parts.length !== 2) {
            throw new VisibleError(
              `Invalid route ${route}. A route must be in the format "METHOD /path".`
            );
          }
          const [methodRaw, path17] = route.split(" ");
          const method = methodRaw.toUpperCase();
          if (![
            "ANY",
            "DELETE",
            "GET",
            "HEAD",
            "OPTIONS",
            "PATCH",
            "POST",
            "PUT"
          ].includes(method))
            throw new VisibleError(`Invalid method ${methodRaw} in route ${route}`);
          if (!path17.startsWith("/"))
            throw new VisibleError(
              `Invalid path ${path17} in route ${route}. Path must start with "/".`
            );
          return `${method} ${path17}`;
        }
        function createAuthorizer() {
          return output6(args.auth).apply((auth) => {
            if (auth?.iam)
              return { authorizationType: "AWS_IAM" };
            if (auth?.jwt) {
              const id2 = sanitizeToPascalCase(
                hashStringToPrettyString(
                  [
                    auth.jwt.issuer,
                    ...auth.jwt.audiences.sort(),
                    auth.jwt.identitySource ?? ""
                  ].join(""),
                  4
                )
              );
              const authorizer = parent.authorizers[id2] ?? new aws3.apigatewayv2.Authorizer(
                `${parentName}Authorizer${id2}`,
                transform(args.transform?.authorizer, {
                  apiId: parent.api.id,
                  authorizerType: "JWT",
                  identitySources: [
                    auth.jwt.identitySource ?? "$request.header.Authorization"
                  ],
                  jwtConfiguration: {
                    audiences: auth.jwt.audiences,
                    issuer: auth.jwt.issuer
                  }
                }),
                { parent }
              );
              parent.authorizers[id2] = authorizer;
              return {
                authorizationType: "JWT",
                authorizationScopes: auth.jwt.scopes,
                authorizerId: authorizer.id
              };
            }
            return {
              authorizationType: "NONE"
            };
          });
        }
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            url: this.url
          }
        };
      }
    };
  }
});

// .sst/platform/src/components/aws/auth.ts
import {
  output as output7,
  secret
} from "@pulumi/pulumi";
import { PrivateKey } from "@pulumi/tls";
var Auth;
var init_auth = __esm({
  ".sst/platform/src/components/aws/auth.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    init_function();
    Auth = class extends Component {
      _key;
      _authenticator;
      constructor(name, args, opts) {
        super("sst:aws:Auth", name, args, opts);
        this._key = new PrivateKey(`${name}Keypair`, {
          algorithm: "RSA"
        });
        this._authenticator = output7(args.authenticator).apply((args2) => {
          return new Function(`${name}Authenticator`, {
            ...args2,
            url: true,
            environment: {
              ...args2.environment,
              AUTH_PRIVATE_KEY: secret(this.key.privateKeyPemPkcs8),
              AUTH_PUBLIC_KEY: secret(this.key.publicKeyPem)
            }
          });
        });
      }
      get key() {
        return this._key;
      }
      get authenticator() {
        return this._authenticator;
      }
      get url() {
        return this._authenticator.url;
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            publicKey: secret(this.key.publicKeyPem)
          }
        };
      }
      /** @internal */
      getSSTAWSPermissions() {
        return [];
      }
    };
  }
});

// .sst/platform/src/components/aws/bucket.ts
import {
  output as output8,
  interpolate as interpolate5,
  all as all6
} from "@pulumi/pulumi";
import * as aws4 from "@pulumi/aws";
import { RandomId } from "@pulumi/random";
var Bucket;
var init_bucket = __esm({
  ".sst/platform/src/components/aws/bucket.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_naming();
    init_component();
    init_function();
    init_duration();
    Bucket = class extends Component {
      constructorName;
      bucket;
      constructor(name, args, opts) {
        super("sst:aws:Bucket", name, args, opts);
        const parent = this;
        const publicAccess = normalizePublicAccess();
        const bucket = createBucket2();
        const publicAccessBlock = createPublicAccess();
        const policy = createBucketPolicy();
        createCorsRule();
        this.constructorName = name;
        this.bucket = policy.apply(() => bucket);
        function createBucket2() {
          const input = transform(args?.transform?.bucket, {
            forceDestroy: true
          });
          if (!input.bucket) {
            const randomId = new RandomId(
              `${name}Id`,
              { byteLength: 6 },
              { parent }
            );
            input.bucket = randomId.dec.apply(
              (dec) => prefixName(
                63,
                name,
                `-${hashNumberToPrettyString(parseInt(dec), 8)}`
              ).toLowerCase()
            );
          }
          return new aws4.s3.BucketV2(`${name}Bucket`, input, { parent });
        }
        function createPublicAccess() {
          return publicAccess.apply((publicAccess2) => {
            return new aws4.s3.BucketPublicAccessBlock(
              `${name}PublicAccessBlock`,
              transform(args?.transform?.publicAccessBlock, {
                bucket: bucket.bucket,
                blockPublicAcls: true,
                blockPublicPolicy: !publicAccess2,
                ignorePublicAcls: true,
                restrictPublicBuckets: !publicAccess2
              }),
              { parent }
            );
          });
        }
        function createBucketPolicy() {
          return publicAccess.apply((publicAccess2) => {
            const statements = [];
            if (publicAccess2) {
              statements.push({
                principals: [{ type: "*", identifiers: ["*"] }],
                actions: ["s3:GetObject"],
                resources: [interpolate5`${bucket.arn}/*`]
              });
            }
            statements.push({
              effect: "Deny",
              principals: [{ type: "*", identifiers: ["*"] }],
              actions: ["s3:*"],
              resources: [bucket.arn, interpolate5`${bucket.arn}/*`],
              conditions: [
                {
                  test: "Bool",
                  variable: "aws:SecureTransport",
                  values: ["false"]
                }
              ]
            });
            return new aws4.s3.BucketPolicy(
              `${name}Policy`,
              transform(args?.transform?.policy, {
                bucket: bucket.bucket,
                policy: aws4.iam.getPolicyDocumentOutput({ statements }).json
              }),
              {
                parent,
                dependsOn: publicAccessBlock
              }
            );
          });
        }
        function createCorsRule() {
          return output8(args?.cors).apply((cors) => {
            if (cors === false)
              return;
            return new aws4.s3.BucketCorsConfigurationV2(
              `${name}Cors`,
              transform(args?.transform?.cors, {
                bucket: bucket.bucket,
                corsRules: [
                  {
                    allowedHeaders: cors?.allowHeaders ?? ["*"],
                    allowedMethods: cors?.allowMethods ?? [
                      "DELETE",
                      "GET",
                      "HEAD",
                      "POST",
                      "PUT"
                    ],
                    allowedOrigins: cors?.allowOrigins ?? ["*"],
                    exposeHeaders: cors?.exposeHeaders,
                    maxAgeSeconds: toSeconds(cors?.maxAge ?? "0 seconds")
                  }
                ]
              }),
              { parent }
            );
          });
        }
        function normalizePublicAccess() {
          return output8(args?.public).apply((v) => v ?? false);
        }
      }
      /**
       * The generated name of the S3 Bucket.
       */
      get name() {
        return this.bucket.bucket;
      }
      /**
       * The ARN of the S3 Bucket.
       */
      get arn() {
        return this.bucket.arn;
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The Amazon S3 bucket.
           */
          bucket: this.bucket
        };
      }
      /**
       * Subscribes to events from this bucket.
       *
       * @param subscriber The function that'll be notified.
       * @param args Configure the subscription.
       *
       * @example
       *
       * ```js
       * bucket.subscribe("src/subscriber.handler");
       * ```
       *
       * Add multiple subscribers.
       *
       * ```js
       * bucket
       *   .subscribe("src/subscriber1.handler")
       *   .subscribe("src/subscriber2.handler");
       * ```
       *
       * Subscribe to specific S3 events.
       *
       * ```js
       * bucket.subscribe("src/subscriber.handler", {
       *   events: ["s3:ObjectCreated:*", "s3:ObjectRemoved:*"]
       * });
       * ```
       *
       * Subscribe to specific S3 events from a specific folder.
       *
       * ```js
       * bucket.subscribe("src/subscriber.handler", {
       *   filterPrefix: "images/",
       *   events: ["s3:ObjectCreated:*", "s3:ObjectRemoved:*"]
       * });
       * ```
       *
       * Customize the subscriber function.
       *
       * ```js
       * bucket.subscribe({
       *   handler: "src/subscriber.handler",
       *   timeout: "60 seconds",
       * });
       * ```
       */
      subscribe(subscriber, args) {
        const parent = this;
        const parentName = this.constructorName;
        all6([subscriber, args]).apply(([subscriber2, args2]) => {
          const events = args2?.events ?? [
            "s3:ObjectCreated:*",
            "s3:ObjectRemoved:*",
            "s3:ObjectRestore:*",
            "s3:ReducedRedundancyLostObject",
            "s3:Replication:*",
            "s3:LifecycleExpiration:*",
            "s3:LifecycleTransition",
            "s3:IntelligentTiering",
            "s3:ObjectTagging:*",
            "s3:ObjectAcl:Put"
          ];
          const id = sanitizeToPascalCase(
            hashStringToPrettyString(
              [
                ...events,
                args2?.filterPrefix ?? "",
                args2?.filterSuffix ?? "",
                typeof subscriber2 === "string" ? subscriber2 : subscriber2.handler
              ].join(""),
              4
            )
          );
          const fn = Function.fromDefinition(
            parent,
            `${parentName}Subscriber${id}`,
            subscriber2,
            {
              description: events.length < 5 ? `Subscribed to ${parentName} on ${events.join(", ")}` : `Subscribed to ${parentName} on ${events.slice(0, 3).join(", ")}, and ${events.length - 3} more events`
            }
          );
          const permission = new aws4.lambda.Permission(
            `${parentName}Subscriber${id}Permissions`,
            {
              action: "lambda:InvokeFunction",
              function: fn.arn,
              principal: "s3.amazonaws.com",
              sourceArn: this.arn
            },
            { parent }
          );
          new aws4.s3.BucketNotification(
            `${parentName}Notification${id}`,
            transform(args2?.transform?.notification, {
              bucket: this.bucket.bucket,
              lambdaFunctions: [
                {
                  id: `Notification${id}`,
                  lambdaFunctionArn: fn.arn,
                  events,
                  filterPrefix: args2?.filterPrefix,
                  filterSuffix: args2?.filterSuffix
                }
              ]
            }),
            { parent, dependsOn: [permission] }
          );
        });
        return this;
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            name: this.name
          }
        };
      }
      /** @internal */
      getSSTAWSPermissions() {
        return [
          {
            actions: ["s3:*"],
            resources: [this.arn, interpolate5`${this.arn}/*`]
          }
        ];
      }
    };
  }
});

// .sst/platform/src/components/aws/cron.ts
import { output as output9 } from "@pulumi/pulumi";
import * as aws5 from "@pulumi/aws";
var Cron;
var init_cron = __esm({
  ".sst/platform/src/components/aws/cron.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    init_function();
    Cron = class extends Component {
      fn;
      rule;
      target;
      constructor(name, args, opts) {
        super("sst:aws:Cron", name, args, opts);
        const parent = this;
        const fn = createFunction();
        const rule = createRule();
        const target = createTarget();
        createPermission();
        this.fn = fn;
        this.rule = rule;
        this.target = target;
        function createFunction() {
          return output9(args.job).apply(
            (job) => Function.fromDefinition(parent, `${name}Handler`, job)
          );
        }
        function createRule() {
          return new aws5.cloudwatch.EventRule(
            `${name}Rule`,
            transform(args.transform?.rule, {
              scheduleExpression: args.schedule
            }),
            { parent }
          );
        }
        function createTarget() {
          return new aws5.cloudwatch.EventTarget(
            `${name}Target`,
            transform(args.transform?.target, {
              arn: fn.arn,
              rule: rule.name
            }),
            { parent }
          );
        }
        function createPermission() {
          return new aws5.lambda.Permission(
            `${name}Permission`,
            {
              action: "lambda:InvokeFunction",
              function: fn.arn,
              principal: "events.amazonaws.com",
              sourceArn: rule.arn
            },
            { parent }
          );
        }
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The AWS Lambda Function that's invoked when the cron job runs.
           */
          job: this.fn,
          /**
           * The EventBridge Rule resource.
           */
          rule: this.rule,
          /**
           * The EventBridge Target resource.
           */
          target: this.target
        };
      }
    };
  }
});

// .sst/platform/src/components/aws/dynamo.ts
import {
  all as all7,
  interpolate as interpolate6,
  output as output10
} from "@pulumi/pulumi";
import * as aws6 from "@pulumi/aws";
var Dynamo;
var init_dynamo = __esm({
  ".sst/platform/src/components/aws/dynamo.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    init_function();
    init_naming();
    Dynamo = class extends Component {
      constructorName;
      table;
      isStreamEnabled = false;
      constructor(name, args, opts = {}) {
        super("sst:aws:Dynamo", name, args, opts);
        const parent = this;
        const table = createTable();
        this.constructorName = name;
        this.table = table;
        this.isStreamEnabled = Boolean(args.stream);
        function createTable() {
          return all7([
            args.fields,
            args.primaryIndex,
            args.globalIndexes,
            args.localIndexes,
            args.stream
          ]).apply(
            ([fields, primaryIndex, globalIndexes, localIndexes, stream]) => new aws6.dynamodb.Table(
              `${name}Table`,
              transform(args.transform?.table, {
                attributes: Object.entries(fields).map(([name2, type]) => ({
                  name: name2,
                  type: type === "string" ? "S" : type === "number" ? "N" : "B"
                })),
                billingMode: "PAY_PER_REQUEST",
                hashKey: primaryIndex.hashKey,
                rangeKey: primaryIndex.rangeKey,
                streamEnabled: Boolean(stream),
                streamViewType: stream ? stream.toUpperCase().replaceAll("-", "_") : void 0,
                pointInTimeRecovery: {
                  enabled: true
                },
                globalSecondaryIndexes: Object.entries(globalIndexes ?? {}).map(
                  ([name2, index]) => ({
                    name: name2,
                    hashKey: index.hashKey,
                    rangeKey: index.rangeKey,
                    projectionType: "ALL"
                  })
                ),
                localSecondaryIndexes: Object.entries(localIndexes ?? {}).map(
                  ([name2, index]) => ({
                    name: name2,
                    rangeKey: index.rangeKey,
                    projectionType: "ALL"
                  })
                )
              }),
              { parent }
            )
          );
        }
      }
      /**
       * The ARN of the DynamoDB Table.
       */
      get arn() {
        return this.table.arn;
      }
      /**
       * The name of the DynamoDB Table.
       */
      get name() {
        return this.table.name;
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The Amazon DynamoDB Table.
           */
          table: this.table
        };
      }
      /**
       * Subscribe to this table's DynamoDB Stream.
       *
       * :::note
       * You'll first need to enable the `stream` before subscribing to it.
       * :::
       *
       * @param subscriber The function that'll be notified.
       * @param args Configure the subscription.
       *
       * @example
       *
       * ```js
       * table.subscribe("src/subscriber.handler");
       * ```
       *
       * Add multiple subscribers.
       *
       * ```js
       * table
       *   .subscribe("src/subscriber1.handler")
       *   .subscribe("src/subscriber2.handler");
       * ```
       *
       * Add a filter to the subscription.
       *
       * ```js
       * table.subscribe("src/subscriber.handler", {
       *   filters: [
       *     {
       *       dynamodb: {
       *         Keys: {
       *           CustomerName: {
       *             S: ["AnyCompany Industries"]
       *           }
       *         }
       *       }
       *     }
       *   ]
       * });
       * ```
       *
       * Customize the subscriber function.
       *
       * ```js
       * table.subscribe({
       *   handler: "src/subscriber.handler",
       *   timeout: "60 seconds"
       * });
       * ```
       */
      subscribe(subscriber, args = {}) {
        const parent = this;
        const parentName = this.constructorName;
        if (!this.isStreamEnabled)
          throw new Error(
            `Cannot subscribe to "${parentName}" because stream is not enabled.`
          );
        const id = sanitizeToPascalCase(
          hashStringToPrettyString(JSON.stringify(args.filters ?? {}), 4)
        );
        const fn = Function.fromDefinition(
          parent,
          `${parentName}Subscriber${id}`,
          subscriber,
          {
            description: `Subscribed to ${parentName}`,
            permissions: [
              {
                actions: [
                  "dynamodb:DescribeStream",
                  "dynamodb:GetRecords",
                  "dynamodb:GetShardIterator",
                  "dynamodb:ListStreams"
                ],
                resources: [this.nodes.table.streamArn]
              }
            ]
          }
        );
        new aws6.lambda.EventSourceMapping(
          `${parentName}EventSourceMapping${id}`,
          transform(args?.transform?.eventSourceMapping, {
            eventSourceArn: this.nodes.table.streamArn,
            functionName: fn.name,
            filterCriteria: args?.filters && {
              filters: output10(args.filters).apply(
                (filters) => filters.map((filter) => ({
                  pattern: JSON.stringify(filter)
                }))
              )
            },
            startingPosition: "LATEST"
          }),
          { parent }
        );
        return this;
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            name: this.name
          }
        };
      }
      /** @internal */
      getSSTAWSPermissions() {
        return [
          {
            actions: ["dynamodb:*"],
            resources: [this.arn, interpolate6`${this.arn}/*`]
          }
        ];
      }
    };
  }
});

// .sst/platform/src/components/aws/postgres.ts
import { output as output11 } from "@pulumi/pulumi";
import * as aws7 from "@pulumi/aws";
function parseACU(acu) {
  const result2 = parseFloat(acu.split(" ")[0]);
  return result2;
}
var Postgres;
var init_postgres = __esm({
  ".sst/platform/src/components/aws/postgres.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    Postgres = class extends Component {
      cluster;
      instance;
      databaseName;
      constructor(name, args, opts) {
        super("sst:aws:Postgres", name, args, opts);
        const parent = this;
        const scaling = normalizeScaling();
        const version = normalizeVersion();
        const databaseName = normalizeDatabaseName();
        const cluster = createCluster();
        const instance = createInstance();
        this.cluster = cluster;
        this.instance = instance;
        this.databaseName = databaseName;
        function normalizeScaling() {
          return output11(args?.scaling).apply((scaling2) => ({
            minCapacity: parseACU(scaling2?.min ?? "0.5 ACU"),
            maxCapacity: parseACU(scaling2?.max ?? "4 ACU")
          }));
        }
        function normalizeVersion() {
          return output11(args?.version).apply((version2) => version2 ?? "15.5");
        }
        function normalizeDatabaseName() {
          return output11(args?.databaseName).apply(
            (name2) => name2 ?? define_app_default.name.replaceAll("-", "_")
          );
        }
        function createCluster() {
          return new aws7.rds.Cluster(
            `${name}Cluster`,
            transform(args?.transform?.cluster, {
              engine: aws7.rds.EngineType.AuroraPostgresql,
              engineMode: "provisioned",
              engineVersion: version,
              databaseName,
              masterUsername: "postgres",
              manageMasterUserPassword: true,
              serverlessv2ScalingConfiguration: scaling,
              skipFinalSnapshot: true,
              enableHttpEndpoint: true
            }),
            {
              parent
            }
          );
        }
        function createInstance() {
          return new aws7.rds.ClusterInstance(
            `${name}Instance`,
            transform(args?.transform?.instance, {
              clusterIdentifier: cluster.id,
              instanceClass: "db.serverless",
              engine: aws7.rds.EngineType.AuroraPostgresql,
              engineVersion: cluster.engineVersion
            }),
            {
              parent
            }
          );
        }
      }
      /**
       * The ARN of the RDS Cluster.
       */
      get clusterArn() {
        return this.cluster.arn;
      }
      /**
       * The ARN of the master user secret.
       */
      get secretArn() {
        return this.cluster.masterUserSecrets[0].secretArn;
      }
      /**
       * The name of the database.
       */
      get database() {
        return this.databaseName;
      }
      get nodes() {
        return {
          cluster: this.cluster,
          instance: this.instance
        };
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            clusterArn: this.clusterArn,
            secretArn: this.secretArn,
            database: this.database
          }
        };
      }
      /** @internal */
      getSSTAWSPermissions() {
        return [
          {
            actions: ["secretsmanager:GetSecretValue"],
            resources: [this.cluster.masterUserSecrets[0].secretArn]
          },
          {
            actions: [
              "rds-data:BatchExecuteStatement",
              "rds-data:BeginTransaction",
              "rds-data:CommitTransaction",
              "rds-data:ExecuteStatement",
              "rds-data:RollbackTransaction"
            ],
            resources: [this.cluster.arn]
          }
        ];
      }
    };
  }
});

// .sst/platform/src/components/aws/queue.ts
import { output as output12 } from "@pulumi/pulumi";
import * as aws8 from "@pulumi/aws";
var Queue;
var init_queue = __esm({
  ".sst/platform/src/components/aws/queue.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    init_function();
    init_error();
    Queue = class extends Component {
      constructorName;
      queue;
      isSubscribed = false;
      constructor(name, args, opts) {
        super("sst:aws:Queue", name, args, opts);
        const parent = this;
        const fifo = normalizeFifo();
        const queue = createQueue();
        this.constructorName = name;
        this.queue = queue;
        function normalizeFifo() {
          return output12(args?.fifo).apply((v) => v ?? false);
        }
        function createQueue() {
          return new aws8.sqs.Queue(
            `${name}Queue`,
            transform(args?.transform?.queue, {
              fifoQueue: fifo
            }),
            { parent }
          );
        }
      }
      /**
       * The ARN of the SQS Queue.
       */
      get arn() {
        return this.queue.arn;
      }
      /**
       * The SQS Queue URL.
       */
      get url() {
        return this.queue.url;
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The Amazon SQS Queue.
           */
          queue: this.queue
        };
      }
      /**
       * Subscribe to this queue.
       *
       * @param subscriber The function that'll be notified.
       * @param args Configure the subscription.
       *
       * @example
       *
       * ```js
       * queue.subscribe("src/subscriber.handler");
       * ```
       *
       * Add multiple subscribers.
       *
       * ```js
       * queue
       *   .subscribe("src/subscriber1.handler")
       *   .subscribe("src/subscriber2.handler");
       * ```
       *
       * Add a filter to the subscription.
       *
       * ```js
       * queue.subscribe("src/subscriber.handler", {
       *   filters: [
       *     {
       *       body: {
       *         RequestCode: ["BBBB"]
       *       }
       *     }
       *   ]
       * });
       * ```
       *
       * Customize the subscriber function.
       *
       * ```js
       * queue.subscribe({
       *   handler: "src/subscriber.handler",
       *   timeout: "60 seconds"
       * });
       * ```
       */
      subscribe(subscriber, args) {
        const parent = this;
        const parentName = this.constructorName;
        if (this.isSubscribed)
          throw new VisibleError(
            `Cannot subscribe to the "${parentName}" queue multiple times. An AWS SQS queue can only have one subscriber.`
          );
        this.isSubscribed = true;
        const fn = Function.fromDefinition(
          parent,
          `${parentName}Subscriber`,
          subscriber,
          {
            description: `Subscribed to ${parentName}`,
            permissions: [
              {
                actions: [
                  "sqs:ChangeMessageVisibility",
                  "sqs:DeleteMessage",
                  "sqs:GetQueueAttributes",
                  "sqs:GetQueueUrl",
                  "sqs:ReceiveMessage"
                ],
                resources: [this.arn]
              }
            ]
          }
        );
        new aws8.lambda.EventSourceMapping(
          `${parentName}EventSourceMapping`,
          transform(args?.transform?.eventSourceMapping, {
            eventSourceArn: this.arn,
            functionName: fn.name,
            filterCriteria: args?.filters && {
              filters: output12(args.filters).apply(
                (filters) => filters.map((filter) => ({
                  pattern: JSON.stringify(filter)
                }))
              )
            }
          }),
          { parent }
        );
        return this;
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            url: this.url
          }
        };
      }
      /** @internal */
      getSSTAWSPermissions() {
        return [
          {
            actions: ["sqs:*"],
            resources: [this.arn]
          }
        ];
      }
    };
  }
});

// .sst/platform/src/components/aws/helpers/provider.ts
import { output as output13 } from "@pulumi/pulumi";
import * as aws9 from "@pulumi/aws";
var useProviderCache, useProvider;
var init_provider = __esm({
  ".sst/platform/src/components/aws/helpers/provider.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_lazy();
    useProviderCache = lazy(() => /* @__PURE__ */ new Map());
    useProvider = (region) => {
      const cache = useProviderCache();
      const existing = cache.get(region);
      if (existing)
        return existing;
      const provider = new aws9.Provider(`AwsProvider.sst.${region}`, {
        region,
        defaultTags: {
          tags: output13(aws9.getDefaultTags()).apply((result2) => result2.tags)
        }
      });
      cache.set(region, provider);
      return provider;
    };
  }
});

// .sst/platform/src/components/aws/https-redirect.ts
import { all as all8, output as output14 } from "@pulumi/pulumi";
import * as aws10 from "@pulumi/aws";
var HttpsRedirect;
var init_https_redirect = __esm({
  ".sst/platform/src/components/aws/https-redirect.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_dns_validated_certificate();
    init_bucket();
    init_component();
    init_naming();
    init_provider();
    HttpsRedirect = class extends Component {
      constructor(name, args, opts) {
        super("sst:aws:HttpsRedirect", name, args, opts);
        const parent = this;
        const certificate = new DnsValidatedCertificate(
          `${name}Ssl`,
          {
            domainName: output14(args.sourceDomains).apply((domains) => domains[0]),
            alternativeNames: output14(args.sourceDomains).apply(
              (domains) => domains.slice(1)
            ),
            zoneId: args.zoneId
          },
          { parent, provider: useProvider("us-east-1") }
        );
        const bucket = new Bucket(`${name}Bucket`, {}, { parent });
        const bucketWebsite = new aws10.s3.BucketWebsiteConfigurationV2(
          `${name}BucketWebsite`,
          {
            bucket: bucket.name,
            redirectAllRequestsTo: {
              hostName: args.targetDomain,
              protocol: "https"
            }
          },
          { parent }
        );
        const distribution = new aws10.cloudfront.Distribution(
          `${name}Distribution`,
          {
            enabled: true,
            waitForDeployment: false,
            aliases: args.sourceDomains,
            restrictions: {
              geoRestriction: {
                restrictionType: "none"
              }
            },
            comment: all8([args.targetDomain, args.sourceDomains]).apply(
              ([targetDomain, sourceDomains]) => `Redirect to ${targetDomain} from ${sourceDomains.join(", ")}`
            ),
            priceClass: "PriceClass_All",
            viewerCertificate: {
              acmCertificateArn: certificate.arn,
              sslSupportMethod: "sni-only"
            },
            defaultCacheBehavior: {
              allowedMethods: ["GET", "HEAD", "OPTIONS"],
              targetOriginId: "s3Origin",
              viewerProtocolPolicy: "redirect-to-https",
              cachedMethods: ["GET", "HEAD"],
              forwardedValues: {
                cookies: { forward: "none" },
                queryString: false
              }
            },
            origins: [
              {
                originId: "s3Origin",
                domainName: bucketWebsite.websiteEndpoint,
                customOriginConfig: {
                  httpPort: 80,
                  httpsPort: 443,
                  originProtocolPolicy: "http-only",
                  originSslProtocols: ["TLSv1.2"]
                }
              }
            ]
          },
          { parent }
        );
        output14(args.sourceDomains).apply((sourceDomains) => {
          for (const recordName of sourceDomains) {
            for (const type of ["A", "AAAA"]) {
              new aws10.route53.Record(
                `${name}${type}Record${sanitizeToPascalCase(recordName)}`,
                {
                  name: recordName,
                  zoneId: args.zoneId,
                  type,
                  aliases: [
                    {
                      name: distribution.domainName,
                      zoneId: distribution.hostedZoneId,
                      evaluateTargetHealth: true
                    }
                  ]
                },
                { parent }
              );
            }
          }
        });
      }
    };
  }
});

// .sst/platform/src/components/aws/providers/distribution-deployment-waiter.ts
import { dynamic as dynamic3 } from "@pulumi/pulumi";
import {
  CloudFrontClient,
  GetDistributionCommand
} from "@aws-sdk/client-cloudfront";
var Provider4, DistributionDeploymentWaiter;
var init_distribution_deployment_waiter = __esm({
  ".sst/platform/src/components/aws/providers/distribution-deployment-waiter.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_client();
    Provider4 = class {
      async create(inputs) {
        await this.handle(inputs);
        return { id: "waiter", outs: { isDone: true } };
      }
      async update(id, olds, news) {
        await this.handle(news);
        return { outs: { isDone: true } };
      }
      async handle(inputs) {
        if (!inputs.wait)
          return;
        const { distributionId } = inputs;
        const client = useClient(CloudFrontClient);
        const start = Date.now();
        do {
          const result2 = await client.send(
            new GetDistributionCommand({
              Id: distributionId
            })
          );
          if (result2.Distribution?.Status === "Deployed")
            return;
          await new Promise((resolve) => setTimeout(resolve, 5e3));
        } while (Date.now() - start < 3e5);
      }
    };
    DistributionDeploymentWaiter = class extends dynamic3.Resource {
      constructor(name, args, opts) {
        super(
          new Provider4(),
          `${name}.sst.aws.DistributionDeploymentWaiter`,
          args,
          opts
        );
      }
    };
  }
});

// .sst/platform/src/components/aws/cdn.ts
import {
  output as output15,
  interpolate as interpolate7
} from "@pulumi/pulumi";
import * as aws11 from "@pulumi/aws";
var Cdn;
var init_cdn = __esm({
  ".sst/platform/src/components/aws/cdn.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_dns_validated_certificate();
    init_https_redirect();
    init_provider();
    init_component();
    init_naming();
    init_hosted_zone_lookup();
    init_distribution_deployment_waiter();
    Cdn = class extends Component {
      distribution;
      _domainUrl;
      constructor(name, args, opts) {
        super("sst:aws:CDN", name, args, opts);
        const parent = this;
        const domain = normalizeDomain();
        const zoneId = lookupHostedZoneId();
        const certificate = createSsl();
        const distribution = createDistribution();
        const waiter = createDistributionDeploymentWaiter();
        createRoute53Records();
        createRedirects();
        this.distribution = waiter.isDone.apply(() => distribution);
        this._domainUrl = domain?.domainName ? interpolate7`https://${domain.domainName}` : void 0;
        function normalizeDomain() {
          if (!args.domain)
            return;
          return output15(args.domain).apply((domain2) => {
            if (typeof domain2 === "string") {
              return { domainName: domain2, aliases: [], redirects: [] };
            }
            if (!domain2.domainName) {
              throw new Error(`Missing "domainName" for domain.`);
            }
            if (domain2.hostedZone && domain2.hostedZoneId) {
              throw new Error(`Do not set both "hostedZone" and "hostedZoneId".`);
            }
            return { aliases: [], redirects: [], ...domain2 };
          });
        }
        function lookupHostedZoneId() {
          if (!domain)
            return;
          return domain.apply((domain2) => {
            if (domain2.hostedZoneId)
              return output15(domain2.hostedZoneId);
            return new HostedZoneLookup(
              `${name}HostedZoneLookup`,
              {
                domain: domain2.hostedZone ?? domain2.domainName
              },
              { parent }
            ).zoneId;
          });
        }
        function createSsl() {
          if (!domain || !zoneId)
            return;
          return new DnsValidatedCertificate(
            `${name}Ssl`,
            {
              domainName: domain.domainName,
              alternativeNames: domain.aliases,
              zoneId
            },
            { parent, provider: useProvider("us-east-1") }
          );
        }
        function createDistribution() {
          return new aws11.cloudfront.Distribution(
            `${name}Distribution`,
            transform(args.transform.distribution, {
              defaultCacheBehavior: {
                allowedMethods: [],
                cachedMethods: [],
                targetOriginId: "placeholder",
                viewerProtocolPolicy: "redirect-to-https"
              },
              enabled: true,
              origins: [],
              restrictions: {
                geoRestriction: {
                  restrictionType: "none"
                }
              },
              aliases: domain ? output15(domain).apply((domain2) => [
                domain2.domainName,
                ...domain2.aliases
              ]) : [],
              viewerCertificate: certificate ? {
                acmCertificateArn: certificate.arn,
                sslSupportMethod: "sni-only",
                minimumProtocolVersion: "TLSv1.2_2021"
              } : {
                cloudfrontDefaultCertificate: true
              },
              waitForDeployment: false
            }),
            {
              parent
            }
          );
        }
        function createDistributionDeploymentWaiter() {
          return output15(args.wait).apply((wait) => {
            return new DistributionDeploymentWaiter(
              `${name}Waiter`,
              {
                distributionId: distribution.id,
                etag: distribution.etag,
                wait: wait ?? true
              },
              { parent, ignoreChanges: wait ? void 0 : ["*"] }
            );
          });
        }
        function createRoute53Records() {
          if (!domain || !zoneId) {
            return;
          }
          output15(domain).apply((domain2) => {
            for (const recordName of [domain2.domainName, ...domain2.aliases]) {
              for (const type of ["A", "AAAA"]) {
                new aws11.route53.Record(
                  `${name}${type}Record${sanitizeToPascalCase(recordName)}`,
                  {
                    name: recordName,
                    zoneId,
                    type,
                    aliases: [
                      {
                        name: distribution.domainName,
                        zoneId: distribution.hostedZoneId,
                        evaluateTargetHealth: true
                      }
                    ]
                  },
                  { parent }
                );
              }
            }
          });
        }
        function createRedirects() {
          if (!zoneId || !domain) {
            return;
          }
          output15(domain).apply((domain2) => {
            if (domain2.redirects.length === 0)
              return;
            new HttpsRedirect(
              `${name}Redirect`,
              {
                zoneId,
                sourceDomains: domain2.redirects,
                targetDomain: domain2.domainName
              },
              { parent }
            );
          });
        }
      }
      /**
       * The CloudFront URL of the website.
       */
      get url() {
        return interpolate7`https://${this.distribution.domainName}`;
      }
      /**
       * If the custom domain is enabled, this is the URL of the website with the
       * custom domain.
       */
      get domainUrl() {
        return this._domainUrl;
      }
      get nodes() {
        return {
          distribution: this.distribution
        };
      }
    };
  }
});

// .sst/platform/src/components/aws/router.ts
import { all as all9, output as output16 } from "@pulumi/pulumi";
import * as aws12 from "@pulumi/aws";
var Router;
var init_router = __esm({
  ".sst/platform/src/components/aws/router.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    init_cdn();
    Router = class extends Component {
      cdn;
      cachePolicy;
      constructor(name, args, opts = {}) {
        super("sst:aws:Router", name, args, opts);
        const parent = this;
        validateRoutes();
        const cachePolicy = createCachePolicy();
        const cdn = createCdn();
        this.cachePolicy = cachePolicy;
        this.cdn = cdn;
        function validateRoutes() {
          output16(args.routes).apply((routes) => {
            Object.keys(routes).map((path17) => {
              if (!path17.startsWith("/")) {
                throw new Error(
                  `In "${name}" Router, the route path "${path17}" must start with a "/"`
                );
              }
            });
          });
        }
        function createCachePolicy() {
          return new aws12.cloudfront.CachePolicy(
            `${name}CachePolicy`,
            transform(args.transform?.cachePolicy, {
              comment: `${name} router cache policy`,
              defaultTtl: 0,
              maxTtl: 31536e3,
              // 1 year
              minTtl: 0,
              parametersInCacheKeyAndForwardedToOrigin: {
                cookiesConfig: {
                  cookieBehavior: "none"
                },
                headersConfig: {
                  headerBehavior: "none"
                },
                queryStringsConfig: {
                  queryStringBehavior: "all"
                },
                enableAcceptEncodingBrotli: true,
                enableAcceptEncodingGzip: true
              }
            }),
            { parent }
          );
        }
        function createCdn() {
          const origins = buildOrigins();
          const behaviors = buildBehaviors();
          return new Cdn(
            `${name}Cdn`,
            {
              domain: args.domain,
              wait: true,
              transform: {
                distribution: (distribution) => ({
                  ...distribution,
                  comment: `${name} router`,
                  origins,
                  defaultCacheBehavior: behaviors.apply(
                    (behaviors2) => behaviors2.find((b) => !b.pathPattern)
                  ),
                  orderedCacheBehaviors: behaviors.apply(
                    (behaviors2) => behaviors2.filter(
                      (b) => b.pathPattern
                    )
                  )
                })
              }
            },
            { parent }
          );
        }
        function buildOrigins() {
          const defaultConfig = {
            customOriginConfig: {
              httpPort: 80,
              httpsPort: 443,
              originProtocolPolicy: "https-only",
              originReadTimeout: 20,
              originSslProtocols: ["TLSv1.2"]
            }
          };
          return output16(args.routes).apply((routes) => {
            const origins = Object.entries(routes).map(([path17, url]) => ({
              originId: path17,
              domainName: new URL(url).host,
              ...defaultConfig
            }));
            if (!routes["/*"]) {
              origins.push({
                originId: "/*",
                domainName: "do-not-exist",
                ...defaultConfig
              });
            }
            return origins;
          });
        }
        function buildBehaviors() {
          const defaultConfig = {
            viewerProtocolPolicy: "redirect-to-https",
            allowedMethods: [
              "DELETE",
              "GET",
              "HEAD",
              "OPTIONS",
              "PATCH",
              "POST",
              "PUT"
            ],
            cachedMethods: ["GET", "HEAD"],
            defaultTtl: 0,
            compress: true,
            // CloudFront's Managed-AllViewerExceptHostHeader policy
            cachePolicyId: cachePolicy.id,
            originRequestPolicyId: "b689b0a8-53d0-40ab-baf2-68738e2966ac"
          };
          return output16(args.routes).apply((routes) => {
            const behaviors = Object.entries(routes).map(([path17]) => ({
              ...path17 === "/*" ? {} : { pathPattern: path17 },
              targetOriginId: path17,
              ...defaultConfig
            }));
            if (!routes["/*"]) {
              behaviors.push({
                targetOriginId: "/*",
                ...defaultConfig
              });
            }
            return behaviors;
          });
        }
      }
      /**
       * The URL of the Router.
       *
       * If the `domain` is set, this is the URL with the custom domain.
       * Otherwise, it's the autogenerated CloudFront URL.
       */
      get url() {
        return all9([this.cdn.domainUrl, this.cdn.url]).apply(
          ([domainUrl, url]) => domainUrl ?? url
        );
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            url: this.url
          }
        };
      }
    };
  }
});

// .sst/platform/src/components/aws/sns-topic.ts
import { output as output17 } from "@pulumi/pulumi";
import * as aws13 from "@pulumi/aws";
var SnsTopic;
var init_sns_topic = __esm({
  ".sst/platform/src/components/aws/sns-topic.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    init_function();
    init_naming();
    SnsTopic = class extends Component {
      constructorName;
      topic;
      constructor(name, args = {}, opts = {}) {
        super("sst:aws:SnsTopic", name, args, opts);
        const parent = this;
        const fifo = normalizeFifo();
        const topic = createTopic();
        this.constructorName = name;
        this.topic = topic;
        function normalizeFifo() {
          return output17(args.fifo).apply((v) => v ?? false);
        }
        function createTopic() {
          return new aws13.sns.Topic(
            `${name}Topic`,
            transform(args.transform?.topic, {
              fifoTopic: fifo
            }),
            { parent }
          );
        }
      }
      /**
       * The ARN of the SNS Topic.
       */
      get arn() {
        return this.topic.arn;
      }
      /**
       * The name of the SNS Topic.
       */
      get name() {
        return this.topic.name;
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The Amazon SNS Topic.
           */
          topic: this.topic
        };
      }
      /**
       * Subscribes to this SNS Topic.
       *
       * @param subscriber The function that'll be notified.
       * @param args Configure the subscription.
       *
       * @example
       *
       * ```js
       * topic.subscribe("src/subscriber.handler");
       * ```
       *
       * Add multiple subscribers.
       *
       * ```js
       * topic
       *   .subscribe("src/subscriber1.handler")
       *   .subscribe("src/subscriber2.handler");
       * ```
       *
       * Add a filter to the subscription.
       *
       * ```js
       * topic.subscribe("src/subscriber.handler", {
       *   filter: {
       *     price_usd: [{numeric: [">=", 100]}]
       *   }
       * });
       * ```
       *
       * Customize the subscriber function.
       *
       * ```js
       * topic.subscribe({
       *   handler: "src/subscriber.handler",
       *   timeout: "60 seconds"
       * });
       * ```
       */
      subscribe(subscriber, args = {}) {
        const parent = this;
        const parentName = this.constructorName;
        const id = sanitizeToPascalCase(
          hashStringToPrettyString(JSON.stringify(args.filter ?? {}), 4)
        );
        const fn = Function.fromDefinition(
          parent,
          `${parentName}Subscriber${id}`,
          subscriber,
          {
            description: `Subscribed to ${parentName}`
          }
        );
        const permission = new aws13.lambda.Permission(
          `${parentName}Subscriber${id}Permissions`,
          {
            action: "lambda:InvokeFunction",
            function: fn.arn,
            principal: "sns.amazonaws.com",
            sourceArn: this.arn
          },
          { parent }
        );
        new aws13.sns.TopicSubscription(
          `${parentName}Subscription${id}`,
          transform(args?.transform?.subscription, {
            topic: this.topic.arn,
            protocol: "lambda",
            endpoint: fn.arn,
            filterPolicy: JSON.stringify(args.filter ?? {})
          }),
          { parent, dependsOn: [permission] }
        );
        return this;
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            arn: this.arn
          }
        };
      }
      /** @internal */
      getSSTAWSPermissions() {
        return [
          {
            actions: ["sns:*"],
            resources: [this.arn]
          }
        ];
      }
    };
  }
});

// .sst/platform/src/components/aws/providers/bucket-files.ts
import fs4 from "fs";
import { dynamic as dynamic4 } from "@pulumi/pulumi";
import { S3Client as S3Client2, PutObjectCommand } from "@aws-sdk/client-s3";
var Provider5, BucketFiles;
var init_bucket_files = __esm({
  ".sst/platform/src/components/aws/providers/bucket-files.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_client();
    Provider5 = class {
      async create(inputs) {
        await this.upload(inputs.bucketName, inputs.files, []);
        return { id: "files" };
      }
      async update(id, olds, news) {
        await this.upload(
          news.bucketName,
          news.files,
          news.bucketName === olds.bucketName ? olds.files : []
        );
        return {};
      }
      async upload(bucketName, files, oldFiles) {
        const oldFilesMap = new Map(oldFiles.map((f) => [f.key, f]));
        const s34 = useClient(S3Client2);
        await Promise.all(
          files.map(async (file) => {
            const oldFile = oldFilesMap.get(file.key);
            if (oldFile && oldFile.hash === file.hash && oldFile.cacheControl === file.cacheControl && oldFile.contentType === file.contentType) {
              return;
            }
            await s34.send(
              new PutObjectCommand({
                Bucket: bucketName,
                Key: file.key,
                Body: await fs4.promises.readFile(file.source),
                CacheControl: file.cacheControl,
                ContentType: file.contentType
              })
            );
          })
        );
      }
    };
    BucketFiles = class extends dynamic4.Resource {
      constructor(name, args, opts) {
        super(new Provider5(), `${name}.sst.aws.BucketFiles`, args, opts);
      }
    };
  }
});

// .sst/platform/src/components/aws/providers/distribution-invalidation.ts
import { dynamic as dynamic5 } from "@pulumi/pulumi";
import {
  CloudFrontClient as CloudFrontClient2,
  CreateInvalidationCommand,
  waitUntilInvalidationCompleted
} from "@aws-sdk/client-cloudfront";
var FILE_LIMIT, WILDCARD_LIMIT, Provider6, DistributionInvalidation;
var init_distribution_invalidation = __esm({
  ".sst/platform/src/components/aws/providers/distribution-invalidation.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_client();
    FILE_LIMIT = 3e3;
    WILDCARD_LIMIT = 15;
    Provider6 = class {
      async create(inputs) {
        await this.handle(inputs);
        return { id: "invalidation" };
      }
      async update(id, olds, news) {
        await this.handle(news);
        return {};
      }
      async handle(inputs) {
        const client = useClient(CloudFrontClient2);
        const ids = await this.invalidate(client, inputs);
        if (inputs.wait) {
          await this.waitForInvalidation(client, inputs, ids);
        }
      }
      async invalidate(client, inputs) {
        const { distributionId, paths } = inputs;
        const pathsFile = [];
        const pathsWildcard = [];
        for (const path17 of paths) {
          if (path17.trim().endsWith("*")) {
            pathsWildcard.push(path17);
          } else {
            pathsFile.push(path17);
          }
        }
        const stepsCount = Math.max(
          Math.ceil(pathsFile.length / FILE_LIMIT),
          Math.ceil(pathsWildcard.length / WILDCARD_LIMIT)
        );
        const invalidationIds = [];
        for (let i = 0; i < stepsCount; i++) {
          const stepPaths = [
            ...pathsFile.slice(i * FILE_LIMIT, (i + 1) * FILE_LIMIT),
            ...pathsWildcard.slice(i * WILDCARD_LIMIT, (i + 1) * WILDCARD_LIMIT)
          ];
          invalidationIds.push(
            await this.invalidateChunk(client, distributionId, stepPaths)
          );
        }
        return invalidationIds;
      }
      async invalidateChunk(client, distributionId, paths) {
        const result2 = await client.send(
          new CreateInvalidationCommand({
            DistributionId: distributionId,
            InvalidationBatch: {
              CallerReference: Date.now().toString(),
              Paths: {
                Quantity: paths.length,
                Items: paths
              }
            }
          })
        );
        const invalidationId = result2.Invalidation?.Id;
        if (!invalidationId) {
          throw new Error("Invalidation ID not found");
        }
        return invalidationId;
      }
      async waitForInvalidation(client, inputs, invalidationIds) {
        const { distributionId } = inputs;
        for (const invalidationId of invalidationIds) {
          try {
            await waitUntilInvalidationCompleted(
              {
                client,
                maxWaitTime: 600
              },
              {
                DistributionId: distributionId,
                Id: invalidationId
              }
            );
          } catch (e) {
          }
        }
      }
    };
    DistributionInvalidation = class extends dynamic5.Resource {
      constructor(name, args, opts) {
        super(
          new Provider6(),
          `${name}.sst.aws.DistributionInvalidation`,
          args,
          opts
        );
      }
    };
  }
});

// .sst/platform/src/components/base/base-static-site.ts
import fs5 from "fs";
import path4 from "path";
import { execSync } from "child_process";
import { all as all10, output as output19 } from "@pulumi/pulumi";
function prepare(args) {
  const sitePath = normalizeSitePath();
  const environment = normalizeEnvironment();
  const indexPage = normalizeIndexPage();
  generateViteTypes();
  return {
    sitePath,
    environment,
    indexPage
  };
  function normalizeSitePath() {
    return output19(args.path).apply((sitePath2) => {
      if (!sitePath2)
        return ".";
      if (!fs5.existsSync(sitePath2)) {
        throw new VisibleError(`No site found at "${path4.resolve(sitePath2)}".`);
      }
      return sitePath2;
    });
  }
  function normalizeEnvironment() {
    return output19(args.environment).apply((environment2) => environment2 ?? {});
  }
  function normalizeIndexPage() {
    return output19(args.indexPage).apply(
      (indexPage2) => indexPage2 ?? "index.html"
    );
  }
  function generateViteTypes() {
    return all10([sitePath, args.vite, environment]).apply(
      ([sitePath2, vite, environment2]) => {
        let typesPath = vite?.types;
        if (!typesPath) {
          if (fs5.existsSync(path4.join(sitePath2, "vite.config.js")) || fs5.existsSync(path4.join(sitePath2, "vite.config.ts"))) {
            typesPath = "src/sst-env.d.ts";
          }
        }
        if (!typesPath) {
          return;
        }
        const filePath = path4.resolve(path4.join(sitePath2, typesPath));
        const content = `/// <reference types="vite/client" />
  interface ImportMetaEnv {
  ${Object.keys(environment2).map((key) => `  readonly ${key}: string`).join("\n")}
  }
  interface ImportMeta {
    readonly env: ImportMetaEnv
  }`;
        const fileDir = path4.dirname(filePath);
        fs5.mkdirSync(fileDir, { recursive: true });
        fs5.writeFileSync(filePath, content);
      }
    );
  }
}
function buildApp(name, build3, sitePath, environment) {
  return all10([build3, sitePath, environment]).apply(
    ([build4, sitePath2, environment2]) => {
      if (true)
        return path4.join(define_cli_default.paths.platform, "functions", "empty-site");
      if (!build4)
        return sitePath2;
      if (!process.env.SKIP) {
        console.debug(`Running "${build4.command}" script`);
        try {
          execSync(build4.command, {
            cwd: sitePath2,
            stdio: "inherit",
            env: {
              ...process.env,
              ...environment2
            }
          });
        } catch (e) {
          throw new VisibleError(`There was a problem building "${name}".`);
        }
      }
      if (!fs5.existsSync(build4.output)) {
        throw new VisibleError(
          `No build output found at "${path4.resolve(build4.output)}".`
        );
      }
      return build4.output;
    }
  );
}
function cleanup(urn, url, sitePath, environment) {
  all10([sitePath, environment]).apply(([sitepath, environment2]) => {
    Link.Receiver.register(sitepath, [], environment2);
  });
  Hint.register(urn, url);
}
var init_base_static_site = __esm({
  ".sst/platform/src/components/base/base-static-site.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_hint();
    init_link();
    init_error();
  }
});

// .sst/platform/src/components/aws/static-site.ts
import fs6 from "fs";
import path5 from "path";
import crypto3 from "crypto";
import * as aws14 from "@pulumi/aws";
import {
  all as all11,
  interpolate as interpolate8,
  output as output20
} from "@pulumi/pulumi";
import { globSync } from "glob";
var StaticSite;
var init_static_site = __esm({
  ".sst/platform/src/components/aws/static-site.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_cdn();
    init_bucket();
    init_component();
    init_bucket_files();
    init_distribution_invalidation();
    init_base_static_site();
    StaticSite = class extends Component {
      cdn;
      assets;
      constructor(name, args = {}, opts = {}) {
        super("sst:aws:StaticSite", name, args, opts);
        const parent = this;
        const { sitePath, environment, indexPage } = prepare(args);
        const outputPath = buildApp(name, args.build, sitePath, environment);
        const access = createCloudFrontOriginAccessIdentity();
        const bucket = createS3Bucket();
        const bucketFile = uploadAssets();
        const distribution = createDistribution();
        createDistributionInvalidation();
        this.assets = bucket;
        this.cdn = distribution;
        cleanup(this.urn, this.url, sitePath, environment);
        this.registerOutputs({
          _metadata: {
            path: sitePath,
            environment,
            url: this.url
          }
        });
        function createCloudFrontOriginAccessIdentity() {
          return new aws14.cloudfront.OriginAccessIdentity(
            `${name}OriginAccessIdentity`,
            {},
            { parent }
          );
        }
        function createS3Bucket() {
          return new Bucket(
            `${name}Assets`,
            transform(args.transform?.assets, {
              transform: {
                policy: (policyArgs) => {
                  const newPolicy = aws14.iam.getPolicyDocumentOutput({
                    statements: [
                      {
                        principals: [
                          {
                            type: "AWS",
                            identifiers: [access.iamArn]
                          }
                        ],
                        actions: ["s3:GetObject"],
                        resources: [interpolate8`${bucket.arn}/*`]
                      }
                    ]
                  }).json;
                  policyArgs.policy = output20([policyArgs.policy, newPolicy]).apply(
                    ([policy, newPolicy2]) => {
                      const policyJson = JSON.parse(policy);
                      const newPolicyJson = JSON.parse(newPolicy2);
                      policyJson.Statement.push(...newPolicyJson.Statement);
                      return JSON.stringify(policyJson);
                    }
                  );
                }
              }
            }),
            { parent, retainOnDelete: false }
          );
        }
        function uploadAssets() {
          return all11([outputPath, args.assets]).apply(
            async ([outputPath2, assets]) => {
              const bucketFiles = [];
              const fileOptions = assets?.fileOptions ?? [
                {
                  files: "**",
                  cacheControl: "max-age=0,no-cache,no-store,must-revalidate"
                },
                {
                  files: ["**/*.js", "**/*.css"],
                  cacheControl: "max-age=31536000,public,immutable"
                }
              ];
              const filesProcessed = [];
              for (const fileOption of fileOptions.reverse()) {
                const files = globSync(fileOption.files, {
                  cwd: path5.resolve(outputPath2),
                  nodir: true,
                  dot: true,
                  ignore: [
                    ".sst/**",
                    ...typeof fileOption.ignore === "string" ? [fileOption.ignore] : fileOption.ignore ?? []
                  ]
                }).filter((file) => !filesProcessed.includes(file));
                bucketFiles.push(
                  ...await Promise.all(
                    files.map(async (file) => {
                      const source = path5.resolve(outputPath2, file);
                      const content = await fs6.promises.readFile(source);
                      const hash = crypto3.createHash("sha256").update(content).digest("hex");
                      return {
                        source,
                        key: file,
                        hash,
                        cacheControl: fileOption.cacheControl,
                        contentType: getContentType(file, "UTF-8")
                      };
                    })
                  )
                );
                filesProcessed.push(...files);
              }
              return new BucketFiles(
                `${name}AssetFiles`,
                {
                  bucketName: bucket.name,
                  files: bucketFiles
                },
                { parent, ignoreChanges: true ? ["*"] : void 0 }
              );
            }
          );
        }
        function getContentType(filename, textEncoding) {
          const ext = filename.endsWith(".well-known/site-association-json") ? ".json" : path5.extname(filename);
          const extensions = {
            [".txt"]: { mime: "text/plain", isText: true },
            [".htm"]: { mime: "text/html", isText: true },
            [".html"]: { mime: "text/html", isText: true },
            [".xhtml"]: { mime: "application/xhtml+xml", isText: true },
            [".css"]: { mime: "text/css", isText: true },
            [".js"]: { mime: "text/javascript", isText: true },
            [".mjs"]: { mime: "text/javascript", isText: true },
            [".apng"]: { mime: "image/apng", isText: false },
            [".avif"]: { mime: "image/avif", isText: false },
            [".gif"]: { mime: "image/gif", isText: false },
            [".jpeg"]: { mime: "image/jpeg", isText: false },
            [".jpg"]: { mime: "image/jpeg", isText: false },
            [".png"]: { mime: "image/png", isText: false },
            [".svg"]: { mime: "image/svg+xml", isText: true },
            [".bmp"]: { mime: "image/bmp", isText: false },
            [".tiff"]: { mime: "image/tiff", isText: false },
            [".webp"]: { mime: "image/webp", isText: false },
            [".ico"]: { mime: "image/vnd.microsoft.icon", isText: false },
            [".eot"]: { mime: "application/vnd.ms-fontobject", isText: false },
            [".ttf"]: { mime: "font/ttf", isText: false },
            [".otf"]: { mime: "font/otf", isText: false },
            [".woff"]: { mime: "font/woff", isText: false },
            [".woff2"]: { mime: "font/woff2", isText: false },
            [".json"]: { mime: "application/json", isText: true },
            [".jsonld"]: { mime: "application/ld+json", isText: true },
            [".xml"]: { mime: "application/xml", isText: true },
            [".pdf"]: { mime: "application/pdf", isText: false },
            [".zip"]: { mime: "application/zip", isText: false },
            [".wasm"]: { mime: "application/wasm", isText: false }
          };
          const extensionData = extensions[ext];
          const mime = extensionData?.mime ?? "application/octet-stream";
          const charset = extensionData?.isText && textEncoding !== "none" ? `;charset=${textEncoding}` : "";
          return `${mime}${charset}`;
        }
        function createDistribution() {
          return new Cdn(
            `${name}Cdn`,
            {
              domain: args.domain,
              wait: false,
              transform: {
                distribution: (distribution2) => ({
                  ...distribution2,
                  comment: `${name} site`,
                  origins: [
                    {
                      originId: "s3",
                      domainName: bucket.nodes.bucket.bucketRegionalDomainName,
                      originPath: "",
                      s3OriginConfig: {
                        originAccessIdentity: access.cloudfrontAccessIdentityPath
                      }
                    }
                  ],
                  defaultRootObject: indexPage,
                  customErrorResponses: args.errorPage ? [
                    {
                      errorCode: 403,
                      responsePagePath: interpolate8`/${args.errorPage}`
                    },
                    {
                      errorCode: 404,
                      responsePagePath: interpolate8`/${args.errorPage}`
                    }
                  ] : [
                    {
                      errorCode: 403,
                      responsePagePath: interpolate8`/${indexPage}`,
                      responseCode: 200
                    },
                    {
                      errorCode: 404,
                      responsePagePath: interpolate8`/${indexPage}`,
                      responseCode: 200
                    }
                  ],
                  defaultCacheBehavior: {
                    targetOriginId: "s3",
                    viewerProtocolPolicy: "redirect-to-https",
                    allowedMethods: ["GET", "HEAD", "OPTIONS"],
                    cachedMethods: ["GET", "HEAD"],
                    compress: true,
                    // CloudFront's managed CachingOptimized policy
                    cachePolicyId: "658327ea-f89d-4fab-a63d-7e88639e58f6"
                  }
                })
              }
            },
            // create distribution after s3 upload finishes
            { dependsOn: bucketFile, parent }
          );
        }
        function createDistributionInvalidation() {
          all11([outputPath, args.invalidation]).apply(
            ([outputPath2, invalidationRaw]) => {
              if (invalidationRaw === false)
                return;
              const invalidation = {
                wait: false,
                paths: "all",
                ...invalidationRaw
              };
              const invalidationPaths = invalidation.paths === "all" ? ["/*"] : invalidation.paths;
              if (invalidationPaths.length === 0)
                return;
              const hash = crypto3.createHash("md5");
              globSync("**", {
                dot: true,
                nodir: true,
                follow: true,
                cwd: path5.resolve(outputPath2)
              }).forEach(
                (filePath) => hash.update(fs6.readFileSync(path5.resolve(outputPath2, filePath)))
              );
              new DistributionInvalidation(
                `${name}Invalidation`,
                {
                  distributionId: distribution.nodes.distribution.id,
                  paths: invalidationPaths,
                  version: hash.digest("hex"),
                  wait: invalidation.wait
                },
                {
                  parent,
                  ignoreChanges: true ? ["*"] : void 0
                }
              );
            }
          );
        }
      }
      /**
       * The URL of the website.
       *
       * If the `domain` is set, this is the URL with the custom domain.
       * Otherwise, it's the autogenerated CloudFront URL.
       */
      get url() {
        return all11([this.cdn.domainUrl, this.cdn.url]).apply(
          ([domainUrl, url]) => domainUrl ?? url
        );
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The Amazon S3 Bucket that stores the assets.
           */
          assets: this.assets
        };
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            url: this.url
          }
        };
      }
    };
  }
});

// .sst/platform/src/components/aws/providers/embeddings-table.ts
import { dynamic as dynamic6 } from "@pulumi/pulumi";
import {
  RDSDataClient,
  ExecuteStatementCommand
} from "@aws-sdk/client-rds-data";
var Provider7, EmbeddingsTable;
var init_embeddings_table = __esm({
  ".sst/platform/src/components/aws/providers/embeddings-table.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_client();
    Provider7 = class {
      async create(inputs) {
        await this.createDatabase(inputs);
        await this.enablePgvectorExtension(inputs);
        await this.enablePgtrgmExtension(inputs);
        await this.createTable(inputs);
        await this.createEmbeddingIndex(inputs);
        await this.createMetadataIndex(inputs);
        return {
          id: inputs.tableName,
          outs: { vectorSize: inputs.vectorSize }
        };
      }
      async update(id, olds, news) {
        await this.createDatabase(news);
        await this.enablePgvectorExtension(news);
        await this.enablePgtrgmExtension(news);
        if (olds.vectorSize !== news.vectorSize) {
          await this.removeTable(news);
        }
        await this.createTable(news);
        await this.createEmbeddingIndex(news);
        await this.createMetadataIndex(news);
        return {
          outs: { vectorSize: news.vectorSize }
        };
      }
      async createDatabase(inputs) {
        const client = useClient(RDSDataClient);
        try {
          await client.send(
            new ExecuteStatementCommand({
              resourceArn: inputs.clusterArn,
              secretArn: inputs.secretArn,
              sql: `create database ${inputs.databaseName}`
            })
          );
        } catch (error) {
          if (error.message.endsWith("SQLState: 42P04"))
            return;
          throw error;
        }
      }
      async enablePgvectorExtension(inputs) {
        const client = useClient(RDSDataClient);
        try {
          await client.send(
            new ExecuteStatementCommand({
              resourceArn: inputs.clusterArn,
              secretArn: inputs.secretArn,
              database: inputs.databaseName,
              sql: `create extension vector;`
            })
          );
        } catch (error) {
          if (error.message.endsWith("SQLState: 42710"))
            return;
          throw error;
        }
      }
      async enablePgtrgmExtension(inputs) {
        const client = useClient(RDSDataClient);
        try {
          await client.send(
            new ExecuteStatementCommand({
              resourceArn: inputs.clusterArn,
              secretArn: inputs.secretArn,
              database: inputs.databaseName,
              sql: `create extension pg_trgm;`
            })
          );
        } catch (error) {
          if (error.message.endsWith("SQLState: 42710"))
            return;
          throw error;
        }
      }
      async createTable(inputs) {
        const client = useClient(RDSDataClient);
        try {
          await client.send(
            new ExecuteStatementCommand({
              resourceArn: inputs.clusterArn,
              secretArn: inputs.secretArn,
              database: inputs.databaseName,
              sql: `create table ${inputs.tableName} (
            id bigserial primary key,
            embedding vector(${inputs.vectorSize}),
            metadata jsonb
          );`
            })
          );
        } catch (error) {
          if (error.message.endsWith("SQLState: 42P07"))
            return;
          throw error;
        }
      }
      async removeTable(inputs) {
        await useClient(RDSDataClient).send(
          new ExecuteStatementCommand({
            resourceArn: inputs.clusterArn,
            secretArn: inputs.secretArn,
            database: inputs.databaseName,
            sql: `drop table if exists ${inputs.tableName};`
          })
        );
      }
      async createEmbeddingIndex(inputs) {
        try {
          await useClient(RDSDataClient).send(
            new ExecuteStatementCommand({
              resourceArn: inputs.clusterArn,
              secretArn: inputs.secretArn,
              database: inputs.databaseName,
              sql: `create index on ${inputs.tableName} using hnsw (embedding vector_cosine_ops);`
            })
          );
        } catch (error) {
          if (error.message.endsWith("SQLState: 42P07"))
            return;
          throw error;
        }
      }
      async createMetadataIndex(inputs) {
        try {
          await useClient(RDSDataClient).send(
            new ExecuteStatementCommand({
              resourceArn: inputs.clusterArn,
              secretArn: inputs.secretArn,
              database: inputs.databaseName,
              sql: `create index on ${inputs.tableName} using gin (metadata);`
            })
          );
        } catch (error) {
          if (error.message.endsWith("SQLState: 42P07"))
            return;
          throw error;
        }
      }
    };
    EmbeddingsTable = class extends dynamic6.Resource {
      constructor(name, args, opts) {
        super(new Provider7(), `${name}.sst.aws.EmbeddingsTable`, args, opts);
      }
    };
  }
});

// .sst/platform/src/components/aws/vector.ts
import path6 from "path";
import {
  all as all12,
  interpolate as interpolate9,
  output as output21
} from "@pulumi/pulumi";
var ModelInfo, Vector;
var init_vector = __esm({
  ".sst/platform/src/components/aws/vector.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    init_postgres();
    init_embeddings_table();
    init_function();
    init_error();
    ModelInfo = {
      "amazon.titan-embed-text-v1": { provider: "bedrock", size: 1536 },
      "amazon.titan-embed-image-v1": { provider: "bedrock", size: 1024 },
      "text-embedding-ada-002": { provider: "openai", size: 1536 },
      "text-embedding-3-small": { provider: "openai", size: 1536 },
      "text-embedding-3-large": { provider: "openai", size: 2e3 }
    };
    Vector = class extends Component {
      ingestHandler;
      retrieveHandler;
      removeHandler;
      constructor(name, args, opts) {
        super("sst:aws:Vector", name, args, opts);
        const parent = this;
        const model = normalizeModel();
        const vectorSize = normalizeVectorSize();
        const openAiApiKey = normalizeOpenAiApiKey();
        const databaseName = normalizeDatabaseName();
        const tableName = normalizeTableName();
        const postgres = createDB();
        createDBTable();
        const ingestHandler = createIngestHandler();
        const retrieveHandler = createRetrieveHandler();
        const removeHandler = createRemoveHandler();
        this.ingestHandler = ingestHandler;
        this.retrieveHandler = retrieveHandler;
        this.removeHandler = removeHandler;
        function normalizeModel() {
          return output21(args?.model).apply((model2) => {
            if (model2 && !ModelInfo[model2])
              throw new Error(`Invalid model: ${model2}`);
            return model2 ?? "amazon.titan-embed-image-v1";
          });
        }
        function normalizeOpenAiApiKey() {
          return all12([model, args?.openAiApiKey]).apply(([model2, openAiApiKey2]) => {
            if (ModelInfo[model2].provider === "openai" && !openAiApiKey2) {
              throw new VisibleError(
                `Please pass in the OPENAI_API_KEY via environment variable to use the ${model2} model. You can get your API keys here: https://platform.openai.com/api-keys`
              );
            }
            return openAiApiKey2;
          });
        }
        function normalizeVectorSize() {
          return model.apply((model2) => ModelInfo[model2].size);
        }
        function normalizeDatabaseName() {
          return define_app_default.stage;
        }
        function normalizeTableName() {
          return "embeddings";
        }
        function createDB() {
          return new Postgres(
            `${name}Database`,
            transform(args?.transform?.postgres, {}),
            { parent }
          );
        }
        function createDBTable() {
          new EmbeddingsTable(
            `${name}Table`,
            {
              clusterArn: postgres.nodes.cluster.arn,
              secretArn: postgres.nodes.cluster.masterUserSecrets[0].secretArn,
              databaseName,
              tableName,
              vectorSize
            },
            { parent, dependsOn: postgres.nodes.instance }
          );
        }
        function createIngestHandler() {
          return new Function(
            `${name}Ingestor`,
            {
              description: `${name} ingest handler`,
              bundle: buildBundlePath(),
              handler: "index.ingest",
              environment: buildHandlerEnvironment(),
              permissions: buildHandlerPermissions()
            },
            { parent }
          );
        }
        function createRetrieveHandler() {
          return new Function(
            `${name}Retriever`,
            {
              description: `${name} retrieve handler`,
              bundle: buildBundlePath(),
              handler: "index.retrieve",
              environment: buildHandlerEnvironment(),
              permissions: buildHandlerPermissions()
            },
            { parent }
          );
        }
        function createRemoveHandler() {
          return new Function(
            `${name}Remover`,
            {
              description: `${name} remove handler`,
              bundle: buildBundlePath(),
              handler: "index.remove",
              environment: buildHandlerEnvironment(),
              permissions: buildHandlerPermissions()
            },
            { parent }
          );
        }
        function buildBundlePath() {
          return path6.join(define_cli_default.paths.platform, "dist", "vector-handler");
        }
        function buildHandlerEnvironment() {
          return all12([model, openAiApiKey]).apply(([model2, openAiApiKey2]) => ({
            CLUSTER_ARN: postgres.nodes.cluster.arn,
            SECRET_ARN: postgres.nodes.cluster.masterUserSecrets[0].secretArn,
            DATABASE_NAME: databaseName,
            TABLE_NAME: tableName,
            MODEL: model2,
            MODEL_PROVIDER: ModelInfo[model2].provider,
            ...openAiApiKey2 ? {
              OPENAI_API_KEY: openAiApiKey2,
              OPENAI_MODEL_DIMENSIONS: ModelInfo[model2].size.toString()
            } : {}
          }));
        }
        function buildHandlerPermissions() {
          return [
            {
              actions: ["bedrock:InvokeModel"],
              resources: [
                interpolate9`arn:aws:bedrock:us-east-1::foundation-model/*`
              ]
            },
            {
              actions: ["secretsmanager:GetSecretValue"],
              resources: [postgres.nodes.cluster.masterUserSecrets[0].secretArn]
            },
            {
              actions: ["rds-data:ExecuteStatement"],
              resources: [postgres.nodes.cluster.arn]
            }
          ];
        }
      }
      /**
       * The name of the ingestor Lambda function.
       */
      get ingestor() {
        return this.ingestHandler.name;
      }
      /**
       * The name of the retriever Lambda function.
       */
      get retriever() {
        return this.retrieveHandler.name;
      }
      /**
       * The name of the remover Lambda function.
       */
      get remover() {
        return this.removeHandler.name;
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            ingestor: this.ingestor,
            retriever: this.retriever,
            remover: this.remover
          }
        };
      }
      /** @internal */
      getSSTAWSPermissions() {
        return [
          {
            actions: ["lambda:InvokeFunction"],
            resources: [
              this.ingestHandler.nodes.function.arn,
              this.retrieveHandler.nodes.function.arn,
              this.removeHandler.nodes.function.arn
            ]
          }
        ];
      }
    };
  }
});

// .sst/platform/src/components/aws/providers/origin-access-identity.ts
import { dynamic as dynamic7 } from "@pulumi/pulumi";
import {
  CloudFrontClient as CloudFrontClient3,
  GetCloudFrontOriginAccessIdentityCommand,
  CreateCloudFrontOriginAccessIdentityCommand,
  DeleteCloudFrontOriginAccessIdentityCommand
} from "@aws-sdk/client-cloudfront";
var Provider8, OriginAccessIdentity;
var init_origin_access_identity = __esm({
  ".sst/platform/src/components/aws/providers/origin-access-identity.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_client();
    Provider8 = class {
      async create(inputs) {
        const client = useClient(CloudFrontClient3);
        const ret = await client.send(
          new CreateCloudFrontOriginAccessIdentityCommand({
            CloudFrontOriginAccessIdentityConfig: {
              CallerReference: Date.now().toString(),
              Comment: "Created by SST"
            }
          })
        );
        const id = ret.CloudFrontOriginAccessIdentity?.Id;
        return { id, outs: {} };
      }
      async delete(id, outs) {
        const client = useClient(CloudFrontClient3);
        const ret = await client.send(
          new GetCloudFrontOriginAccessIdentityCommand({ Id: id })
        );
        await client.send(
          new DeleteCloudFrontOriginAccessIdentityCommand({
            Id: id,
            IfMatch: ret.ETag
          })
        );
      }
    };
    OriginAccessIdentity = class extends dynamic7.Resource {
      constructor(name, args, opts) {
        super(new Provider8(), `${name}.sst.aws.OriginAccessIdentity`, args, opts);
      }
    };
  }
});

// .sst/platform/src/components/aws/ssr-site.ts
import path7 from "path";
import fs7 from "fs";
import { globSync as globSync2 } from "glob";
import crypto4 from "crypto";
import {
  output as output22,
  all as all13,
  interpolate as interpolate10
} from "@pulumi/pulumi";
import * as aws15 from "@pulumi/aws";
function prepare2(args, opts) {
  const sitePath = normalizeSitePath();
  const partition = normalizePartition();
  const region = normalizeRegion();
  checkSupportedRegion();
  return {
    sitePath,
    partition,
    region
  };
  function normalizeSitePath() {
    return output22(args.path).apply((sitePath2) => {
      if (!sitePath2)
        return ".";
      if (!fs7.existsSync(sitePath2)) {
        throw new VisibleError(`No site found at "${path7.resolve(sitePath2)}"`);
      }
      return sitePath2;
    });
  }
  function normalizePartition() {
    return aws15.getPartitionOutput(void 0, { provider: opts?.provider }).partition;
  }
  function normalizeRegion() {
    return aws15.getRegionOutput(void 0, { provider: opts?.provider }).name;
  }
  function checkSupportedRegion() {
    region.apply((region2) => {
      if (![
        "ap-south-2",
        "ap-southeast-4",
        "eu-south-2",
        "eu-central-2",
        "il-central-1",
        "me-central-1"
      ].includes(region2))
        return;
      throw new VisibleError(
        `Region ${region2} is not currently supported. Please use a different region.`
      );
    });
  }
}
function createBucket(parent, name, partition, args) {
  const access = createCloudFrontOriginAccessIdentity();
  const bucket = createS3Bucket();
  return { access, bucket };
  function createCloudFrontOriginAccessIdentity() {
    return new OriginAccessIdentity(
      `${name}OriginAccessIdentity`,
      {},
      { parent }
    );
  }
  function createS3Bucket() {
    return new Bucket(
      `${name}Assets`,
      transform(args.transform?.assets, {
        transform: {
          policy: (policyArgs) => {
            const newPolicy = aws15.iam.getPolicyDocumentOutput({
              statements: [
                {
                  principals: [
                    {
                      type: "AWS",
                      identifiers: [
                        interpolate10`arn:${partition}:iam::cloudfront:user/CloudFront Origin Access Identity ${access.id}`
                      ]
                    }
                  ],
                  actions: ["s3:GetObject"],
                  resources: [interpolate10`${bucket.arn}/*`]
                }
              ]
            }).json;
            policyArgs.policy = output22([policyArgs.policy, newPolicy]).apply(
              ([policy, newPolicy2]) => {
                const policyJson = JSON.parse(policy);
                const newPolicyJson = JSON.parse(newPolicy2);
                policyJson.Statement.push(...newPolicyJson.Statement);
                return JSON.stringify(policyJson);
              }
            );
          }
        }
      }),
      { parent, retainOnDelete: false }
    );
  }
}
function createServersAndDistribution(parent, name, args, outputPath, access, bucket, plan) {
  return all13([outputPath, plan]).apply(([outputPath2, plan2]) => {
    const ssrFunctions = [];
    let singletonCachePolicy;
    const bucketFile = uploadAssets();
    const cfFunctions = createCloudFrontFunctions();
    const edgeFunctions = createEdgeFunctions();
    const origins = buildOrigins();
    const originGroups = buildOriginGroups();
    const distribution = createDistribution();
    allowServerFunctionInvalidateDistribution();
    createDistributionInvalidation();
    createWarmer();
    return {
      distribution,
      ssrFunctions,
      edgeFunctions
    };
    function uploadAssets() {
      return output22(args.assets).apply(async (assets) => {
        const versionedFilesTTL = 31536e3;
        const nonVersionedFilesTTL = 86400;
        const bucketFiles = [];
        for (const origin of Object.values(plan2.origins)) {
          if (!origin.s3)
            continue;
          for (const copy of origin.s3.copy) {
            const fileOptions = [
              // unversioned files
              {
                files: "**",
                ignore: copy.versionedSubDir ? path7.posix.join(copy.versionedSubDir, "**") : void 0,
                cacheControl: assets?.nonVersionedFilesCacheHeader ?? `public,max-age=0,s-maxage=${nonVersionedFilesTTL},stale-while-revalidate=${nonVersionedFilesTTL}`
              },
              // versioned files
              ...copy.versionedSubDir ? [
                {
                  files: path7.posix.join(copy.versionedSubDir, "**"),
                  cacheControl: assets?.versionedFilesCacheHeader ?? `public,max-age=${versionedFilesTTL},immutable`
                }
              ] : [],
              ...assets?.fileOptions ?? []
            ];
            const filesUploaded = [];
            for (const fileOption of fileOptions.reverse()) {
              const files = globSync2(fileOption.files, {
                cwd: path7.resolve(outputPath2, copy.from),
                nodir: true,
                dot: true,
                ignore: fileOption.ignore
              }).filter((file) => !filesUploaded.includes(file));
              bucketFiles.push(
                ...await Promise.all(
                  files.map(async (file) => {
                    const source = path7.resolve(outputPath2, copy.from, file);
                    const content = await fs7.promises.readFile(source);
                    const hash = crypto4.createHash("sha256").update(content).digest("hex");
                    return {
                      source,
                      key: path7.posix.join(copy.to, file),
                      hash,
                      cacheControl: fileOption.cacheControl,
                      contentType: getContentType(file, "UTF-8")
                    };
                  })
                )
              );
              filesUploaded.push(...files);
            }
          }
        }
        return new BucketFiles(
          `${name}AssetFiles`,
          {
            bucketName: bucket.name,
            files: bucketFiles
          },
          { parent, ignoreChanges: true ? ["*"] : void 0 }
        );
      });
    }
    function getContentType(filename, textEncoding) {
      const ext = filename.endsWith(".well-known/site-association-json") ? ".json" : path7.extname(filename);
      const extensions = {
        [".txt"]: { mime: "text/plain", isText: true },
        [".htm"]: { mime: "text/html", isText: true },
        [".html"]: { mime: "text/html", isText: true },
        [".xhtml"]: { mime: "application/xhtml+xml", isText: true },
        [".css"]: { mime: "text/css", isText: true },
        [".js"]: { mime: "text/javascript", isText: true },
        [".mjs"]: { mime: "text/javascript", isText: true },
        [".apng"]: { mime: "image/apng", isText: false },
        [".avif"]: { mime: "image/avif", isText: false },
        [".gif"]: { mime: "image/gif", isText: false },
        [".jpeg"]: { mime: "image/jpeg", isText: false },
        [".jpg"]: { mime: "image/jpeg", isText: false },
        [".png"]: { mime: "image/png", isText: false },
        [".svg"]: { mime: "image/svg+xml", isText: true },
        [".bmp"]: { mime: "image/bmp", isText: false },
        [".tiff"]: { mime: "image/tiff", isText: false },
        [".webp"]: { mime: "image/webp", isText: false },
        [".ico"]: { mime: "image/vnd.microsoft.icon", isText: false },
        [".eot"]: { mime: "application/vnd.ms-fontobject", isText: false },
        [".ttf"]: { mime: "font/ttf", isText: false },
        [".otf"]: { mime: "font/otf", isText: false },
        [".woff"]: { mime: "font/woff", isText: false },
        [".woff2"]: { mime: "font/woff2", isText: false },
        [".json"]: { mime: "application/json", isText: true },
        [".jsonld"]: { mime: "application/ld+json", isText: true },
        [".xml"]: { mime: "application/xml", isText: true },
        [".pdf"]: { mime: "application/pdf", isText: false },
        [".zip"]: { mime: "application/zip", isText: false },
        [".wasm"]: { mime: "application/wasm", isText: false }
      };
      const extensionData = extensions[ext];
      const mime = extensionData?.mime ?? "application/octet-stream";
      const charset = extensionData?.isText && textEncoding !== "none" ? `;charset=${textEncoding}` : "";
      return `${mime}${charset}`;
    }
    function createCloudFrontFunctions() {
      const functions = {};
      Object.entries(plan2.cloudFrontFunctions ?? {}).forEach(
        ([fnName, { injections }]) => {
          functions[fnName] = new aws15.cloudfront.Function(
            `${name}CloudfrontFunction${sanitizeToPascalCase(fnName)}`,
            {
              runtime: "cloudfront-js-1.0",
              code: `
function handler(event) {
  var request = event.request;
  ${injections.join("\n")}
  return request;
}`
            },
            { parent }
          );
        }
      );
      return functions;
    }
    function createEdgeFunctions() {
      const functions = {};
      Object.entries(plan2.edgeFunctions ?? {}).forEach(
        ([fnName, { function: props }]) => {
          output22(args.link).apply((link) => {
            if (link?.length)
              throw new VisibleError(
                `Resource linking is not currently supported when deploying to the edge.`
              );
          });
          const fn = new Function(
            `${name}Edge${sanitizeToPascalCase(fnName)}`,
            {
              runtime: "nodejs20.x",
              timeout: "20 seconds",
              memory: "1024 MB",
              ...props,
              nodejs: {
                format: "esm",
                ...props.nodejs
              },
              environment: output22(args.environment).apply((environment) => ({
                ...environment,
                ...props.environment
              })),
              link: output22(args.link).apply((link) => [
                ...props.link ?? [],
                ...link ?? []
              ]),
              transform: {
                function: (args2) => ({ ...args2, publish: true })
              },
              live: false,
              _ignoreCodeChanges: true
            },
            { provider: useProvider("us-east-1"), parent }
          );
          functions[fnName] = fn;
        }
      );
      return functions;
    }
    function buildOrigins() {
      const origins2 = {};
      Object.entries(plan2.origins ?? {}).forEach(([name2, props]) => {
        if (props.s3) {
          origins2[name2] = buildS3Origin(name2, props.s3);
        } else if (props.server) {
          origins2[name2] = buildServerOrigin(name2, props.server);
        } else if (props.imageOptimization) {
          origins2[name2] = buildImageOptimizationOrigin(
            name2,
            props.imageOptimization
          );
        }
      });
      return origins2;
    }
    function buildOriginGroups() {
      const originGroups2 = {};
      Object.entries(plan2.origins ?? {}).forEach(([name2, props]) => {
        if (props.group) {
          originGroups2[name2] = {
            originId: name2,
            failoverCriteria: {
              statusCodes: props.group.fallbackStatusCodes
            },
            members: [
              { originId: props.group.primaryOriginName },
              { originId: props.group.fallbackOriginName }
            ]
          };
        }
      });
      return originGroups2;
    }
    function buildS3Origin(name2, props) {
      return {
        originId: name2,
        domainName: bucket.nodes.bucket.bucketRegionalDomainName,
        originPath: props.originPath ? `/${props.originPath}` : "",
        s3OriginConfig: {
          originAccessIdentity: interpolate10`origin-access-identity/cloudfront/${access.id}`
        }
      };
    }
    function buildServerOrigin(fnName, props) {
      const fn = new Function(
        `${name}${sanitizeToPascalCase(fnName)}`,
        transform(args.transform?.server, {
          description: `${name} server`,
          runtime: "nodejs20.x",
          timeout: "20 seconds",
          memory: "1024 MB",
          ...props.function,
          nodejs: {
            format: "esm",
            ...props.function.nodejs
          },
          environment: output22(args.environment).apply((environment) => ({
            ...environment,
            ...props.function.environment
          })),
          streaming: props.streaming,
          injections: args.warm ? [useServerFunctionWarmingInjection(props.streaming)] : [],
          link: output22(args.link).apply((link) => [
            ...props.function.link ?? [],
            ...link ?? []
          ]),
          url: true,
          live: false,
          _ignoreCodeChanges: true
        }),
        { parent }
      );
      ssrFunctions.push(fn);
      return {
        originId: fnName,
        domainName: fn.url.apply((url) => new URL(url).host),
        customOriginConfig: {
          httpPort: 80,
          httpsPort: 443,
          originProtocolPolicy: "https-only",
          originReadTimeout: 20,
          originSslProtocols: ["TLSv1.2"]
        }
      };
    }
    function buildImageOptimizationOrigin(fnName, props) {
      const fn = new Function(
        `${name}${sanitizeToPascalCase(fnName)}`,
        {
          timeout: "25 seconds",
          logging: {
            retention: "3 days"
          },
          permissions: [
            {
              actions: ["s3:GetObject"],
              resources: [interpolate10`${bucket.arn}/*`]
            }
          ],
          ...props.function,
          url: true,
          live: false,
          _ignoreCodeChanges: true,
          _skipMetadata: true
        },
        { parent }
      );
      return {
        originId: fnName,
        domainName: fn.url.apply((url) => new URL(url).host),
        customOriginConfig: {
          httpPort: 80,
          httpsPort: 443,
          originProtocolPolicy: "https-only",
          originReadTimeout: 20,
          originSslProtocols: ["TLSv1.2"]
        }
      };
    }
    function buildBehavior(behavior) {
      const edgeFunction = edgeFunctions[behavior.edgeFunction || ""];
      const cfFunction = cfFunctions[behavior.cfFunction || ""];
      if (behavior.cacheType === "static") {
        return {
          targetOriginId: behavior.origin,
          viewerProtocolPolicy: "redirect-to-https",
          allowedMethods: behavior.allowedMethods ?? ["GET", "HEAD", "OPTIONS"],
          cachedMethods: ["GET", "HEAD"],
          compress: true,
          // CloudFront's managed CachingOptimized policy
          cachePolicyId: "658327ea-f89d-4fab-a63d-7e88639e58f6",
          functionAssociations: cfFunction ? [
            {
              eventType: "viewer-request",
              functionArn: cfFunction.arn
            }
          ] : []
        };
      } else if (behavior.cacheType === "server") {
        return {
          targetOriginId: behavior.origin,
          viewerProtocolPolicy: "redirect-to-https",
          allowedMethods: behavior.allowedMethods ?? [
            "DELETE",
            "GET",
            "HEAD",
            "OPTIONS",
            "PATCH",
            "POST",
            "PUT"
          ],
          cachedMethods: ["GET", "HEAD"],
          compress: true,
          cachePolicyId: useServerBehaviorCachePolicy().id,
          // CloudFront's Managed-AllViewerExceptHostHeader policy
          originRequestPolicyId: "b689b0a8-53d0-40ab-baf2-68738e2966ac",
          functionAssociations: cfFunction ? [
            {
              eventType: "viewer-request",
              functionArn: cfFunction.arn
            }
          ] : [],
          lambdaFunctionAssociations: edgeFunction ? [
            {
              includeBody: true,
              eventType: "origin-request",
              lambdaArn: edgeFunction.nodes.function.qualifiedArn
            }
          ] : []
        };
      }
      throw new VisibleError(`Invalid behavior type in the "${name}" site.`);
    }
    function useServerBehaviorCachePolicy() {
      singletonCachePolicy = singletonCachePolicy ?? new aws15.cloudfront.CachePolicy(
        `${name}ServerCachePolicy`,
        {
          comment: "SST server response cache policy",
          defaultTtl: 0,
          maxTtl: 365,
          minTtl: 0,
          parametersInCacheKeyAndForwardedToOrigin: {
            cookiesConfig: {
              cookieBehavior: "none"
            },
            headersConfig: (plan2.serverCachePolicy?.allowedHeaders ?? []).length > 0 ? {
              headerBehavior: "whitelist",
              headers: {
                items: plan2.serverCachePolicy?.allowedHeaders
              }
            } : {
              headerBehavior: "none"
            },
            queryStringsConfig: {
              queryStringBehavior: "all"
            },
            enableAcceptEncodingBrotli: true,
            enableAcceptEncodingGzip: true
          }
        },
        { parent }
      );
      return singletonCachePolicy;
    }
    function useServerFunctionWarmingInjection(streaming) {
      return [
        `if (event.type === "warmer") {`,
        `  const p = new Promise((resolve) => {`,
        `    setTimeout(() => {`,
        `      resolve({ serverId: "server-" + Math.random().toString(36).slice(2, 8) });`,
        `    }, event.delay);`,
        `  });`,
        ...streaming ? [
          `  const response = await p;`,
          `  responseStream.write(JSON.stringify(response));`,
          `  responseStream.end();`,
          `  return;`
        ] : [`  return p;`],
        `}`
      ].join("\n");
    }
    function createDistribution() {
      return new Cdn(
        `${name}Cdn`,
        {
          domain: args.domain,
          wait: false,
          transform: {
            distribution: (distribution2) => ({
              ...distribution2,
              comment: `${name} app`,
              origins: Object.values(origins),
              originGroups: Object.values(originGroups),
              defaultRootObject: "",
              defaultCacheBehavior: buildBehavior(
                plan2.behaviors.find((behavior) => !behavior.pattern)
              ),
              orderedCacheBehaviors: plan2.behaviors.filter((behavior) => behavior.pattern).map((behavior) => ({
                pathPattern: behavior.pattern,
                ...buildBehavior(behavior)
              })),
              customErrorResponses: plan2.errorResponses
            })
          }
        },
        // create distribution after assets are uploaded
        { dependsOn: bucketFile, parent }
      );
    }
    function allowServerFunctionInvalidateDistribution() {
      const policy = new aws15.iam.Policy(
        `${name}InvalidationPolicy`,
        {
          policy: interpolate10`{
            "Version": "2012-10-17",
            "Statement": [
              {
                "Action": "cloudfront:CreateInvalidation",
                "Effect": "Allow",
                "Resource": "${distribution.nodes.distribution.arn}"
              }
            ]
          }`
        },
        { parent }
      );
      for (const fn of [...ssrFunctions, ...Object.values(edgeFunctions)]) {
        fn.nodes.function.name.apply((functionName) => {
          const uniqueHash = crypto4.createHash("md5").update(functionName).digest("hex").substring(0, 4);
          new aws15.iam.RolePolicyAttachment(
            `${name}InvalidationPolicyAttachment${uniqueHash}`,
            {
              policyArn: policy.arn,
              role: fn.nodes.role.name
            },
            { parent }
          );
        });
      }
    }
    function createWarmer() {
      if (!args.warm)
        return;
      if (args.warm && plan2.edge) {
        throw new VisibleError(
          `In the "${name}" Site, warming is currently supported only for the regional mode.`
        );
      }
      if (ssrFunctions.length === 0)
        return;
      const cron = new Cron(
        `${name}Warmer`,
        {
          schedule: "rate(5 minutes)",
          job: {
            description: `${name} warmer`,
            bundle: path7.join(define_cli_default.paths.platform, "dist", "ssr-warmer"),
            runtime: "nodejs20.x",
            handler: "index.handler",
            timeout: "900 seconds",
            memory: "128 MB",
            live: false,
            environment: {
              FUNCTION_NAME: ssrFunctions[0].nodes.function.name,
              CONCURRENCY: output22(args.warm).apply((warm) => warm.toString())
            },
            link: [ssrFunctions[0]],
            _skipMetadata: true
          },
          transform: {
            target: (targetArgs) => {
              targetArgs.retryPolicy = {
                maximumRetryAttempts: 0,
                maximumEventAgeInSeconds: 60
              };
            }
          }
        },
        { parent }
      );
      new aws15.lambda.Invocation(
        `${name}Prewarm`,
        {
          functionName: cron.nodes.job.name,
          triggers: {
            version: Date.now().toString()
          },
          input: JSON.stringify({})
        },
        { parent }
      );
    }
    function createDistributionInvalidation() {
      all13([outputPath2, args.invalidation]).apply(
        ([outputPath3, invalidationRaw]) => {
          if (invalidationRaw === false)
            return;
          const invalidation = {
            wait: false,
            paths: "all",
            ...invalidationRaw
          };
          const s3Origin = Object.values(plan2.origins).find(
            (origin) => origin.s3
          )?.s3;
          if (!s3Origin)
            return;
          const cachedS3Files = s3Origin.copy.filter((file) => file.cached);
          if (cachedS3Files.length === 0)
            return;
          const invalidationPaths = [];
          if (invalidation.paths === "all") {
            invalidationPaths.push("/*");
          } else if (invalidation.paths === "versioned") {
            cachedS3Files.forEach((item) => {
              if (!item.versionedSubDir)
                return;
              invalidationPaths.push(
                path7.posix.join("/", item.to, item.versionedSubDir, "*")
              );
            });
          } else {
            invalidationPaths.push(...invalidation?.paths || []);
          }
          if (invalidationPaths.length === 0)
            return;
          let invalidationBuildId;
          if (plan2.buildId) {
            invalidationBuildId = plan2.buildId;
          } else {
            const hash = crypto4.createHash("md5");
            cachedS3Files.forEach((item) => {
              if (item.versionedSubDir) {
                globSync2("**", {
                  dot: true,
                  nodir: true,
                  follow: true,
                  cwd: path7.resolve(
                    outputPath3,
                    item.from,
                    item.versionedSubDir
                  )
                }).forEach((filePath) => hash.update(filePath));
              }
              if (invalidation.paths !== "versioned") {
                globSync2("**", {
                  ignore: item.versionedSubDir ? [path7.posix.join(item.versionedSubDir, "**")] : void 0,
                  dot: true,
                  nodir: true,
                  follow: true,
                  cwd: path7.resolve(outputPath3, item.from)
                }).forEach(
                  (filePath) => hash.update(
                    fs7.readFileSync(
                      path7.resolve(outputPath3, item.from, filePath)
                    )
                  )
                );
              }
            });
            invalidationBuildId = hash.digest("hex");
          }
          new DistributionInvalidation(
            `${name}Invalidation`,
            {
              distributionId: distribution.nodes.distribution.id,
              paths: invalidationPaths,
              version: invalidationBuildId,
              wait: invalidation.wait
            },
            {
              parent,
              ignoreChanges: true ? ["*"] : void 0
            }
          );
        }
      );
    }
  });
}
function useCloudFrontFunctionHostHeaderInjection() {
  return `request.headers["x-forwarded-host"] = request.headers.host;`;
}
function validatePlan(input) {
  Object.entries(input.origins).forEach(([originName, origin]) => {
    if (!origin.s3 && !origin.server && !origin.imageOptimization && !origin.group) {
      throw new VisibleError(
        `Invalid origin "${originName}" definition. Each origin must be an S3, server, image optimization, or group origin.`
      );
    }
  });
  return input;
}
var init_ssr_site = __esm({
  ".sst/platform/src/components/aws/ssr-site.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_cdn();
    init_function();
    init_distribution_invalidation();
    init_provider();
    init_bucket();
    init_bucket_files();
    init_naming();
    init_component();
    init_error();
    init_cron();
    init_origin_access_identity();
  }
});

// .sst/platform/src/components/aws/providers/cache.ts
import { dynamic as dynamic8 } from "@pulumi/pulumi";
var Provider9, Cache;
var init_cache = __esm({
  ".sst/platform/src/components/aws/providers/cache.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    Provider9 = class {
      async create(inputs) {
        return {
          id: "cache",
          outs: {
            data: inputs.data
          }
        };
      }
      async update(id, olds, news) {
        return {
          outs: {
            data: news.data
          }
        };
      }
    };
    Cache = class extends dynamic8.Resource {
      constructor(name, args, opts) {
        super(new Provider9(), `${name}.sst.aws.Cache`, args, opts);
      }
    };
  }
});

// .sst/platform/src/components/base/base-ssr-site.ts
import path8 from "path";
import fs8 from "fs";
import { execSync as execSync2 } from "child_process";
import { all as all14, output as output23 } from "@pulumi/pulumi";
function buildApp2(name, args, sitePath, buildCommand) {
  return all14([
    sitePath,
    buildCommand ?? args.buildCommand,
    args.link,
    args.environment
  ]).apply(([sitePath2, userCommand, links, environment]) => {
    if (process.env.SKIP)
      return output23(sitePath2);
    if (true)
      return output23(sitePath2);
    const cmd = resolveBuildCommand();
    return runBuild();
    function resolveBuildCommand() {
      if (userCommand)
        return userCommand;
      if (!userCommand) {
        if (!fs8.existsSync(path8.join(sitePath2, "package.json"))) {
          throw new VisibleError(`No package.json found at "${sitePath2}".`);
        }
        const packageJson = JSON.parse(
          fs8.readFileSync(path8.join(sitePath2, "package.json")).toString()
        );
        if (!packageJson.scripts || !packageJson.scripts.build) {
          throw new VisibleError(
            `No "build" script found within package.json in "${sitePath2}".`
          );
        }
      }
      if (fs8.existsSync(path8.join(sitePath2, "yarn.lock")) || fs8.existsSync(path8.join(define_cli_default.paths.root, "yarn.lock")))
        return "yarn run build";
      if (fs8.existsSync(path8.join(sitePath2, "pnpm-lock.yaml")) || fs8.existsSync(path8.join(define_cli_default.paths.root, "pnpm-lock.yaml")))
        return "pnpm run build";
      if (fs8.existsSync(path8.join(sitePath2, "bun.lockb")) || fs8.existsSync(path8.join(define_cli_default.paths.root, "bun.lockb")))
        return "bun run build";
      return "npm run build";
    }
    function runBuild() {
      const linkData = Link.build(links || []);
      const linkEnvs = output23(linkData).apply((linkData2) => {
        const envs = {};
        for (const datum of linkData2) {
          envs[`SST_RESOURCE_${datum.name}`] = JSON.stringify(datum.properties);
        }
        return envs;
      });
      return linkEnvs.apply((linkEnvs2) => {
        console.debug(`Running "${cmd}" script`);
        try {
          execSync2(cmd, {
            cwd: sitePath2,
            stdio: "inherit",
            env: {
              ...process.env,
              ...environment,
              ...linkEnvs2
            }
          });
        } catch (e) {
          throw new VisibleError(`There was a problem building "${name}".`);
        }
        return sitePath2;
      });
    }
  });
}
var init_base_ssr_site = __esm({
  ".sst/platform/src/components/base/base-ssr-site.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_link();
    init_error();
  }
});

// .sst/platform/src/components/aws/solid-start.ts
import fs9 from "fs";
import path9 from "path";
import { all as all15 } from "@pulumi/pulumi";
var SolidStart;
var init_solid_start = __esm({
  ".sst/platform/src/components/aws/solid-start.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_ssr_site();
    init_component();
    init_hint();
    init_cache();
    init_base_ssr_site();
    SolidStart = class extends Component {
      cdn;
      assets;
      server;
      constructor(name, args = {}, opts = {}) {
        super("sst:aws:SolidStart", name, args, opts);
        const parent = this;
        const { sitePath, partition } = prepare2(args, opts);
        const { access, bucket } = createBucket(parent, name, partition, args);
        const outputPath = buildApp2(name, args, sitePath);
        const { buildMeta } = loadBuildOutput();
        const plan = buildPlan();
        const { distribution, ssrFunctions, edgeFunctions } = createServersAndDistribution(
          parent,
          name,
          args,
          outputPath,
          access,
          bucket,
          plan
        );
        const serverFunction = ssrFunctions[0] ?? Object.values(edgeFunctions)[0];
        this.assets = bucket;
        this.cdn = distribution;
        this.server = serverFunction;
        if (false) {
          Hint2.register(
            this.urn,
            all15([this.cdn.domainUrl, this.cdn.url]).apply(
              ([domainUrl, url]) => domainUrl ?? url
            )
          );
        }
        this.registerOutputs({
          _metadata: {
            mode: true ? "placeholder" : "deployed",
            path: sitePath,
            url: distribution.apply((d) => d.domainUrl ?? d.url),
            server: serverFunction.arn
          }
        });
        function loadBuildOutput() {
          const cache = new Cache(
            `${name}BuildOutput`,
            {
              data: true ? loadBuildMetadataPlaceholder() : loadBuildMetadata()
            },
            {
              parent,
              ignoreChanges: true ? ["*"] : void 0
            }
          );
          return {
            buildMeta: cache.data
          };
        }
        function loadBuildMetadata() {
          return outputPath.apply((outputPath2) => {
            const assetsPath = path9.join(".output", "public");
            return {
              assetsPath,
              // create 1 behaviour for each top level asset file/folder
              staticRoutes: fs9.readdirSync(path9.join(outputPath2, assetsPath)).map(
                (item) => fs9.statSync(path9.join(outputPath2, assetsPath, item)).isDirectory() ? `${item}/*` : item
              )
            };
          });
        }
        function loadBuildMetadataPlaceholder() {
          return {
            assetsPath: "placeholder",
            staticRoutes: ["_build/*", "_server/*", "assets/*", "favicon.ico"]
          };
        }
        function buildPlan() {
          return all15([outputPath, buildMeta]).apply(([outputPath2, buildMeta2]) => {
            const serverConfig = {
              description: "Server handler for Solid",
              handler: path9.join(outputPath2, ".output", "server", "index.handler")
            };
            return validatePlan({
              edge: false,
              cloudFrontFunctions: {
                serverCfFunction: {
                  injections: [useCloudFrontFunctionHostHeaderInjection()]
                }
              },
              origins: {
                server: {
                  server: {
                    function: serverConfig
                  }
                },
                s3: {
                  s3: {
                    copy: [
                      {
                        from: buildMeta2.assetsPath,
                        to: "",
                        cached: true
                      }
                    ]
                  }
                }
              },
              behaviors: [
                {
                  cacheType: "server",
                  cfFunction: "serverCfFunction",
                  origin: "server"
                },
                {
                  pattern: "_server/",
                  cacheType: "server",
                  cfFunction: "serverCfFunction",
                  origin: "server"
                },
                ...buildMeta2.staticRoutes.map(
                  (route) => ({
                    cacheType: "static",
                    pattern: route,
                    origin: "s3"
                  })
                )
              ]
            });
          });
        }
      }
      /**
       * The URL of the SolidStart app.
       *
       * If the `domain` is set, this is the URL with the custom domain.
       * Otherwise, it's the autogenerated CloudFront URL.
       */
      get url() {
        return all15([this.cdn.domainUrl, this.cdn.url]).apply(
          ([domainUrl, url]) => domainUrl ?? url
        );
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The AWS Lambda server function that renders the site.
           */
          server: this.server,
          /**
           * The Amazon S3 Bucket that stores the assets.
           */
          assets: this.assets
        };
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            url: this.url
          }
        };
      }
    };
  }
});

// .sst/platform/src/components/aws/astro.ts
import fs10 from "fs";
import path10 from "path";
import { all as all16 } from "@pulumi/pulumi";
function useCloudFrontRoutingInjection(buildMetadata) {
  const tree = buildRouteTree(buildMetadata.routes);
  const flatTree = flattenRouteTree(tree);
  const stringifiedTree = stringifyFlattenedRouteTree(flatTree);
  return `
    var routeData = ${stringifiedTree};
    var findFirstMatch = (matches) => Array.isArray(matches[0]) ? findFirstMatch(matches[0]) : matches;
    var findMatches = (path, routeData) => routeData.map((route) => route[0].test(path) ? Array.isArray(route[1]) ? findMatches(path, route[1]) : route : null).filter(route => route !== null && route.length > 0);
    var matchedRoute = findFirstMatch(findMatches(request.uri, routeData));
    if (matchedRoute[0]) {
      if (!matchedRoute[1] && !/^.*\\.[^\\/]+$/.test(request.uri)) {
        ${buildMetadata.pageResolution === "file" ? `request.uri = request.uri === "/" ? "/index.html" : request.uri.replace(/\\/?$/, ".html");` : `request.uri = request.uri.replace(/\\/?$/, "/index.html");`}
      } else if (matchedRoute[1] === 2) {
        var redirectPath = matchedRoute[2];
        matchedRoute[0].exec(request.uri).forEach((match, index) => {
          redirectPath = redirectPath.replace(\`\\\${\${index}}\`, match);
        });
        return {
          statusCode: matchedRoute[3] || 308,
          headers: { location: { value: redirectPath } },
        };
      }
    }`;
}
function buildRouteTree(routes, level = 0) {
  const routeTree = routes.reduce(
    (tree, route) => {
      const routePatternWithoutCaptureGroups = route.pattern.replace(/\((?:\?:)?(.*?[^\\])\)/g, (_, content) => content.trim()).replace(/\/\^/g, "").replace(/\$\//g, "");
      const routeParts = routePatternWithoutCaptureGroups.split(/(?=\\\/)/g).filter((part) => part !== "/^" && part !== "/$/");
      tree.branches[routeParts[level]] = tree.branches[routeParts[level]] || {
        branches: {},
        nodes: []
      };
      tree.branches[routeParts[level]].nodes.push(route);
      return tree;
    },
    { branches: {}, nodes: [] }
  );
  for (const [key, branch] of Object.entries(routeTree.branches)) {
    if (!branch.nodes.some((node) => node.prerender || node.type === "redirect")) {
      delete routeTree.branches[key];
    } else if (branch.nodes.length > 1) {
      const deduplicatedNodes = branch.nodes.filter(
        (node, index, arr) => arr.findIndex((n) => n.pattern === node.pattern) === index
      );
      routeTree.branches[key] = buildRouteTree(deduplicatedNodes, level + 1);
      branch.nodes = [];
    }
  }
  return routeTree;
}
function flattenRouteTree(tree, parentKey = "") {
  const flatTree = [];
  for (const [key, branch] of Object.entries(tree.branches)) {
    if (branch.nodes.length === 1) {
      const node = branch.nodes[0];
      if (node.type === "page") {
        flatTree.push([node.pattern]);
      }
      if (node.type === "endpoint") {
        flatTree.push([node.pattern, 1]);
      } else if (node.type === "redirect") {
        flatTree.push([
          node.pattern,
          2,
          node.redirectPath,
          node.redirectStatus
        ]);
      }
    } else {
      const flatKey = parentKey + key;
      flatTree.push([flatKey, flattenRouteTree(branch, flatKey)]);
    }
  }
  return flatTree;
}
function stringifyFlattenedRouteTree(tree) {
  return `[${tree.map((tuple) => {
    if (Array.isArray(tuple[1])) {
      return `[/^${tuple[0]}/,${stringifyFlattenedRouteTree(tuple[1])}]`;
    }
    if (typeof tuple[1] === "undefined") {
      return `[${tuple[0]}]`;
    } else if (tuple[1] === 1) {
      return `[${tuple[0]},1]`;
    }
    return `[${tuple[0]},2,"${tuple[2]}"${tuple[3] ? `,${tuple[3]}` : ""}]`;
  }).join(",")}]`;
}
var BUILD_META_FILE_NAME, Astro;
var init_astro = __esm({
  ".sst/platform/src/components/aws/astro.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_ssr_site();
    init_component();
    init_hint();
    init_cache();
    init_base_ssr_site();
    BUILD_META_FILE_NAME = "sst.buildMeta.json";
    Astro = class extends Component {
      cdn;
      assets;
      server;
      constructor(name, args = {}, opts = {}) {
        super("sst:aws:Astro", name, args, opts);
        const parent = this;
        const { sitePath, partition, region } = prepare2(args, opts);
        const { access, bucket } = createBucket(parent, name, partition, args);
        const outputPath = buildApp2(name, args, sitePath);
        const { buildMeta } = loadBuildOutput();
        const plan = buildPlan();
        const { distribution, ssrFunctions, edgeFunctions } = createServersAndDistribution(
          parent,
          name,
          args,
          outputPath,
          access,
          bucket,
          plan
        );
        const serverFunction = ssrFunctions[0] ?? Object.values(edgeFunctions)[0];
        this.assets = bucket;
        this.cdn = distribution;
        this.server = serverFunction;
        if (false) {
          Hint3.register(
            this.urn,
            all16([this.cdn.domainUrl, this.cdn.url]).apply(
              ([domainUrl, url]) => domainUrl ?? url
            )
          );
        }
        this.registerOutputs({
          _metadata: {
            mode: true ? "placeholder" : "deployed",
            path: sitePath,
            url: distribution.apply((d) => d.domainUrl ?? d.url),
            edge: plan.edge,
            server: serverFunction.arn
          }
        });
        function loadBuildOutput() {
          const cache = new Cache(
            `${name}BuildOutput`,
            {
              data: true ? loadBuildMetadataPlaceholder() : loadBuildMetadata()
            },
            {
              parent,
              ignoreChanges: true ? ["*"] : void 0
            }
          );
          return {
            buildMeta: cache.data
          };
        }
        function loadBuildMetadata() {
          return outputPath.apply((outputPath2) => {
            const filePath = path10.join(outputPath2, "dist", BUILD_META_FILE_NAME);
            if (!fs10.existsSync(filePath)) {
              throw new Error(
                `Could not find build meta file at ${filePath}. Update your 'astro-sst' package version and rebuild your Astro site.`
              );
            }
            return JSON.parse(
              fs10.readFileSync(filePath, "utf-8")
            );
          });
        }
        function loadBuildMetadataPlaceholder() {
          return {
            deploymentStrategy: "regional",
            responseMode: "buffer",
            outputMode: "server",
            pageResolution: "directory",
            trailingSlash: "ignore",
            serverBuildOutputFile: "dist/server/entry.mjs",
            clientBuildOutputDir: "dist/client",
            clientBuildVersionedSubDir: "_astro",
            routes: [
              {
                route: "/_image",
                type: "endpoint",
                pattern: "/^\\/_image$/",
                prerender: false
              },
              {
                route: "/",
                type: "page",
                pattern: "/^\\/$/",
                prerender: false
              }
            ],
            serverRoutes: []
          };
        }
        function buildPlan() {
          return all16([outputPath, buildMeta]).apply(([outputPath2, buildMeta2]) => {
            const isStatic = buildMeta2.outputMode === "static";
            const edge = buildMeta2.deploymentStrategy === "edge";
            const serverConfig = {
              handler: path10.join(outputPath2, "dist", "server", "entry.handler")
            };
            const plan2 = {
              edge,
              cloudFrontFunctions: {
                serverCfFunction: {
                  injections: [
                    useCloudFrontFunctionHostHeaderInjection(),
                    useCloudFrontRoutingInjection(buildMeta2)
                  ]
                },
                serverCfFunctionHostOnly: {
                  injections: [useCloudFrontFunctionHostHeaderInjection()]
                }
              },
              origins: {
                staticsServer: {
                  s3: {
                    copy: [
                      {
                        from: buildMeta2.clientBuildOutputDir,
                        to: "",
                        cached: true,
                        versionedSubDir: buildMeta2.clientBuildVersionedSubDir
                      }
                    ]
                  }
                }
              },
              behaviors: [],
              errorResponses: []
            };
            if (edge) {
              plan2.edgeFunctions = {
                edgeServer: {
                  function: serverConfig
                }
              };
              plan2.behaviors.push(
                {
                  cacheType: "server",
                  cfFunction: "serverCfFunction",
                  edgeFunction: "edgeServer",
                  origin: "staticsServer"
                },
                ...fs10.readdirSync(
                  path10.join(outputPath2, buildMeta2.clientBuildOutputDir)
                ).map(
                  (item) => ({
                    cacheType: "static",
                    pattern: fs10.statSync(
                      path10.join(
                        outputPath2,
                        buildMeta2.clientBuildOutputDir,
                        item
                      )
                    ).isDirectory() ? `${item}/*` : item,
                    origin: "staticsServer"
                  })
                )
              );
            } else {
              if (isStatic) {
                plan2.behaviors.push({
                  cacheType: "static",
                  cfFunction: "serverCfFunction",
                  origin: "staticsServer"
                });
              } else {
                plan2.cloudFrontFunctions.imageServiceCfFunction = {
                  injections: [useCloudFrontFunctionHostHeaderInjection()]
                };
                plan2.origins.regionalServer = {
                  server: {
                    function: serverConfig,
                    streaming: buildMeta2.responseMode === "stream"
                  }
                };
                plan2.origins.fallthroughServer = {
                  group: {
                    primaryOriginName: "staticsServer",
                    fallbackOriginName: "regionalServer",
                    fallbackStatusCodes: [403, 404]
                  }
                };
                plan2.behaviors.push(
                  {
                    cacheType: "server",
                    cfFunction: "serverCfFunction",
                    origin: "fallthroughServer",
                    allowedMethods: ["GET", "HEAD", "OPTIONS"]
                  },
                  {
                    cacheType: "static",
                    pattern: `${buildMeta2.clientBuildVersionedSubDir}/*`,
                    origin: "staticsServer"
                  },
                  {
                    cacheType: "server",
                    pattern: "_image",
                    cfFunction: "imageServiceCfFunction",
                    origin: "regionalServer",
                    allowedMethods: ["GET", "HEAD", "OPTIONS"]
                  },
                  ...buildMeta2.serverRoutes?.map(
                    (route) => ({
                      cacheType: "server",
                      cfFunction: "serverCfFunctionHostOnly",
                      pattern: route,
                      origin: "regionalServer"
                    })
                  )
                );
              }
              buildMeta2.routes.filter(
                ({ type, route }) => type === "page" && /^\/\d{3}\/?$/.test(route)
              ).forEach(({ route, prerender }) => {
                switch (route) {
                  case "/404":
                  case "/404/":
                    plan2.errorResponses?.push({
                      errorCode: 404,
                      responsePagePath: prerender ? "/404.html" : "/404",
                      responseCode: 404
                    });
                    if (isStatic) {
                      plan2.errorResponses?.push({
                        errorCode: 403,
                        responsePagePath: "/404.html",
                        responseCode: 404
                      });
                    }
                    break;
                  case "/500":
                  case "/500/":
                    plan2.errorResponses?.push({
                      errorCode: 500,
                      responsePagePath: prerender ? "/500.html" : "/500",
                      responseCode: 500
                    });
                    break;
                }
              });
            }
            return validatePlan(plan2);
          });
        }
      }
      /**
       * The URL of the Astro site.
       *
       * If the `domain` is set, this is the URL with the custom domain.
       * Otherwise, it's the autogenerated CloudFront URL.
       */
      get url() {
        return all16([this.cdn.domainUrl, this.cdn.url]).apply(
          ([domainUrl, url]) => domainUrl ?? url
        );
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The AWS Lambda server function that renders the site.
           */
          server: this.server,
          /**
           * The Amazon S3 Bucket that stores the assets.
           */
          assets: this.assets
        };
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            url: this.url
          }
        };
      }
    };
  }
});

// .sst/platform/src/components/aws/nextjs.ts
import fs11 from "fs";
import path11 from "path";
import crypto5 from "crypto";
import { globSync as globSync3 } from "glob";
import { all as all17 } from "@pulumi/pulumi";
import * as aws16 from "@pulumi/aws";
var DEFAULT_OPEN_NEXT_VERSION, DEFAULT_CACHE_POLICY_ALLOWED_HEADERS, Nextjs;
var init_nextjs = __esm({
  ".sst/platform/src/components/aws/nextjs.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_function();
    init_ssr_site();
    init_component();
    init_hint();
    init_error();
    init_cache();
    init_queue();
    init_base_ssr_site();
    DEFAULT_OPEN_NEXT_VERSION = "3.0.0-rc.11";
    DEFAULT_CACHE_POLICY_ALLOWED_HEADERS = [
      "accept",
      "x-prerender-revalidate",
      "x-prerender-bypass",
      "rsc",
      "next-router-prefetch",
      "next-router-state-tree",
      "next-url"
    ];
    Nextjs = class extends Component {
      cdn;
      assets;
      server;
      constructor(name, args = {}, opts = {}) {
        super("sst:aws:Nextjs", name, args, opts);
        let _routes;
        const parent = this;
        const buildCommand = normalizeBuildCommand();
        const { sitePath, partition, region } = prepare2(args, opts);
        const { access, bucket } = createBucket(parent, name, partition, args);
        const outputPath = buildApp2(name, args, sitePath, buildCommand);
        const {
          openNextOutput,
          buildId,
          routesManifest,
          appPathRoutesManifest,
          appPathsManifest,
          pagesManifest,
          prerenderManifest
        } = loadBuildOutput();
        const revalidationQueue = createRevalidationQueue();
        const revalidationTable = createRevalidationTable();
        createRevalidationTableSeeder();
        const plan = buildPlan();
        removeSourcemaps();
        const { distribution, ssrFunctions, edgeFunctions } = createServersAndDistribution(
          parent,
          name,
          args,
          outputPath,
          access,
          bucket,
          plan
        );
        const serverFunction = ssrFunctions[0] ?? Object.values(edgeFunctions)[0];
        handleMissingSourcemap();
        this.assets = bucket;
        this.cdn = distribution;
        this.server = serverFunction;
        if (false) {
          Hint4.register(
            this.urn,
            all17([this.cdn.domainUrl, this.cdn.url]).apply(
              ([domainUrl, url]) => domainUrl ?? url
            )
          );
        }
        this.registerOutputs({
          _metadata: {
            mode: true ? "placeholder" : "deployed",
            path: sitePath,
            url: distribution.apply((d) => d.domainUrl ?? d.url),
            edge: plan.edge,
            server: serverFunction.arn
          }
        });
        function normalizeBuildCommand() {
          return all17([args?.buildCommand, args?.openNextVersion]).apply(
            ([buildCommand2, openNextVersion]) => buildCommand2 ?? [
              "npx",
              "--yes",
              `open-next@${openNextVersion ?? DEFAULT_OPEN_NEXT_VERSION}`,
              "build"
            ].join(" ")
          );
        }
        function loadBuildOutput() {
          const cache = new Cache(
            `${name}OpenNextOutput`,
            {
              data: true ? loadOpenNextOutputPlaceholder() : loadOpenNextOutput()
            },
            {
              parent,
              ignoreChanges: true ? ["*"] : void 0
            }
          );
          return {
            openNextOutput: cache.data,
            buildId: loadBuildId(),
            routesManifest: loadRoutesManifest(),
            appPathRoutesManifest: loadAppPathRoutesManifest(),
            appPathsManifest: loadAppPathsManifest(),
            pagesManifest: loadPagesManifest(),
            prerenderManifest: loadPrerenderManifest()
          };
        }
        function loadOpenNextOutput() {
          return outputPath.apply((outputPath2) => {
            const openNextOutputPath = path11.join(
              outputPath2,
              ".open-next",
              "open-next.output.json"
            );
            if (!fs11.existsSync(openNextOutputPath)) {
              throw new VisibleError(
                `Failed to load open-next.output.json from "${openNextOutputPath}".`
              );
            }
            const content = fs11.readFileSync(openNextOutputPath).toString();
            const json = JSON.parse(content);
            if (json.additionalProps?.initializationFunction) {
              json.additionalProps.initializationFunction = {
                handler: "index.handler",
                bundle: ".open-next/dynamodb-provider"
              };
            }
            return json;
          });
        }
        function loadOpenNextOutputPlaceholder() {
          return outputPath.apply((outputPath2) => ({
            edgeFunctions: {},
            origins: {
              s3: {
                type: "s3",
                originPath: "_assets",
                // do not upload anything
                copy: []
              },
              imageOptimizer: {
                type: "function",
                handler: "index.handler",
                bundle: path11.join(
                  outputPath2,
                  ".open-next/image-optimization-function"
                ),
                streaming: false
              },
              default: {
                type: "function",
                handler: "index.handler",
                bundle: path11.join(
                  outputPath2,
                  ".open-next/server-functions/default"
                ),
                streaming: false
              }
            },
            behaviors: [
              { pattern: "_next/image*", origin: "imageOptimizer" },
              { pattern: "_next/data/*", origin: "default" },
              { pattern: "*", origin: "default" },
              { pattern: "BUILD_ID", origin: "s3" },
              { pattern: "_next/*", origin: "s3" },
              { pattern: "favicon.ico", origin: "s3" },
              { pattern: "next.svg", origin: "s3" },
              { pattern: "vercel.svg", origin: "s3" }
            ],
            additionalProps: {
              // skip creating revalidation queue
              disableIncrementalCache: true,
              // skip creating revalidation table
              disableTagCache: true
            }
          }));
        }
        function loadBuildId() {
          return outputPath.apply((outputPath2) => {
            if (true)
              return "mock-build-id";
            try {
              return fs11.readFileSync(path11.join(outputPath2, ".next/BUILD_ID")).toString();
            } catch (e) {
              console.error(e);
              throw new VisibleError(
                `Failed to read build id from ".next/BUILD_ID" for the "${name}" site.`
              );
            }
          });
        }
        function loadRoutesManifest() {
          return outputPath.apply((outputPath2) => {
            if (true)
              return { dynamicRoutes: [], staticRoutes: [] };
            try {
              const content = fs11.readFileSync(path11.join(outputPath2, ".next/routes-manifest.json")).toString();
              return JSON.parse(content);
            } catch (e) {
              console.error(e);
              throw new VisibleError(
                `Failed to read routes data from ".next/routes-manifest.json" for the "${name}" site.`
              );
            }
          });
        }
        function loadAppPathRoutesManifest() {
          return outputPath.apply((outputPath2) => {
            if (true)
              return {};
            try {
              const content = fs11.readFileSync(
                path11.join(outputPath2, ".next/app-path-routes-manifest.json")
              ).toString();
              return JSON.parse(content);
            } catch (e) {
              return {};
            }
          });
        }
        function loadAppPathsManifest() {
          return outputPath.apply((outputPath2) => {
            if (true)
              return {};
            try {
              const content = fs11.readFileSync(
                path11.join(outputPath2, ".next/server/app-paths-manifest.json")
              ).toString();
              return JSON.parse(content);
            } catch (e) {
              return {};
            }
          });
        }
        function loadPagesManifest() {
          return outputPath.apply((outputPath2) => {
            if (true)
              return {};
            try {
              const content = fs11.readFileSync(
                path11.join(outputPath2, ".next/server/pages-manifest.json")
              ).toString();
              return JSON.parse(content);
            } catch (e) {
              return {};
            }
          });
        }
        function loadPrerenderManifest() {
          return outputPath.apply((outputPath2) => {
            if (true)
              return { version: 0, routes: {} };
            try {
              const content = fs11.readFileSync(
                path11.join(outputPath2, ".next/prerender-manifest.json")
              ).toString();
              return JSON.parse(content);
            } catch (e) {
              console.debug("Failed to load prerender-manifest.json", e);
            }
          });
        }
        function buildPlan() {
          return all17([
            [region, outputPath],
            buildId,
            openNextOutput,
            args?.imageOptimization,
            [bucket.arn, bucket.name],
            revalidationQueue.apply((q) => ({ url: q?.url, arn: q?.arn })),
            revalidationTable.apply((t) => ({ name: t?.name, arn: t?.arn }))
          ]).apply(
            ([
              [region2, outputPath2],
              buildId2,
              openNextOutput2,
              imageOptimization,
              [bucketArn, bucketName],
              { url: revalidationQueueUrl, arn: revalidationQueueArn },
              { name: revalidationTableName, arn: revalidationTableArn }
            ]) => {
              const defaultFunctionProps = {
                runtime: "nodejs20.x",
                environment: {
                  CACHE_BUCKET_NAME: bucketName,
                  CACHE_BUCKET_KEY_PREFIX: "_cache",
                  CACHE_BUCKET_REGION: region2,
                  ...revalidationQueueUrl && {
                    REVALIDATION_QUEUE_URL: revalidationQueueUrl,
                    REVALIDATION_QUEUE_REGION: region2
                  },
                  ...revalidationTableName && {
                    CACHE_DYNAMO_TABLE: revalidationTableName
                  }
                },
                permissions: [
                  // access to the cache data
                  {
                    actions: ["s3:GetObject", "s3:PutObject"],
                    resources: [`${bucketArn}/*`]
                  },
                  ...revalidationQueueArn ? [
                    {
                      actions: [
                        "sqs:SendMessage",
                        "sqs:GetQueueAttributes",
                        "sqs:GetQueueUrl"
                      ],
                      resources: [revalidationQueueArn]
                    }
                  ] : [],
                  ...revalidationTableArn ? [
                    {
                      actions: [
                        "dynamodb:BatchGetItem",
                        "dynamodb:GetRecords",
                        "dynamodb:GetShardIterator",
                        "dynamodb:Query",
                        "dynamodb:GetItem",
                        "dynamodb:Scan",
                        "dynamodb:ConditionCheckItem",
                        "dynamodb:BatchWriteItem",
                        "dynamodb:PutItem",
                        "dynamodb:UpdateItem",
                        "dynamodb:DeleteItem",
                        "dynamodb:DescribeTable"
                      ],
                      resources: [
                        revalidationTableArn,
                        `${revalidationTableArn}/*`
                      ]
                    }
                  ] : []
                ]
              };
              return validatePlan({
                edge: false,
                cloudFrontFunctions: {
                  serverCfFunction: {
                    injections: [
                      useCloudFrontFunctionHostHeaderInjection(),
                      useCloudFrontFunctionPrerenderBypassHeaderInjection()
                    ]
                  }
                },
                edgeFunctions: Object.fromEntries(
                  Object.entries(openNextOutput2.edgeFunctions).map(
                    ([key, value]) => [
                      key,
                      {
                        function: {
                          description: `${name} server`,
                          bundle: path11.join(outputPath2, value.bundle),
                          handler: value.handler,
                          ...defaultFunctionProps
                        }
                      }
                    ]
                  )
                ),
                origins: Object.fromEntries(
                  Object.entries(openNextOutput2.origins).map(([key, value]) => {
                    if (key === "s3") {
                      value = value;
                      return [
                        key,
                        {
                          s3: {
                            originPath: value.originPath,
                            copy: value.copy
                          }
                        }
                      ];
                    }
                    if (key === "imageOptimizer") {
                      value = value;
                      return [
                        key,
                        {
                          imageOptimization: {
                            function: {
                              description: `${name} image optimizer`,
                              handler: value.handler,
                              bundle: path11.join(outputPath2, value.bundle),
                              runtime: "nodejs20.x",
                              architecture: "arm64",
                              environment: {
                                BUCKET_NAME: bucketName,
                                BUCKET_KEY_PREFIX: "_assets"
                              },
                              memory: imageOptimization?.memory ?? "1536 MB"
                            }
                          }
                        }
                      ];
                    }
                    value = value;
                    return [
                      key,
                      {
                        server: {
                          function: {
                            description: `${name} server`,
                            bundle: path11.join(outputPath2, value.bundle),
                            handler: value.handler,
                            ...defaultFunctionProps
                          },
                          streaming: value.streaming
                        }
                      }
                    ];
                  })
                ),
                behaviors: openNextOutput2.behaviors.map((behavior) => {
                  return {
                    pattern: behavior.pattern === "*" ? void 0 : behavior.pattern,
                    origin: behavior.origin ?? "",
                    cacheType: behavior.origin === "s3" ? "static" : "server",
                    cfFunction: "serverCfFunction",
                    edgeFunction: behavior.edgeFunction ?? ""
                  };
                }),
                serverCachePolicy: {
                  allowedHeaders: DEFAULT_CACHE_POLICY_ALLOWED_HEADERS
                },
                buildId: buildId2
              });
            }
          );
        }
        function createRevalidationQueue() {
          return all17([outputPath, openNextOutput]).apply(
            ([outputPath2, openNextOutput2]) => {
              if (openNextOutput2.additionalProps?.disableIncrementalCache)
                return;
              const revalidationFunction = openNextOutput2.additionalProps?.revalidationFunction;
              if (!revalidationFunction)
                return;
              const queue = new Queue(
                `${name}RevalidationQueue`,
                {
                  fifo: true,
                  transform: {
                    queue: (args2) => {
                      args2.receiveWaitTimeSeconds = 20;
                    }
                  }
                },
                { parent }
              );
              queue.subscribe(
                {
                  description: `${name} ISR revalidator`,
                  handler: revalidationFunction.handler,
                  bundle: path11.join(outputPath2, revalidationFunction.bundle),
                  runtime: "nodejs20.x",
                  timeout: "30 seconds",
                  permissions: [
                    {
                      actions: [
                        "sqs:ChangeMessageVisibility",
                        "sqs:DeleteMessage",
                        "sqs:GetQueueAttributes",
                        "sqs:GetQueueUrl",
                        "sqs:ReceiveMessage"
                      ],
                      resources: [queue.arn]
                    }
                  ],
                  live: false,
                  _ignoreCodeChanges: true
                },
                {
                  transform: {
                    eventSourceMapping: (args2) => {
                      args2.batchSize = 5;
                    }
                  }
                }
              );
              return queue;
            }
          );
        }
        function createRevalidationTable() {
          return openNextOutput.apply((openNextOutput2) => {
            if (openNextOutput2.additionalProps?.disableTagCache)
              return;
            return new aws16.dynamodb.Table(
              `${name}RevalidationTable`,
              {
                attributes: [
                  { name: "tag", type: "S" },
                  { name: "path", type: "S" },
                  { name: "revalidatedAt", type: "N" }
                ],
                hashKey: "tag",
                rangeKey: "path",
                pointInTimeRecovery: {
                  enabled: true
                },
                billingMode: "PAY_PER_REQUEST",
                globalSecondaryIndexes: [
                  {
                    name: "revalidate",
                    hashKey: "path",
                    rangeKey: "revalidatedAt",
                    projectionType: "ALL"
                  }
                ]
              },
              { parent }
            );
          });
        }
        function createRevalidationTableSeeder() {
          return all17([
            revalidationTable,
            outputPath,
            openNextOutput,
            prerenderManifest
          ]).apply(
            ([
              revalidationTable2,
              outputPath2,
              openNextOutput2,
              prerenderManifest2
            ]) => {
              if (openNextOutput2.additionalProps?.disableTagCache)
                return;
              if (!openNextOutput2.additionalProps?.initializationFunction)
                return;
              const prerenderedRouteCount = Object.keys(
                prerenderManifest2?.routes ?? {}
              ).length;
              const seedFn = new Function(
                `${name}RevalidationSeeder`,
                {
                  description: `${name} ISR revalidation data seeder`,
                  handler: openNextOutput2.additionalProps.initializationFunction.handler,
                  bundle: path11.join(
                    outputPath2,
                    openNextOutput2.additionalProps.initializationFunction.bundle
                  ),
                  runtime: "nodejs20.x",
                  timeout: "900 seconds",
                  memory: `${Math.min(
                    10240,
                    Math.max(128, Math.ceil(prerenderedRouteCount / 4e3) * 128)
                  )} MB`,
                  permissions: [
                    {
                      actions: [
                        "dynamodb:BatchWriteItem",
                        "dynamodb:PutItem",
                        "dynamodb:DescribeTable"
                      ],
                      resources: [revalidationTable2.arn]
                    }
                  ],
                  environment: {
                    CACHE_DYNAMO_TABLE: revalidationTable2.name
                  },
                  live: false,
                  _ignoreCodeChanges: true,
                  _skipMetadata: true
                },
                { parent }
              );
              new aws16.lambda.Invocation(
                `${name}RevalidationSeed`,
                {
                  functionName: seedFn.nodes.function.name,
                  triggers: {
                    version: Date.now().toString()
                  },
                  input: JSON.stringify({
                    RequestType: "Create"
                  })
                },
                { parent, ignoreChanges: true ? ["*"] : void 0 }
              );
            }
          );
        }
        function removeSourcemaps() {
          return;
          return outputPath.apply((outputPath2) => {
            const files = globSync3("**/*.js.map", {
              cwd: path11.join(outputPath2, ".open-next", "server-function"),
              nodir: true,
              dot: true
            });
            for (const file of files) {
              fs11.rmSync(
                path11.join(outputPath2, ".open-next", "server-function", file)
              );
            }
          });
        }
        function useRoutes() {
          if (_routes)
            return _routes;
          _routes = all17([
            outputPath,
            routesManifest,
            appPathRoutesManifest,
            appPathsManifest,
            pagesManifest
          ]).apply(
            ([
              outputPath2,
              routesManifest2,
              appPathRoutesManifest2,
              appPathsManifest2,
              pagesManifest2
            ]) => {
              const dynamicAndStaticRoutes = [
                ...routesManifest2.dynamicRoutes,
                ...routesManifest2.staticRoutes
              ].map(({ page, regex }) => {
                const cwRoute = buildCloudWatchRouteName(page);
                const cwHash = buildCloudWatchRouteHash(page);
                const sourcemapPath = getSourcemapForAppRoute(page) || getSourcemapForPagesRoute(page);
                return {
                  route: page,
                  regexMatch: regex,
                  logGroupPath: `/${cwHash}${cwRoute}`,
                  sourcemapPath,
                  sourcemapKey: cwHash
                };
              });
              const appRoutes = Object.values(appPathRoutesManifest2).filter(
                (page) => routesManifest2.dynamicRoutes.every(
                  (route) => route.page !== page
                ) && routesManifest2.staticRoutes.every(
                  (route) => route.page !== page
                )
              ).map((page) => {
                const cwRoute = buildCloudWatchRouteName(page);
                const cwHash = buildCloudWatchRouteHash(page);
                const sourcemapPath = getSourcemapForAppRoute(page);
                return {
                  route: page,
                  prefixMatch: page,
                  logGroupPath: `/${cwHash}${cwRoute}`,
                  sourcemapPath,
                  sourcemapKey: cwHash
                };
              });
              const dataRoutes = (routesManifest2.dataRoutes || []).map(
                ({ page, dataRouteRegex }) => {
                  const routeDisplayName = page.endsWith("/") ? `/_next/data/BUILD_ID${page}index.json` : `/_next/data/BUILD_ID${page}.json`;
                  const cwRoute = buildCloudWatchRouteName(routeDisplayName);
                  const cwHash = buildCloudWatchRouteHash(page);
                  return {
                    route: routeDisplayName,
                    regexMatch: dataRouteRegex,
                    logGroupPath: `/${cwHash}${cwRoute}`
                  };
                }
              );
              return [
                ...[...dynamicAndStaticRoutes, ...appRoutes].sort(
                  (a, b) => a.route.localeCompare(b.route)
                ),
                ...dataRoutes.sort((a, b) => a.route.localeCompare(b.route))
              ];
              function getSourcemapForAppRoute(page) {
                const appPathRoute = Object.keys(appPathRoutesManifest2).find(
                  (key) => appPathRoutesManifest2[key] === page
                );
                if (!appPathRoute)
                  return;
                const filePath = appPathsManifest2[appPathRoute];
                if (!filePath)
                  return;
                const sourcemapPath = path11.join(
                  outputPath2,
                  ".next",
                  "server",
                  `${filePath}.map`
                );
                if (!fs11.existsSync(sourcemapPath))
                  return;
                return sourcemapPath;
              }
              function getSourcemapForPagesRoute(page) {
                const filePath = pagesManifest2[page];
                if (!filePath)
                  return;
                const sourcemapPath = path11.join(
                  outputPath2,
                  ".next",
                  "server",
                  `${filePath}.map`
                );
                if (!fs11.existsSync(sourcemapPath))
                  return;
                return sourcemapPath;
              }
            }
          );
          return _routes;
        }
        function useCloudFrontFunctionPrerenderBypassHeaderInjection() {
          return `
  if (request.cookies["__prerender_bypass"]) { 
    request.headers["x-prerender-bypass"] = { value: "true" }; 
  }`;
        }
        function handleMissingSourcemap() {
          return;
        }
        function buildCloudWatchRouteName(route) {
          return route.replace(/[^a-zA-Z0-9_\-/.#]/g, "");
        }
        function buildCloudWatchRouteHash(route) {
          const hash = crypto5.createHash("sha256");
          hash.update(route);
          return hash.digest("hex").substring(0, 8);
        }
      }
      /**
       * The URL of the Next.js app.
       *
       * If the `domain` is set, this is the URL with the custom domain.
       * Otherwise, it's the autogenerated CloudFront URL.
       */
      get url() {
        return all17([this.cdn.domainUrl, this.cdn.url]).apply(
          ([domainUrl, url]) => domainUrl ?? url
        );
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The AWS Lambda server function that renders the app.
           */
          server: this.server,
          /**
           * The Amazon S3 Bucket that stores the assets.
           */
          assets: this.assets
        };
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            url: this.url
          }
        };
      }
    };
  }
});

// .sst/platform/src/components/aws/remix.ts
import fs12 from "fs";
import path12 from "path";
import { all as all18, output as output25 } from "@pulumi/pulumi";
var Remix;
var init_remix = __esm({
  ".sst/platform/src/components/aws/remix.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_ssr_site();
    init_component();
    init_hint();
    init_cache();
    init_base_ssr_site();
    Remix = class extends Component {
      cdn;
      assets;
      server;
      constructor(name, args = {}, opts = {}) {
        super("sst:aws:Remix", name, args, opts);
        const parent = this;
        const edge = normalizeEdge();
        const { sitePath, partition, region } = prepare2(args, opts);
        const isUsingVite = checkIsUsingVite();
        const { access, bucket } = createBucket(parent, name, partition, args);
        const outputPath = buildApp2(name, args, sitePath);
        const { buildMeta } = loadBuildOutput();
        const plan = buildPlan();
        const { distribution, ssrFunctions, edgeFunctions } = createServersAndDistribution(
          parent,
          name,
          args,
          outputPath,
          access,
          bucket,
          plan
        );
        const serverFunction = ssrFunctions[0] ?? Object.values(edgeFunctions)[0];
        this.assets = bucket;
        this.cdn = distribution;
        this.server = serverFunction;
        if (false) {
          Hint5.register(
            this.urn,
            all18([this.cdn.domainUrl, this.cdn.url]).apply(
              ([domainUrl, url]) => domainUrl ?? url
            )
          );
        }
        this.registerOutputs({
          _metadata: {
            mode: true ? "placeholder" : "deployed",
            path: sitePath,
            url: distribution.apply((d) => d.domainUrl ?? d.url),
            edge,
            server: serverFunction.arn
          }
        });
        function normalizeEdge() {
          return output25(args?.edge).apply((edge2) => edge2 ?? false);
        }
        function checkIsUsingVite() {
          return sitePath.apply(
            (sitePath2) => fs12.existsSync(path12.join(sitePath2, "vite.config.ts")) || fs12.existsSync(path12.join(sitePath2, "vite.config.js"))
          );
        }
        function loadBuildOutput() {
          const cache = new Cache(
            `${name}BuildOutput`,
            {
              data: true ? loadBuildMetadataPlaceholder() : loadBuildMetadata()
            },
            {
              parent,
              ignoreChanges: true ? ["*"] : void 0
            }
          );
          return {
            buildMeta: cache.data
          };
        }
        function loadBuildMetadata() {
          return all18([outputPath, isUsingVite]).apply(
            ([outputPath2, isUsingVite2]) => {
              const assetsPath = isUsingVite2 ? path12.join("build", "client") : "public";
              const assetsVersionedSubDir = isUsingVite2 ? void 0 : "build";
              return {
                assetsPath,
                assetsVersionedSubDir,
                // create 1 behaviour for each top level asset file/folder
                staticRoutes: fs12.readdirSync(path12.join(outputPath2, assetsPath)).map(
                  (item) => fs12.statSync(path12.join(outputPath2, assetsPath, item)).isDirectory() ? `${item}/*` : item
                )
              };
            }
          );
        }
        function loadBuildMetadataPlaceholder() {
          return {
            assetsPath: "placeholder",
            assetsVersionedSubDir: void 0,
            staticRoutes: ["assets/*", "favicon.ico"]
          };
        }
        function buildPlan() {
          return all18([isUsingVite, outputPath, edge, buildMeta]).apply(
            ([isUsingVite2, outputPath2, edge2, buildMeta2]) => {
              const serverConfig = createServerLambdaBundle(
                isUsingVite2,
                outputPath2,
                edge2 ? "edge-server.mjs" : "regional-server.mjs"
              );
              return validatePlan({
                edge: edge2,
                cloudFrontFunctions: {
                  serverCfFunction: {
                    injections: [useCloudFrontFunctionHostHeaderInjection()]
                  },
                  staticCfFunction: {
                    injections: [
                      // Note: When using libraries like remix-flat-routes the file can
                      // contains special characters like "+". It needs to be encoded.
                      `request.uri = request.uri.split('/').map(encodeURIComponent).join('/');`
                    ]
                  }
                },
                edgeFunctions: edge2 ? {
                  server: {
                    function: serverConfig
                  }
                } : void 0,
                origins: {
                  ...edge2 ? {} : {
                    server: {
                      server: {
                        function: serverConfig
                      }
                    }
                  },
                  s3: {
                    s3: {
                      copy: [
                        {
                          from: buildMeta2.assetsPath,
                          to: "",
                          cached: true,
                          versionedSubDir: buildMeta2.assetsVersionedSubDir
                        }
                      ]
                    }
                  }
                },
                behaviors: [
                  edge2 ? {
                    cacheType: "server",
                    cfFunction: "serverCfFunction",
                    edgeFunction: "server",
                    origin: "s3"
                  } : {
                    cacheType: "server",
                    cfFunction: "serverCfFunction",
                    origin: "server"
                  },
                  ...buildMeta2.staticRoutes.map(
                    (route) => ({
                      cacheType: "static",
                      pattern: route,
                      cfFunction: "staticCfFunction",
                      origin: "s3"
                    })
                  )
                ]
              });
            }
          );
        }
        function createServerLambdaBundle(isUsingVite2, outputPath2, wrapperFile) {
          const buildPath = path12.join(outputPath2, "build");
          fs12.mkdirSync(buildPath, { recursive: true });
          const content = [
            // When using Vite config, the output build will be "server/index.js"
            // and when using Remix config it will be `server.js`.
            `// Import the server build that was produced by 'remix build'`,
            isUsingVite2 ? `import * as remixServerBuild from "./server/index.js";` : `import * as remixServerBuild from "./index.js";`,
            ``,
            fs12.readFileSync(
              path12.join(
                define_cli_default.paths.platform,
                "functions",
                "remix-server",
                wrapperFile
              )
            )
          ].join("\n");
          fs12.writeFileSync(path12.join(buildPath, "server.mjs"), content);
          const polyfillDest = path12.join(buildPath, "polyfill.mjs");
          fs12.copyFileSync(
            path12.join(
              define_cli_default.paths.platform,
              "functions",
              "remix-server",
              "polyfill.mjs"
            ),
            polyfillDest
          );
          return {
            handler: path12.join(buildPath, "server.handler"),
            nodejs: {
              esbuild: {
                inject: [path12.resolve(polyfillDest)]
              }
            }
          };
        }
      }
      /**
       * The URL of the Remix app.
       *
       * If the `domain` is set, this is the URL with the custom domain.
       * Otherwise, it's the autogenerated CloudFront URL.
       */
      get url() {
        return all18([this.cdn.domainUrl, this.cdn.url]).apply(
          ([domainUrl, url]) => domainUrl ?? url
        );
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The AWS Lambda server function that renders the site.
           */
          server: this.server,
          /**
           * The Amazon S3 Bucket that stores the assets.
           */
          assets: this.assets
        };
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            url: this.url
          }
        };
      }
    };
  }
});

// .sst/platform/src/components/aws/index.ts
var aws_exports = {};
__export(aws_exports, {
  ApiGatewayV2: () => ApiGatewayV2,
  Astro: () => Astro,
  Auth: () => Auth,
  Bucket: () => Bucket,
  Cron: () => Cron,
  Dynamo: () => Dynamo,
  Function: () => Function,
  Nextjs: () => Nextjs,
  Postgres: () => Postgres,
  Queue: () => Queue,
  Remix: () => Remix,
  Router: () => Router,
  SnsTopic: () => SnsTopic,
  SolidStart: () => SolidStart,
  StaticSite: () => StaticSite,
  Vector: () => Vector
});
var init_aws = __esm({
  ".sst/platform/src/components/aws/index.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_apigatewayv2();
    init_auth();
    init_bucket();
    init_cron();
    init_dynamo();
    init_function();
    init_postgres();
    init_queue();
    init_router();
    init_sns_topic();
    init_static_site();
    init_vector();
    init_solid_start();
    init_astro();
    init_nextjs();
    init_remix();
  }
});

// .sst/platform/src/components/cloudflare/bucket.ts
import * as cloudflare from "@pulumi/cloudflare";
var Bucket2;
var init_bucket2 = __esm({
  ".sst/platform/src/components/cloudflare/bucket.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    Bucket2 = class extends Component {
      bucket;
      constructor(name, args, opts) {
        super("sst:cloudflare:Bucket", name, args, opts);
        const parent = this;
        const bucket = createBucket2();
        this.bucket = bucket;
        function createBucket2() {
          return new cloudflare.R2Bucket(
            `${name}Bucket`,
            transform(args?.transform?.bucket, {
              name,
              accountId: components_exports.cloudflare.DEFAULT_ACCOUNT_ID
            }),
            { parent }
          );
        }
      }
      /**
       * The generated name of the R2 Bucket.
       */
      get name() {
        return this.bucket.name;
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The Cloudflare R2 Bucket.
           */
          bucket: this.bucket
        };
      }
    };
  }
});

// .sst/platform/src/components/cloudflare/kv.ts
import * as cloudflare2 from "@pulumi/cloudflare";
var Kv;
var init_kv = __esm({
  ".sst/platform/src/components/cloudflare/kv.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    Kv = class extends Component {
      namespace;
      constructor(name, args, opts) {
        super("sst:cloudflare:Kv", name, args, opts);
        const parent = this;
        const namespace = createNamespace();
        this.namespace = namespace;
        function createNamespace() {
          return new cloudflare2.WorkersKvNamespace(
            `${name}Namespace`,
            transform(args?.transform?.namespace, {
              title: name,
              accountId: components_exports.cloudflare.DEFAULT_ACCOUNT_ID
            }),
            { parent }
          );
        }
      }
      /**
       * The generated id of the KV namespace.
       */
      get id() {
        return this.namespace.id;
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The Cloudflare KV namespace.
           */
          namespace: this.namespace
        };
      }
    };
  }
});

// .sst/platform/src/components/cloudflare/helpers/fetch.ts
async function cfFetch(resource, init = {}) {
  const ret = await fetch(`${CLOUDFLARE_API_BASE_URL}${resource}`, {
    ...init,
    headers: {
      Authorization: `Bearer ${CLOUDFLARE_API_TOKEN}`,
      ...init.headers
    }
  });
  const json = await ret.json();
  if (json.success) {
    return json;
  }
  const error = new Error(
    `A request to the Cloudflare API (${resource}) failed.`
  );
  error.errors = json.errors;
  error.messages = json.messages;
  throw error;
}
var CLOUDFLARE_API_BASE_URL, CLOUDFLARE_API_TOKEN;
var init_fetch = __esm({
  ".sst/platform/src/components/cloudflare/helpers/fetch.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    CLOUDFLARE_API_BASE_URL = process.env.CLOUDFLARE_API_BASE_URL ?? "https://api.cloudflare.com/client/v4";
    CLOUDFLARE_API_TOKEN = process.env.CLOUDFLARE_API_TOKEN;
  }
});

// .sst/platform/src/components/cloudflare/providers/kv-data.ts
import fs13 from "fs";
import { dynamic as dynamic9 } from "@pulumi/pulumi";
var Provider10, KvData;
var init_kv_data = __esm({
  ".sst/platform/src/components/cloudflare/providers/kv-data.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_fetch();
    Provider10 = class {
      async create(inputs) {
        await this.upload(inputs.accountId, inputs.namespaceId, inputs.entries, []);
        return { id: "data" };
      }
      async update(id, olds, news) {
        await this.upload(
          news.accountId,
          news.namespaceId,
          news.entries,
          news.namespaceId === olds.namespaceId ? olds.entries : []
        );
        return {};
      }
      async upload(accountId, namespaceId, entries, oldEntries) {
        const oldFilesMap = new Map(oldEntries.map((f) => [f.key, f]));
        await Promise.all(
          entries.filter((entry) => {
            const old = oldFilesMap.get(entry.key);
            return old?.hash !== entry.hash || old?.contentType !== entry.contentType || old?.cacheControl !== entry.cacheControl;
          }).map(async (entry) => {
            const formData = new FormData();
            formData.append(
              "metadata",
              JSON.stringify({
                contentType: entry.contentType,
                cacheControl: entry.cacheControl
              })
            );
            formData.append("value", await fs13.promises.readFile(entry.source));
            try {
              await cfFetch(
                `/accounts/${accountId}/storage/kv/namespaces/${namespaceId}/values/${entry.key}`,
                {
                  method: "PUT",
                  body: formData
                }
              );
            } catch (error) {
              console.log(error);
              throw error;
            }
          })
        );
      }
    };
    KvData = class extends dynamic9.Resource {
      constructor(name, args, opts) {
        super(new Provider10(), `${name}.sst.cloudflare.KvPairs`, args, opts);
      }
    };
  }
});

// .sst/platform/src/runtime/cloudflare.ts
import path13 from "path";
import fs14 from "fs/promises";
import esbuild2 from "esbuild";
async function build2(name, input) {
  const out = path13.join(define_cli_default.paths.work, "artifacts", `${name}-src`);
  await fs14.rm(out, { recursive: true, force: true });
  await fs14.mkdir(out, { recursive: true });
  if (!await existsAsync(input.handler))
    return {
      type: "error",
      errors: [`Could not find file for handler "${input.handler}"`]
    };
  const build3 = input.build || {};
  const relative = path13.relative(define_cli_default.paths.root, path13.resolve(input.handler));
  const target = path13.join(
    out,
    !relative.startsWith("..") && !path13.isAbsolute(input.handler) ? relative : "",
    "index.mjs"
  );
  const links = Object.fromEntries(
    input.links?.map((item) => [item.name, item.properties]) || []
  );
  const options = {
    entryPoints: [path13.resolve(input.handler)],
    platform: "node",
    loader: build3.loader,
    keepNames: true,
    bundle: true,
    logLevel: "silent",
    metafile: true,
    format: "esm",
    target: "esnext",
    mainFields: ["module", "main"],
    outfile: target,
    sourcemap: false,
    minify: build3.minify,
    ...build3.esbuild,
    define: {
      $SST_LINKS: JSON.stringify({}),
      ...build3.esbuild?.define
    },
    banner: {
      js: [
        `globalThis.$SST_LINKS = ${JSON.stringify(links)};`,
        build3.banner || "",
        build3.esbuild?.banner || ""
      ].join("\n")
    }
  };
  const ctx = await esbuild2.context(options);
  try {
    const result2 = await ctx.rebuild();
    ctx.dispose();
    return {
      type: "success",
      handler: target
    };
  } catch (ex) {
    const result2 = ex;
    if ("errors" in result2) {
      return {
        type: "error",
        errors: result2.errors.flatMap((x) => [
          console.log(x.text),
          x.location?.file || "",
          console.log(x.location?.line, "\u2502", x.location?.lineText)
        ])
      };
    }
    return {
      type: "error",
      errors: [ex.toString()]
    };
  }
}
var init_cloudflare = __esm({
  ".sst/platform/src/runtime/cloudflare.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_fs();
  }
});

// .sst/platform/src/components/cloudflare/providers/worker-url.ts
import { dynamic as dynamic10 } from "@pulumi/pulumi";
var Provider11, WorkerUrl;
var init_worker_url = __esm({
  ".sst/platform/src/components/cloudflare/providers/worker-url.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_fetch();
    Provider11 = class {
      async create(inputs) {
        const url = await this.process(inputs);
        return {
          id: inputs.scriptName,
          outs: url ? { url } : {}
        };
      }
      async update(id, olds, news) {
        const url = await this.process(news);
        return {
          outs: url ? { url } : {}
        };
      }
      async process(inputs) {
        if (inputs.enabled === false) {
          await this.setEnabledFlag(inputs);
          return void 0;
        }
        const [userSubdomain] = await Promise.all([
          this.getWorkerDevSubdomain(inputs),
          this.setEnabledFlag(inputs)
        ]);
        return `${inputs.scriptName}.${userSubdomain}.workers.dev`;
      }
      async getWorkerDevSubdomain(inputs) {
        try {
          const ret = await cfFetch(
            `/accounts/${inputs.accountId}/workers/subdomain`,
            {
              headers: { "Content-Type": "application/json" }
            }
          );
          return ret.result.subdomain;
        } catch (error) {
          console.log(error);
          throw error;
        }
      }
      async setEnabledFlag(inputs) {
        try {
          await cfFetch(
            `/accounts/${inputs.accountId}/workers/scripts/${inputs.scriptName}/subdomain`,
            {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({ enabled: inputs.enabled })
            }
          );
          await new Promise((resolve) => setTimeout(resolve, 3e3));
        } catch (error) {
          console.log(error);
          throw error;
        }
      }
    };
    WorkerUrl = class extends dynamic10.Resource {
      constructor(name, args, opts) {
        super(
          new Provider11(),
          `${name}.sst.cloudflare.WorkerUrl`,
          { ...args, url: void 0 },
          opts
        );
      }
    };
  }
});

// .sst/platform/src/components/cloudflare/providers/zone-lookup.ts
import { dynamic as dynamic11 } from "@pulumi/pulumi";
var Provider12, ZoneLookup;
var init_zone_lookup = __esm({
  ".sst/platform/src/components/cloudflare/providers/zone-lookup.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_fetch();
    Provider12 = class {
      async create(inputs) {
        const zoneId = await this.lookup(inputs);
        return { id: zoneId, outs: { zoneId } };
      }
      async update(id, olds, news) {
        const zoneId = await this.lookup(news);
        return { outs: { zoneId } };
      }
      async lookup(inputs, page = 1) {
        try {
          const qs = new URLSearchParams({
            per_page: "50",
            "account.id": inputs.accountId
          }).toString();
          const ret = await cfFetch(
            `/zones?${qs}`,
            { headers: { "Content-Type": "application/json" } }
          );
          const zone = ret.result.find((z) => inputs.domain.endsWith(z.name));
          if (zone)
            return zone.id;
          if (ret.result.length < ret.result_info.per_page)
            throw new Error(
              `Could not find hosted zone for domain ${inputs.domain}`
            );
          return this.lookup(inputs, page + 1);
        } catch (error) {
          console.log(error);
          throw error;
        }
      }
    };
    ZoneLookup = class extends dynamic11.Resource {
      constructor(name, args, opts) {
        super(
          new Provider12(),
          `${name}.sst.cloudflare.ZoneLookup`,
          { ...args, zoneId: void 0 },
          opts
        );
      }
    };
  }
});

// .sst/platform/src/components/cloudflare/worker.ts
import fs15 from "fs/promises";
import {
  output as output26,
  all as all19,
  jsonStringify as jsonStringify2,
  interpolate as interpolate11
} from "@pulumi/pulumi";
import * as aws17 from "@pulumi/aws";
import * as cf from "@pulumi/cloudflare";
var Worker;
var init_worker = __esm({
  ".sst/platform/src/components/cloudflare/worker.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_cloudflare();
    init_component();
    init_worker_url();
    init_link();
    init_zone_lookup();
    Worker = class extends Component {
      script;
      workerUrl;
      workerDomain;
      constructor(name, args, opts) {
        super("sst:cloudflare:Worker", name, args, opts);
        const parent = this;
        const urlEnabled = normalizeUrl();
        const linkData = buildLinkData();
        const iamCredentials = createAwsCredentials();
        const handler = buildHandler();
        const script = createScript();
        const workerUrl = createWorkersUrl();
        const workerDomain = createWorkersDomain();
        this.script = script;
        this.workerUrl = workerUrl;
        this.workerDomain = workerDomain;
        function normalizeUrl() {
          return output26(args.url).apply((v) => v ?? false);
        }
        function buildLinkData() {
          if (!args.link)
            return [];
          return output26(args.link).apply((links) => {
            const linkData2 = Link.build(links);
            return linkData2;
          });
        }
        function createAwsCredentials() {
          return output26(args.link ?? []).apply((links) => {
            const permissions = links.flatMap((l) => {
              if (!Link.AWS.isLinkable(l))
                return [];
              return l.getSSTAWSPermissions();
            });
            if (permissions.length === 0)
              return;
            const user = new aws17.iam.User(
              `${name}AwsUser`,
              { forceDestroy: true },
              { parent }
            );
            new aws17.iam.UserPolicy(
              `${name}AwsPolicy`,
              {
                user: user.name,
                policy: jsonStringify2({
                  Statement: permissions.map((p) => ({
                    Effect: "Allow",
                    Action: p.actions,
                    Resource: p.resources
                  }))
                })
              },
              { parent }
            );
            const keys = new aws17.iam.AccessKey(
              `${name}AwsCredentials`,
              { user: user.name },
              { parent }
            );
            return keys;
          });
        }
        function buildHandler() {
          const buildResult = all19([args, linkData]).apply(
            async ([args2, linkData2]) => {
              const result2 = await build2(name, { ...args2, links: linkData2 });
              if (result2.type === "error") {
                throw new Error(result2.errors.join("\n"));
              }
              return result2;
            }
          );
          return buildResult.handler;
        }
        function createScript() {
          return all19([handler, args.environment, iamCredentials]).apply(
            async ([handler2, environment, iamCredentials2]) => new cf.WorkerScript(
              `${name}Script`,
              transform(args.transform?.worker, {
                name,
                accountId: components_exports.cloudflare.DEFAULT_ACCOUNT_ID,
                content: (await fs15.readFile(handler2)).toString(),
                module: true,
                compatibilityDate: "2024-01-01",
                compatibilityFlags: ["nodejs_compat"],
                plainTextBindings: [
                  ...iamCredentials2 ? [
                    {
                      name: "AWS_ACCESS_KEY_ID",
                      text: iamCredentials2.id
                    }
                  ] : [],
                  ...Object.entries(environment ?? {}).map(([key, value]) => ({
                    name: key,
                    text: value
                  }))
                ],
                secretTextBindings: iamCredentials2 ? [
                  {
                    name: "AWS_SECRET_ACCESS_KEY",
                    text: iamCredentials2.secret
                  }
                ] : []
              }),
              { parent }
            )
          );
        }
        function createWorkersUrl() {
          return new WorkerUrl(
            `${name}Url`,
            {
              accountId: components_exports.cloudflare.DEFAULT_ACCOUNT_ID,
              scriptName: script.name,
              enabled: urlEnabled
            },
            { parent }
          );
        }
        function createWorkersDomain() {
          if (!args.domain)
            return;
          const zone = new ZoneLookup(
            `${name}ZoneLookup`,
            {
              accountId: components_exports.cloudflare.DEFAULT_ACCOUNT_ID,
              domain: args.domain
            },
            { parent }
          );
          return new cf.WorkerDomain(
            `${name}Domain`,
            {
              accountId: components_exports.cloudflare.DEFAULT_ACCOUNT_ID,
              service: script.name,
              hostname: args.domain,
              zoneId: zone.id
            },
            { parent }
          );
        }
      }
      /**
       * The Worker URL if `url` is enabled.
       */
      get url() {
        return this.workerDomain ? interpolate11`https://${this.workerDomain.hostname}` : this.workerUrl.url.apply((url) => url ? `https://${url}` : url);
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The Cloudflare Worker script.
           */
          worker: this.script
        };
      }
    };
  }
});

// .sst/platform/src/components/cloudflare/static-site.ts
import fs16 from "fs";
import path14 from "path";
import crypto6 from "crypto";
import { all as all20 } from "@pulumi/pulumi";
import { globSync as globSync4 } from "glob";
var StaticSite2;
var init_static_site2 = __esm({
  ".sst/platform/src/components/cloudflare/static-site.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_kv();
    init_component();
    init_kv_data();
    init_worker();
    init_base_static_site();
    StaticSite2 = class extends Component {
      assets;
      router;
      constructor(name, args = {}, opts = {}) {
        super("sst:cloudflare:StaticSite", name, args, opts);
        const parent = this;
        const { sitePath, environment, indexPage } = prepare(args);
        const outputPath = buildApp(name, args.build, sitePath, environment);
        const storage = createKvStorage2();
        const assetManifest = generateAssetManifest();
        const kvData = uploadAssets();
        const worker = createRouter2();
        this.assets = storage;
        this.router = worker;
        cleanup(this.urn, this.url, sitePath, environment);
        this.registerOutputs({
          _metadata: {
            path: sitePath,
            environment,
            url: this.url
          }
        });
        function createKvStorage2() {
          return new Kv(`${name}Assets`, transform(args.transform?.assets, {}), {
            parent,
            retainOnDelete: false
          });
        }
        function generateAssetManifest() {
          return all20([outputPath, args.assets]).apply(
            async ([outputPath2, assets]) => {
              const fileOptions = assets?.fileOptions ?? [
                {
                  files: "**",
                  cacheControl: "max-age=0,no-cache,no-store,must-revalidate"
                },
                {
                  files: ["**/*.js", "**/*.css"],
                  cacheControl: "max-age=31536000,public,immutable"
                }
              ];
              const manifest = [];
              const filesProcessed = [];
              for (const fileOption of fileOptions.reverse()) {
                const files = globSync4(fileOption.files, {
                  cwd: path14.resolve(outputPath2),
                  nodir: true,
                  dot: true,
                  ignore: [
                    ".sst/**",
                    ...typeof fileOption.ignore === "string" ? [fileOption.ignore] : fileOption.ignore ?? []
                  ]
                }).filter((file) => !filesProcessed.includes(file));
                filesProcessed.push(...files);
                manifest.push(
                  ...await Promise.all(
                    files.map(async (file) => {
                      const source = path14.resolve(outputPath2, file);
                      const content = await fs16.promises.readFile(source);
                      const hash = crypto6.createHash("sha256").update(content).digest("hex");
                      return {
                        source,
                        key: file,
                        hash,
                        cacheControl: fileOption.cacheControl,
                        contentType: getContentType(file, "UTF-8")
                      };
                    })
                  )
                );
              }
              return manifest;
            }
          );
        }
        function uploadAssets() {
          return new KvData(
            `${name}AssetFiles`,
            {
              accountId: components_exports.cloudflare.DEFAULT_ACCOUNT_ID,
              namespaceId: storage.id,
              entries: assetManifest.apply(
                (manifest) => manifest.map((m) => ({
                  source: m.source,
                  key: m.key,
                  hash: m.hash,
                  cacheControl: m.cacheControl,
                  contentType: m.contentType
                }))
              )
            },
            { parent, ignoreChanges: true ? ["*"] : void 0 }
          );
        }
        function getContentType(filename, textEncoding) {
          const ext = filename.endsWith(".well-known/site-association-json") ? ".json" : path14.extname(filename);
          const extensions = {
            [".txt"]: { mime: "text/plain", isText: true },
            [".htm"]: { mime: "text/html", isText: true },
            [".html"]: { mime: "text/html", isText: true },
            [".xhtml"]: { mime: "application/xhtml+xml", isText: true },
            [".css"]: { mime: "text/css", isText: true },
            [".js"]: { mime: "text/javascript", isText: true },
            [".mjs"]: { mime: "text/javascript", isText: true },
            [".apng"]: { mime: "image/apng", isText: false },
            [".avif"]: { mime: "image/avif", isText: false },
            [".gif"]: { mime: "image/gif", isText: false },
            [".jpeg"]: { mime: "image/jpeg", isText: false },
            [".jpg"]: { mime: "image/jpeg", isText: false },
            [".png"]: { mime: "image/png", isText: false },
            [".svg"]: { mime: "image/svg+xml", isText: true },
            [".bmp"]: { mime: "image/bmp", isText: false },
            [".tiff"]: { mime: "image/tiff", isText: false },
            [".webp"]: { mime: "image/webp", isText: false },
            [".ico"]: { mime: "image/vnd.microsoft.icon", isText: false },
            [".eot"]: { mime: "application/vnd.ms-fontobject", isText: false },
            [".ttf"]: { mime: "font/ttf", isText: false },
            [".otf"]: { mime: "font/otf", isText: false },
            [".woff"]: { mime: "font/woff", isText: false },
            [".woff2"]: { mime: "font/woff2", isText: false },
            [".json"]: { mime: "application/json", isText: true },
            [".jsonld"]: { mime: "application/ld+json", isText: true },
            [".xml"]: { mime: "application/xml", isText: true },
            [".pdf"]: { mime: "application/pdf", isText: false },
            [".zip"]: { mime: "application/zip", isText: false },
            [".wasm"]: { mime: "application/wasm", isText: false }
          };
          const extensionData = extensions[ext];
          const mime = extensionData?.mime ?? "application/octet-stream";
          const charset = extensionData?.isText && textEncoding !== "none" ? `;charset=${textEncoding}` : "";
          return `${mime}${charset}`;
        }
        function createRouter2() {
          return new Worker(
            `${name}Router`,
            {
              handler: path14.join(
                define_cli_default.paths.platform,
                "functions",
                "cf-static-site-router-worker"
              ),
              url: true,
              domain: args.domain,
              environment: {
                INDEX_PAGE: indexPage,
                ...args.errorPage ? { ERROR_PAGE: args.errorPage } : {}
              },
              build: {
                esbuild: assetManifest.apply((assetManifest2) => ({
                  define: {
                    SST_ASSET_MANIFEST: JSON.stringify(
                      Object.fromEntries(assetManifest2.map((e) => [e.key, e.hash]))
                    )
                  }
                }))
              },
              transform: {
                worker: (workerArgs) => {
                  workerArgs.kvNamespaceBindings = [
                    {
                      name: "ASSETS",
                      namespaceId: storage.id
                    }
                  ];
                }
              }
            },
            // create distribution after s3 upload finishes
            { dependsOn: kvData, parent }
          );
        }
      }
      /**
       * The URL of the website.
       *
       * If the `domain` is set, this is the URL with the custom domain.
       * Otherwise, it's the autogenerated CloudFront URL.
       */
      get url() {
        return this.router.url;
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The Amazon S3 Bucket that stores the assets.
           */
          assets: this.assets
        };
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            url: this.url
          }
        };
      }
    };
  }
});

// .sst/platform/node_modules/path-to-regexp/dist.es2015/index.js
function lexer(str) {
  var tokens = [];
  var i = 0;
  while (i < str.length) {
    var char = str[i];
    if (char === "*" || char === "+" || char === "?") {
      tokens.push({ type: "MODIFIER", index: i, value: str[i++] });
      continue;
    }
    if (char === "\\") {
      tokens.push({ type: "ESCAPED_CHAR", index: i++, value: str[i++] });
      continue;
    }
    if (char === "{") {
      tokens.push({ type: "OPEN", index: i, value: str[i++] });
      continue;
    }
    if (char === "}") {
      tokens.push({ type: "CLOSE", index: i, value: str[i++] });
      continue;
    }
    if (char === ":") {
      var name = "";
      var j = i + 1;
      while (j < str.length) {
        var code = str.charCodeAt(j);
        if (
          // `0-9`
          code >= 48 && code <= 57 || // `A-Z`
          code >= 65 && code <= 90 || // `a-z`
          code >= 97 && code <= 122 || // `_`
          code === 95
        ) {
          name += str[j++];
          continue;
        }
        break;
      }
      if (!name)
        throw new TypeError("Missing parameter name at ".concat(i));
      tokens.push({ type: "NAME", index: i, value: name });
      i = j;
      continue;
    }
    if (char === "(") {
      var count = 1;
      var pattern = "";
      var j = i + 1;
      if (str[j] === "?") {
        throw new TypeError('Pattern cannot start with "?" at '.concat(j));
      }
      while (j < str.length) {
        if (str[j] === "\\") {
          pattern += str[j++] + str[j++];
          continue;
        }
        if (str[j] === ")") {
          count--;
          if (count === 0) {
            j++;
            break;
          }
        } else if (str[j] === "(") {
          count++;
          if (str[j + 1] !== "?") {
            throw new TypeError("Capturing groups are not allowed at ".concat(j));
          }
        }
        pattern += str[j++];
      }
      if (count)
        throw new TypeError("Unbalanced pattern at ".concat(i));
      if (!pattern)
        throw new TypeError("Missing pattern at ".concat(i));
      tokens.push({ type: "PATTERN", index: i, value: pattern });
      i = j;
      continue;
    }
    tokens.push({ type: "CHAR", index: i, value: str[i++] });
  }
  tokens.push({ type: "END", index: i, value: "" });
  return tokens;
}
function parse(str, options) {
  if (options === void 0) {
    options = {};
  }
  var tokens = lexer(str);
  var _a = options.prefixes, prefixes = _a === void 0 ? "./" : _a;
  var defaultPattern = "[^".concat(escapeString(options.delimiter || "/#?"), "]+?");
  var result2 = [];
  var key = 0;
  var i = 0;
  var path17 = "";
  var tryConsume = function(type) {
    if (i < tokens.length && tokens[i].type === type)
      return tokens[i++].value;
  };
  var mustConsume = function(type) {
    var value2 = tryConsume(type);
    if (value2 !== void 0)
      return value2;
    var _a2 = tokens[i], nextType = _a2.type, index = _a2.index;
    throw new TypeError("Unexpected ".concat(nextType, " at ").concat(index, ", expected ").concat(type));
  };
  var consumeText = function() {
    var result3 = "";
    var value2;
    while (value2 = tryConsume("CHAR") || tryConsume("ESCAPED_CHAR")) {
      result3 += value2;
    }
    return result3;
  };
  while (i < tokens.length) {
    var char = tryConsume("CHAR");
    var name = tryConsume("NAME");
    var pattern = tryConsume("PATTERN");
    if (name || pattern) {
      var prefix = char || "";
      if (prefixes.indexOf(prefix) === -1) {
        path17 += prefix;
        prefix = "";
      }
      if (path17) {
        result2.push(path17);
        path17 = "";
      }
      result2.push({
        name: name || key++,
        prefix,
        suffix: "",
        pattern: pattern || defaultPattern,
        modifier: tryConsume("MODIFIER") || ""
      });
      continue;
    }
    var value = char || tryConsume("ESCAPED_CHAR");
    if (value) {
      path17 += value;
      continue;
    }
    if (path17) {
      result2.push(path17);
      path17 = "";
    }
    var open = tryConsume("OPEN");
    if (open) {
      var prefix = consumeText();
      var name_1 = tryConsume("NAME") || "";
      var pattern_1 = tryConsume("PATTERN") || "";
      var suffix = consumeText();
      mustConsume("CLOSE");
      result2.push({
        name: name_1 || (pattern_1 ? key++ : ""),
        pattern: name_1 && !pattern_1 ? defaultPattern : pattern_1,
        prefix,
        suffix,
        modifier: tryConsume("MODIFIER") || ""
      });
      continue;
    }
    mustConsume("END");
  }
  return result2;
}
function escapeString(str) {
  return str.replace(/([.+*?=^!:${}()[\]|/\\])/g, "\\$1");
}
function flags(options) {
  return options && options.sensitive ? "" : "i";
}
function regexpToRegexp(path17, keys) {
  if (!keys)
    return path17;
  var groupsRegex = /\((?:\?<(.*?)>)?(?!\?)/g;
  var index = 0;
  var execResult = groupsRegex.exec(path17.source);
  while (execResult) {
    keys.push({
      // Use parenthesized substring match if available, index otherwise
      name: execResult[1] || index++,
      prefix: "",
      suffix: "",
      modifier: "",
      pattern: ""
    });
    execResult = groupsRegex.exec(path17.source);
  }
  return path17;
}
function arrayToRegexp(paths, keys, options) {
  var parts = paths.map(function(path17) {
    return pathToRegexp(path17, keys, options).source;
  });
  return new RegExp("(?:".concat(parts.join("|"), ")"), flags(options));
}
function stringToRegexp(path17, keys, options) {
  return tokensToRegexp(parse(path17, options), keys, options);
}
function tokensToRegexp(tokens, keys, options) {
  if (options === void 0) {
    options = {};
  }
  var _a = options.strict, strict = _a === void 0 ? false : _a, _b = options.start, start = _b === void 0 ? true : _b, _c = options.end, end = _c === void 0 ? true : _c, _d = options.encode, encode = _d === void 0 ? function(x) {
    return x;
  } : _d, _e = options.delimiter, delimiter = _e === void 0 ? "/#?" : _e, _f = options.endsWith, endsWith = _f === void 0 ? "" : _f;
  var endsWithRe = "[".concat(escapeString(endsWith), "]|$");
  var delimiterRe = "[".concat(escapeString(delimiter), "]");
  var route = start ? "^" : "";
  for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {
    var token = tokens_1[_i];
    if (typeof token === "string") {
      route += escapeString(encode(token));
    } else {
      var prefix = escapeString(encode(token.prefix));
      var suffix = escapeString(encode(token.suffix));
      if (token.pattern) {
        if (keys)
          keys.push(token);
        if (prefix || suffix) {
          if (token.modifier === "+" || token.modifier === "*") {
            var mod = token.modifier === "*" ? "?" : "";
            route += "(?:".concat(prefix, "((?:").concat(token.pattern, ")(?:").concat(suffix).concat(prefix, "(?:").concat(token.pattern, "))*)").concat(suffix, ")").concat(mod);
          } else {
            route += "(?:".concat(prefix, "(").concat(token.pattern, ")").concat(suffix, ")").concat(token.modifier);
          }
        } else {
          if (token.modifier === "+" || token.modifier === "*") {
            route += "((?:".concat(token.pattern, ")").concat(token.modifier, ")");
          } else {
            route += "(".concat(token.pattern, ")").concat(token.modifier);
          }
        }
      } else {
        route += "(?:".concat(prefix).concat(suffix, ")").concat(token.modifier);
      }
    }
  }
  if (end) {
    if (!strict)
      route += "".concat(delimiterRe, "?");
    route += !options.endsWith ? "$" : "(?=".concat(endsWithRe, ")");
  } else {
    var endToken = tokens[tokens.length - 1];
    var isEndDelimited = typeof endToken === "string" ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1 : endToken === void 0;
    if (!strict) {
      route += "(?:".concat(delimiterRe, "(?=").concat(endsWithRe, "))?");
    }
    if (!isEndDelimited) {
      route += "(?=".concat(delimiterRe, "|").concat(endsWithRe, ")");
    }
  }
  return new RegExp(route, flags(options));
}
function pathToRegexp(path17, keys, options) {
  if (path17 instanceof RegExp)
    return regexpToRegexp(path17, keys);
  if (Array.isArray(path17))
    return arrayToRegexp(path17, keys, options);
  return stringToRegexp(path17, keys, options);
}
var init_dist = __esm({
  ".sst/platform/node_modules/path-to-regexp/dist.es2015/index.js"() {
    init_define_app();
    init_define_cli();
    init_run();
  }
});

// .sst/platform/src/components/cloudflare/ssr-site.ts
import path15 from "path";
import fs17 from "fs";
import { globSync as globSync5 } from "glob";
import crypto7 from "crypto";
import { output as output27, all as all21 } from "@pulumi/pulumi";
function prepare3(args) {
  const sitePath = normalizeSitePath();
  return {
    sitePath
  };
  function normalizeSitePath() {
    return output27(args.path).apply((sitePath2) => {
      if (!sitePath2)
        return ".";
      if (!fs17.existsSync(sitePath2)) {
        throw new VisibleError(`No site found at "${path15.resolve(sitePath2)}"`);
      }
      return sitePath2;
    });
  }
}
function createKvStorage(parent, name, args) {
  return new Kv(`${name}Assets`, transform(args.transform?.assets, {}), {
    parent,
    retainOnDelete: false
  });
}
function createRouter(parent, name, args, outputPath, storage, plan) {
  return all21([outputPath, plan]).apply(([outputPath2, plan2]) => {
    const assetManifest = generateAssetManifest();
    const kvData = uploadAssets();
    const server = createServerWorker();
    const router = createRouterWorker();
    return { server, router };
    function generateAssetManifest() {
      return output27(args.assets).apply(async (assets) => {
        const versionedFilesTTL = 31536e3;
        const nonVersionedFilesTTL = 86400;
        const manifest = [];
        for (const copy of plan2.assets.copy) {
          const fileOptions = [
            // unversioned files
            {
              files: "**",
              ignore: copy.versionedSubDir ? path15.posix.join(copy.versionedSubDir, "**") : void 0,
              cacheControl: assets?.nonVersionedFilesCacheHeader ?? `public,max-age=0,s-maxage=${nonVersionedFilesTTL},stale-while-revalidate=${nonVersionedFilesTTL}`
            },
            // versioned files
            ...copy.versionedSubDir ? [
              {
                files: path15.posix.join(copy.versionedSubDir, "**"),
                cacheControl: assets?.versionedFilesCacheHeader ?? `public,max-age=${versionedFilesTTL},immutable`
              }
            ] : [],
            ...assets?.fileOptions ?? []
          ];
          const filesProcessed = [];
          for (const fileOption of fileOptions.reverse()) {
            const files = globSync5(fileOption.files, {
              cwd: path15.resolve(outputPath2, copy.from),
              nodir: true,
              dot: true,
              ignore: fileOption.ignore
            }).filter((file) => !filesProcessed.includes(file));
            filesProcessed.push(...files);
            manifest.push(
              ...await Promise.all(
                files.map(async (file) => {
                  const source = path15.resolve(outputPath2, copy.from, file);
                  const content = await fs17.promises.readFile(source);
                  const hash = crypto7.createHash("sha256").update(content).digest("hex");
                  return {
                    source,
                    key: path15.posix.join(copy.to, file),
                    hash,
                    cacheControl: fileOption.cacheControl,
                    contentType: getContentType(file, "UTF-8")
                  };
                })
              )
            );
          }
        }
        return manifest;
      });
    }
    function uploadAssets() {
      return new KvData(
        `${name}AssetFiles`,
        {
          accountId: components_exports.cloudflare.DEFAULT_ACCOUNT_ID,
          namespaceId: storage.id,
          entries: assetManifest.apply(
            (manifest) => manifest.map((m) => ({
              source: m.source,
              key: m.key,
              hash: m.hash,
              cacheControl: m.cacheControl,
              contentType: m.contentType
            }))
          )
        },
        { parent, ignoreChanges: true ? ["*"] : void 0 }
      );
    }
    function getContentType(filename, textEncoding) {
      const ext = filename.endsWith(".well-known/site-association-json") ? ".json" : path15.extname(filename);
      const extensions = {
        [".txt"]: { mime: "text/plain", isText: true },
        [".htm"]: { mime: "text/html", isText: true },
        [".html"]: { mime: "text/html", isText: true },
        [".xhtml"]: { mime: "application/xhtml+xml", isText: true },
        [".css"]: { mime: "text/css", isText: true },
        [".js"]: { mime: "text/javascript", isText: true },
        [".mjs"]: { mime: "text/javascript", isText: true },
        [".apng"]: { mime: "image/apng", isText: false },
        [".avif"]: { mime: "image/avif", isText: false },
        [".gif"]: { mime: "image/gif", isText: false },
        [".jpeg"]: { mime: "image/jpeg", isText: false },
        [".jpg"]: { mime: "image/jpeg", isText: false },
        [".png"]: { mime: "image/png", isText: false },
        [".svg"]: { mime: "image/svg+xml", isText: true },
        [".bmp"]: { mime: "image/bmp", isText: false },
        [".tiff"]: { mime: "image/tiff", isText: false },
        [".webp"]: { mime: "image/webp", isText: false },
        [".ico"]: { mime: "image/vnd.microsoft.icon", isText: false },
        [".eot"]: { mime: "application/vnd.ms-fontobject", isText: false },
        [".ttf"]: { mime: "font/ttf", isText: false },
        [".otf"]: { mime: "font/otf", isText: false },
        [".woff"]: { mime: "font/woff", isText: false },
        [".woff2"]: { mime: "font/woff2", isText: false },
        [".json"]: { mime: "application/json", isText: true },
        [".jsonld"]: { mime: "application/ld+json", isText: true },
        [".xml"]: { mime: "application/xml", isText: true },
        [".pdf"]: { mime: "application/pdf", isText: false },
        [".zip"]: { mime: "application/zip", isText: false },
        [".wasm"]: { mime: "application/wasm", isText: false }
      };
      const extensionData = extensions[ext];
      const mime = extensionData?.mime ?? "application/octet-stream";
      const charset = extensionData?.isText && textEncoding !== "none" ? `;charset=${textEncoding}` : "";
      return `${mime}${charset}`;
    }
    function createServerWorker() {
      return new Worker(
        `${name}Server`,
        {
          ...plan2.server,
          environment: output27(args.environment).apply((environment) => ({
            ...environment,
            ...plan2.server.environment
          })),
          link: output27(args.link).apply((link) => [
            ...plan2.server.link ?? [],
            ...link ?? []
          ]),
          live: false,
          _ignoreCodeChanges: true
        },
        { parent }
      );
    }
    function createRouterWorker() {
      return new Worker(
        `${name}Router`,
        {
          handler: path15.join(
            define_cli_default.paths.platform,
            "functions",
            "cf-ssr-site-router-worker"
          ),
          url: true,
          live: false,
          domain: args.domain,
          build: {
            esbuild: assetManifest.apply((assetManifest2) => ({
              define: {
                SST_ASSET_MANIFEST: JSON.stringify(
                  Object.fromEntries(assetManifest2.map((e) => [e.key, e.hash]))
                ),
                SST_ROUTES: JSON.stringify(plan2.routes)
              }
            }))
          },
          transform: {
            worker: (workerArgs) => {
              workerArgs.kvNamespaceBindings = [
                {
                  name: "ASSETS",
                  namespaceId: storage.id
                }
              ];
              workerArgs.serviceBindings = [
                {
                  name: "SERVER",
                  service: server.nodes.worker.name
                }
              ];
            }
          }
        },
        // create distribution after assets are uploaded
        { dependsOn: kvData, parent }
      );
    }
  });
}
function validatePlan2(input) {
  return input;
}
var init_ssr_site2 = __esm({
  ".sst/platform/src/components/cloudflare/ssr-site.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_component();
    init_error();
    init_kv();
    init_worker();
    init_kv_data();
  }
});

// .sst/platform/src/components/cloudflare/remix.ts
import fs18 from "fs";
import path16 from "path";
import { all as all22 } from "@pulumi/pulumi";
var Remix2;
var init_remix2 = __esm({
  ".sst/platform/src/components/cloudflare/remix.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_dist();
    init_ssr_site2();
    init_component();
    init_hint();
    init_base_ssr_site();
    Remix2 = class extends Component {
      assets;
      router;
      server;
      constructor(name, args = {}, opts = {}) {
        super("sst:cloudflare:Remix", name, args, opts);
        const parent = this;
        const { sitePath } = prepare3(args);
        const isUsingVite = checkIsUsingVite();
        const storage = createKvStorage(parent, name, args);
        const outputPath = buildApp2(name, args, sitePath);
        const { buildMeta } = loadBuildOutput();
        const plan = buildPlan();
        const { router, server } = createRouter(
          parent,
          name,
          args,
          outputPath,
          storage,
          plan
        );
        this.assets = storage;
        this.router = router;
        this.server = server;
        if (false) {
          Hint6.register(this.urn, this.url);
        }
        this.registerOutputs({
          _metadata: {
            mode: true ? "placeholder" : "deployed",
            path: sitePath,
            url: this.url
          }
        });
        function checkIsUsingVite() {
          return sitePath.apply(
            (sitePath2) => fs18.existsSync(path16.join(sitePath2, "vite.config.ts")) || fs18.existsSync(path16.join(sitePath2, "vite.config.js"))
          );
        }
        function loadBuildOutput() {
          return {
            buildMeta: true ? loadBuildMetadataPlaceholder() : loadBuildMetadata()
          };
        }
        function loadBuildMetadata() {
          return all22([outputPath, isUsingVite]).apply(
            ([outputPath2, isUsingVite2]) => {
              const assetsPath = isUsingVite2 ? path16.join("build", "client") : "public";
              const assetsVersionedSubDir = isUsingVite2 ? void 0 : "build";
              return {
                assetsPath,
                assetsVersionedSubDir,
                // create 1 behaviour for each top level asset file/folder
                staticRoutes: fs18.readdirSync(path16.join(outputPath2, assetsPath)).map(
                  (item) => fs18.statSync(path16.join(outputPath2, assetsPath, item)).isDirectory() ? `${item}/(.*)` : item
                )
              };
            }
          );
        }
        function loadBuildMetadataPlaceholder() {
          return {
            assetsPath: "placeholder",
            assetsVersionedSubDir: void 0,
            staticRoutes: []
          };
        }
        function buildPlan() {
          return all22([isUsingVite, outputPath, buildMeta]).apply(
            ([isUsingVite2, outputPath2, buildMeta2]) => {
              return validatePlan2({
                server: createServerLambdaBundle(isUsingVite2, outputPath2),
                assets: {
                  copy: [
                    {
                      from: buildMeta2.assetsPath,
                      to: "",
                      cached: true,
                      versionedSubDir: buildMeta2.assetsVersionedSubDir
                    }
                  ]
                },
                routes: [
                  {
                    regex: pathToRegexp(buildMeta2.staticRoutes).source,
                    origin: "assets"
                  },
                  {
                    regex: pathToRegexp("(.*)").source,
                    origin: "server"
                  }
                ]
              });
            }
          );
        }
        function createServerLambdaBundle(isUsingVite2, outputPath2) {
          const buildPath = path16.join(outputPath2, "build");
          fs18.mkdirSync(buildPath, { recursive: true });
          const content = [
            // When using Vite config, the output build will be "server/index.js"
            // and when using Remix config it will be `server.js`.
            //isUsingVite
            //  ? `import * as remixServerBuild from "./server/index.js";`
            //  : `import * as remixServerBuild from "./index.js";`,
            //`import { createRequestHandler } from "@remix-run/cloudflare";`,
            //`import * as remixServerBuild from "./server";`,
            //`import { createRequestHandler } from "@remix-run/cloudflare";`,
            //`export default {`,
            //`  async fetch(request) {`,
            //`    const requestHandler = createRequestHandler(remixServerBuild);`,
            //`    return await requestHandler(request);`,
            //`  },`,
            //`};`,
            `import { createRequestHandler } from "@remix-run/cloudflare";`,
            `import * as build from "./server/index.js";`,
            `export default {`,
            `  async fetch(request) {`,
            `    console.log("fetch");`,
            `    console.log("build", build);`,
            `    console.log("build mode", build.mode);`,
            `    const handleRequest = createRequestHandler(build);`,
            `    console.log("handleRequest", handleRequest);`,
            `    return await handleRequest(request);`,
            `  },`,
            `};`
          ].join("\n");
          fs18.writeFileSync(path16.join(buildPath, "server.ts"), content);
          const nodeBuiltInModulesPlugin = {
            name: "node:built-in:modules",
            setup(build3) {
              build3.onResolve({ filter: /^(util|stream)$/ }, ({ kind, path: path17 }) => {
                return kind === "require-call" ? { path: path17, namespace: "node-built-in-modules" } : void 0;
              });
              build3.onLoad(
                { filter: /.*/, namespace: "node-built-in-modules" },
                ({ path: path17 }) => {
                  return {
                    contents: `export * from 'node:${path17}'`,
                    loader: "js"
                  };
                }
              );
            }
          };
          return {
            handler: path16.join(buildPath, "server.ts"),
            build: {
              esbuild: {
                define: {
                  process: JSON.stringify({
                    env: {
                      //NODE_ENV: "production",
                      NODE_ENV: "development"
                    }
                  })
                },
                plugins: [nodeBuiltInModulesPlugin]
              }
            }
          };
        }
      }
      /**
       * The URL of the Remix app.
       *
       * If the `domain` is set, this is the URL with the custom domain.
       * Otherwise, it's the autogenerated CloudFront URL.
       */
      get url() {
        return this.router.url;
      }
      /**
       * The underlying [resources](/docs/components/#nodes) this component creates.
       */
      get nodes() {
        return {
          /**
           * The AWS Lambda server function that renders the site.
           */
          server: this.server,
          /**
           * The Amazon S3 Bucket that stores the assets.
           */
          assets: this.assets
        };
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            url: this.url
          }
        };
      }
    };
  }
});

// .sst/platform/src/components/cloudflare/account-id.ts
var DEFAULT_ACCOUNT_ID;
var init_account_id = __esm({
  ".sst/platform/src/components/cloudflare/account-id.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    DEFAULT_ACCOUNT_ID = process.env.CLOUDFLARE_DEFAULT_ACCOUNT_ID;
  }
});

// .sst/platform/src/components/cloudflare/index.ts
var cloudflare_exports = {};
__export(cloudflare_exports, {
  Bucket: () => Bucket2,
  DEFAULT_ACCOUNT_ID: () => DEFAULT_ACCOUNT_ID,
  Kv: () => Kv,
  Remix: () => Remix2,
  StaticSite: () => StaticSite2,
  Worker: () => Worker
});
var init_cloudflare2 = __esm({
  ".sst/platform/src/components/cloudflare/index.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_bucket2();
    init_kv();
    init_static_site2();
    init_remix2();
    init_worker();
    init_account_id();
  }
});

// .sst/platform/src/components/secret.ts
import { output as output29, secret as secret2 } from "@pulumi/pulumi";
var SecretMissingError, Secret;
var init_secret = __esm({
  ".sst/platform/src/components/secret.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_error();
    init_component();
    SecretMissingError = class extends VisibleError {
      constructor(secretName) {
        super(
          `Set a value for ${secretName} with \`sst secret set ${secretName} <value>\``
        );
        this.secretName = secretName;
      }
    };
    Secret = class extends Component {
      _value;
      _name;
      _placeholder;
      /**
         * @param placeholder A placeholder value of the secret. This can be useful for cases where you might not be storing sensitive values.
      
         */
      constructor(name, placeholder) {
        super(
          "sst:sst:Secret",
          name,
          {
            placeholder
          },
          {}
        );
        this._name = name;
        this._placeholder = placeholder;
        const value = process.env["SST_SECRET_" + this._name] ?? this._placeholder;
        if (!value) {
          throw new SecretMissingError(this._name);
        }
        this._value = value;
      }
      /**
       * The name of the secret.
       */
      get name() {
        return output29(this._name);
      }
      /**
       * The value of the secret. It'll be `undefined` if the secret has not been set through the CLI or if the `placeholder` hasn't been set.
       */
      get value() {
        return secret2(this._value);
      }
      /**
       * The placeholder value of the secret.
       */
      get placeholder() {
        return output29(this._placeholder);
      }
      /** @internal */
      getSSTLink() {
        return {
          properties: {
            value: this.value
          }
        };
      }
    };
  }
});

// .sst/platform/src/components/index.ts
var components_exports = {};
__export(components_exports, {
  Link: () => Link,
  Secret: () => Secret,
  SecretMissingError: () => SecretMissingError,
  aws: () => aws_exports,
  cloudflare: () => cloudflare_exports
});
var init_components = __esm({
  ".sst/platform/src/components/index.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
    init_aws();
    init_cloudflare2();
    init_secret();
    init_link();
  }
});

// .sst/platform/src/config.ts
function $config(input) {
  return input;
}
var init_config = __esm({
  ".sst/platform/src/config.ts"() {
    "use strict";
    init_define_app();
    init_define_cli();
    init_run();
  }
});

// .sst/platform/src/shim/run.js
import * as util from "@pulumi/pulumi";
var $secrets, output, apply, all, interpolate, concat, jsonParse, jsonStringify, makeLinkable;
var init_run = __esm({
  ".sst/platform/src/shim/run.js"() {
    "use strict";
    init_components();
    init_link();
    init_config();
    $secrets = JSON.parse(process.env.SST_SECRETS || "{}");
    ({ output, apply, all, interpolate, concat, jsonParse, jsonStringify } = util);
    makeLinkable = Link.makeLinkable;
  }
});

// node_modules/.pnpm/dotenv@16.4.5/node_modules/dotenv/package.json
var require_package = __commonJS({
  "node_modules/.pnpm/dotenv@16.4.5/node_modules/dotenv/package.json"(exports, module) {
    module.exports = {
      name: "dotenv",
      version: "16.4.5",
      description: "Loads environment variables from .env file",
      main: "lib/main.js",
      types: "lib/main.d.ts",
      exports: {
        ".": {
          types: "./lib/main.d.ts",
          require: "./lib/main.js",
          default: "./lib/main.js"
        },
        "./config": "./config.js",
        "./config.js": "./config.js",
        "./lib/env-options": "./lib/env-options.js",
        "./lib/env-options.js": "./lib/env-options.js",
        "./lib/cli-options": "./lib/cli-options.js",
        "./lib/cli-options.js": "./lib/cli-options.js",
        "./package.json": "./package.json"
      },
      scripts: {
        "dts-check": "tsc --project tests/types/tsconfig.json",
        lint: "standard",
        "lint-readme": "standard-markdown",
        pretest: "npm run lint && npm run dts-check",
        test: "tap tests/*.js --100 -Rspec",
        "test:coverage": "tap --coverage-report=lcov",
        prerelease: "npm test",
        release: "standard-version"
      },
      repository: {
        type: "git",
        url: "git://github.com/motdotla/dotenv.git"
      },
      funding: "https://dotenvx.com",
      keywords: [
        "dotenv",
        "env",
        ".env",
        "environment",
        "variables",
        "config",
        "settings"
      ],
      readmeFilename: "README.md",
      license: "BSD-2-Clause",
      devDependencies: {
        "@definitelytyped/dtslint": "^0.0.133",
        "@types/node": "^18.11.3",
        decache: "^4.6.1",
        sinon: "^14.0.1",
        standard: "^17.0.0",
        "standard-markdown": "^7.1.0",
        "standard-version": "^9.5.0",
        tap: "^16.3.0",
        tar: "^6.1.11",
        typescript: "^4.8.4"
      },
      engines: {
        node: ">=12"
      },
      browser: {
        fs: false
      }
    };
  }
});

// node_modules/.pnpm/dotenv@16.4.5/node_modules/dotenv/lib/main.js
var require_main = __commonJS({
  "node_modules/.pnpm/dotenv@16.4.5/node_modules/dotenv/lib/main.js"(exports, module) {
    init_define_app();
    init_define_cli();
    init_run();
    var fs19 = __require("fs");
    var path17 = __require("path");
    var os = __require("os");
    var crypto8 = __require("crypto");
    var packageJson = require_package();
    var version = packageJson.version;
    var LINE = /(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;
    function parse2(src) {
      const obj = {};
      let lines = src.toString();
      lines = lines.replace(/\r\n?/mg, "\n");
      let match;
      while ((match = LINE.exec(lines)) != null) {
        const key = match[1];
        let value = match[2] || "";
        value = value.trim();
        const maybeQuote = value[0];
        value = value.replace(/^(['"`])([\s\S]*)\1$/mg, "$2");
        if (maybeQuote === '"') {
          value = value.replace(/\\n/g, "\n");
          value = value.replace(/\\r/g, "\r");
        }
        obj[key] = value;
      }
      return obj;
    }
    function _parseVault(options) {
      const vaultPath = _vaultPath(options);
      const result2 = DotenvModule.configDotenv({ path: vaultPath });
      if (!result2.parsed) {
        const err = new Error(`MISSING_DATA: Cannot parse ${vaultPath} for an unknown reason`);
        err.code = "MISSING_DATA";
        throw err;
      }
      const keys = _dotenvKey(options).split(",");
      const length = keys.length;
      let decrypted;
      for (let i = 0; i < length; i++) {
        try {
          const key = keys[i].trim();
          const attrs = _instructions(result2, key);
          decrypted = DotenvModule.decrypt(attrs.ciphertext, attrs.key);
          break;
        } catch (error) {
          if (i + 1 >= length) {
            throw error;
          }
        }
      }
      return DotenvModule.parse(decrypted);
    }
    function _log(message) {
      console.log(`[dotenv@${version}][INFO] ${message}`);
    }
    function _warn(message) {
      console.log(`[dotenv@${version}][WARN] ${message}`);
    }
    function _debug(message) {
      console.log(`[dotenv@${version}][DEBUG] ${message}`);
    }
    function _dotenvKey(options) {
      if (options && options.DOTENV_KEY && options.DOTENV_KEY.length > 0) {
        return options.DOTENV_KEY;
      }
      if (process.env.DOTENV_KEY && process.env.DOTENV_KEY.length > 0) {
        return process.env.DOTENV_KEY;
      }
      return "";
    }
    function _instructions(result2, dotenvKey) {
      let uri;
      try {
        uri = new URL(dotenvKey);
      } catch (error) {
        if (error.code === "ERR_INVALID_URL") {
          const err = new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");
          err.code = "INVALID_DOTENV_KEY";
          throw err;
        }
        throw error;
      }
      const key = uri.password;
      if (!key) {
        const err = new Error("INVALID_DOTENV_KEY: Missing key part");
        err.code = "INVALID_DOTENV_KEY";
        throw err;
      }
      const environment = uri.searchParams.get("environment");
      if (!environment) {
        const err = new Error("INVALID_DOTENV_KEY: Missing environment part");
        err.code = "INVALID_DOTENV_KEY";
        throw err;
      }
      const environmentKey = `DOTENV_VAULT_${environment.toUpperCase()}`;
      const ciphertext = result2.parsed[environmentKey];
      if (!ciphertext) {
        const err = new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${environmentKey} in your .env.vault file.`);
        err.code = "NOT_FOUND_DOTENV_ENVIRONMENT";
        throw err;
      }
      return { ciphertext, key };
    }
    function _vaultPath(options) {
      let possibleVaultPath = null;
      if (options && options.path && options.path.length > 0) {
        if (Array.isArray(options.path)) {
          for (const filepath of options.path) {
            if (fs19.existsSync(filepath)) {
              possibleVaultPath = filepath.endsWith(".vault") ? filepath : `${filepath}.vault`;
            }
          }
        } else {
          possibleVaultPath = options.path.endsWith(".vault") ? options.path : `${options.path}.vault`;
        }
      } else {
        possibleVaultPath = path17.resolve(process.cwd(), ".env.vault");
      }
      if (fs19.existsSync(possibleVaultPath)) {
        return possibleVaultPath;
      }
      return null;
    }
    function _resolveHome(envPath) {
      return envPath[0] === "~" ? path17.join(os.homedir(), envPath.slice(1)) : envPath;
    }
    function _configVault(options) {
      _log("Loading env from encrypted .env.vault");
      const parsed = DotenvModule._parseVault(options);
      let processEnv = process.env;
      if (options && options.processEnv != null) {
        processEnv = options.processEnv;
      }
      DotenvModule.populate(processEnv, parsed, options);
      return { parsed };
    }
    function configDotenv(options) {
      const dotenvPath = path17.resolve(process.cwd(), ".env");
      let encoding = "utf8";
      const debug = Boolean(options && options.debug);
      if (options && options.encoding) {
        encoding = options.encoding;
      } else {
        if (debug) {
          _debug("No encoding is specified. UTF-8 is used by default");
        }
      }
      let optionPaths = [dotenvPath];
      if (options && options.path) {
        if (!Array.isArray(options.path)) {
          optionPaths = [_resolveHome(options.path)];
        } else {
          optionPaths = [];
          for (const filepath of options.path) {
            optionPaths.push(_resolveHome(filepath));
          }
        }
      }
      let lastError;
      const parsedAll = {};
      for (const path18 of optionPaths) {
        try {
          const parsed = DotenvModule.parse(fs19.readFileSync(path18, { encoding }));
          DotenvModule.populate(parsedAll, parsed, options);
        } catch (e) {
          if (debug) {
            _debug(`Failed to load ${path18} ${e.message}`);
          }
          lastError = e;
        }
      }
      let processEnv = process.env;
      if (options && options.processEnv != null) {
        processEnv = options.processEnv;
      }
      DotenvModule.populate(processEnv, parsedAll, options);
      if (lastError) {
        return { parsed: parsedAll, error: lastError };
      } else {
        return { parsed: parsedAll };
      }
    }
    function config(options) {
      if (_dotenvKey(options).length === 0) {
        return DotenvModule.configDotenv(options);
      }
      const vaultPath = _vaultPath(options);
      if (!vaultPath) {
        _warn(`You set DOTENV_KEY but you are missing a .env.vault file at ${vaultPath}. Did you forget to build it?`);
        return DotenvModule.configDotenv(options);
      }
      return DotenvModule._configVault(options);
    }
    function decrypt(encrypted, keyStr) {
      const key = Buffer.from(keyStr.slice(-64), "hex");
      let ciphertext = Buffer.from(encrypted, "base64");
      const nonce = ciphertext.subarray(0, 12);
      const authTag = ciphertext.subarray(-16);
      ciphertext = ciphertext.subarray(12, -16);
      try {
        const aesgcm = crypto8.createDecipheriv("aes-256-gcm", key, nonce);
        aesgcm.setAuthTag(authTag);
        return `${aesgcm.update(ciphertext)}${aesgcm.final()}`;
      } catch (error) {
        const isRange = error instanceof RangeError;
        const invalidKeyLength = error.message === "Invalid key length";
        const decryptionFailed = error.message === "Unsupported state or unable to authenticate data";
        if (isRange || invalidKeyLength) {
          const err = new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");
          err.code = "INVALID_DOTENV_KEY";
          throw err;
        } else if (decryptionFailed) {
          const err = new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");
          err.code = "DECRYPTION_FAILED";
          throw err;
        } else {
          throw error;
        }
      }
    }
    function populate(processEnv, parsed, options = {}) {
      const debug = Boolean(options && options.debug);
      const override = Boolean(options && options.override);
      if (typeof parsed !== "object") {
        const err = new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");
        err.code = "OBJECT_REQUIRED";
        throw err;
      }
      for (const key of Object.keys(parsed)) {
        if (Object.prototype.hasOwnProperty.call(processEnv, key)) {
          if (override === true) {
            processEnv[key] = parsed[key];
          }
          if (debug) {
            if (override === true) {
              _debug(`"${key}" is already defined and WAS overwritten`);
            } else {
              _debug(`"${key}" is already defined and was NOT overwritten`);
            }
          }
        } else {
          processEnv[key] = parsed[key];
        }
      }
    }
    var DotenvModule = {
      configDotenv,
      _configVault,
      _parseVault,
      config,
      decrypt,
      parse: parse2,
      populate
    };
    module.exports.configDotenv = DotenvModule.configDotenv;
    module.exports._configVault = DotenvModule._configVault;
    module.exports._parseVault = DotenvModule._parseVault;
    module.exports.config = DotenvModule.config;
    module.exports.decrypt = DotenvModule.decrypt;
    module.exports.parse = DotenvModule.parse;
    module.exports.populate = DotenvModule.populate;
    module.exports = DotenvModule;
  }
});

// .sst/platform/eval.ts
init_define_app();
init_define_cli();
init_run();

// .sst/platform/src/auto/run.ts
init_define_app();
init_define_cli();
init_run();
init_link();
init_hint();
init_warp();
init_error();
import {
  interpolate as interpolate12,
  mergeOptions,
  runtime as runtime2
} from "@pulumi/pulumi";
import aws18 from "@pulumi/aws";
async function run(program) {
  process.chdir(define_cli_default.paths.root);
  addTransformationToRetainResourcesOnDelete();
  addTransformationToEnsureUniqueComponentNames();
  addTransformationToCheckBucketsHaveMultiplePolicies();
  Link.makeLinkable(aws18.dynamodb.Table, function() {
    return {
      properties: { tableName: this.name }
    };
  });
  Link.AWS.makeLinkable(aws18.dynamodb.Table, function() {
    return [
      {
        actions: ["dynamodb:*"],
        resources: [this.arn, interpolate12`${this.arn}/*`]
      }
    ];
  });
  Hint.reset();
  Link.reset();
  Warp.reset();
  const outputs = await program() || {};
  outputs._links = Link.list();
  outputs._hints = Hint.list();
  outputs._warps = Warp.list();
  outputs._receivers = Link.Receiver.list();
  return outputs;
}
function addTransformationToRetainResourcesOnDelete() {
  runtime2.registerStackTransformation((args) => {
    if (define_app_default.removal === "retain-all" || define_app_default.removal === "retain" && [
      "aws:s3/bucket:Bucket",
      "aws:s3/bucketV2:BucketV2",
      "aws:dynamodb/table:Table"
    ].includes(args.type)) {
      return {
        props: args.props,
        opts: mergeOptions({ retainOnDelete: true }, args.opts)
      };
    }
    return void 0;
  });
}
function addTransformationToEnsureUniqueComponentNames() {
  const componentNames = /* @__PURE__ */ new Set();
  runtime2.registerStackTransformation((args) => {
    if (args.type.startsWith("pulumi")) {
      return;
    }
    if (componentNames.has(args.name)) {
      throw new VisibleError(
        `Invalid component name "${args.name}". Component names must be unique.`
      );
    }
    componentNames.add(args.name);
    if (!args.name.match(/^[A-Z][a-zA-Z0-9]*$/)) {
      throw new VisibleError(
        `Invalid component name "${args.name}". Component names must start with an uppercase letter and contain only alphanumeric characters.`
      );
    }
    return void 0;
  });
}
function addTransformationToCheckBucketsHaveMultiplePolicies() {
  const bucketsWithPolicy = {};
  runtime2.registerStackTransformation((args) => {
    if (args.type !== "aws:s3/bucketPolicy:BucketPolicy")
      return;
    args.props.bucket.apply((bucket) => {
      if (bucketsWithPolicy[bucket])
        throw new VisibleError(
          `Cannot add bucket policy "${args.name}" to the AWS S3 Bucket "${bucket}". The bucket already has a policy attached "${bucketsWithPolicy[bucket]}".`
        );
      bucketsWithPolicy[bucket] = args.name;
    });
    return void 0;
  });
}

// .sst/platform/eval.ts
import * as aws19 from "@pulumi/aws";

// sst.config.ts
init_define_app();
init_define_cli();
init_run();
var import_dotenv = __toESM(require_main(), 1);
import_dotenv.default.config();
var sst_config_default = $config({
  app(input) {
    return {
      name: "snapshare",
      removal: input?.stage === "production" ? "retain" : "remove",
      home: "aws",
      providers: {
        aws: {
          region: "us-west-2"
        }
      }
    };
  },
  async run() {
    const KindeAudience = `snapshare-api-${define_app_default.stage}`;
    const environment = {
      TURSO_CONNECTION_URL: process.env.TURSO_CONNECTION_URL
    };
    const routeArgs = {
      auth: {
        jwt: {
          issuer: "https://snapshare.kinde.com",
          audiences: [KindeAudience]
        }
      }
    };
    const postHandler = "aws/functions/src/posts.handler";
    const authHandler = "aws/functions/src/auth.handler";
    const s3Handler = "aws/functions/src/s3.handler";
    const assetsBucket = new components_exports.aws.Bucket("SnapshareAssets");
    const api = new components_exports.aws.ApiGatewayV2("SnapShareApi");
    api.route("GET /posts", { handler: postHandler, environment });
    api.route("GET /posts/{id}", { handler: postHandler, environment });
    api.route("POST /posts", { handler: postHandler, environment }, routeArgs);
    api.route(
      "DELETE /posts/{id}",
      { handler: postHandler, environment },
      routeArgs
    );
    api.route("POST /register", {
      handler: authHandler,
      environment
    });
    api.route(
      "POST /signed-url",
      {
        handler: s3Handler,
        environment: {
          TURSO_CONNECTION_URL: process.env.TURSO_CONNECTION_URL,
          BUCKET_NAME: assetsBucket.name
        },
        link: [assetsBucket]
      },
      routeArgs
    );
    new components_exports.aws.StaticSite("SnapshareWeb", {
      build: {
        command: "npm run build",
        output: "dist"
      },
      environment: {
        VITE_API_URL: api.url,
        VITE_KINDE_AUDIENCE: KindeAudience
      }
    });
  }
});

// .sst/platform/eval.ts
globalThis.aws = aws19;
var result = await run(sst_config_default.run);
var eval_default = result;
export {
  eval_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPGRlZmluZTokYXBwPiIsICI8ZGVmaW5lOiRjbGk+IiwgIi4uL3NyYy9jb21wb25lbnRzL25hbWluZy50cyIsICIuLi9zcmMvY29tcG9uZW50cy9lcnJvci50cyIsICIuLi9zcmMvY29tcG9uZW50cy9jb21wb25lbnQudHMiLCAiLi4vc3JjL3V0aWwvZnMudHMiLCAiLi4vc3JjL3J1bnRpbWUvbm9kZS50cyIsICIuLi9zcmMvdXRpbC9sYXp5LnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy9oZWxwZXJzL2NsaWVudC50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hd3MvcHJvdmlkZXJzL2Z1bmN0aW9uLWNvZGUtdXBkYXRlci50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hd3MvaGVscGVycy9ib290c3RyYXAudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvZHVyYXRpb24udHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvc2l6ZS50cyIsICIuLi9zcmMvY29tcG9uZW50cy9saW5rLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL3dhcnAudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL2xvZ2dpbmcudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL2Z1bmN0aW9uLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy9wcm92aWRlcnMvaG9zdGVkLXpvbmUtbG9va3VwLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy9kbnMtdmFsaWRhdGVkLWNlcnRpZmljYXRlLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2hpbnQudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL2FwaWdhdGV3YXl2Mi50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hd3MvYXV0aC50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hd3MvYnVja2V0LnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy9jcm9uLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy9keW5hbW8udHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL3Bvc3RncmVzLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy9xdWV1ZS50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hd3MvaGVscGVycy9wcm92aWRlci50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hd3MvaHR0cHMtcmVkaXJlY3QudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL3Byb3ZpZGVycy9kaXN0cmlidXRpb24tZGVwbG95bWVudC13YWl0ZXIudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL2Nkbi50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hd3Mvcm91dGVyLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy9zbnMtdG9waWMudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL3Byb3ZpZGVycy9idWNrZXQtZmlsZXMudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL3Byb3ZpZGVycy9kaXN0cmlidXRpb24taW52YWxpZGF0aW9uLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2Jhc2UvYmFzZS1zdGF0aWMtc2l0ZS50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hd3Mvc3RhdGljLXNpdGUudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL3Byb3ZpZGVycy9lbWJlZGRpbmdzLXRhYmxlLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy92ZWN0b3IudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL3Byb3ZpZGVycy9vcmlnaW4tYWNjZXNzLWlkZW50aXR5LnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy9zc3Itc2l0ZS50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hd3MvcHJvdmlkZXJzL2NhY2hlLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2Jhc2UvYmFzZS1zc3Itc2l0ZS50cyIsICIuLi9zcmMvY29tcG9uZW50cy9hd3Mvc29saWQtc3RhcnQudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL2FzdHJvLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy9uZXh0anMudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvYXdzL3JlbWl4LnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2F3cy9pbmRleC50cyIsICIuLi9zcmMvY29tcG9uZW50cy9jbG91ZGZsYXJlL2J1Y2tldC50cyIsICIuLi9zcmMvY29tcG9uZW50cy9jbG91ZGZsYXJlL2t2LnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2Nsb3VkZmxhcmUvaGVscGVycy9mZXRjaC50cyIsICIuLi9zcmMvY29tcG9uZW50cy9jbG91ZGZsYXJlL3Byb3ZpZGVycy9rdi1kYXRhLnRzIiwgIi4uL3NyYy9ydW50aW1lL2Nsb3VkZmxhcmUudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvY2xvdWRmbGFyZS9wcm92aWRlcnMvd29ya2VyLXVybC50cyIsICIuLi9zcmMvY29tcG9uZW50cy9jbG91ZGZsYXJlL3Byb3ZpZGVycy96b25lLWxvb2t1cC50cyIsICIuLi9zcmMvY29tcG9uZW50cy9jbG91ZGZsYXJlL3dvcmtlci50cyIsICIuLi9zcmMvY29tcG9uZW50cy9jbG91ZGZsYXJlL3N0YXRpYy1zaXRlLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9wYXRoLXRvLXJlZ2V4cC9zcmMvaW5kZXgudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvY2xvdWRmbGFyZS9zc3Itc2l0ZS50cyIsICIuLi9zcmMvY29tcG9uZW50cy9jbG91ZGZsYXJlL3JlbWl4LnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL2Nsb3VkZmxhcmUvYWNjb3VudC1pZC50cyIsICIuLi9zcmMvY29tcG9uZW50cy9jbG91ZGZsYXJlL2luZGV4LnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL3NlY3JldC50cyIsICIuLi9zcmMvY29tcG9uZW50cy9pbmRleC50cyIsICIuLi9zcmMvY29uZmlnLnRzIiwgIi4uL3NyYy9zaGltL3J1bi5qcyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vZG90ZW52QDE2LjQuNS9ub2RlX21vZHVsZXMvZG90ZW52L3BhY2thZ2UuanNvbiIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vZG90ZW52QDE2LjQuNS9ub2RlX21vZHVsZXMvZG90ZW52L2xpYi9tYWluLmpzIiwgIi4uL2V2YWwudHMiLCAiLi4vc3JjL2F1dG8vcnVuLnRzIiwgIi4uLy4uLy4uL3NzdC5jb25maWcudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIiIsICIiLCAiaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVRvUGFzY2FsQ2FzZShzdHI6IHN0cmluZykge1xuICBjb25zdCBzdHJOb3JtID0gc3RyLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCBcIlwiKTtcbiAgcmV0dXJuIHN0ck5vcm0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJOb3JtLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJlZml4TmFtZShtYXhMZW5ndGg6IG51bWJlciwgbmFtZTogc3RyaW5nLCBzdWZmaXg/OiBzdHJpbmcpIHtcbiAgY29uc3Qgc3VmZml4U3RyID0gc3VmZml4ID8/IFwiXCI7XG5cbiAgY29uc3QgcHJlZml4ZWROYW1lID0gKCgpID0+IHtcbiAgICBjb25zdCBMID0gbWF4TGVuZ3RoIC0gc3VmZml4U3RyLmxlbmd0aDtcbiAgICBjb25zdCBhcHBMZW4gPSAkYXBwLm5hbWUubGVuZ3RoO1xuICAgIGNvbnN0IHN0YWdlTGVuID0gJGFwcC5zdGFnZS5sZW5ndGg7XG4gICAgY29uc3QgbmFtZUxlbiA9IG5hbWUubGVuZ3RoO1xuXG4gICAgaWYgKGFwcExlbiArIHN0YWdlTGVuICsgbmFtZUxlbiArIDIgPD0gTCkge1xuICAgICAgcmV0dXJuIGAkeyRhcHAubmFtZX0tJHskYXBwLnN0YWdlfS0ke25hbWV9YDtcbiAgICB9XG5cbiAgICBpZiAoc3RhZ2VMZW4gKyBuYW1lTGVuICsgMSA8PSBMKSB7XG4gICAgICBjb25zdCBhcHBUcnVuY2F0ZWQgPSAkYXBwLm5hbWUuc3Vic3RyaW5nKDAsIEwgLSBzdGFnZUxlbiAtIG5hbWVMZW4gLSAyKTtcbiAgICAgIHJldHVybiBhcHBUcnVuY2F0ZWQgPT09IFwiXCJcbiAgICAgICAgPyBgJHskYXBwLnN0YWdlfS0ke25hbWV9YFxuICAgICAgICA6IGAke2FwcFRydW5jYXRlZH0tJHskYXBwLnN0YWdlfS0ke25hbWV9YDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFnZVRydW5jYXRlZCA9ICRhcHAuc3RhZ2Uuc3Vic3RyaW5nKFxuICAgICAgMCxcbiAgICAgIE1hdGgubWF4KDgsIEwgLSBuYW1lTGVuIC0gMSksXG4gICAgKTtcbiAgICBjb25zdCBuYW1lVHJ1bmNhdGVkID0gbmFtZS5zdWJzdHJpbmcoMCwgTCAtIHN0YWdlVHJ1bmNhdGVkLmxlbmd0aCAtIDEpO1xuICAgIHJldHVybiBgJHtzdGFnZVRydW5jYXRlZH0tJHtuYW1lVHJ1bmNhdGVkfWA7XG4gIH0pKCk7XG5cbiAgcmV0dXJuIGAke3ByZWZpeGVkTmFtZX0ke3N1ZmZpeFN0cn1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzaE51bWJlclRvUHJldHR5U3RyaW5nKG51bWJlcjogbnVtYmVyLCBsZW5ndGg6IG51bWJlcikge1xuICBjb25zdCBjaGFyTGVuZ3RoID0gUFJFVFRZX0NIQVJTLmxlbmd0aDtcbiAgbGV0IGhhc2ggPSBcIlwiO1xuICB3aGlsZSAobnVtYmVyID4gMCkge1xuICAgIGhhc2ggPSBQUkVUVFlfQ0hBUlNbbnVtYmVyICUgY2hhckxlbmd0aF0gKyBoYXNoO1xuICAgIG51bWJlciA9IE1hdGguZmxvb3IobnVtYmVyIC8gY2hhckxlbmd0aCk7XG4gIH1cblxuICAvLyBQYWRkaW5nIHdpdGggJ3MnXG4gIGhhc2ggPSBoYXNoLnNsaWNlKDAsIGxlbmd0aCk7XG4gIHdoaWxlIChoYXNoLmxlbmd0aCA8IGxlbmd0aCkge1xuICAgIGhhc2ggPSBcInNcIiArIGhhc2g7XG4gIH1cblxuICByZXR1cm4gaGFzaDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc2hTdHJpbmdUb1ByZXR0eVN0cmluZyhzdHI6IHN0cmluZywgbGVuZ3RoOiBudW1iZXIpIHtcbiAgY29uc3QgaGFzaCA9IGNyeXB0by5jcmVhdGVIYXNoKFwic2hhMjU2XCIpO1xuICBoYXNoLnVwZGF0ZShzdHIpO1xuICBjb25zdCBudW0gPSBOdW1iZXIoXCIweFwiICsgaGFzaC5kaWdlc3QoXCJoZXhcIikuc3Vic3RyaW5nKDAsIDE2KSk7XG4gIHJldHVybiBoYXNoTnVtYmVyVG9QcmV0dHlTdHJpbmcobnVtLCBsZW5ndGgpO1xufVxuXG5leHBvcnQgY29uc3QgUFJFVFRZX0NIQVJTID0gXCJhYmNkZWZoa21ub3JzdHV2d3h6XCI7XG4iLCAiZXhwb3J0IGNsYXNzIFZpc2libGVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IoLi4ubWVzc2FnZTogc3RyaW5nW10pIHtcbiAgICBzdXBlcihtZXNzYWdlLmpvaW4oXCJcXG5cIikpO1xuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgQ29tcG9uZW50UmVzb3VyY2UsXG4gIENvbXBvbmVudFJlc291cmNlT3B0aW9ucyxcbiAgSW5wdXRzLFxuICBpbnRlcnBvbGF0ZSxcbiAgb3V0cHV0LFxufSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCB7IHByZWZpeE5hbWUgfSBmcm9tIFwiLi9uYW1pbmcuanNcIjtcbmltcG9ydCB7IFZpc2libGVFcnJvciB9IGZyb20gXCIuL2Vycm9yLmpzXCI7XG5cbi8qKlxuICogSGVscGVyIHR5cGUgdG8gaW5saW5lIG5lc3RlZCB0eXBlc1xuICovXG5leHBvcnQgdHlwZSBQcmV0dGlmeTxUPiA9IHtcbiAgW0sgaW4ga2V5b2YgVF06IFRbS107XG59ICYge307XG5cbmV4cG9ydCB0eXBlIFRyYW5zZm9ybTxUPiA9IFQgfCAoKGFyZ3M6IFQpID0+IHZvaWQgfCBUKTtcbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm08VCBleHRlbmRzIG9iamVjdD4oXG4gIHRyYW5zZm9ybTogVHJhbnNmb3JtPFQ+IHwgdW5kZWZpbmVkLFxuICBhcmdzOiBULFxuKSB7XG4gIC8vIENhc2U6IHRyYW5zZm9ybSBpcyBhIGZ1bmN0aW9uXG4gIGlmICh0eXBlb2YgdHJhbnNmb3JtID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBjb25zdCByZXQgPSB0cmFuc2Zvcm0oYXJncyk7XG4gICAgcmV0dXJuIHJldCA/PyBhcmdzO1xuICB9XG5cbiAgLy8gQ2FzZTogbm8gdHJhbnNmb3JtXG4gIC8vIENhc2U6IHRyYW5zZm9ybSBpcyBhbiBhcmd1bWVudFxuICByZXR1cm4geyAuLi5hcmdzLCAuLi50cmFuc2Zvcm0gfTtcbn1cblxuZXhwb3J0IGNsYXNzIENvbXBvbmVudCBleHRlbmRzIENvbXBvbmVudFJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhcmdzPzogSW5wdXRzLFxuICAgIG9wdHM/OiBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKHR5cGUsIG5hbWUsIGFyZ3MsIHtcbiAgICAgIHRyYW5zZm9ybWF0aW9uczogW1xuICAgICAgICAoYXJncykgPT4ge1xuICAgICAgICAgIC8vIEVuc3VyZSBuYW1lcyBhcmUgcHJlZml4ZWQgd2l0aCBwYXJlbnQncyBuYW1lXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXJncy50eXBlICE9PSB0eXBlICYmXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICAhYXJncy5uYW1lLnN0YXJ0c1dpdGgoYXJncy5vcHRzLnBhcmVudCEuX19uYW1lKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgSW4gXCIke25hbWV9XCIgY29tcG9uZW50LCB0aGUgbmFtZSBvZiBcIiR7YXJncy5uYW1lfVwiICgke2FyZ3MudHlwZX0pIGlzIG5vdCBwcmVmaXhlZCB3aXRoIHBhcmVudCdzIG5hbWVgLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFbnN1cmUgcGh5c2ljYWwgbmFtZXMgYXJlIHByZWZpeGVkIHdpdGggYXBwL3N0YWdlXG4gICAgICAgICAgaWYgKGFyZ3MudHlwZS5zdGFydHNXaXRoKFwic3N0OlwiKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoYXJncy50eXBlID09PSBcInB1bHVtaS1ub2RlanM6ZHluYW1pYzpSZXNvdXJjZVwiKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChhcmdzLnR5cGUgPT09IFwicmFuZG9tOmluZGV4L3JhbmRvbUlkOlJhbmRvbUlkXCIpIHJldHVybiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICBsZXQgb3ZlcnJpZGVzO1xuICAgICAgICAgIHN3aXRjaCAoYXJncy50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiYXdzOmNsb3Vkd2F0Y2gvZXZlbnRSdWxlOkV2ZW50UnVsZVwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czppYW0vdXNlcjpVc2VyXCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOmxhbWJkYS9mdW5jdGlvbjpGdW5jdGlvblwiOlxuICAgICAgICAgICAgICBvdmVycmlkZXMgPSB7IG5hbWU6IHByZWZpeE5hbWUoNjQsIGFyZ3MubmFtZSkgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYXdzOmFwaWdhdGV3YXl2Mi9hcGk6QXBpXCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOmFwaWdhdGV3YXl2Mi9hdXRob3JpemVyOkF1dGhvcml6ZXJcIjpcbiAgICAgICAgICAgICAgb3ZlcnJpZGVzID0geyBuYW1lOiBwcmVmaXhOYW1lKDEyOCwgYXJncy5uYW1lKSB9O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6ZHluYW1vZGIvdGFibGU6VGFibGVcIjpcbiAgICAgICAgICAgICAgb3ZlcnJpZGVzID0geyBuYW1lOiBwcmVmaXhOYW1lKDI1NSwgYXJncy5uYW1lKSB9O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6c25zL3RvcGljOlRvcGljXCI6XG4gICAgICAgICAgICAgIG92ZXJyaWRlcyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBvdXRwdXQoYXJncy5wcm9wcy5maWZvVG9waWMpLmFwcGx5KChmaWZvKSA9PlxuICAgICAgICAgICAgICAgICAgcHJlZml4TmFtZSgyNTYsIGFyZ3MubmFtZSwgZmlmbyA/IFwiLmZpZm9cIiA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY2xvdWRmbGFyZTppbmRleC9yMkJ1Y2tldDpSMkJ1Y2tldFwiOlxuICAgICAgICAgICAgY2FzZSBcImNsb3VkZmxhcmU6aW5kZXgvd29ya2VyU2NyaXB0OldvcmtlclNjcmlwdFwiOlxuICAgICAgICAgICAgICBvdmVycmlkZXMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogcHJlZml4TmFtZSg2NCwgYXJncy5uYW1lKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJjbG91ZGZsYXJlOmluZGV4L3dvcmtlcnNLdk5hbWVzcGFjZTpXb3JrZXJzS3ZOYW1lc3BhY2VcIjpcbiAgICAgICAgICAgICAgb3ZlcnJpZGVzID0ge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBwcmVmaXhOYW1lKDY0LCBhcmdzLm5hbWUpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImF3czpyZHMvY2x1c3RlcjpDbHVzdGVyXCI6XG4gICAgICAgICAgICAgIG92ZXJyaWRlcyA9IHtcbiAgICAgICAgICAgICAgICBjbHVzdGVySWRlbnRpZmllcjogcHJlZml4TmFtZSg2MywgYXJncy5uYW1lKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6cmRzL2NsdXN0ZXJJbnN0YW5jZTpDbHVzdGVySW5zdGFuY2VcIjpcbiAgICAgICAgICAgICAgb3ZlcnJpZGVzID0ge1xuICAgICAgICAgICAgICAgIGlkZW50aWZpZXI6IHByZWZpeE5hbWUoNjMsIGFyZ3MubmFtZSkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYXdzOnNxcy9xdWV1ZTpRdWV1ZVwiOlxuICAgICAgICAgICAgICBvdmVycmlkZXMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogb3V0cHV0KGFyZ3MucHJvcHMuZmlmb1F1ZXVlKS5hcHBseSgoZmlmbykgPT5cbiAgICAgICAgICAgICAgICAgIHByZWZpeE5hbWUoODAsIGFyZ3MubmFtZSwgZmlmbyA/IFwiLmZpZm9cIiA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAvLyByZXNvdXJjZXMgcHJlZml4ZWQgbWFudWFsbHlcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6aWFtL3JvbGU6Um9sZVwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czpzMy9idWNrZXRWMjpCdWNrZXRWMlwiOlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIC8vIHJlc291cmNlcyBub3QgcHJlZml4ZWRcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6YXBpZ2F0ZXdheXYyL2FwaU1hcHBpbmc6QXBpTWFwcGluZ1wiOlxuICAgICAgICAgICAgY2FzZSBcImF3czphcGlnYXRld2F5djIvZG9tYWluTmFtZTpEb21haW5OYW1lXCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOmFwaWdhdGV3YXl2Mi9pbnRlZ3JhdGlvbjpJbnRlZ3JhdGlvblwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czphcGlnYXRld2F5djIvcm91dGU6Um91dGVcIjpcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6YXBpZ2F0ZXdheXYyL3N0YWdlOlN0YWdlXCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOmFjbS9jZXJ0aWZpY2F0ZTpDZXJ0aWZpY2F0ZVwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czphY20vY2VydGlmaWNhdGVWYWxpZGF0aW9uOkNlcnRpZmljYXRlVmFsaWRhdGlvblwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czppYW0vYWNjZXNzS2V5OkFjY2Vzc0tleVwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czppYW0vcG9saWN5OlBvbGljeVwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czppYW0vcm9sZVBvbGljeUF0dGFjaG1lbnQ6Um9sZVBvbGljeUF0dGFjaG1lbnRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6aWFtL3VzZXJQb2xpY3k6VXNlclBvbGljeVwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czpjbG91ZGZyb250L2NhY2hlUG9saWN5OkNhY2hlUG9saWN5XCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOmNsb3VkZnJvbnQvZGlzdHJpYnV0aW9uOkRpc3RyaWJ1dGlvblwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czpjbG91ZGZyb250L2Z1bmN0aW9uOkZ1bmN0aW9uXCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOmNsb3VkZnJvbnQvb3JpZ2luQWNjZXNzSWRlbnRpdHk6T3JpZ2luQWNjZXNzSWRlbnRpdHlcIjpcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6Y2xvdWR3YXRjaC9ldmVudFJ1bGU6RXZlbnRSdWxlXCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOmNsb3Vkd2F0Y2gvZXZlbnRUYXJnZXQ6RXZlbnRUYXJnZXRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6Y2xvdWR3YXRjaC9sb2dHcm91cDpMb2dHcm91cFwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czpsYW1iZGEvZXZlbnRTb3VyY2VNYXBwaW5nOkV2ZW50U291cmNlTWFwcGluZ1wiOlxuICAgICAgICAgICAgY2FzZSBcImF3czpsYW1iZGEvZnVuY3Rpb25Vcmw6RnVuY3Rpb25VcmxcIjpcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6bGFtYmRhL2ludm9jYXRpb246SW52b2NhdGlvblwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czpsYW1iZGEvcGVybWlzc2lvbjpQZXJtaXNzaW9uXCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOnJvdXRlNTMvcmVjb3JkOlJlY29yZFwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czpzMy9idWNrZXRDb3JzQ29uZmlndXJhdGlvblYyOkJ1Y2tldENvcnNDb25maWd1cmF0aW9uVjJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6czMvYnVja2V0Tm90aWZpY2F0aW9uOkJ1Y2tldE5vdGlmaWNhdGlvblwiOlxuICAgICAgICAgICAgY2FzZSBcImF3czpzMy9idWNrZXRPYmplY3Q6QnVja2V0T2JqZWN0XCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOnMzL2J1Y2tldE9iamVjdHYyOkJ1Y2tldE9iamVjdHYyXCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOnMzL2J1Y2tldFBvbGljeTpCdWNrZXRQb2xpY3lcIjpcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6czMvYnVja2V0UHVibGljQWNjZXNzQmxvY2s6QnVja2V0UHVibGljQWNjZXNzQmxvY2tcIjpcbiAgICAgICAgICAgIGNhc2UgXCJhd3M6czMvYnVja2V0V2Vic2l0ZUNvbmZpZ3VyYXRpb25WMjpCdWNrZXRXZWJzaXRlQ29uZmlndXJhdGlvblYyXCI6XG4gICAgICAgICAgICBjYXNlIFwiYXdzOnNucy90b3BpY1N1YnNjcmlwdGlvbjpUb3BpY1N1YnNjcmlwdGlvblwiOlxuICAgICAgICAgICAgY2FzZSBcImNsb3VkZmxhcmU6aW5kZXgvd29ya2VyRG9tYWluOldvcmtlckRvbWFpblwiOlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoXG4gICAgICAgICAgICAgICAgYEluIFwiJHtuYW1lfVwiIGNvbXBvbmVudCwgdGhlIHBoeXNpY2FsIG5hbWUgb2YgXCIke2FyZ3MubmFtZX1cIiAoJHthcmdzLnR5cGV9KSBpcyBub3QgcHJlZml4ZWRgLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJvcHM6IHsgLi4uYXJncy5wcm9wcywgLi4ub3ZlcnJpZGVzIH0sXG4gICAgICAgICAgICBvcHRzOiBhcmdzLm9wdHMsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICAuLi5vcHRzLFxuICAgIH0pO1xuICB9XG59XG4iLCAiaW1wb3J0IGZzIGZyb20gXCJmcy9wcm9taXNlc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRBYm92ZShcbiAgZGlyOiBzdHJpbmcsXG4gIHRhcmdldDogc3RyaW5nLFxuKTogUHJvbWlzZTxzdHJpbmcgfCB1bmRlZmluZWQ+IHtcbiAgaWYgKGRpciA9PT0gXCIvXCIpIHJldHVybiB1bmRlZmluZWQ7XG4gIGlmIChhd2FpdCBleGlzdHNBc3luYyhwYXRoLmpvaW4oZGlyLCB0YXJnZXQpKSkgcmV0dXJuIGRpcjtcbiAgcmV0dXJuIGZpbmRBYm92ZShwYXRoLnJlc29sdmUocGF0aC5qb2luKGRpciwgXCIuLlwiKSksIHRhcmdldCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kQmVsb3coZGlyOiBzdHJpbmcsIHRhcmdldDogc3RyaW5nKSB7XG4gIGFzeW5jIGZ1bmN0aW9uIGxvb3AoZGlyOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGN1cnJlbnQgPSBwYXRoLmpvaW4oZGlyLCB0YXJnZXQpO1xuICAgIGlmIChhd2FpdCBleGlzdHNBc3luYyhjdXJyZW50KSkgcmV0dXJuIGRpcjtcblxuICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgZnMucmVhZGRpcihkaXIpO1xuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgaWYgKGZpbGUgPT09IFwibm9kZV9tb2R1bGVzXCIpIGNvbnRpbnVlO1xuICAgICAgaWYgKGZpbGUgPT09IFwiLnNzdFwiKSBjb250aW51ZTtcbiAgICAgIGNvbnN0IGZ1bGwgPSBwYXRoLmpvaW4oZGlyLCBmaWxlKTtcbiAgICAgIGNvbnN0IHN0YXQgPSBhd2FpdCBmcy5zdGF0KGZ1bGwpO1xuICAgICAgaWYgKHN0YXQuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsb29wKGZ1bGwpO1xuICAgICAgICBpZiAocmVzdWx0KSByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB2YWx1ZSA9IGF3YWl0IGxvb3AoZGlyKTtcbiAgaWYgKCF2YWx1ZSkgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBhICR7dGFyZ2V0fSBmaWxlYCk7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ2hpbGQocGFyZW50OiBzdHJpbmcsIGNoaWxkOiBzdHJpbmcpIHtcbiAgY29uc3QgcmVsYXRpdmUgPSBwYXRoLnJlbGF0aXZlKHBhcmVudCwgY2hpbGQpO1xuICByZXR1cm4gQm9vbGVhbihcbiAgICByZWxhdGl2ZSAmJiAhcmVsYXRpdmUuc3RhcnRzV2l0aChcIi4uXCIpICYmICFwYXRoLmlzQWJzb2x1dGUocmVsYXRpdmUpLFxuICApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhpc3RzQXN5bmMoaW5wdXQ6IHN0cmluZykge1xuICByZXR1cm4gZnNcbiAgICAuYWNjZXNzKGlucHV0KVxuICAgIC50aGVuKCgpID0+IHRydWUpXG4gICAgLmNhdGNoKCgpID0+IGZhbHNlKTtcbn1cbiIsICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGZzIGZyb20gXCJmcy9wcm9taXNlc1wiO1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gXCJjaGlsZF9wcm9jZXNzXCI7XG5pbXBvcnQgZXNidWlsZCwgeyBCdWlsZE9wdGlvbnMsIEJ1aWxkUmVzdWx0IH0gZnJvbSBcImVzYnVpbGRcIjtcbmltcG9ydCBwdWx1bWkgZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgeyBmaW5kQWJvdmUgfSBmcm9tIFwiLi4vdXRpbC9mcy5qc1wiO1xuaW1wb3J0IHsgRnVuY3Rpb25BcmdzIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvYXdzL2Z1bmN0aW9uLmpzXCI7XG5pbXBvcnQgZnNTeW5jIGZyb20gXCJmc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVpbGQoXG4gIG5hbWU6IHN0cmluZyxcbiAgaW5wdXQ6IHB1bHVtaS5VbndyYXA8RnVuY3Rpb25BcmdzPiAmIHtcbiAgICBsaW5rcz86IHtcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIHByb3BlcnRpZXM6IGFueTtcbiAgICB9W107XG4gIH0sXG4pIHtcbiAgY29uc3Qgb3V0ID0gcGF0aC5qb2luKCRjbGkucGF0aHMud29yaywgXCJhcnRpZmFjdHNcIiwgYCR7bmFtZX0tc3JjYCk7XG4gIGNvbnN0IHNvdXJjZW1hcE91dCA9IHBhdGguam9pbigkY2xpLnBhdGhzLndvcmssIFwiYXJ0aWZhY3RzXCIsIGAke25hbWV9LW1hcGApO1xuICBhd2FpdCBmcy5ybShvdXQsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgYXdhaXQgZnMubWtkaXIob3V0LCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgYXdhaXQgZnMubWtkaXIoc291cmNlbWFwT3V0LCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcblxuICBjb25zdCBwYXJzZWQgPSBwYXRoLnBhcnNlKGlucHV0LmhhbmRsZXIhKTtcbiAgY29uc3QgZmlsZSA9IFtcIi50c1wiLCBcIi50c3hcIiwgXCIubXRzXCIsIFwiLmN0c1wiLCBcIi5qc1wiLCBcIi5qc3hcIiwgXCIubWpzXCIsIFwiLmNqc1wiXVxuICAgIC5tYXAoKGV4dCkgPT4gcGF0aC5qb2luKHBhcnNlZC5kaXIsIHBhcnNlZC5uYW1lICsgZXh0KSlcbiAgICAuZmluZCgoZmlsZSkgPT4gZnNTeW5jLmV4aXN0c1N5bmMoZmlsZSkpITtcbiAgaWYgKCFmaWxlKVxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcImVycm9yXCIgYXMgY29uc3QsXG4gICAgICBlcnJvcnM6IFtgQ291bGQgbm90IGZpbmQgZmlsZSBmb3IgaGFuZGxlciBcIiR7aW5wdXQuaGFuZGxlcn1cImBdLFxuICAgIH07XG5cbiAgY29uc3Qgbm9kZWpzID0gaW5wdXQubm9kZWpzIHx8IHt9O1xuICBjb25zdCBpc0VTTSA9IChub2RlanMuZm9ybWF0IHx8IFwiZXNtXCIpID09PSBcImVzbVwiO1xuXG4gIGNvbnN0IHJlbGF0aXZlID0gcGF0aC5yZWxhdGl2ZSgkY2xpLnBhdGhzLnJvb3QsIHBhdGgucmVzb2x2ZShwYXJzZWQuZGlyKSk7XG5cbiAgY29uc3QgZXh0ZW5zaW9uID0gaXNFU00gPyBcIi5tanNcIiA6IFwiLmNqc1wiO1xuICBjb25zdCB0YXJnZXQgPSBwYXRoLmpvaW4oXG4gICAgb3V0LFxuICAgICFyZWxhdGl2ZS5zdGFydHNXaXRoKFwiLi5cIikgJiYgIXBhdGguaXNBYnNvbHV0ZShpbnB1dC5oYW5kbGVyISlcbiAgICAgID8gcmVsYXRpdmVcbiAgICAgIDogXCJcIixcbiAgICAvLyBMYW1iZGEgaGFuZGxlciBjYW4gb25seSBjb250YWluIDEgZG90IHNlcGFyYXRpbmcgdGhlIGZpbGUgbmFtZSBhbmQgZnVuY3Rpb24gbmFtZVxuICAgIHBhcnNlZC5uYW1lLnJlcGxhY2UoXCIuXCIsIFwiLVwiKSArIGV4dGVuc2lvbixcbiAgKTtcbiAgY29uc3QgaGFuZGxlciA9IHBhdGhcbiAgICAucmVsYXRpdmUob3V0LCB0YXJnZXQucmVwbGFjZShleHRlbnNpb24sIHBhcnNlZC5leHQpKVxuICAgIC5zcGxpdChwYXRoLnNlcClcbiAgICAuam9pbihwYXRoLnBvc2l4LnNlcCk7XG5cbiAgLy8gUmVidWlsdCB1c2luZyBleGlzdGluZyBlc2J1aWxkIGNvbnRleHRcbiAgY29uc3QgZm9yY2VFeHRlcm5hbCA9IFtcInNoYXJwXCIsIFwicGctbmF0aXZlXCJdO1xuICBjb25zdCB7IGV4dGVybmFsLCAuLi5vdmVycmlkZSB9ID0gbm9kZWpzLmVzYnVpbGQgfHwge307XG4gIGNvbnN0IGxpbmtzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIGlucHV0LmxpbmtzPy5tYXAoKGl0ZW0pID0+IFtpdGVtLm5hbWUsIGl0ZW0ucHJvcGVydGllc10pIHx8IFtdLFxuICApO1xuICBjb25zdCBvcHRpb25zOiBCdWlsZE9wdGlvbnMgPSB7XG4gICAgZW50cnlQb2ludHM6IFtwYXRoLnJlc29sdmUoZmlsZSldLFxuICAgIHBsYXRmb3JtOiBcIm5vZGVcIixcbiAgICBleHRlcm5hbDogW1xuICAgICAgLi4uZm9yY2VFeHRlcm5hbCxcbiAgICAgIC4uLihub2RlanMuaW5zdGFsbCB8fCBbXSksXG4gICAgICAuLi4oZXh0ZXJuYWwgfHwgW10pLFxuICAgIF0sXG4gICAgbG9hZGVyOiBub2RlanMubG9hZGVyLFxuICAgIGtlZXBOYW1lczogdHJ1ZSxcbiAgICBidW5kbGU6IHRydWUsXG4gICAgbG9nTGV2ZWw6IFwic2lsZW50XCIsXG4gICAgc3BsaXR0aW5nOiBub2RlanMuc3BsaXR0aW5nLFxuICAgIG1ldGFmaWxlOiB0cnVlLFxuICAgIG91dEV4dGVuc2lvbjogbm9kZWpzLnNwbGl0dGluZyA/IHsgXCIuanNcIjogXCIubWpzXCIgfSA6IHVuZGVmaW5lZCxcbiAgICAuLi4oaXNFU01cbiAgICAgID8ge1xuICAgICAgICAgIGZvcm1hdDogXCJlc21cIixcbiAgICAgICAgICB0YXJnZXQ6IFwiZXNuZXh0XCIsXG4gICAgICAgICAgbWFpbkZpZWxkczogW1wibW9kdWxlXCIsIFwibWFpblwiXSxcbiAgICAgICAgICBiYW5uZXI6IHtcbiAgICAgICAgICAgIGpzOiBbXG4gICAgICAgICAgICAgIGBpbXBvcnQgeyBjcmVhdGVSZXF1aXJlIGFzIHRvcExldmVsQ3JlYXRlUmVxdWlyZSB9IGZyb20gJ21vZHVsZSc7YCxcbiAgICAgICAgICAgICAgYGNvbnN0IHJlcXVpcmUgPSB0b3BMZXZlbENyZWF0ZVJlcXVpcmUoaW1wb3J0Lm1ldGEudXJsKTtgLFxuICAgICAgICAgICAgICBgaW1wb3J0IHsgZmlsZVVSTFRvUGF0aCBhcyB0b3BMZXZlbEZpbGVVcmxUb1BhdGgsIFVSTCBhcyB0b3BMZXZlbFVSTCB9IGZyb20gXCJ1cmxcImAsXG4gICAgICAgICAgICAgIGBjb25zdCBfX2Rpcm5hbWUgPSB0b3BMZXZlbEZpbGVVcmxUb1BhdGgobmV3IHRvcExldmVsVVJMKFwiLlwiLCBpbXBvcnQubWV0YS51cmwpKWAsXG4gICAgICAgICAgICAgIGBnbG9iYWxUaGlzLiRTU1RfTElOS1MgPSAke0pTT04uc3RyaW5naWZ5KGxpbmtzKX07YCxcbiAgICAgICAgICAgICAgbm9kZWpzLmJhbm5lciB8fCBcIlwiLFxuICAgICAgICAgICAgXS5qb2luKFwiXFxuXCIpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIDoge1xuICAgICAgICAgIGZvcm1hdDogXCJjanNcIixcbiAgICAgICAgICB0YXJnZXQ6IFwibm9kZTE0XCIsXG4gICAgICAgICAgYmFubmVyOiB7XG4gICAgICAgICAgICBqczogW1xuICAgICAgICAgICAgICBgZ2xvYmFsVGhpcy4kU1NUX0xJTktTID0gJHtKU09OLnN0cmluZ2lmeShsaW5rcyl9O2AsXG4gICAgICAgICAgICAgIG5vZGVqcy5iYW5uZXIgfHwgXCJcIixcbiAgICAgICAgICAgIF0uam9pbihcIlxcblwiKSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICBvdXRmaWxlOiAhbm9kZWpzLnNwbGl0dGluZyA/IHRhcmdldCA6IHVuZGVmaW5lZCxcbiAgICBvdXRkaXI6IG5vZGVqcy5zcGxpdHRpbmcgPyBwYXRoLmRpcm5hbWUodGFyZ2V0KSA6IHVuZGVmaW5lZCxcbiAgICAvLyBhbHdheXMgZ2VuZXJhdGUgc291cmNlbWFwcyBpbiBsb2NhbFxuICAgIC8vIG5ldmVyIGdlbmVyYXRlIHNvdXJjZW1hcHMgaWYgZXhwbGljaXRseSBmYWxzZVxuICAgIC8vIG90aGVyd2lzZSBnZW5lcmF0ZSBzb3VyY2VtYXBzXG4gICAgc291cmNlbWFwOiBub2RlanMuc291cmNlbWFwID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZSxcbiAgICBtaW5pZnk6IG5vZGVqcy5taW5pZnksXG4gICAgLi4ub3ZlcnJpZGUsXG4gIH07XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlc2J1aWxkLmJ1aWxkKG9wdGlvbnMpO1xuXG4gICAgLy8gSW5zdGFsbCBub2RlX21vZHVsZXNcbiAgICBjb25zdCBpbnN0YWxsUGFja2FnZXMgPSBbXG4gICAgICAuLi4obm9kZWpzLmluc3RhbGwgfHwgW10pLFxuICAgICAgLi4uZm9yY2VFeHRlcm5hbFxuICAgICAgICAuZmlsdGVyKChwa2cpID0+ICFleHRlcm5hbD8uaW5jbHVkZXMocGtnKSlcbiAgICAgICAgLmZpbHRlcigocGtnKSA9PlxuICAgICAgICAgIE9iamVjdC52YWx1ZXMocmVzdWx0Lm1ldGFmaWxlPy5pbnB1dHMgfHwge30pLnNvbWUoKHsgaW1wb3J0cyB9KSA9PlxuICAgICAgICAgICAgaW1wb3J0cy5zb21lKCh7IHBhdGggfSkgPT4gcGF0aCA9PT0gcGtnKSxcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgIF07XG5cbiAgICAvLyBUT0RPIGJ1YmJsZSB1cCB0aGUgd2FybmluZ3NcbiAgICBjb25zdCB3YXJuaW5nczogc3RyaW5nW10gPSBbXTtcbiAgICBPYmplY3QuZW50cmllcyhyZXN1bHQubWV0YWZpbGU/LmlucHV0cyB8fCB7fSkuZm9yRWFjaChcbiAgICAgIChbaW5wdXRQYXRoLCB7IGltcG9ydHMgfV0pID0+XG4gICAgICAgIGltcG9ydHNcbiAgICAgICAgICAuZmlsdGVyKCh7IHBhdGggfSkgPT4gcGF0aC5pbmNsdWRlcyhcInNzdC9jb25zdHJ1Y3RzXCIpKVxuICAgICAgICAgIC5mb3JFYWNoKCh7IHBhdGggfSkgPT4ge1xuICAgICAgICAgICAgd2FybmluZ3MucHVzaChcbiAgICAgICAgICAgICAgYFlvdSBhcmUgaW1wb3J0aW5nIGZyb20gXCIke3BhdGh9XCIgaW4gXCIke2lucHV0UGF0aH1cIi4gRGlkIHlvdSBtZWFuIHRvIGltcG9ydCBmcm9tIFwic3N0L25vZGVcIj9gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KSxcbiAgICApO1xuXG4gICAgaWYgKGluc3RhbGxQYWNrYWdlcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNyYyA9IGF3YWl0IGZpbmRBYm92ZShwYXJzZWQuZGlyLCBcInBhY2thZ2UuanNvblwiKTtcbiAgICAgIGlmICghc3JjKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogXCJlcnJvclwiIGFzIGNvbnN0LFxuICAgICAgICAgIGVycm9yczogW1xuICAgICAgICAgICAgYENvdWxkIG5vdCBmaW5kIHBhY2thZ2UuanNvbiBmb3IgaGFuZGxlciBcIiR7aW5wdXQuaGFuZGxlcn1cImAsXG4gICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKFxuICAgICAgICBhd2FpdCBmc1xuICAgICAgICAgIC5yZWFkRmlsZShwYXRoLmpvaW4oc3JjLCBcInBhY2thZ2UuanNvblwiKSlcbiAgICAgICAgICAudGhlbigoeCkgPT4geC50b1N0cmluZygpKSxcbiAgICAgICk7XG4gICAgICBhd2FpdCBmcy53cml0ZUZpbGUoXG4gICAgICAgIHBhdGguam9pbihvdXQsIFwicGFja2FnZS5qc29uXCIpLFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgZGVwZW5kZW5jaWVzOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICBpbnN0YWxsUGFja2FnZXMubWFwKCh4KSA9PiBbeCwganNvbi5kZXBlbmRlbmNpZXM/Llt4XSB8fCBcIipcIl0pLFxuICAgICAgICAgICksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGNtZCA9IFtcIm5wbSBpbnN0YWxsXCJdO1xuICAgICAgaWYgKGluc3RhbGxQYWNrYWdlcy5pbmNsdWRlcyhcInNoYXJwXCIpKSB7XG4gICAgICAgIGNtZC5wdXNoKFxuICAgICAgICAgIFwiLS1wbGF0Zm9ybT1saW51eFwiLFxuICAgICAgICAgIGlucHV0LmFyY2hpdGVjdHVyZSA9PT0gXCJhcm02NFwiID8gXCItLWFyY2g9YXJtNjRcIiA6IFwiLS1hcmNoPXg2NFwiLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBleGVjKGNtZC5qb2luKFwiIFwiKSwgeyBjd2Q6IG91dCB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBtb3ZlU291cmNlbWFwID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKG5vZGVqcy5zb3VyY2VtYXApIHJldHVybjtcblxuICAgICAgY29uc3QgbWFwID0gT2JqZWN0LmtleXMocmVzdWx0Lm1ldGFmaWxlPy5vdXRwdXRzIHx8IHt9KS5maW5kKChpdGVtKSA9PlxuICAgICAgICBpdGVtLmVuZHNXaXRoKFwiLm1hcFwiKSxcbiAgICAgICk7XG4gICAgICBpZiAoIW1hcCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBvbGRQYXRoID0gcGF0aC5yZXNvbHZlKG91dCwgbWFwKTtcbiAgICAgIGNvbnN0IG5ld1BhdGggPSBwYXRoLmpvaW4oc291cmNlbWFwT3V0LCBwYXRoLmJhc2VuYW1lKG1hcCkpO1xuICAgICAgYXdhaXQgZnMucmVuYW1lKG9sZFBhdGgsIG5ld1BhdGgpO1xuICAgICAgcmV0dXJuIG5ld1BhdGg7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcInN1Y2Nlc3NcIiBhcyBjb25zdCxcbiAgICAgIG91dCxcbiAgICAgIGhhbmRsZXIsXG4gICAgICBzb3VyY2VtYXA6IGF3YWl0IG1vdmVTb3VyY2VtYXAoKSxcbiAgICB9O1xuICB9IGNhdGNoIChleDogYW55KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gZXggYXMgQnVpbGRSZXN1bHQ7XG4gICAgaWYgKFwiZXJyb3JzXCIgaW4gcmVzdWx0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImVycm9yXCIgYXMgY29uc3QsXG4gICAgICAgIGVycm9yczogcmVzdWx0LmVycm9ycy5mbGF0TWFwKCh4KSA9PiBbeC50ZXh0XSkuZmlsdGVyKEJvb2xlYW4pLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJlcnJvclwiIGFzIGNvbnN0LFxuICAgICAgZXJyb3JzOiBbZXgudG9TdHJpbmcoKV0sXG4gICAgfTtcbiAgfVxufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBsYXp5PFQ+KGNhbGxiYWNrOiAoKSA9PiBUKSB7XG4gIGxldCBsb2FkZWQgPSBmYWxzZTtcbiAgbGV0IHJlc3VsdDogVDtcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGlmICghbG9hZGVkKSB7XG4gICAgICByZXN1bHQgPSBjYWxsYmFjaygpO1xuICAgICAgbG9hZGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBTdGFuZGFyZFJldHJ5U3RyYXRlZ3kgfSBmcm9tIFwiQGF3cy1zZGsvbWlkZGxld2FyZS1yZXRyeVwiO1xuZXhwb3J0IHR5cGUge30gZnJvbSBcIkBzbWl0aHkvdHlwZXNcIjtcbmltcG9ydCB7IGxhenkgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9sYXp5XCI7XG5cbmNvbnN0IHVzZUNsaWVudENhY2hlID0gbGF6eSgoKSA9PiBuZXcgTWFwPHN0cmluZywgYW55PigpKTtcblxudHlwZSBDbGllbnRPcHRpb25zID0ge1xuICByZWdpb24/OiBzdHJpbmc7XG4gIHJldHJhYmxlRXJyb3JzPzogc3RyaW5nW107XG59O1xuXG5leHBvcnQgY29uc3QgdXNlQ2xpZW50ID0gPEMgZXh0ZW5kcyBhbnk+KFxuICBjbGllbnQ6IG5ldyAoY29uZmlnOiBhbnkpID0+IEMsXG4gIG9wdHM/OiBDbGllbnRPcHRpb25zLFxuKSA9PiB7XG4gIGNvbnN0IGNhY2hlID0gdXNlQ2xpZW50Q2FjaGUoKTtcbiAgY29uc3QgZXhpc3RpbmcgPSBjYWNoZS5nZXQoY2xpZW50Lm5hbWUpO1xuICBpZiAoZXhpc3RpbmcpIHJldHVybiBleGlzdGluZyBhcyBDO1xuXG4gIGNvbnN0IHByaW50Tm9JbnRlcm5ldCA9ICgoKSA9PiB7XG4gICAgbGV0IGxhc3RQcmludGVkID0gMDtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgIGlmIChub3cgLSBsYXN0UHJpbnRlZCA+IDUwMDApIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJXYWl0aW5nIGZvciBpbnRlcm5ldCBjb25uZWN0aW9uLi4uXCIpO1xuICAgICAgICBsYXN0UHJpbnRlZCA9IG5vdztcbiAgICAgIH1cbiAgICB9O1xuICB9KSgpO1xuICBjb25zdCByZXN1bHQgPSBuZXcgY2xpZW50KHtcbiAgICByZWdpb246IG9wdHM/LnJlZ2lvbixcbiAgICByZXRyeVN0cmF0ZWd5OiBuZXcgU3RhbmRhcmRSZXRyeVN0cmF0ZWd5KGFzeW5jICgpID0+IDEwMDAwLCB7XG4gICAgICByZXRyeURlY2lkZXI6IChlOiBhbnkpID0+IHtcbiAgICAgICAgLy8gSGFuZGxlIG5vIGludGVybmV0IGNvbm5lY3Rpb24gPT4gcmV0cnlcbiAgICAgICAgaWYgKGUuY29kZSA9PT0gXCJFTk9URk9VTkRcIikge1xuICAgICAgICAgIHByaW50Tm9JbnRlcm5ldCgpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIHRocm90dGxpbmcgZXJyb3JzID0+IHJldHJ5XG4gICAgICAgIGlmIChcbiAgICAgICAgICBbXG4gICAgICAgICAgICBcIlRocm90dGxpbmdFeGNlcHRpb25cIixcbiAgICAgICAgICAgIFwiVGhyb3R0bGluZ1wiLFxuICAgICAgICAgICAgXCJUb29NYW55UmVxdWVzdHNFeGNlcHRpb25cIixcbiAgICAgICAgICAgIFwiT3BlcmF0aW9uQWJvcnRlZEV4Y2VwdGlvblwiLFxuICAgICAgICAgICAgXCJUaW1lb3V0RXJyb3JcIixcbiAgICAgICAgICAgIFwiTmV0d29ya2luZ0Vycm9yXCIsXG4gICAgICAgICAgICAuLi4ob3B0cz8ucmV0cmFibGVFcnJvcnMgPz8gW10pLFxuICAgICAgICAgIF0uaW5jbHVkZXMoZS5uYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0sXG4gICAgICBkZWxheURlY2lkZXI6IChfLCBhdHRlbXB0cykgPT4ge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4oMS41ICoqIGF0dGVtcHRzICogMTAwLCA1MDAwKTtcbiAgICAgIH0sXG4gICAgICAvLyBBV1MgU0RLIHYzIGhhcyBhbiBpZGVhIG9mIFwicmV0cnkgdG9rZW5zXCIgd2hpY2ggYXJlIHVzZWQgdG9cbiAgICAgIC8vIHByZXZlbnQgbXVsdGlwbGUgcmV0cmllcyBmcm9tIGhhcHBlbmluZyBhdCB0aGUgc2FtZSB0aW1lLlxuICAgICAgLy8gVGhpcyBpcyBhIHdvcmthcm91bmQgdG8gZGlzYWJsZSB0aGF0LlxuICAgICAgcmV0cnlRdW90YToge1xuICAgICAgICBoYXNSZXRyeVRva2VuczogKCkgPT4gdHJ1ZSxcbiAgICAgICAgcmVsZWFzZVJldHJ5VG9rZW5zOiAoKSA9PiB7fSxcbiAgICAgICAgcmV0cmlldmVSZXRyeVRva2VuczogKCkgPT4gMSxcbiAgICAgIH0sXG4gICAgfSksXG4gIH0pO1xuICBjYWNoZS5zZXQoY2xpZW50Lm5hbWUsIHJlc3VsdCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuIiwgImltcG9ydCB7IEN1c3RvbVJlc291cmNlT3B0aW9ucywgSW5wdXQsIE91dHB1dCwgZHluYW1pYyB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuaW1wb3J0IHtcbiAgTGFtYmRhQ2xpZW50LFxuICBVcGRhdGVGdW5jdGlvbkNvZGVDb21tYW5kLFxuICBHZXRGdW5jdGlvbkNvbW1hbmQsXG59IGZyb20gXCJAYXdzLXNkay9jbGllbnQtbGFtYmRhXCI7XG5pbXBvcnQgeyB1c2VDbGllbnQgfSBmcm9tIFwiLi4vaGVscGVycy9jbGllbnQuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBGdW5jdGlvbkNvZGVVcGRhdGVySW5wdXRzIHtcbiAgczNCdWNrZXQ6IElucHV0PHN0cmluZz47XG4gIHMzS2V5OiBJbnB1dDxzdHJpbmc+O1xuICBmdW5jdGlvbk5hbWU6IElucHV0PHN0cmluZz47XG4gIC8qKlxuICAgKiBUaGlzIGlzIHRvIGVuc3VyZSB0aGUgZnVuY3Rpb24gY29kZSBpcyByZS11cGRhdGVkIHdoZW4gdGhlIGZ1bmN0aW9uJ3NcbiAgICogY29uZmlndXJhdGlvbiBjaGFuZ2VzLiBXaXRob3V0IHRoaXMsIHRoZSBmdW5jdGlvbiBjb2RlIG1pZ2h0IGdldCByZXZlcnRlZFxuICAgKiBiYWNrIHRvIHRoZSBwbGFjZWhvbGRlciBjb2RlLlxuICAgKi9cbiAgZnVuY3Rpb25MYXN0TW9kaWZpZWQ6IElucHV0PHN0cmluZz47XG4gIHJlZ2lvbjogSW5wdXQ8c3RyaW5nPjtcbn1cblxuaW50ZXJmYWNlIElucHV0cyB7XG4gIHMzQnVja2V0OiBzdHJpbmc7XG4gIHMzS2V5OiBzdHJpbmc7XG4gIGZ1bmN0aW9uTmFtZTogc3RyaW5nO1xuICBmdW5jdGlvbkxhc3RNb2RpZmllZDogc3RyaW5nO1xuICByZWdpb246IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIE91dHB1dHMge1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRnVuY3Rpb25Db2RlVXBkYXRlciB7XG4gIHZlcnNpb246IE91dHB1dDxPdXRwdXRzW1widmVyc2lvblwiXT47XG59XG5cbmNsYXNzIFByb3ZpZGVyIGltcGxlbWVudHMgZHluYW1pYy5SZXNvdXJjZVByb3ZpZGVyIHtcbiAgYXN5bmMgY3JlYXRlKGlucHV0czogSW5wdXRzKTogUHJvbWlzZTxkeW5hbWljLkNyZWF0ZVJlc3VsdDxPdXRwdXRzPj4ge1xuICAgIGNvbnN0IHZlcnNpb24gPSBhd2FpdCB0aGlzLnVwZGF0ZUNvZGUoaW5wdXRzKTtcbiAgICBhd2FpdCB0aGlzLndhaXRGb3JVcGRhdGUoaW5wdXRzKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGlucHV0cy5mdW5jdGlvbk5hbWUsXG4gICAgICBvdXRzOiB7IHZlcnNpb24gfSxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgb2xkczogYW55LFxuICAgIG5ld3M6IElucHV0cyxcbiAgKTogUHJvbWlzZTxkeW5hbWljLlVwZGF0ZVJlc3VsdDxPdXRwdXRzPj4ge1xuICAgIGNvbnN0IHZlcnNpb24gPSBhd2FpdCB0aGlzLnVwZGF0ZUNvZGUobmV3cyk7XG4gICAgYXdhaXQgdGhpcy53YWl0Rm9yVXBkYXRlKG5ld3MpO1xuICAgIHJldHVybiB7IG91dHM6IHsgdmVyc2lvbiB9IH07XG4gIH1cblxuICBhc3luYyB1cGRhdGVDb2RlKGlucHV0czogSW5wdXRzKSB7XG4gICAgY29uc3QgY2xpZW50ID0gdXNlQ2xpZW50KExhbWJkYUNsaWVudCwge1xuICAgICAgcmVnaW9uOiBpbnB1dHMucmVnaW9uLFxuICAgICAgcmV0cmFibGVFcnJvcnM6IFtcbiAgICAgICAgLy8gTGFtYmRhIGlzIG5vdCByZWFkeSB0byBhY2NlcHQgdXBkYXRlcyByaWdodCBhZnRlciBjcmVhdGlvblxuICAgICAgICBcIlNlcnZpY2VFeGNlcHRpb25cIixcbiAgICAgIF0sXG4gICAgfSk7XG4gICAgY29uc3QgcmV0ID0gYXdhaXQgY2xpZW50LnNlbmQoXG4gICAgICBuZXcgVXBkYXRlRnVuY3Rpb25Db2RlQ29tbWFuZCh7XG4gICAgICAgIEZ1bmN0aW9uTmFtZTogaW5wdXRzLmZ1bmN0aW9uTmFtZSxcbiAgICAgICAgUzNCdWNrZXQ6IGlucHV0cy5zM0J1Y2tldCxcbiAgICAgICAgUzNLZXk6IGlucHV0cy5zM0tleSxcbiAgICAgIH0pLFxuICAgICk7XG4gICAgcmV0dXJuIHJldC5WZXJzaW9uID8/IFwidW5rbm93blwiO1xuICB9XG5cbiAgYXN5bmMgd2FpdEZvclVwZGF0ZShpbnB1dHM6IElucHV0cyk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGNsaWVudCA9IHVzZUNsaWVudChMYW1iZGFDbGllbnQsIHtcbiAgICAgIHJlZ2lvbjogaW5wdXRzLnJlZ2lvbixcbiAgICAgIHJldHJhYmxlRXJyb3JzOiBbXG4gICAgICAgIC8vIExhbWJkYSBpcyBub3QgcmVhZHkgdG8gYWNjZXB0IHVwZGF0ZXMgcmlnaHQgYWZ0ZXIgY3JlYXRpb25cbiAgICAgICAgXCJTZXJ2aWNlRXhjZXB0aW9uXCIsXG4gICAgICBdLFxuICAgIH0pO1xuICAgIGNvbnN0IHJldCA9IGF3YWl0IGNsaWVudC5zZW5kKFxuICAgICAgbmV3IEdldEZ1bmN0aW9uQ29tbWFuZCh7XG4gICAgICAgIEZ1bmN0aW9uTmFtZTogaW5wdXRzLmZ1bmN0aW9uTmFtZSxcbiAgICAgIH0pLFxuICAgICk7XG4gICAgaWYgKHJldC5Db25maWd1cmF0aW9uPy5MYXN0VXBkYXRlU3RhdHVzID09PSBcIlN1Y2Nlc3NmdWxcIikgcmV0dXJuO1xuXG4gICAgaWYgKHJldC5Db25maWd1cmF0aW9uPy5MYXN0VXBkYXRlU3RhdHVzID09PSBcIkZhaWxlZFwiKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gdXBkYXRlIGZ1bmN0aW9uICR7cmV0LkNvbmZpZ3VyYXRpb24uTGFzdFVwZGF0ZVN0YXR1c1JlYXNvbkNvZGV9OiAke3JldC5Db25maWd1cmF0aW9uLkxhc3RVcGRhdGVTdGF0dXNSZWFzb259YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwKSk7XG5cbiAgICByZXR1cm4gdGhpcy53YWl0Rm9yVXBkYXRlKGlucHV0cyk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEZ1bmN0aW9uQ29kZVVwZGF0ZXIgZXh0ZW5kcyBkeW5hbWljLlJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M6IEZ1bmN0aW9uQ29kZVVwZGF0ZXJJbnB1dHMsXG4gICAgb3B0cz86IEN1c3RvbVJlc291cmNlT3B0aW9ucyxcbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICBuZXcgUHJvdmlkZXIoKSxcbiAgICAgIGAke25hbWV9LnNzdC5hd3MuRnVuY3Rpb25Db2RlVXBkYXRlcmAsXG4gICAgICB7IC4uLmFyZ3MsIHZlcnNpb246IHVuZGVmaW5lZCB9LFxuICAgICAgb3B0cyxcbiAgICApO1xuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgU1NNQ2xpZW50LFxuICBHZXRQYXJhbWV0ZXJDb21tYW5kLFxuICBQYXJhbWV0ZXJOb3RGb3VuZCxcbiAgUHV0UGFyYW1ldGVyQ29tbWFuZCxcbn0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zc21cIjtcbmltcG9ydCB7XG4gIFMzQ2xpZW50LFxuICBDcmVhdGVCdWNrZXRDb21tYW5kLFxuICBQdXRCdWNrZXRWZXJzaW9uaW5nQ29tbWFuZCxcbn0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zM1wiO1xuZXhwb3J0IHR5cGUge30gZnJvbSBcIkBzbWl0aHkvdHlwZXNcIjtcbmltcG9ydCB7IFBSRVRUWV9DSEFSUywgaGFzaE51bWJlclRvUHJldHR5U3RyaW5nIH0gZnJvbSBcIi4uLy4uL25hbWluZ1wiO1xuXG5jb25zdCBWRVJTSU9OID0gMTtcblxuaW50ZXJmYWNlIEJvb3RzdHJhcERhdGEge1xuICB2ZXJzaW9uOiBudW1iZXI7XG4gIGFzc2V0OiBzdHJpbmc7XG4gIHN0YXRlOiBzdHJpbmc7XG59XG5cbmNvbnN0IGJvb3RzdHJhcEJ1Y2tldHM6IFJlY29yZDxzdHJpbmcsIFByb21pc2U8Qm9vdHN0cmFwRGF0YT4+ID0ge307XG5cbmV4cG9ydCBjb25zdCBib290c3RyYXAgPSB7XG4gIGZvclJlZ2lvbihyZWdpb246IHN0cmluZyk6IFByb21pc2U8Qm9vdHN0cmFwRGF0YT4ge1xuICAgIGlmIChyZWdpb24gaW4gYm9vdHN0cmFwQnVja2V0cykge1xuICAgICAgcmV0dXJuIGJvb3RzdHJhcEJ1Y2tldHNbcmVnaW9uXSE7XG4gICAgfVxuXG4gICAgY29uc3Qgc3NtID0gbmV3IFNTTUNsaWVudCh7XG4gICAgICAvLyBjcmVkZW50aWFsczoge1xuICAgICAgLy8gICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQhLFxuICAgICAgLy8gICBzZXNzaW9uVG9rZW46IHByb2Nlc3MuZW52LkFXU19TRVNTSU9OX1RPS0VOISxcbiAgICAgIC8vICAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkhLFxuICAgICAgLy8gfSxcbiAgICAgIHJlZ2lvbixcbiAgICB9KTtcbiAgICBjb25zdCBzMyA9IG5ldyBTM0NsaWVudCh7XG4gICAgICByZWdpb24sXG4gICAgICAvLyBjcmVkZW50aWFsczoge1xuICAgICAgLy8gICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQhLFxuICAgICAgLy8gICBzZXNzaW9uVG9rZW46IHByb2Nlc3MuZW52LkFXU19TRVNTSU9OX1RPS0VOISxcbiAgICAgIC8vICAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkhLFxuICAgICAgLy8gfSxcbiAgICB9KTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYnVja2V0ID0gKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3NtXG4gICAgICAgICAgLnNlbmQoXG4gICAgICAgICAgICBuZXcgR2V0UGFyYW1ldGVyQ29tbWFuZCh7XG4gICAgICAgICAgICAgIE5hbWU6IGAvc3N0L2Jvb3RzdHJhcGAsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBQYXJhbWV0ZXJOb3RGb3VuZCkgcmV0dXJuO1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChyZXN1bHQ/LlBhcmFtZXRlcj8uVmFsdWUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShyZXN1bHQuUGFyYW1ldGVyLlZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgICAgICAgfSBjYXRjaCAoZXgpIHt9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZW5lcmF0ZSBhIGJvb3RzdHJhcCBidWNrZXQgc3VmZml4IG51bWJlclxuICAgICAgICBjb25zdCBzdWZmaXhMZW5ndGggPSAxMjtcbiAgICAgICAgY29uc3QgbWluTnVtYmVyID0gTWF0aC5wb3coUFJFVFRZX0NIQVJTLmxlbmd0aCwgc3VmZml4TGVuZ3RoKTtcbiAgICAgICAgY29uc3QgbnVtYmVyU3VmZml4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogbWluTnVtYmVyKSArIG1pbk51bWJlcjtcbiAgICAgICAgY29uc3QgcmFuZCA9IGhhc2hOdW1iZXJUb1ByZXR0eVN0cmluZyhudW1iZXJTdWZmaXgsIHN1ZmZpeExlbmd0aCk7XG4gICAgICAgIGNvbnN0IGFzc2V0ID0gYHNzdC1hc3NldC0ke3JhbmR9YDtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBgc3N0LXN0YXRlLSR7cmFuZH1gO1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIGFzc2V0LFxuICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgIHZlcnNpb246IFZFUlNJT04sXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHMzLnNlbmQoXG4gICAgICAgICAgbmV3IENyZWF0ZUJ1Y2tldENvbW1hbmQoe1xuICAgICAgICAgICAgQnVja2V0OiBhc3NldCxcbiAgICAgICAgICB9KSxcbiAgICAgICAgKTtcbiAgICAgICAgYXdhaXQgczMuc2VuZChcbiAgICAgICAgICBuZXcgQ3JlYXRlQnVja2V0Q29tbWFuZCh7XG4gICAgICAgICAgICBCdWNrZXQ6IHN0YXRlLFxuICAgICAgICAgIH0pLFxuICAgICAgICApO1xuICAgICAgICBhd2FpdCBzMy5zZW5kKFxuICAgICAgICAgIG5ldyBQdXRCdWNrZXRWZXJzaW9uaW5nQ29tbWFuZCh7XG4gICAgICAgICAgICBCdWNrZXQ6IGFzc2V0LFxuICAgICAgICAgICAgVmVyc2lvbmluZ0NvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICAgICAgU3RhdHVzOiBcIkVuYWJsZWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgICAgIGF3YWl0IHNzbS5zZW5kKFxuICAgICAgICAgIG5ldyBQdXRQYXJhbWV0ZXJDb21tYW5kKHtcbiAgICAgICAgICAgIE5hbWU6IGAvc3N0L2Jvb3RzdHJhcGAsXG4gICAgICAgICAgICBWYWx1ZTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICBUeXBlOiBcIlN0cmluZ1wiLFxuICAgICAgICAgIH0pLFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gYXNzZXQ7XG4gICAgICB9KSgpO1xuXG4gICAgICByZXR1cm4gKGJvb3RzdHJhcEJ1Y2tldHNbcmVnaW9uXSA9IGJ1Y2tldCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHMzLmRlc3Ryb3koKTtcbiAgICAgIHNzbS5kZXN0cm95KCk7XG4gICAgfVxuICB9LFxufTtcbiIsICJleHBvcnQgdHlwZSBEdXJhdGlvbiA9IGAke251bWJlcn0gJHtcbiAgfCBcInNlY29uZFwiXG4gIHwgXCJzZWNvbmRzXCJcbiAgfCBcIm1pbnV0ZVwiXG4gIHwgXCJtaW51dGVzXCJcbiAgfCBcImhvdXJcIlxuICB8IFwiaG91cnNcIlxuICB8IFwiZGF5XCJcbiAgfCBcImRheXNcIn1gO1xuXG5leHBvcnQgdHlwZSBEdXJhdGlvbk1pbnV0ZXMgPSBgJHtudW1iZXJ9ICR7XG4gIHwgXCJzZWNvbmRcIlxuICB8IFwic2Vjb25kc1wiXG4gIHwgXCJtaW51dGVcIlxuICB8IFwibWludXRlc1wifWA7XG5cbmV4cG9ydCBmdW5jdGlvbiB0b1NlY29uZHMoZHVyYXRpb246IER1cmF0aW9uIHwgRHVyYXRpb25NaW51dGVzKSB7XG4gIGNvbnN0IFtjb3VudCwgdW5pdF0gPSBkdXJhdGlvbi5zcGxpdChcIiBcIik7XG4gIGNvbnN0IGNvdW50TnVtID0gcGFyc2VJbnQoY291bnQpO1xuICBjb25zdCB1bml0TG93ZXIgPSB1bml0LnRvTG93ZXJDYXNlKCk7XG4gIGlmICh1bml0TG93ZXIuc3RhcnRzV2l0aChcInNlY29uZFwiKSkge1xuICAgIHJldHVybiBjb3VudE51bTtcbiAgfSBlbHNlIGlmICh1bml0TG93ZXIuc3RhcnRzV2l0aChcIm1pbnV0ZVwiKSkge1xuICAgIHJldHVybiBjb3VudE51bSAqIDYwO1xuICB9IGVsc2UgaWYgKHVuaXRMb3dlci5zdGFydHNXaXRoKFwiaG91clwiKSkge1xuICAgIHJldHVybiBjb3VudE51bSAqIDM2MDA7XG4gIH0gZWxzZSBpZiAodW5pdExvd2VyLnN0YXJ0c1dpdGgoXCJkYXlcIikpIHtcbiAgICByZXR1cm4gY291bnROdW0gKiA4NjQwMDtcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkdXJhdGlvbiAke2R1cmF0aW9ufWApO1xufVxuIiwgImV4cG9ydCB0eXBlIFNpemUgPSBgJHtudW1iZXJ9ICR7XCJNQlwiIHwgXCJHQlwifWA7XG5cbmV4cG9ydCBmdW5jdGlvbiB0b01CcyhzaXplOiBTaXplKSB7XG4gIGNvbnN0IFtjb3VudCwgdW5pdF0gPSBzaXplLnNwbGl0KFwiIFwiKTtcbiAgY29uc3QgY291bnROdW0gPSBwYXJzZUludChjb3VudCk7XG4gIGlmICh1bml0ID09PSBcIk1CXCIpIHtcbiAgICByZXR1cm4gY291bnROdW07XG4gIH0gZWxzZSBpZiAodW5pdCA9PT0gXCJHQlwiKSB7XG4gICAgcmV0dXJuIGNvdW50TnVtICogMTAyNDtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc2l6ZSAke3NpemV9YCk7XG59XG4iLCAiaW1wb3J0IHsgSW5wdXQsIE91dHB1dCwgcnVudGltZSwgb3V0cHV0LCBhbGwgfSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCB7IEZ1bmN0aW9uUGVybWlzc2lvbkFyZ3MgfSBmcm9tIFwiLi9hd3MvZnVuY3Rpb24uanNcIjtcbmltcG9ydCB7IFZpc2libGVFcnJvciB9IGZyb20gXCIuL2Vycm9yLmpzXCI7XG5cbmV4cG9ydCBtb2R1bGUgTGluayB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgRGVmaW5pdGlvbiB7XG4gICAgcHJvcGVydGllczogSW5wdXQ8UmVjb3JkPHN0cmluZywgYW55Pj47XG4gIH1cblxuICBsZXQgbGlua3M6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIGFueT4+ID0ge307XG4gIGV4cG9ydCBmdW5jdGlvbiByZXNldCgpIHtcbiAgICBsaW5rcyA9IHt9O1xuICAgIHJ1bnRpbWUucmVnaXN0ZXJTdGFja1RyYW5zZm9ybWF0aW9uKChhcmdzKSA9PiB7XG4gICAgICBjb25zdCByZXNvdXJjZSA9IGFyZ3MucmVzb3VyY2U7XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgaWYgKExpbmsuaXNMaW5rYWJsZShyZXNvdXJjZSkgJiYgIWFyZ3Mub3B0cy5wYXJlbnQpIHtcbiAgICAgICAgICAvLyBFbnN1cmUgbGlua2FibGUgcmVzb3VyY2VzIGhhdmUgdW5pcXVlIG5hbWVzLiBUaGlzIGluY2x1ZGVzIGFsbFxuICAgICAgICAgIC8vIFNTVCBjb21wb25lbnRzIGFuZCBub24tU1NUIGNvbXBvbmVudHMgdGhhdCBhcmUgbGlua2FibGUuXG4gICAgICAgICAgaWYgKGxpbmtzW2FyZ3MubmFtZV0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50IG5hbWUgJHthcmdzLm5hbWV9IGlzIG5vdCB1bmlxdWVgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBsaW5rID0gcmVzb3VyY2UuZ2V0U1NUTGluaygpO1xuICAgICAgICAgIGxpbmtzW2FyZ3MubmFtZV0gPSBvdXRwdXQobGluay5wcm9wZXJ0aWVzKS5hcHBseSgocHJvcHMpID0+ICh7XG4gICAgICAgICAgICB0eXBlOiBhcmdzLnR5cGUucmVwbGFjZUFsbChcIjpcIiwgXCIuXCIpLFxuICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9wdHM6IGFyZ3Mub3B0cyxcbiAgICAgICAgcHJvcHM6IGFyZ3MucHJvcHMsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBMaW5rYWJsZSB7XG4gICAgdXJuOiBPdXRwdXQ8c3RyaW5nPjtcbiAgICBnZXRTU1RMaW5rKCk6IERlZmluaXRpb247XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gaXNMaW5rYWJsZShvYmo6IGFueSk6IG9iaiBpcyBMaW5rYWJsZSB7XG4gICAgcmV0dXJuIFwiZ2V0U1NUTGlua1wiIGluIG9iajtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBidWlsZChsaW5rczogYW55W10pIHtcbiAgICByZXR1cm4gbGlua3MubWFwKChsKSA9PiB7XG4gICAgICBpZiAoaXNMaW5rYWJsZShsKSkge1xuICAgICAgICBjb25zdCBsaW5rID0gbC5nZXRTU1RMaW5rKCk7XG4gICAgICAgIHJldHVybiBhbGwoW2wudXJuLCBsaW5rLnByb3BlcnRpZXNdKS5hcHBseSgoW3VybiwgcHJvcGVydGllc10pID0+ICh7XG4gICAgICAgICAgbmFtZTogdXJuLnNwbGl0KFwiOjpcIikuYXQoLTEpISxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAuLi5wcm9wZXJ0aWVzLFxuICAgICAgICAgICAgdHlwZTogdXJuLnNwbGl0KFwiOjpcIikuYXQoLTIpISxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKGAke2x9IGlzIG5vdCBhIGxpbmthYmxlIGNvbXBvbmVudGApO1xuICAgIH0pO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIG1ha2VMaW5rYWJsZTxUPihcbiAgICBvYmo6IHsgbmV3ICguLi5hcmdzOiBhbnlbXSk6IFQgfSxcbiAgICBjYjogKHRoaXM6IFQpID0+IERlZmluaXRpb24sXG4gICkge1xuICAgIG9iai5wcm90b3R5cGUuZ2V0U1NUTGluayA9IGNiO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGxpc3QoKSB7XG4gICAgcmV0dXJuIGxpbmtzO1xuICB9XG5cbiAgZXhwb3J0IG1vZHVsZSBBV1Mge1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgTGlua2FibGUge1xuICAgICAgZ2V0U1NUQVdTUGVybWlzc2lvbnMoKTogRnVuY3Rpb25QZXJtaXNzaW9uQXJnc1tdO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0xpbmthYmxlKG9iajogYW55KTogb2JqIGlzIExpbmthYmxlIHtcbiAgICAgIHJldHVybiBcImdldFNTVEFXU1Blcm1pc3Npb25zXCIgaW4gb2JqO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBtYWtlTGlua2FibGU8VD4oXG4gICAgICBvYmo6IHsgbmV3ICguLi5hcmdzOiBhbnlbXSk6IFQgfSxcbiAgICAgIGNiOiAodGhpczogVCkgPT4gRnVuY3Rpb25QZXJtaXNzaW9uQXJnc1tdLFxuICAgICkge1xuICAgICAgb2JqLnByb3RvdHlwZS5nZXRTU1RBV1NQZXJtaXNzaW9ucyA9IGNiO1xuICAgIH1cbiAgfVxuXG4gIGV4cG9ydCBtb2R1bGUgUmVjZWl2ZXIge1xuICAgIGxldCByZWNlaXZlcnM6IFJlY29yZDxcbiAgICAgIHN0cmluZyxcbiAgICAgIHtcbiAgICAgICAgbGlua3M6IElucHV0PHN0cmluZ1tdPjtcbiAgICAgICAgZW52aXJvbm1lbnQ6IFJlY29yZDxzdHJpbmcsIElucHV0PHN0cmluZz4+O1xuICAgICAgfVxuICAgID4gPSB7fTtcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIoXG4gICAgICBkaXJlY3Rvcnk6IHN0cmluZyxcbiAgICAgIGxpbmtzOiBJbnB1dDxzdHJpbmdbXT4sXG4gICAgICBlbnZpcm9ubWVudDogUmVjb3JkPHN0cmluZywgSW5wdXQ8c3RyaW5nPj4sXG4gICAgKSB7XG4gICAgICByZWNlaXZlcnNbZGlyZWN0b3J5XSA9IHtcbiAgICAgICAgbGlua3MsXG4gICAgICAgIGVudmlyb25tZW50LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gbGlzdCgpIHtcbiAgICAgIHJldHVybiByZWNlaXZlcnM7XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcblxuZXhwb3J0IG1vZHVsZSBXYXJwIHtcbiAgZXhwb3J0IGludGVyZmFjZSBEZWZpbml0aW9uIHtcbiAgICBmdW5jdGlvbklEOiBzdHJpbmc7XG4gICAgcnVudGltZTogc3RyaW5nO1xuICAgIHByb3BlcnRpZXM6IGFueTtcbiAgICBoYW5kbGVyOiBzdHJpbmc7XG4gICAgYnVuZGxlPzogc3RyaW5nO1xuICAgIGxpbmtzOiBzdHJpbmdbXTtcbiAgICBjb3B5RmlsZXM/OiB7XG4gICAgICBmcm9tOiBzdHJpbmc7XG4gICAgICB0bz86IHN0cmluZztcbiAgICB9W107XG4gIH1cbiAgbGV0IHdhcnBzOiBSZWNvcmQ8c3RyaW5nLCBJbnB1dDxEZWZpbml0aW9uIHwgdW5kZWZpbmVkPj4gPSB7fTtcbiAgZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHdhcnBzID0ge307XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gbGlzdCgpIHtcbiAgICByZXR1cm4gd2FycHM7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIoXG4gICAgZnVuY3Rpb25JRDogc3RyaW5nLFxuICAgIGRlZmluaXRpb246IElucHV0PERlZmluaXRpb24gfCB1bmRlZmluZWQ+LFxuICApIHtcbiAgICB3YXJwc1tmdW5jdGlvbklEXSA9IGRlZmluaXRpb247XG4gIH1cbn1cbiIsICJleHBvcnQgY29uc3QgUkVURU5USU9OID0ge1xuICBcIjEgZGF5XCI6IDEsXG4gIFwiMyBkYXlzXCI6IDMsXG4gIFwiNSBkYXlzXCI6IDUsXG4gIFwiMSB3ZWVrXCI6IDcsXG4gIFwiMiB3ZWVrc1wiOiAxNCxcbiAgXCIxIG1vbnRoXCI6IDMwLFxuICBcIjIgbW9udGhzXCI6IDYwLFxuICBcIjMgbW9udGhzXCI6IDkwLFxuICBcIjQgbW9udGhzXCI6IDEyMCxcbiAgXCI1IG1vbnRoc1wiOiAxNTAsXG4gIFwiNiBtb250aHNcIjogMTgwLFxuICBcIjEgeWVhclwiOiAzNjUsXG4gIFwiMTMgbW9udGhzXCI6IDQwMCxcbiAgXCIxOCBtb250aHNcIjogNTQ1LFxuICBcIjIgeWVhcnNcIjogNzMxLFxuICBcIjMgeWVhcnNcIjogMTA5NixcbiAgXCI1IHllYXJzXCI6IDE4MjcsXG4gIFwiNiB5ZWFyc1wiOiAyMTkyLFxuICBcIjcgeWVhcnNcIjogMjU1NyxcbiAgXCI4IHllYXJzXCI6IDI5MjIsXG4gIFwiOSB5ZWFyc1wiOiAzMjg4LFxuICBcIjEwIHllYXJzXCI6IDM2NTMsXG4gIGZvcmV2ZXI6IDAsXG59O1xuIiwgImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCBhcmNoaXZlciBmcm9tIFwiYXJjaGl2ZXJcIjtcbmltcG9ydCB0eXBlIHsgTG9hZGVyLCBCdWlsZE9wdGlvbnMgfSBmcm9tIFwiZXNidWlsZFwiO1xuaW1wb3J0IHtcbiAgT3V0cHV0LFxuICBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsXG4gIGFzc2V0LFxuICBvdXRwdXQsXG4gIGFsbCxcbiAgaW50ZXJwb2xhdGUsXG59IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuaW1wb3J0IHsgYnVpbGQgfSBmcm9tIFwiLi4vLi4vcnVudGltZS9ub2RlLmpzXCI7XG5pbXBvcnQgeyBGdW5jdGlvbkNvZGVVcGRhdGVyIH0gZnJvbSBcIi4vcHJvdmlkZXJzL2Z1bmN0aW9uLWNvZGUtdXBkYXRlci5qc1wiO1xuaW1wb3J0IHsgYm9vdHN0cmFwIH0gZnJvbSBcIi4vaGVscGVycy9ib290c3RyYXAuanNcIjtcbmltcG9ydCB7IER1cmF0aW9uLCBEdXJhdGlvbk1pbnV0ZXMsIHRvU2Vjb25kcyB9IGZyb20gXCIuLi9kdXJhdGlvbi5qc1wiO1xuaW1wb3J0IHsgU2l6ZSwgdG9NQnMgfSBmcm9tIFwiLi4vc2l6ZS5qc1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBQcmV0dGlmeSwgVHJhbnNmb3JtLCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50LmpzXCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmsuanNcIjtcbmltcG9ydCB7IFZpc2libGVFcnJvciB9IGZyb20gXCIuLi9lcnJvci5qc1wiO1xuaW1wb3J0IHsgV2FycCB9IGZyb20gXCIuLi93YXJwLmpzXCI7XG5pbXBvcnQgdHlwZSB7IElucHV0IH0gZnJvbSBcIi4uL2lucHV0LmpzXCI7XG5pbXBvcnQgeyBwcmVmaXhOYW1lIH0gZnJvbSBcIi4uL25hbWluZy5qc1wiO1xuaW1wb3J0IHsgUkVURU5USU9OIH0gZnJvbSBcIi4vbG9nZ2luZy5qc1wiO1xuXG5leHBvcnQgdHlwZSBGdW5jdGlvblBlcm1pc3Npb25BcmdzID0ge1xuICAvKipcbiAgICogVGhlIFtJQU0gYWN0aW9uc10oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL3NlcnZpY2UtYXV0aG9yaXphdGlvbi9sYXRlc3QvcmVmZXJlbmNlL3JlZmVyZW5jZV9wb2xpY2llc19hY3Rpb25zLXJlc291cmNlcy1jb250ZXh0a2V5cy5odG1sI2FjdGlvbnNfdGFibGUpIHRoYXQgY2FuIGJlIHBlcmZvcm1lZC5cbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHBlcm1pc3Npb25zOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIGFjdGlvbnM6IFtcInMzOipcIl1cbiAgICogICAgIH1cbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBhY3Rpb25zOiBzdHJpbmdbXTtcbiAgLyoqXG4gICAqIFRoZSByZXNvdXJjZXNzIHNwZWNpZmllZCB1c2luZyB0aGUgW0lBTSBBUk4gZm9ybWF0XShodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vSUFNL2xhdGVzdC9Vc2VyR3VpZGUvcmVmZXJlbmNlX2lkZW50aWZpZXJzLmh0bWwpLlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgcGVybWlzc2lvbnM6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgcmVzb3VyY2VzOiBbXCJhcm46YXdzOnMzOjo6bXktYnVja2V0LypcIl1cbiAgICogICAgIH1cbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICByZXNvdXJjZXM6IElucHV0PHN0cmluZz5bXTtcbn07XG5cbmludGVyZmFjZSBGdW5jdGlvblVybENvcnNBcmdzIHtcbiAgLyoqXG4gICAqIEFsbG93IGNvb2tpZXMgb3Igb3RoZXIgY3JlZGVudGlhbHMgaW4gcmVxdWVzdHMgdG8gdGhlIGZ1bmN0aW9uIFVSTC5cbiAgICogQGRlZmF1bHQgYGZhbHNlYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgdXJsOiB7XG4gICAqICAgICBjb3JzOiB7XG4gICAqICAgICAgIGFsbG93Q3JlZGVudGlhbHM6IHRydWVcbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBhbGxvd0NyZWRlbnRpYWxzPzogSW5wdXQ8Ym9vbGVhbj47XG4gIC8qKlxuICAgKiBUaGUgSFRUUCBoZWFkZXJzIHRoYXQgb3JpZ2lucyBjYW4gaW5jbHVkZSBpbiByZXF1ZXN0cyB0byB0aGUgZnVuY3Rpb24gVVJMLlxuICAgKiBAZGVmYXVsdCBgW1wiKlwiXWBcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHVybDoge1xuICAgKiAgICAgY29yczoge1xuICAgKiAgICAgICBhbGxvd0hlYWRlcnM6IFtcImRhdGVcIiwgXCJrZWVwLWFsaXZlXCIsIFwieC1jdXN0b20taGVhZGVyXCJdXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYWxsb3dIZWFkZXJzPzogSW5wdXQ8SW5wdXQ8c3RyaW5nPltdPjtcbiAgLyoqXG4gICAqIFRoZSBvcmlnaW5zIHRoYXQgY2FuIGFjY2VzcyB0aGUgZnVuY3Rpb24gVVJMLlxuICAgKiBAZGVmYXVsdCBgW1wiKlwiXWBcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHVybDoge1xuICAgKiAgICAgY29yczoge1xuICAgKiAgICAgICBhbGxvd09yaWdpbnM6IFtcImh0dHBzOi8vd3d3LmV4YW1wbGUuY29tXCIsIFwiaHR0cDovL2xvY2FsaG9zdDo2MDkwNVwiXVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICogT3IgdGhlIHdpbGRjYXJkIGZvciBhbGwgb3JpZ2lucy5cbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHVybDoge1xuICAgKiAgICAgY29yczoge1xuICAgKiAgICAgICBhbGxvd09yaWdpbnM6IFtcIipcIl1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBhbGxvd09yaWdpbnM/OiBJbnB1dDxJbnB1dDxzdHJpbmc+W10+O1xuICAvKipcbiAgICogVGhlIEhUVFAgbWV0aG9kcyB0aGF0IGFyZSBhbGxvd2VkIHdoZW4gY2FsbGluZyB0aGUgZnVuY3Rpb24gVVJMLlxuICAgKiBAZGVmYXVsdCBgW1wiKlwiXWBcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHVybDoge1xuICAgKiAgICAgY29yczoge1xuICAgKiAgICAgICBhbGxvd01ldGhvZHM6IFtcIkdFVFwiLCBcIlBPU1RcIiwgXCJERUxFVEVcIl1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqIE9yIHRoZSB3aWxkY2FyZCBmb3IgYWxsIG1ldGhvZHMuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICB1cmw6IHtcbiAgICogICAgIGNvcnM6IHtcbiAgICogICAgICAgYWxsb3dNZXRob2RzOiBbXCIqXCJdXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYWxsb3dNZXRob2RzPzogSW5wdXQ8XG4gICAgSW5wdXQ8XG4gICAgICBcIipcIiB8IFwiREVMRVRFXCIgfCBcIkdFVFwiIHwgXCJIRUFEXCIgfCBcIk9QVElPTlNcIiB8IFwiUEFUQ0hcIiB8IFwiUE9TVFwiIHwgXCJQVVRcIlxuICAgID5bXVxuICA+O1xuICAvKipcbiAgICogVGhlIEhUVFAgaGVhZGVycyB5b3Ugd2FudCB0byBleHBvc2UgaW4geW91ciBmdW5jdGlvbiB0byBhbiBvcmlnaW4gdGhhdCBjYWxscyB0aGUgZnVuY3Rpb24gVVJMLlxuICAgKiBAZGVmYXVsdCBgW11gXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICB1cmw6IHtcbiAgICogICAgIGNvcnM6IHtcbiAgICogICAgICAgZXhwb3NlSGVhZGVyczogW1wiZGF0ZVwiLCBcImtlZXAtYWxpdmVcIiwgXCJ4LWN1c3RvbS1oZWFkZXJcIl1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBleHBvc2VIZWFkZXJzPzogSW5wdXQ8SW5wdXQ8c3RyaW5nPltdPjtcbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIGFtb3VudCBvZiB0aW1lIHRoZSBicm93c2VyIGNhbiBjYWNoZSByZXN1bHRzIG9mIGEgcHJlZmxpZ2h0IHJlcXVlc3QuIEJ5XG4gICAqIGRlZmF1bHQgdGhlIGJyb3dzZXIgZG9lc24ndCBjYWNoZSB0aGUgcmVzdWx0cy4gVGhlIG1heGltdW0gdmFsdWUgaXMgYDg2NDAwIHNlY29uZHNgIG9yIGAxIGRheWAuXG4gICAqIEBkZWZhdWx0IGBcIjAgc2Vjb25kc1wiYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgdXJsOiB7XG4gICAqICAgICBjb3JzOiB7XG4gICAqICAgICAgIG1heEFnZTogXCIxIGRheVwiXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgbWF4QWdlPzogSW5wdXQ8RHVyYXRpb24+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZ1bmN0aW9uQXJncyB7XG4gIC8qKlxuICAgKiBEaXNhYmxlIHJ1bm5pbmcgdGhpcyBmdW5jdGlvbiBbTGl2ZV0oL2RvY3MvbGl2ZS8pIGluIGBzc3QgZGV2YC5cbiAgICogQGRlZmF1bHQgYHRydWVgXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBsaXZlOiBmYWxzZVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgbGl2ZT86IElucHV0PGZhbHNlPjtcbiAgLyoqXG4gICAqIEEgZGVzY3JpcHRpb24gZm9yIHRoZSBmdW5jdGlvbi4gVGhpcyBpcyBkaXNwbGF5ZWQgaW4gdGhlIEFXUyBDb25zb2xlLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZGVzY3JpcHRpb246IFwiSGFuZGxlciBmdW5jdGlvbiBmb3IgbXkgbmlnaHRseSBjcm9uIGpvYi5cIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZGVzY3JpcHRpb24/OiBJbnB1dDxzdHJpbmc+O1xuICAvKipcbiAgICogVGhlIHJ1bnRpbWUgZW52aXJvbm1lbnQgZm9yIHRoZSBmdW5jdGlvbi4gU3VwcG9ydCBmb3Igb3RoZXIgcnVudGltZXMgaXMgb24gb3VyIHJvYWRtYXAuXG4gICAqXG4gICAqIEBkZWZhdWx0IGBcIm5vZGVqczIwLnhcImBcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHJ1bnRpbWU6IFwibm9kZWpzMTgueFwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBydW50aW1lPzogSW5wdXQ8XCJub2RlanMxOC54XCIgfCBcIm5vZGVqczIwLnhcIiB8IFwicHJvdmlkZWQuYWwyMDIzXCI+O1xuICAvKipcbiAgICogUGF0aCB0byB0aGUgc291cmNlIGNvZGUgZGlyZWN0b3J5IGZvciB0aGUgZnVuY3Rpb24uIEJ5IGRlZmF1bHQsIHRoZSBoYW5kbGVyIGlzXG4gICAqIGJ1bmRsZWQgd2l0aCBbZXNidWlsZF0oaHR0cHM6Ly9lc2J1aWxkLmdpdGh1Yi5pby8pLiBVc2UgYGJ1bmRsZWAgdG8gc2tpcCBidW5kbGluZy5cbiAgICpcbiAgICogOjo6Y2F1dGlvblxuICAgKiBVc2UgYGJ1bmRsZWAgb25seSB3aGVuIHlvdSB3YW50IHRvIGJ1bmRsZSB0aGUgZnVuY3Rpb24geW91cnNlbGYuXG4gICAqIDo6OlxuICAgKlxuICAgKiBJZiB0aGUgYGJ1bmRsZWAgb3B0aW9uIGlzIHNwZWNpZmllZCwgdGhlIGBoYW5kbGVyYCBuZWVkcyB0byBiZSBpbiB0aGUgcm9vdCBvZiB0aGUgYnVuZGxlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBIZXJlLCB0aGUgZW50aXJlIGBwYWNrYWdlcy9mdW5jdGlvbnMvc3JjYCBkaXJlY3RvcnkgaXMgemlwcGVkLiBBbmQgdGhlIGhhbmRsZXIgaXNcbiAgICogaW4gdGhlIGBzcmNgIGRpcmVjdG9yeS5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGJ1bmRsZTogXCJwYWNrYWdlcy9mdW5jdGlvbnMvc3JjXCIsXG4gICAqICAgaGFuZGxlcjogXCJpbmRleC5oYW5kbGVyXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGJ1bmRsZT86IElucHV0PHN0cmluZz47XG4gIC8qKlxuICAgKiBQYXRoIHRvIHRoZSBoYW5kbGVyIGZvciB0aGUgZnVuY3Rpb24gd2l0aCB0aGUgZm9ybWF0IGB7ZmlsZX0ue21ldGhvZH1gLlxuICAgKlxuICAgKiA6Ojpub3RlXG4gICAqIFlvdSBkb24ndCBuZWVkIHRvIHNwZWNpZnkgdGhlIGZpbGUgZXh0ZW5zaW9uLlxuICAgKiA6OjpcbiAgICpcbiAgICogVGhlIGhhbmRsZXIgcGF0aCBpcyByZWxhdGl2ZSB0byB0aGUgcm9vdCB5b3VyIHJlcG8gb3IgdGhlIGBzc3QuY29uZmlnLnRzYC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogSGVyZSB0aGVyZSBpcyBhIGZpbGUgY2FsbGVkIGBpbmRleC5qc2AgKG9yIGAudHNgKSBpbiB0aGUgYHBhY2thZ2VzL2Z1bmN0aW9ucy9zcmMvYFxuICAgKiBkaXJlY3Rvcnkgd2l0aCBhbiBleHBvcnRlZCBtZXRob2QgY2FsbGVkIGBoYW5kbGVyYC5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGhhbmRsZXI6IFwicGFja2FnZXMvZnVuY3Rpb25zL3NyYy9pbmRleC5oYW5kbGVyXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogSWYgYGJ1bmRsZWAgaXMgc3BlY2lmaWVkLCB0aGUgaGFuZGxlciBuZWVkcyB0byBiZSBpbiB0aGUgcm9vdCBvZiB0aGUgYnVuZGxlIGRpcmVjdG9yeS5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGJ1bmRsZTogXCJwYWNrYWdlcy9mdW5jdGlvbnMvc3JjXCIsXG4gICAqICAgaGFuZGxlcjogXCJpbmRleC5oYW5kbGVyXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGhhbmRsZXI6IElucHV0PHN0cmluZz47XG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSB0aGUgZnVuY3Rpb24gY2FuIHJ1bi4gVGhlIG1pbmltdW0gdGltZW91dCBpcyAxIHNlY29uZCBhbmQgdGhlIG1heGltdW0gaXMgOTAwIHNlY29uZHMgb3IgMTUgbWludXRlcy5cbiAgICpcbiAgICogOjo6bm90ZVxuICAgKiBJZiBhIGZ1bmN0aW9uIGlzIGNvbm5lY3RlZCB0byBhbm90aGVyIHNlcnZpY2UsIHRoZSByZXF1ZXN0IHdpbGwgdGltZSBvdXQgYmFzZWQgb24gdGhlIHNlcnZpY2UncyBsaW1pdHMuXG4gICAqIDo6OlxuICAgKlxuICAgKiBXaGlsZSB0aGUgbWF4aW11bSB0aW1lb3V0IGlzIDE1IG1pbnV0ZXMsIGlmIGEgZnVuY3Rpb24gaXMgY29ubmVjdGVkIHRvIG90aGVyIHNlcnZpY2VzLCBpdCdsbCB0aW1lIG91dCBiYXNlZCBvbiB0aG9zZSBsaW1pdHMuIEFQSSBHYXRld2F5IGZvciBleGFtcGxlIGhhcyBhIHRpbWVvdXQgb2YgMzAgc2Vjb25kcy4gU28gZXZlbiBpZiB0aGUgZnVuY3Rpb24gaGFzIGEgdGltZW91dCBvZiAxNSBtaW51dGVzLCB0aGUgQVBJIHJlcXVlc3Qgd2lsbCB0aW1lIG91dCBhZnRlciAzMCBzZWNvbmRzLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgXCIyMCBzZWNvbmRzXCJgXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICB0aW1lb3V0OiBcIjkwMCBzZWNvbmRzXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHRpbWVvdXQ/OiBJbnB1dDxEdXJhdGlvbk1pbnV0ZXM+O1xuICAvKipcbiAgICogVGhlIGFtb3VudCBvZiBtZW1vcnkgYWxsb2NhdGVkIGZvciB0aGUgZnVuY3Rpb24uIFRha2VzIHZhbHVlcyBiZXR3ZWVuIDEyOCBNQlxuICAgKiBhbmQgMTAyNDAgTUIgaW4gMSBNQiBpbmNyZW1lbnRzLiAgVGhlIGFtb3VudCBvZiBtZW1vcnkgYWZmZWN0cyB0aGUgYW1vdW50IG9mXG4gICAqIHZpcnR1YWwgQ1BVIGF2YWlsYWJsZSB0byB0aGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBXaGlsZSBmdW5jdGlvbnMgd2l0aCBsZXNzIG1lbW9yeSBhcmUgY2hlYXBlciwgbGFyZ2VyIGZ1bmN0aW9ucyBjYW4gcHJvY2VzcyBmYXN0ZXIuXG4gICAqIEFuZCBtaWdodCBlbmQgdXAgYmVpbmcgbW9yZSBbY29zdCBlZmZlY3RpdmVdKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9sYW1iZGEvbGF0ZXN0L29wZXJhdG9yZ3VpZGUvY29tcHV0aW5nLXBvd2VyLmh0bWwpLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGRlZmF1bHQgYFwiMTAyNCBNQlwiYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgbWVtb3J5OiBcIjEwMjQwIE1CXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIG1lbW9yeT86IElucHV0PFNpemU+O1xuICAvKipcbiAgICogS2V5LXZhbHVlIHBhaXJzIG9mIHZhbHVlcyB0aGF0IGFyZSBzZXQgYXMgW0xhbWJkYSBlbnZpcm9ubWVudCB2YXJpYWJsZXNdKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9sYW1iZGEvbGF0ZXN0L2RnL2NvbmZpZ3VyYXRpb24tZW52dmFycy5odG1sKS5cbiAgICogVGhlIGtleXMgbmVlZCB0bzpcbiAgICogLSBTdGFydCB3aXRoIGEgbGV0dGVyXG4gICAqIC0gQmUgYXQgbGVhc3QgMiBjaGFyYWN0ZXJzIGxvbmdcbiAgICogLSBDb250YWluIG9ubHkgbGV0dGVycywgbnVtYmVycywgb3IgdW5kZXJzY29yZXNcbiAgICpcbiAgICogVGhleSBjYW4gYmUgYWNjZXNzZWQgaW4geW91ciBmdW5jdGlvbiB1c2luZyBgcHJvY2Vzcy5lbnYuPGtleT5gLlxuICAgKlxuICAgKiA6Ojpub3RlXG4gICAqIFRoZSB0b3RhbCBzaXplIG9mIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgY2Fubm90IGV4Y2VlZCA0IEtCLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGVudmlyb25tZW50OiB7XG4gICAqICAgICBERUJVRzogXCJ0cnVlXCJcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBlbnZpcm9ubWVudD86IElucHV0PFJlY29yZDxzdHJpbmcsIElucHV0PHN0cmluZz4+PjtcbiAgLyoqXG4gICAqIFBlcm1pc3Npb25zIGFuZCB0aGUgcmVzb3VyY2VzIHRoYXQgdGhlIGZ1bmN0aW9uIG5lZWRzIHRvIGFjY2Vzcy4gVGhlc2UgcGVybWlzc2lvbnMgYXJlXG4gICAqIHVzZWQgdG8gY3JlYXRlIHRoZSBmdW5jdGlvbidzIElBTSByb2xlLlxuICAgKlxuICAgKiA6Ojp0aXBcbiAgICogSWYgeW91IGBsaW5rYCB0aGUgZnVuY3Rpb24gdG8gYSByZXNvdXJjZSwgdGhlIHBlcm1pc3Npb25zIHRvIGFjY2VzcyBpdCBhcmVcbiAgICogYXV0b21hdGljYWxseSBhZGRlZC5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIEFsbG93IHRoZSBmdW5jdGlvbiB0byByZWFkIGFuZCB3cml0ZSB0byBhbiBTMyBidWNrZXQgY2FsbGVkIGBteS1idWNrZXRgLlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgcGVybWlzc2lvbnM6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgYWN0aW9uczogW1wiczM6R2V0T2JqZWN0XCIsIFwiczM6UHV0T2JqZWN0XCJdLFxuICAgKiAgICAgICByZXNvdXJjZXM6IFtcImFybjphd3M6czM6OjpteS1idWNrZXQvKlwiXVxuICAgKiAgICAgfSxcbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEFsbG93IHRoZSBmdW5jdGlvbiB0byBwZXJmb3JtIGFsbCBhY3Rpb25zIG9uIGFuIFMzIGJ1Y2tldCBjYWxsZWQgYG15LWJ1Y2tldGAuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBwZXJtaXNzaW9uczogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBhY3Rpb25zOiBbXCJzMzoqXCJdLFxuICAgKiAgICAgICByZXNvdXJjZXM6IFtcImFybjphd3M6czM6OjpteS1idWNrZXQvKlwiXVxuICAgKiAgICAgfSxcbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEdyYW50aW5nIHRoZSBmdW5jdGlvbiBwZXJtaXNzaW9ucyB0byBhY2Nlc3MgYWxsIHJlc291cmNlcy5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHBlcm1pc3Npb25zOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIGFjdGlvbnM6IFtcIipcIl0sXG4gICAqICAgICAgIHJlc291cmNlczogW1wiKlwiXVxuICAgKiAgICAgfSxcbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBwZXJtaXNzaW9ucz86IElucHV0PFByZXR0aWZ5PEZ1bmN0aW9uUGVybWlzc2lvbkFyZ3M+W10+O1xuICAvKipcbiAgICogW0xpbmsgcmVzb3VyY2VzXSgvZG9jcy9saW5raW5nLykgdG8geW91ciBmdW5jdGlvbi4gVGhpcyB3aWxsOlxuICAgKlxuICAgKiAxLiBHcmFudCB0aGUgcGVybWlzc2lvbnMgbmVlZGVkIHRvIGFjY2VzcyB0aGUgcmVzb3VyY2VzLlxuICAgKiAyLiBBbGxvdyB5b3UgdG8gYWNjZXNzIGl0IGluIHlvdXIgc2l0ZSB1c2luZyB0aGUgW1NES10oL2RvY3MvcmVmZXJlbmNlL3Nkay8pLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBUYWtlcyBhIGxpc3Qgb2YgY29tcG9uZW50cyB0byBsaW5rIHRvIHRoZSBmdW5jdGlvbi5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGxpbms6IFtidWNrZXQsIHN0cmlwZUtleV1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGxpbms/OiBJbnB1dDxhbnlbXT47XG4gIC8qKlxuICAgKiBFbmFibGUgc3RyZWFtaW5nIGZvciB0aGUgZnVuY3Rpb24uIFN0cmVhbSBpcyBvbmx5IHN1cHBvcnRlZCB3aGVuIHVzaW5nIHRoZSBmdW5jdGlvblxuICAgKiBgdXJsYCBhbmQgbm90IHdoZW4gdXNpbmcgaXQgd2l0aCBBUEkgR2F0ZXdheS5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIFlvdSdsbCBuZWVkIHRvIFt3cmFwIHlvdXIgaGFuZGxlcl0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2xhbWJkYS9sYXRlc3QvZGcvY29uZmlndXJhdGlvbi1yZXNwb25zZS1zdHJlYW1pbmcuaHRtbCkgd2l0aCBgYXdzbGFtYmRhLnN0cmVhbWlmeVJlc3BvbnNlKClgIHRvIGVuYWJsZSBzdHJlYW1pbmcuXG4gICAqIDo6OlxuICAgKlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBzdHJlYW1pbmc6IHRydWVcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHN0cmVhbWluZz86IElucHV0PGJvb2xlYW4+O1xuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBpbmplY3Rpb25zPzogSW5wdXQ8c3RyaW5nW10+O1xuICAvKipcbiAgICogQ29uZmlndXJlIHRoZSBmdW5jdGlvbiBsb2dzIGluIENsb3VkV2F0Y2guXG4gICAqIEBkZWZhdWx0IGAmbGN1YjtyZXRlbnRpb246IFwiZm9yZXZlclwiJnJjdWI7YFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgbG9nZ2luZzoge1xuICAgKiAgICAgcmV0ZW50aW9uOiBcIjEgd2Vla1wiXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgbG9nZ2luZz86IElucHV0PHtcbiAgICAvKipcbiAgICAgKiBUaGUgZHVyYXRpb24gdGhlIGZ1bmN0aW9uIGxvZ3MgYXJlIGtlcHQgaW4gQ2xvdWRXYXRjaC5cbiAgICAgKiBAZGVmYXVsdCBgZm9yZXZlcmBcbiAgICAgKi9cbiAgICByZXRlbnRpb24/OiBJbnB1dDxrZXlvZiB0eXBlb2YgUkVURU5USU9OPjtcbiAgfT47XG4gIC8qKlxuICAgKiBUaGUgW2FyY2hpdGVjdHVyZV0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2xhbWJkYS9sYXRlc3QvZGcvZm91bmRhdGlvbi1hcmNoLmh0bWwpXG4gICAqIG9mIHRoZSBMYW1iZGEgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBkZWZhdWx0IGBcIng4Nl82NFwiYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgYXJjaGl0ZWN0dXJlOiBcImFybTY0XCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGFyY2hpdGVjdHVyZT86IElucHV0PFwieDg2XzY0XCIgfCBcImFybTY0XCI+O1xuICAvKipcbiAgICogQXNzaWducyBhbiBleGlzdGluZyBJQU0gcm9sZSB0byB0aGUgZnVuY3Rpb24sIHJlcGxhY2luZyB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyByb2xlLlxuICAgKlxuICAgKiA6Ojp0aXBcbiAgICogUGVybWlzc2lvbnMgc3BlY2lmaWVkIGluIFwicGVybWlzc2lvbnNcIiBhbmQgcmVxdWlyZWQgYnkgXCJsaW5rXCIgcmVzb3VyY2VzIGFyZSBub3QgYWRkZWRcbiAgICogYXV0b21hdGljYWxseS4gWW91J2xsIG5lZWQgdG8gbWFudWFsbHkgY29uZmlndXJlIHRoZSBJQU0gcGVybWlzc2lvbnMgcmVxdWlyZWQgYnkgdGhlIGZ1bmN0aW9uLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGRlZmF1bHQgQ3JlYXRlcyBhIG5ldyByb2xlLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgcm9sZTogXCJhcm46YXdzOmlhbTo6MTIzNDU2Nzg5MDEyOnJvbGUvbXktcm9sZVwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICByb2xlPzogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIEVuYWJsZSBbTGFtYmRhIGZ1bmN0aW9uIFVSTHNdKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9sYW1iZGEvbGF0ZXN0L2RnL2xhbWJkYS11cmxzLmh0bWwpLlxuICAgKiBUaGVzZSBhcmUgZGVkaWNhdGVkIGVuZHBvaW50cyBmb3IgeW91ciBMYW1iZGEgZnVuY3Rpb25zLlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAqIEBleGFtcGxlXG4gICAqIEVuYWJsZSBpdCB3aXRoIHRoZSBkZWZhdWx0IG9wdGlvbnMuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICB1cmw6IHRydWVcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogRW5hYmxlIGl0IGFuZCBjb25maWd1cmUgdGhlIG9wdGlvbnMuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICB1cmw6IHtcbiAgICogICAgIGF1dGhvcml6YXRpb246IFwiaWFtXCIsXG4gICAqICAgICBjb3JzOiB7XG4gICAqICAgICAgIGFsbG93ZWRPcmlnaW5zOiBbJ2h0dHBzOi8vZXhhbXBsZS5jb20nXVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHVybD86IElucHV0PFxuICAgIHwgYm9vbGVhblxuICAgIHwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGF1dGhvcml6YXRpb24gdXNlZCBmb3IgdGhlIGZ1bmN0aW9uIFVSTC4gU3VwcG9ydHMgW0lBTSBhdXRob3JpemF0aW9uXShodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vbGFtYmRhL2xhdGVzdC9kZy91cmxzLWF1dGguaHRtbCkuXG4gICAgICAgICAqIEBkZWZhdWx0IGBcIm5vbmVcImBcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYGBganNcbiAgICAgICAgICoge1xuICAgICAgICAgKiAgIHVybDoge1xuICAgICAgICAgKiAgICAgYXV0aG9yaXphdGlvbjogXCJpYW1cIlxuICAgICAgICAgKiAgIH1cbiAgICAgICAgICogfVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIGF1dGhvcml6YXRpb24/OiBJbnB1dDxcIm5vbmVcIiB8IFwiaWFtXCI+O1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3VzdG9taXplIHRoZSBDT1JTIChDcm9zcy1vcmlnaW4gcmVzb3VyY2Ugc2hhcmluZykgc2V0dGluZ3MgZm9yIHRoZSBmdW5jdGlvbiBVUkwuXG4gICAgICAgICAqIEBkZWZhdWx0IGB0cnVlYFxuICAgICAgICAgKiBAZXhhbXBsZVxuICAgICAgICAgKiBEaXNhYmxlIENPUlMuXG4gICAgICAgICAqIGBgYGpzXG4gICAgICAgICAqIHtcbiAgICAgICAgICogICB1cmw6IHtcbiAgICAgICAgICogICAgIGNvcnM6IHRydWVcbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqIE9ubHkgZW5hYmxlIHRoZSBgR0VUYCBhbmQgYFBPU1RgIG1ldGhvZHMgZm9yIGBodHRwczovL2V4YW1wbGUuY29tYC5cbiAgICAgICAgICogYGBganNcbiAgICAgICAgICoge1xuICAgICAgICAgKiAgIHVybDoge1xuICAgICAgICAgKiAgICAgY29yczoge1xuICAgICAgICAgKiAgICAgICBhbGxvd2VkTWV0aG9kczogW1wiR0VUXCIsIFwiUE9TVFwiXSxcbiAgICAgICAgICogICAgICAgYWxsb3dlZE9yaWdpbnM6IFtcImh0dHBzOi8vZXhhbXBsZS5jb21cIl1cbiAgICAgICAgICogICAgIH1cbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICBjb3JzPzogSW5wdXQ8Ym9vbGVhbiB8IFByZXR0aWZ5PEZ1bmN0aW9uVXJsQ29yc0FyZ3M+PjtcbiAgICAgIH1cbiAgPjtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZSBob3cgeW91ciBmdW5jdGlvbiBpcyBidW5kbGVkLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCBTU1Qgd2lsbCBidW5kbGUgeW91ciBmdW5jdGlvblxuICAgKiBjb2RlIHVzaW5nIFtlc2J1aWxkXShodHRwczovL2VzYnVpbGQuZ2l0aHViLmlvLykuIFRoaXMgdHJlZSBzaGFrZXMgeW91ciBjb2RlIHRvXG4gICAqIG9ubHkgaW5jbHVkZSB3aGF0J3MgdXNlZDsgcmVkdWNpbmcgdGhlIHNpemUgb2YgeW91ciBmdW5jdGlvbiBwYWNrYWdlIGFuZCBpbXByb3ZpbmdcbiAgICogY29sZCBzdGFydHMuXG4gICAqL1xuICBub2RlanM/OiBJbnB1dDx7XG4gICAgLyoqXG4gICAgICogQ29uZmlndXJlIGFkZGl0aW9uYWwgZXNidWlsZCBsb2FkZXJzIGZvciBvdGhlciBmaWxlIGV4dGVuc2lvbnMuIFRoaXMgaXMgdXNlZnVsXG4gICAgICogd2hlbiB5b3VyIGNvZGUgaXMgaW1wb3J0aW5nIG5vbi1KUyBmaWxlcyBsaWtlIGAucG5nYCwgYC5jc3NgLCBldGMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgbm9kZWpzOiB7XG4gICAgICogICAgIGxvYWRlcjoge1xuICAgICAqICAgICAgXCIucG5nXCI6IFwiZmlsZVwiXG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgbG9hZGVyPzogSW5wdXQ8UmVjb3JkPHN0cmluZywgTG9hZGVyPj47XG4gICAgLyoqXG4gICAgICogUGFja2FnZXMgdGhhdCB3aWxsIGJlIGV4Y2x1ZGVkIGZyb20gdGhlIGJ1bmRsZS4gQ2VydGFpbiBucG0gcGFja2FnZXMgY2Fubm90IGJlXG4gICAgICogYnVuZGxlZCB1c2luZyBlc2J1aWxkLiBUaGlzIGFsbG93cyB5b3UgdG8gZXhjbHVkZSB0aGVtIGZyb20gdGhlIGJ1bmRsZSBhbmQgaW5zdGVhZFxuICAgICAqIGluc3RhbGwgdGhlbSBpbnRvIGEgYG5vZGVfbW9kdWxlcy9gIGRpcmVjdG9yeSBpbiB0aGUgZnVuY3Rpb24gcGFja2FnZS5cbiAgICAgKlxuICAgICAqIFRoZXNlIHBhY2thZ2VzIGFyZSBleGNsdWRlZCB3aGVuIGVzYnVpbGQgaXMgdHJhdmVyc2luZyB0aGUgaW1wb3J0cyBpbiB5b3VyIGNvZGUgdG9cbiAgICAgKiBnZW5lcmF0ZSB0aGUgYnVuZGxlLiBTbyB0aGVzZSBhcmUgdGhlIHBhY2thZ2UgbmFtZXMgYXMgc2VlbiBpbiB0aGUgaW1wb3J0cy4gQWxzbyxcbiAgICAgKiB0aGlzIHdvcmtzIG9uIHBhY2thZ2VzIHRoYXQgYXJlIG5vdCBkaXJlY3RseSBpbXBvcnRlZCBieSB5b3VyIGNvZGUuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgbm9kZWpzOiB7XG4gICAgICogICAgIGluc3RhbGw6IFtcInBnXCJdXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGluc3RhbGw/OiBJbnB1dDxzdHJpbmdbXT47XG4gICAgLyoqXG4gICAgICogVXNlIHRoaXMgdG8gaW5zZXJ0IGEgc3RyaW5nIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGdlbmVyYXRlZCBKUyBmaWxlLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBqc1xuICAgICAqIHtcbiAgICAgKiAgIG5vZGVqczoge1xuICAgICAqICAgICBiYW5uZXI6IFwiY29uc29sZS5sb2coJ0Z1bmN0aW9uIHN0YXJ0aW5nJylcIlxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBiYW5uZXI/OiBJbnB1dDxzdHJpbmc+O1xuICAgIC8qKlxuICAgICAqIFRoaXMgYWxsb3dzIHlvdSB0byBjdXN0b21pemUgZXNidWlsZCBjb25maWcgdGhhdCBpcyB1c2VkLlxuICAgICAqXG4gICAgICogOjo6dGlwXG4gICAgICogQ2hlY2sgb3V0IHRoZSBfSlMgdGFiXyBpbiB0aGUgY29kZSBzbmlwcGV0cyBpbiB0aGUgZXNidWlsZCBkb2NzIGZvciB0aGVcbiAgICAgKiBbYnVpbGQgb3B0aW9uc10oaHR0cHM6Ly9lc2J1aWxkLmdpdGh1Yi5pby9hcGkvI2J1aWxkKS5cbiAgICAgKiA6OjpcbiAgICAgKlxuICAgICAqL1xuICAgIGVzYnVpbGQ/OiBJbnB1dDxCdWlsZE9wdGlvbnM+O1xuICAgIC8qKlxuICAgICAqIEVuYWJsZSBvciBkaXNhYmxlIGlmIHRoZSBmdW5jdGlvbiBjb2RlIGlzIG1pbmlmaWVkIHdoZW4gYnVuZGxlZC5cbiAgICAgKlxuICAgICAqIEBkZWZhdWx0IGB0cnVlYFxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBqc1xuICAgICAqIHtcbiAgICAgKiAgIG5vZGVqczoge1xuICAgICAqICAgICBtaW5pZnk6IGZhbHNlXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIG1pbmlmeT86IElucHV0PGJvb2xlYW4+O1xuICAgIC8qKlxuICAgICAqIENvbmZpZ3VyZSB0aGUgZm9ybWF0IG9mIHRoZSBnZW5lcmF0ZWQgSlMgY29kZTsgRVNNIG9yIENvbW1vbkpTLlxuICAgICAqXG4gICAgICogQGRlZmF1bHQgYFwiZXNtXCJgXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgbm9kZWpzOiB7XG4gICAgICogICAgIGZvcm1hdDogXCJjanNcIlxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBmb3JtYXQ/OiBJbnB1dDxcImNqc1wiIHwgXCJlc21cIj47XG4gICAgLyoqXG4gICAgICogQ29uZmlndXJlIGlmIHNvdXJjZSBtYXBzIGFyZSBhZGRlZCB0byB0aGUgZnVuY3Rpb24gYnVuZGxlIGZvciAqKnByb2R1Y3Rpb24qKi4gU2luY2UgdGhleVxuICAgICAqIGluY3JlYXNlIHBheWxvYWQgc2l6ZSBhbmQgcG90ZW50aWFsbHkgY29sZCBzdGFydHMsIHRoZXkgYXJlIG5vdCBhZGRlZCBieSBkZWZhdWx0LlxuICAgICAqIEhvd2V2ZXIsIHRoZXkgYXJlIGFsd2F5cyBnZW5lcmF0ZWQgZHVyaW5nIGBzc3QgZGV2YC5cbiAgICAgKlxuICAgICAqIDo6OnRpcFtTU1QgQ29uc29sZV1cbiAgICAgKiBGb3IgdGhlIFtDb25zb2xlXSgvZG9jcy9jb25zb2xlLyksIHNvdXJjZSBtYXBzIGFyZSBhbHdheXMgZ2VuZXJhdGVkIGFuZCB1cGxvYWRlZFxuICAgICAqIHRvIHlvdXIgYm9vdHN0cmFwIGJ1Y2tldC4gVGhlc2UgYXJlIHRoZW4gZG93bmxvYWRlZCBhbmQgdXNlZCB0byBkaXNwbGF5ZWRcbiAgICAgKiBpbiB0aGUgY29uc29sZS5cbiAgICAgKiA6OjpcbiAgICAgKlxuICAgICAqIEBkZWZhdWx0IGBmYWxzZWBcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBganNcbiAgICAgKiB7XG4gICAgICogICBub2RlanM6IHtcbiAgICAgKiAgICAgc291cmNlbWFwOiB0cnVlXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHNvdXJjZW1hcD86IElucHV0PGJvb2xlYW4+O1xuICAgIC8qKlxuICAgICAqIElmIGVuYWJsZWQsIG1vZHVsZXMgdGhhdCBhcmUgZHluYW1pY2FsbHkgaW1wb3J0ZWQgd2lsbCBiZSBidW5kbGVkIGluIHRoZWlyIG93biBmaWxlc1xuICAgICAqIHdpdGggY29tbW9uIGRlcGVuZGVuY2llcyBwbGFjZWQgaW4gc2hhcmVkIGNodW5rcy4gVGhpcyBjYW4gaGVscCByZWR1Y2UgY29sZCBzdGFydHNcbiAgICAgKiBhcyB5b3VyIGZ1bmN0aW9uIGdyb3dzIGluIHNpemUuXG4gICAgICpcbiAgICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgbm9kZWpzOiB7XG4gICAgICogICAgIHNwbGl0dGluZzogdHJ1ZVxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzcGxpdHRpbmc/OiBJbnB1dDxib29sZWFuPjtcbiAgfT47XG4gIC8qKlxuICAgKiBBZGQgYWRkaXRpb25hbCBmaWxlcyB0byBjb3B5IGludG8gdGhlIGZ1bmN0aW9uIHBhY2thZ2UuIFRha2VzIGEgbGlzdCBvZiBvYmplY3RzXG4gICAqIHdpdGggYGZyb21gIGFuZCBgdG9gIHBhdGhzLiBUaGVzZSB3aWxsIGJlIGNvcGllZCBvdmVyIGJlZm9yZSB0aGUgZnVuY3Rpb24gcGFja2FnZVxuICAgKiBpcyB6aXBwZWQgdXAuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIENvcHlpbmcgb3ZlciBhIHNpbmdsZSBmaWxlIGZyb20gdGhlIGBzcmNgIGRpcmVjdG9yeSB0byB0aGUgYHNyYy9gIGRpcmVjdG9yeSBvZiB0aGVcbiAgICogZnVuY3Rpb24gcGFja2FnZS5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGNvcHlGaWxlczogW3sgZnJvbTogXCJzcmMvaW5kZXguanNcIiB9XVxuICAgKiB9XG4gICAqYGBgXG4gICAqXG4gICAqIENvcHlpbmcgb3ZlciBhIHNpbmdsZSBmaWxlIGZyb20gdGhlIGBzcmNgIGRpcmVjdG9yeSB0byB0aGUgYGNvcmUvc3JjYCBkaXJlY3RvcnkgaW5cbiAgICogdGhlIGZ1bmN0aW9uIHBhY2thZ2UuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBjb3B5RmlsZXM6IFt7IGZyb206IFwic3JjL2luZGV4LmpzXCIsIHRvOiBcImNvcmUvc3JjL2luZGV4LmpzXCIgfV1cbiAgICogfVxuICAgKmBgYFxuICAgKlxuICAgKiBDb3B5aW5nIG92ZXIgYSBjb3VwbGUgb2YgZmlsZXMuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBjb3B5RmlsZXM6IFtcbiAgICogICAgIHsgZnJvbTogXCJzcmMvdGhpcy5qc1wiLCB0bzogXCJjb3JlL3NyYy90aGlzLmpzXCIgfSxcbiAgICogICAgIHsgZnJvbTogXCJzcmMvdGhhdC5qc1wiLCB0bzogXCJjb3JlL3NyYy90aGF0LmpzXCIgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKmBgYFxuICAgKi9cbiAgY29weUZpbGVzPzogSW5wdXQ8XG4gICAge1xuICAgICAgLyoqXG4gICAgICAgKiBTb3VyY2UgcGF0aCByZWxhdGl2ZSB0byB0aGUgYHNzdC5jb25maWcudHNgLlxuICAgICAgICovXG4gICAgICBmcm9tOiBJbnB1dDxzdHJpbmc+O1xuICAgICAgLyoqXG4gICAgICAgKiBEZXN0aW5hdGlvbiBwYXRoIHJlbGF0aXZlIHRvIGZ1bmN0aW9uIHJvb3QgaW4gdGhlIHBhY2thZ2UuIEJ5IGRlZmF1bHQsIGl0XG4gICAgICAgKiBjcmVhdGVzIHRoZSBzYW1lIGRpcmVjdG9yeSBzdHJ1Y3R1cmUgYXMgdGhlIGBmcm9tYCBwYXRoIGFuZCBjb3BpZXMgdGhlIGZpbGUuXG4gICAgICAgKlxuICAgICAgICogQGRlZmF1bHQgVGhlIGBmcm9tYCBwYXRoIGluIHRoZSBmdW5jdGlvbiBwYWNrYWdlXG4gICAgICAgKi9cbiAgICAgIHRvPzogSW5wdXQ8c3RyaW5nPjtcbiAgICB9W11cbiAgPjtcbiAgLyoqXG4gICAqIEEgbGlzdCBvZiBsYXllcnMgdG8gYWRkIHRvIHRoZSBmdW5jdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGxheWVyczogW1wiYXJuOmF3czpsYW1iZGE6dXMtZWFzdC0xOjEyMzQ1Njc4OTAxMjpsYXllcjpteS1sYXllcjoxXCJdXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBsYXllcnM/OiBJbnB1dDxzdHJpbmdbXT47XG4gIC8qKlxuICAgKiBDb25maWd1cmUgdGhlIGZ1bmN0aW9uIHRvIGNvbm5lY3QgdG8gcHJpdmF0ZSBzdWJuZXRzIGluIGEgdmlydHVhbCBwcml2YXRlIGNsb3VkIG9yIFZQQy4gVGhpcyBhbGxvd3MgeW91ciBmdW5jdGlvbiB0byBhY2Nlc3MgcHJpdmF0ZSByZXNvdXJjZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICB2cGM6IHtcbiAgICogICAgIHNlY3VyaXR5R3JvdXBzOiBbXCJzZy0wMzk5MzQ4Mzc4YTRjMjU2Y1wiXSxcbiAgICogICAgIHN1Ym5ldHM6IFtcInN1Ym5ldC0wYjZhMmI3Mzg5NmRjOGM0Y1wiLCBcInN1Ym5ldC0wMjEzODllYmVlNjgwYzJmMFwiXVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHZwYz86IElucHV0PHtcbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgVlBDIHNlY3VyaXR5IGdyb3VwIElEcy5cbiAgICAgKi9cbiAgICBzZWN1cml0eUdyb3VwczogSW5wdXQ8SW5wdXQ8c3RyaW5nPltdPjtcbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgVlBDIHN1Ym5ldCBJRHMuXG4gICAgICovXG4gICAgc3VibmV0czogSW5wdXQ8SW5wdXQ8c3RyaW5nPltdPjtcbiAgfT47XG4gIC8qKlxuICAgKiBbVHJhbnNmb3JtXSgvZG9jcy9jb21wb25lbnRzI3RyYW5zZm9ybSkgaG93IHRoaXMgY29tcG9uZW50IGNyZWF0ZXMgaXRzIHVuZGVybHlpbmdcbiAgICogcmVzb3VyY2VzLlxuICAgKi9cbiAgdHJhbnNmb3JtPzoge1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgTGFtYmRhIEZ1bmN0aW9uIHJlc291cmNlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uPzogVHJhbnNmb3JtPGF3cy5sYW1iZGEuRnVuY3Rpb25BcmdzPjtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIElBTSBSb2xlIHJlc291cmNlLlxuICAgICAqL1xuICAgIHJvbGU/OiBUcmFuc2Zvcm08YXdzLmlhbS5Sb2xlQXJncz47XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoZSBDbG91ZFdhdGNoIExvZ0dyb3VwIHJlc291cmNlLlxuICAgICAqL1xuICAgIGxvZ0dyb3VwPzogVHJhbnNmb3JtPGF3cy5jbG91ZHdhdGNoLkxvZ0dyb3VwQXJncz47XG4gIH07XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9pZ25vcmVDb2RlQ2hhbmdlcz86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9za2lwTWV0YWRhdGE/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoZSBgRnVuY3Rpb25gIGNvbXBvbmVudCBsZXRzIHlvdSBhZGQgc2VydmVybGVzcyBmdW5jdGlvbnMgdG8geW91ciBhcHAuXG4gKiBJdCB1c2VzIFtBV1MgTGFtYmRhXShodHRwczovL2F3cy5hbWF6b24uY29tL2xhbWJkYS8pLlxuICpcbiAqIDo6Om5vdGVcbiAqIEN1cnJlbnRseSBzdXBwb3J0cyBOb2RlLmpzIGZ1bmN0aW9ucyBvbmx5LiBTdXBwb3J0IGZvciBvdGhlciBydW50aW1lcyBpcyBvbiB0aGUgcm9hZG1hcC5cbiAqIDo6OlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogIyMjIyBNaW5pbWFsIGV4YW1wbGVcbiAqXG4gKiBQYXNzIGluIHRoZSBwYXRoIHRvIHlvdXIgaGFuZGxlciBmdW5jdGlvbi5cbiAqXG4gKiBgYGB0c1xuICogbmV3IHNzdC5hd3MuRnVuY3Rpb24oXCJNeUZ1bmN0aW9uXCIsIHtcbiAqICAgaGFuZGxlcjogXCJzcmMvbGFtYmRhLmhhbmRsZXJcIlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFNldCBhZGRpdGlvbmFsIGNvbmZpZ1xuICpcbiAqIFBhc3MgaW4gYWRkaXRpb25hbCBMYW1iZGEgY29uZmlnLlxuICpcbiAqIGBgYHRzIHszLDR9XG4gKiBuZXcgc3N0LmF3cy5GdW5jdGlvbihcIk15RnVuY3Rpb25cIiwge1xuICogICBoYW5kbGVyOiBcInNyYy9sYW1iZGEuaGFuZGxlclwiLFxuICogICB0aW1lb3V0OiBcIjMgbWludXRlc1wiLFxuICogICBtZW1vcnk6IFwiMTAyNCBNQlwiXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgTGluayByZXNvdXJjZXNcbiAqXG4gKiBbTGluayByZXNvdXJjZXNdKC9kb2NzL2xpbmtpbmcvKSB0byB0aGUgZnVuY3Rpb24uIFRoaXMgd2lsbCBncmFudCBwZXJtaXNzaW9uc1xuICogdG8gdGhlIHJlc291cmNlcyBhbmQgYWxsb3cgeW91IHRvIGFjY2VzcyBpdCBpbiB5b3VyIGhhbmRsZXIuXG4gKlxuICogYGBgdHMgezV9XG4gKiBjb25zdCBidWNrZXQgPSBuZXcgc3N0LmF3cy5CdWNrZXQoXCJNeUJ1Y2tldFwiKTtcbiAqXG4gKiBuZXcgc3N0LmF3cy5GdW5jdGlvbihcIk15RnVuY3Rpb25cIiwge1xuICogICBoYW5kbGVyOiBcInNyYy9sYW1iZGEuaGFuZGxlclwiLFxuICogICBsaW5rOiBbYnVja2V0XVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIHVzZSB0aGUgW1NES10oL2RvY3MvcmVmZXJlbmNlL3Nkay8pIHRvIGFjY2VzcyB0aGUgbGlua2VkIHJlc291cmNlc1xuICogaW4geW91ciBoYW5kbGVyLlxuICpcbiAqIGBgYHRzIHRpdGxlPVwic3JjL2xhbWJkYS50c1wiXG4gKiBpbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gXCJzc3RcIjtcbiAqXG4gKiBjb25zb2xlLmxvZyhSZXNvdXJjZS5NeUJ1Y2tldC5uYW1lKTtcbiAqIGBgYFxuICpcbiAqICMjIyMgU2V0IGVudmlyb25tZW50IHZhcmlhYmxlc1xuICpcbiAqIFNldCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZm9yIHRoZSBmdW5jdGlvbi4gQXZhaWxhYmxlIGluIHlvdXIgaGFuZGxlciBhcyBgcHJvY2Vzcy5lbnZgLlxuICpcbiAqIGBgYHRzIHs0fVxuICogbmV3IHNzdC5hd3MuRnVuY3Rpb24oXCJNeUZ1bmN0aW9uXCIsIHtcbiAqICAgaGFuZGxlcjogXCJzcmMvbGFtYmRhLmhhbmRsZXJcIixcbiAqICAgZW52aXJvbm1lbnQ6IHtcbiAqICAgICBERUJVRzogXCJ0cnVlXCJcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEVuYWJsZSBmdW5jdGlvbiBVUkxzXG4gKlxuICogRW5hYmxlIGZ1bmN0aW9uIFVSTHMgdG8gaW52b2tlIHRoZSBmdW5jdGlvbiBvdmVyIEhUVFAuXG4gKlxuICogYGBgdHMgezN9XG4gKiBuZXcgc3N0LmF3cy5GdW5jdGlvbihcIk15RnVuY3Rpb25cIiwge1xuICogICBoYW5kbGVyOiBcInNyYy9sYW1iZGEuaGFuZGxlclwiLFxuICogICB1cmw6IHRydWVcbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBCdW5kbGluZ1xuICpcbiAqIEN1c3RvbWl6ZSBob3cgU1NUIHVzZXMgW2VzYnVpbGRdKGh0dHBzOi8vZXNidWlsZC5naXRodWIuaW8vKSB0byBidW5kbGUgeW91ciB3b3JrZXIgY29kZSB3aXRoIHRoZSBgbm9kZWpzYCBwcm9wZXJ0eS5cbiAqXG4gKiBgYGB0c1xuICogbmV3IHNzdC5hd3MuRnVuY3Rpb24oXCJNeUZ1bmN0aW9uXCIsIHtcbiAqICAgaGFuZGxlcjogXCJzcmMvbGFtYmRhLmhhbmRsZXJcIixcbiAqICAgbm9kZWpzOiB7XG4gKiAgICAgaW5zdGFsbDogW1wicGdcIl1cbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBPciBvdmVycmlkZSBpdCBlbnRpcmVseSBieSBwYXNzaW5nIGluIHlvdXIgb3duIGZ1bmN0aW9uIGBidW5kbGVgLlxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIEZ1bmN0aW9uXG4gIGV4dGVuZHMgQ29tcG9uZW50XG4gIGltcGxlbWVudHMgTGluay5MaW5rYWJsZSwgTGluay5BV1MuTGlua2FibGVcbntcbiAgcHJpdmF0ZSBmdW5jdGlvbjogT3V0cHV0PGF3cy5sYW1iZGEuRnVuY3Rpb24+O1xuICBwcml2YXRlIHJvbGU/OiBhd3MuaWFtLlJvbGU7XG4gIHByaXZhdGUgbG9nR3JvdXA6IGF3cy5jbG91ZHdhdGNoLkxvZ0dyb3VwO1xuICBwcml2YXRlIGZuVXJsOiBPdXRwdXQ8YXdzLmxhbWJkYS5GdW5jdGlvblVybCB8IHVuZGVmaW5lZD47XG4gIHByaXZhdGUgbWlzc2luZ1NvdXJjZW1hcD86IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M6IEZ1bmN0aW9uQXJncyxcbiAgICBvcHRzPzogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLFxuICApIHtcbiAgICBzdXBlcihcInNzdDphd3M6RnVuY3Rpb25cIiwgbmFtZSwgYXJncywgb3B0cyk7XG5cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xuICAgIGNvbnN0IGRldiA9IG91dHB1dChhcmdzLmxpdmUpLmFwcGx5KCh2KSA9PiAkZGV2ICYmIHYgIT09IGZhbHNlKTtcbiAgICBjb25zdCByZWdpb24gPSBub3JtYWxpemVSZWdpb24oKTtcbiAgICBjb25zdCBpbmplY3Rpb25zID0gbm9ybWFsaXplSW5qZWN0aW9ucygpO1xuICAgIGNvbnN0IHJ1bnRpbWUgPSBub3JtYWxpemVSdW50aW1lKCk7XG4gICAgY29uc3QgdGltZW91dCA9IG5vcm1hbGl6ZVRpbWVvdXQoKTtcbiAgICBjb25zdCBtZW1vcnkgPSBub3JtYWxpemVNZW1vcnkoKTtcbiAgICBjb25zdCBhcmNoaXRlY3R1cmVzID0gbm9ybWFsaXplQXJjaGl0ZWN0dXJlcygpO1xuICAgIGNvbnN0IGVudmlyb25tZW50ID0gbm9ybWFsaXplRW52aXJvbm1lbnQoKTtcbiAgICBjb25zdCBzdHJlYW1pbmcgPSBub3JtYWxpemVTdHJlYW1pbmcoKTtcbiAgICBjb25zdCBsb2dnaW5nID0gbm9ybWFsaXplTG9nZ2luZygpO1xuICAgIGNvbnN0IHVybCA9IG5vcm1hbGl6ZVVybCgpO1xuICAgIGNvbnN0IGNvcHlGaWxlcyA9IG5vcm1hbGl6ZUNvcHlGaWxlcygpO1xuXG4gICAgY29uc3QgbGlua0RhdGEgPSBidWlsZExpbmtEYXRhKCk7XG4gICAgY29uc3QgbGlua1Blcm1pc3Npb25zID0gYnVpbGRMaW5rUGVybWlzc2lvbnMoKTtcbiAgICBjb25zdCB7IGJ1bmRsZSwgaGFuZGxlcjogaGFuZGxlcjAgfSA9IGJ1aWxkSGFuZGxlcigpO1xuICAgIGNvbnN0IHsgaGFuZGxlciwgd3JhcHBlciB9ID0gYnVpbGRIYW5kbGVyV3JhcHBlcigpO1xuICAgIGNvbnN0IHJvbGUgPSBjcmVhdGVSb2xlKCk7XG4gICAgY29uc3QgemlwUGF0aCA9IHppcEJ1bmRsZUZvbGRlcigpO1xuICAgIGNvbnN0IGJ1bmRsZUhhc2ggPSBjYWxjdWxhdGVIYXNoKCk7XG4gICAgY29uc3QgZmlsZSA9IGNyZWF0ZUJ1Y2tldE9iamVjdCgpO1xuICAgIGNvbnN0IGxvZ0dyb3VwID0gY3JlYXRlTG9nR3JvdXAoKTtcbiAgICBjb25zdCBmbiA9IGNyZWF0ZUZ1bmN0aW9uKCk7XG4gICAgY29uc3QgY29kZVVwZGF0ZXIgPSB1cGRhdGVGdW5jdGlvbkNvZGUoKTtcblxuICAgIGNvbnN0IGZuVXJsID0gY3JlYXRlVXJsKCk7XG5cbiAgICBjb25zdCBsaW5rcyA9IG91dHB1dChsaW5rRGF0YSkuYXBwbHkoKGlucHV0KSA9PlxuICAgICAgaW5wdXQubWFwKChpdGVtKSA9PiBpdGVtLm5hbWUpLFxuICAgICk7XG5cbiAgICB0aGlzLmZ1bmN0aW9uID0gY29kZVVwZGF0ZXIudmVyc2lvbi5hcHBseSgoKSA9PiBmbik7XG4gICAgdGhpcy5yb2xlID0gcm9sZTtcbiAgICB0aGlzLmxvZ0dyb3VwID0gbG9nR3JvdXA7XG4gICAgdGhpcy5mblVybCA9IGZuVXJsO1xuXG4gICAgV2FycC5yZWdpc3RlcihcbiAgICAgIG5hbWUsXG4gICAgICBhbGwoW1xuICAgICAgICBkZXYsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmtzLFxuICAgICAgICBhcmdzLmhhbmRsZXIsXG4gICAgICAgIGFyZ3MuYnVuZGxlLFxuICAgICAgICBhcmdzLnJ1bnRpbWUsXG4gICAgICAgIGFyZ3Mubm9kZWpzLFxuICAgICAgXSkuYXBwbHkoKFtkZXYsIG5hbWUsIGxpbmtzLCBoYW5kbGVyLCBidW5kbGUsIHJ1bnRpbWUsIG5vZGVqc10pID0+IHtcbiAgICAgICAgaWYgKCFkZXYpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZnVuY3Rpb25JRDogbmFtZSxcbiAgICAgICAgICBsaW5rcyxcbiAgICAgICAgICBoYW5kbGVyOiBoYW5kbGVyLFxuICAgICAgICAgIGJ1bmRsZTogYnVuZGxlLFxuICAgICAgICAgIHJ1bnRpbWU6IHJ1bnRpbWUgfHwgXCJub2RlanMyMC54XCIsXG4gICAgICAgICAgcHJvcGVydGllczogbm9kZWpzLFxuICAgICAgICB9O1xuICAgICAgfSksXG4gICAgKTtcblxuICAgIGFsbChbYXJncy5idW5kbGUsIGFyZ3MuaGFuZGxlcl0pLmFwcGx5KChbYnVuZGxlLCBoYW5kbGVyXSkgPT4ge1xuICAgICAgTGluay5SZWNlaXZlci5yZWdpc3RlcihidW5kbGUgfHwgaGFuZGxlciwgbGlua3MsIGVudmlyb25tZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLnJlZ2lzdGVyT3V0cHV0cyh7XG4gICAgICBfbWV0YWRhdGE6IHtcbiAgICAgICAgaGFuZGxlcjogYXJncy5oYW5kbGVyLFxuICAgICAgICBpbnRlcm5hbDogYXJncy5fc2tpcE1ldGFkYXRhLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZVJlZ2lvbigpIHtcbiAgICAgIHJldHVybiBhd3MuZ2V0UmVnaW9uT3V0cHV0KHVuZGVmaW5lZCwgeyBwcm92aWRlcjogb3B0cz8ucHJvdmlkZXIgfSkubmFtZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVJbmplY3Rpb25zKCkge1xuICAgICAgcmV0dXJuIG91dHB1dChhcmdzLmluamVjdGlvbnMpLmFwcGx5KChpbmplY3Rpb25zKSA9PiBpbmplY3Rpb25zID8/IFtdKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVSdW50aW1lKCkge1xuICAgICAgcmV0dXJuIGFsbChbYXJncy5ydW50aW1lLCBkZXZdKS5hcHBseSgoW3YsIGRldl0pID0+XG4gICAgICAgIGRldiA/IFwicHJvdmlkZWQuYWwyMDIzXCIgOiB2ID8/IFwibm9kZWpzMjAueFwiLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVUaW1lb3V0KCkge1xuICAgICAgcmV0dXJuIG91dHB1dChhcmdzLnRpbWVvdXQpLmFwcGx5KCh0aW1lb3V0KSA9PiB0aW1lb3V0ID8/IFwiMjAgc2Vjb25kc1wiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVNZW1vcnkoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3MubWVtb3J5KS5hcHBseSgobWVtb3J5KSA9PiBtZW1vcnkgPz8gXCIxMDI0IE1CXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZUFyY2hpdGVjdHVyZXMoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3MuYXJjaGl0ZWN0dXJlKS5hcHBseSgoYXJjKSA9PlxuICAgICAgICBhcmMgPT09IFwiYXJtNjRcIiA/IFtcImFybTY0XCJdIDogW1wieDg2XzY0XCJdLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVFbnZpcm9ubWVudCgpIHtcbiAgICAgIHJldHVybiBhbGwoW2FyZ3MuZW52aXJvbm1lbnQsIGRldl0pLmFwcGx5KChbZW52aXJvbm1lbnQsIGRldl0pID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZW52aXJvbm1lbnQgPz8ge307XG4gICAgICAgIGlmIChkZXYpIHtcbiAgICAgICAgICByZXN1bHQuU1NUX0ZVTkNUSU9OX0lEID0gbmFtZTtcbiAgICAgICAgICByZXN1bHQuU1NUX0FQUCA9ICRhcHAubmFtZTtcbiAgICAgICAgICByZXN1bHQuU1NUX1NUQUdFID0gJGFwcC5zdGFnZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplU3RyZWFtaW5nKCkge1xuICAgICAgcmV0dXJuIG91dHB1dChhcmdzLnN0cmVhbWluZykuYXBwbHkoKHN0cmVhbWluZykgPT4gc3RyZWFtaW5nID8/IGZhbHNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVMb2dnaW5nKCkge1xuICAgICAgcmV0dXJuIG91dHB1dChhcmdzLmxvZ2dpbmcpLmFwcGx5KChsb2dnaW5nKSA9PiAoe1xuICAgICAgICAuLi5sb2dnaW5nLFxuICAgICAgICByZXRlbnRpb246IGxvZ2dpbmc/LnJldGVudGlvbiA/PyBcImZvcmV2ZXJcIixcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVVcmwoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3MudXJsKS5hcHBseSgodXJsKSA9PiB7XG4gICAgICAgIGlmICh1cmwgPT09IGZhbHNlIHx8IHVybCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgIGlmICh1cmwgPT09IHRydWUpIHtcbiAgICAgICAgICB1cmwgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBhdXRob3JpemF0aW9uXG4gICAgICAgIGNvbnN0IGRlZmF1bHRBdXRob3JpemF0aW9uID0gXCJub25lXCIgYXMgY29uc3Q7XG4gICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb24gPSB1cmwuYXV0aG9yaXphdGlvbiA/PyBkZWZhdWx0QXV0aG9yaXphdGlvbjtcblxuICAgICAgICAvLyBub3JtYWxpemUgY29yc1xuICAgICAgICBjb25zdCBkZWZhdWx0Q29yczogYXdzLnR5cGVzLmlucHV0LmxhbWJkYS5GdW5jdGlvblVybENvcnMgPSB7XG4gICAgICAgICAgYWxsb3dIZWFkZXJzOiBbXCIqXCJdLFxuICAgICAgICAgIGFsbG93TWV0aG9kczogW1wiKlwiXSxcbiAgICAgICAgICBhbGxvd09yaWdpbnM6IFtcIipcIl0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvcnMgPVxuICAgICAgICAgIHVybC5jb3JzID09PSBmYWxzZVxuICAgICAgICAgICAgPyB7fVxuICAgICAgICAgICAgOiB1cmwuY29ycyA9PT0gdHJ1ZSB8fCB1cmwuY29ycyA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgID8gZGVmYXVsdENvcnNcbiAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAuLi5kZWZhdWx0Q29ycyxcbiAgICAgICAgICAgICAgICAgIC4uLnVybC5jb3JzLFxuICAgICAgICAgICAgICAgICAgbWF4QWdlOiB1cmwuY29ycy5tYXhBZ2UgJiYgdG9TZWNvbmRzKHVybC5jb3JzLm1heEFnZSksXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4geyBhdXRob3JpemF0aW9uLCBjb3JzIH07XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVDb3B5RmlsZXMoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3MuY29weUZpbGVzID8/IFtdKS5hcHBseSgoY29weUZpbGVzKSA9PlxuICAgICAgICBQcm9taXNlLmFsbChcbiAgICAgICAgICBjb3B5RmlsZXMubWFwKGFzeW5jIChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZnJvbSA9IHBhdGguam9pbigkY2xpLnBhdGhzLnJvb3QsIGVudHJ5LmZyb20pO1xuICAgICAgICAgICAgY29uc3QgdG8gPSBlbnRyeS50byB8fCBlbnRyeS5mcm9tO1xuICAgICAgICAgICAgaWYgKHBhdGguaXNBYnNvbHV0ZSh0bykpXG4gICAgICAgICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoXG4gICAgICAgICAgICAgICAgYENvcHkgZGVzdGluYXRpb24gcGF0aCBcIiR7dG99XCIgbXVzdCBiZSByZWxhdGl2ZWAsXG4gICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgZnMucHJvbWlzZXMuc3RhdChmcm9tKTtcbiAgICAgICAgICAgIGNvbnN0IGlzRGlyID0gc3RhdHMuaXNEaXJlY3RvcnkoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHsgZnJvbSwgdG8sIGlzRGlyIH07XG4gICAgICAgICAgfSksXG4gICAgICAgICksXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUhhc2goKSB7XG4gICAgICByZXR1cm4gemlwUGF0aC5hcHBseShhc3luYyAoemlwUGF0aCkgPT4ge1xuICAgICAgICBjb25zdCBoYXNoID0gY3J5cHRvLmNyZWF0ZUhhc2goXCJzaGEyNTZcIik7XG4gICAgICAgIGhhc2gudXBkYXRlKGF3YWl0IGZzLnByb21pc2VzLnJlYWRGaWxlKHppcFBhdGgpKTtcbiAgICAgICAgcmV0dXJuIGhhc2guZGlnZXN0KFwiaGV4XCIpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRMaW5rRGF0YSgpIHtcbiAgICAgIGlmICghYXJncy5saW5rKSByZXR1cm4gb3V0cHV0KFtdKTtcbiAgICAgIHJldHVybiBvdXRwdXQoYXJncy5saW5rKS5hcHBseSgobGlua3MpID0+IHtcbiAgICAgICAgY29uc3QgbGlua0RhdGEgPSBMaW5rLmJ1aWxkKGxpbmtzKTtcbiAgICAgICAgcmV0dXJuIGxpbmtEYXRhO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRMaW5rUGVybWlzc2lvbnMoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3MubGluayA/PyBbXSkuYXBwbHkoKGxpbmtzKSA9PlxuICAgICAgICBsaW5rcy5mbGF0TWFwKChsKSA9PiB7XG4gICAgICAgICAgaWYgKCFMaW5rLkFXUy5pc0xpbmthYmxlKGwpKSByZXR1cm4gW107XG4gICAgICAgICAgcmV0dXJuIGwuZ2V0U1NUQVdTUGVybWlzc2lvbnMoKTtcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkSGFuZGxlcigpIHtcbiAgICAgIHJldHVybiBkZXYuYXBwbHkoKGRldikgPT4ge1xuICAgICAgICBpZiAoYXJncy5faWdub3JlQ29kZUNoYW5nZXMpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYnVuZGxlOiBwYXRoLmpvaW4oXG4gICAgICAgICAgICAgICRjbGkucGF0aHMucGxhdGZvcm0sXG4gICAgICAgICAgICAgIFwiZnVuY3Rpb25zXCIsXG4gICAgICAgICAgICAgIFwiZW1wdHktZnVuY3Rpb25cIixcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBoYW5kbGVyOiBcImluZGV4LmhhbmRsZXJcIixcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRldikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBoYW5kbGVyOiBcImJvb3RzdHJhcFwiLFxuICAgICAgICAgICAgYnVuZGxlOiBwYXRoLmpvaW4oJGNsaS5wYXRocy5wbGF0Zm9ybSwgXCJkaXN0XCIsIFwiYnJpZGdlXCIpLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXJncy5idW5kbGUpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYnVuZGxlOiBvdXRwdXQoYXJncy5idW5kbGUpLFxuICAgICAgICAgICAgaGFuZGxlcjogb3V0cHV0KGFyZ3MuaGFuZGxlciksXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ1aWxkUmVzdWx0ID0gYWxsKFthcmdzLCBsaW5rRGF0YV0pLmFwcGx5KFxuICAgICAgICAgIGFzeW5jIChbYXJncywgbGlua0RhdGFdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBidWlsZChuYW1lLCB7XG4gICAgICAgICAgICAgIC4uLmFyZ3MsXG4gICAgICAgICAgICAgIGxpbmtzOiBsaW5rRGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC50eXBlID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiRmFpbGVkIHRvIGJ1aWxkIGZ1bmN0aW9uOiBcIiArIHJlc3VsdC5lcnJvcnMuam9pbihcIlxcblwiKS50cmltKCksXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaGFuZGxlcjogYnVpbGRSZXN1bHQuaGFuZGxlcixcbiAgICAgICAgICBidW5kbGU6IGJ1aWxkUmVzdWx0Lm91dCxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkSGFuZGxlcldyYXBwZXIoKSB7XG4gICAgICBjb25zdCByZXQgPSBhbGwoW1xuICAgICAgICBkZXYsXG4gICAgICAgIGJ1bmRsZSxcbiAgICAgICAgaGFuZGxlcjAsXG4gICAgICAgIGxpbmtEYXRhLFxuICAgICAgICBzdHJlYW1pbmcsXG4gICAgICAgIGluamVjdGlvbnMsXG4gICAgICBdKS5hcHBseShcbiAgICAgICAgYXN5bmMgKFtkZXYsIGJ1bmRsZSwgaGFuZGxlciwgbGlua0RhdGEsIHN0cmVhbWluZywgaW5qZWN0aW9uc10pID0+IHtcbiAgICAgICAgICBpZiAoZGV2KSByZXR1cm4geyBoYW5kbGVyIH07XG5cbiAgICAgICAgICBjb25zdCBoYXNVc2VySW5qZWN0aW9ucyA9IGluamVjdGlvbnMubGVuZ3RoID4gMDtcbiAgICAgICAgICAvLyBhbHJlYWR5IGluamVjdGVkIHZpYSBlc2J1aWxkIHdoZW4gYnVuZGxlIGlzIHVuZGVmaW5lZFxuICAgICAgICAgIGNvbnN0IGhhc0xpbmtJbmplY3Rpb25zID0gYXJncy5idW5kbGUgJiYgbGlua0RhdGEubGVuZ3RoID4gMDtcblxuICAgICAgICAgIGlmICghaGFzVXNlckluamVjdGlvbnMgJiYgIWhhc0xpbmtJbmplY3Rpb25zKSByZXR1cm4geyBoYW5kbGVyIH07XG5cbiAgICAgICAgICBjb25zdCBsaW5rSW5qZWN0aW9uID0gaGFzTGlua0luamVjdGlvbnNcbiAgICAgICAgICAgID8gbGlua0RhdGFcbiAgICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PiBbXG4gICAgICAgICAgICAgICAgICBgcHJvY2Vzcy5lbnYuU1NUX1JFU09VUkNFXyR7aXRlbS5uYW1lfSA9ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGl0ZW0ucHJvcGVydGllcyksXG4gICAgICAgICAgICAgICAgICApfTtcXG5gLFxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgLmpvaW4oXCJcIilcbiAgICAgICAgICAgIDogXCJcIjtcblxuICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhdGgucG9zaXgucGFyc2UoaGFuZGxlcik7XG4gICAgICAgICAgY29uc3QgaGFuZGxlckRpciA9IHBhcnNlZC5kaXI7XG4gICAgICAgICAgY29uc3Qgb2xkSGFuZGxlckZpbGVOYW1lID0gcGFyc2VkLm5hbWU7XG4gICAgICAgICAgY29uc3Qgb2xkSGFuZGxlckZ1bmN0aW9uID0gcGFyc2VkLmV4dC5yZXBsYWNlKC9eXFwuLywgXCJcIik7XG4gICAgICAgICAgY29uc3QgbmV3SGFuZGxlckZpbGVOYW1lID0gXCJzZXJ2ZXItaW5kZXhcIjtcbiAgICAgICAgICBjb25zdCBuZXdIYW5kbGVyRnVuY3Rpb24gPSBcImhhbmRsZXJcIjtcblxuICAgICAgICAgIC8vIFZhbGlkYXRlIGhhbmRsZXIgZmlsZSBleGlzdHNcbiAgICAgICAgICBjb25zdCBuZXdIYW5kbGVyRmlsZUV4dCA9IFtcIi5qc1wiLCBcIi5tanNcIiwgXCIuY2pzXCJdLmZpbmQoKGV4dCkgPT5cbiAgICAgICAgICAgIGZzLmV4aXN0c1N5bmMoXG4gICAgICAgICAgICAgIHBhdGguam9pbihidW5kbGUsIGhhbmRsZXJEaXIsIG9sZEhhbmRsZXJGaWxlTmFtZSArIGV4dCksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKCFuZXdIYW5kbGVyRmlsZUV4dClcbiAgICAgICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoXG4gICAgICAgICAgICAgIGBDb3VsZCBub3QgZmluZCBoYW5kbGVyIGZpbGUgXCIke2hhbmRsZXJ9XCIgZm9yIGZ1bmN0aW9uIFwiJHtuYW1lfVwiYCxcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaGFuZGxlcjogcGF0aC5wb3NpeC5qb2luKFxuICAgICAgICAgICAgICBoYW5kbGVyRGlyLFxuICAgICAgICAgICAgICBgJHtuZXdIYW5kbGVyRmlsZU5hbWV9LiR7bmV3SGFuZGxlckZ1bmN0aW9ufWAsXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgd3JhcHBlcjoge1xuICAgICAgICAgICAgICBkaXI6IGhhbmRsZXJEaXIsXG4gICAgICAgICAgICAgIG5hbWU6IGAke25ld0hhbmRsZXJGaWxlTmFtZX0ubWpzYCxcbiAgICAgICAgICAgICAgY29udGVudDogc3RyZWFtaW5nXG4gICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgIGxpbmtJbmplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGBleHBvcnQgY29uc3QgJHtuZXdIYW5kbGVyRnVuY3Rpb259ID0gYXdzbGFtYmRhLnN0cmVhbWlmeVJlc3BvbnNlKGFzeW5jIChldmVudCwgY29udGV4dCkgPT4ge2AsXG4gICAgICAgICAgICAgICAgICAgIC4uLmluamVjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGAgIGNvbnN0IHsgJHtvbGRIYW5kbGVyRnVuY3Rpb259OiByYXdIYW5kbGVyfSA9IGF3YWl0IGltcG9ydChcIi4vJHtvbGRIYW5kbGVyRmlsZU5hbWV9JHtuZXdIYW5kbGVyRmlsZUV4dH1cIik7YCxcbiAgICAgICAgICAgICAgICAgICAgYCAgcmV0dXJuIHJhd0hhbmRsZXIoZXZlbnQsIGNvbnRleHQpO2AsXG4gICAgICAgICAgICAgICAgICAgIGB9KTtgLFxuICAgICAgICAgICAgICAgICAgXS5qb2luKFwiXFxuXCIpXG4gICAgICAgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgICAgIGxpbmtJbmplY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGBleHBvcnQgY29uc3QgJHtuZXdIYW5kbGVyRnVuY3Rpb259ID0gYXN5bmMgKGV2ZW50LCBjb250ZXh0KSA9PiB7YCxcbiAgICAgICAgICAgICAgICAgICAgLi4uaW5qZWN0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgYCAgY29uc3QgeyAke29sZEhhbmRsZXJGdW5jdGlvbn06IHJhd0hhbmRsZXJ9ID0gYXdhaXQgaW1wb3J0KFwiLi8ke29sZEhhbmRsZXJGaWxlTmFtZX0ke25ld0hhbmRsZXJGaWxlRXh0fVwiKTtgLFxuICAgICAgICAgICAgICAgICAgICBgICByZXR1cm4gcmF3SGFuZGxlcihldmVudCwgY29udGV4dCk7YCxcbiAgICAgICAgICAgICAgICAgICAgYH07YCxcbiAgICAgICAgICAgICAgICAgIF0uam9pbihcIlxcblwiKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBoYW5kbGVyOiByZXQuaGFuZGxlcixcbiAgICAgICAgd3JhcHBlcjogcmV0LndyYXBwZXIsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVJvbGUoKSB7XG4gICAgICBpZiAoYXJncy5yb2xlKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHBvbGljeSA9IGFsbChbYXJncy5wZXJtaXNzaW9ucyB8fCBbXSwgbGlua1Blcm1pc3Npb25zLCBkZXZdKS5hcHBseShcbiAgICAgICAgKFthcmdzUGVybWlzc2lvbnMsIGxpbmtQZXJtaXNzaW9ucywgZGV2XSkgPT5cbiAgICAgICAgICBhd3MuaWFtLmdldFBvbGljeURvY3VtZW50T3V0cHV0KHtcbiAgICAgICAgICAgIHN0YXRlbWVudHM6IFtcbiAgICAgICAgICAgICAgLi4uYXJnc1Blcm1pc3Npb25zLFxuICAgICAgICAgICAgICAuLi5saW5rUGVybWlzc2lvbnMsXG4gICAgICAgICAgICAgIC4uLihkZXZcbiAgICAgICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnM6IFtcImlvdDoqXCJdLFxuICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlczogW1wiKlwiXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICA6IFtdKSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgfSksXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gbmV3IGF3cy5pYW0uUm9sZShcbiAgICAgICAgYCR7bmFtZX1Sb2xlYCxcbiAgICAgICAgdHJhbnNmb3JtKGFyZ3MudHJhbnNmb3JtPy5yb2xlLCB7XG4gICAgICAgICAgbmFtZTogcmVnaW9uLmFwcGx5KChyZWdpb24pID0+XG4gICAgICAgICAgICBwcmVmaXhOYW1lKFxuICAgICAgICAgICAgICA2NCxcbiAgICAgICAgICAgICAgYCR7bmFtZX1Sb2xlYCxcbiAgICAgICAgICAgICAgYC0ke3JlZ2lvbi50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLy0vZywgXCJcIil9YCxcbiAgICAgICAgICAgICksXG4gICAgICAgICAgKSxcbiAgICAgICAgICBhc3N1bWVSb2xlUG9saWN5OiBhd3MuaWFtLmFzc3VtZVJvbGVQb2xpY3lGb3JQcmluY2lwYWwoe1xuICAgICAgICAgICAgU2VydmljZTogXCJsYW1iZGEuYW1hem9uYXdzLmNvbVwiLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyBzdGF0ZW1lbnRzLCBkbyBub3QgYWRkIGFuIGlubGluZSBwb2xpY3kuXG4gICAgICAgICAgLy8gYWRkaW5nIGFuIGlubGluZSBwb2xpY3kgd2l0aCBubyBzdGF0ZW1lbnRzIHdpbGwgY2F1c2UgYW4gZXJyb3IuXG4gICAgICAgICAgaW5saW5lUG9saWNpZXM6IHBvbGljeS5hcHBseSgoeyBzdGF0ZW1lbnRzIH0pID0+XG4gICAgICAgICAgICBzdGF0ZW1lbnRzXG4gICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcImlubGluZVwiLFxuICAgICAgICAgICAgICAgICAgICBwb2xpY3k6IHBvbGljeS5qc29uLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIDogW10sXG4gICAgICAgICAgKSxcbiAgICAgICAgICBtYW5hZ2VkUG9saWN5QXJuczogW1xuICAgICAgICAgICAgXCJhcm46YXdzOmlhbTo6YXdzOnBvbGljeS9zZXJ2aWNlLXJvbGUvQVdTTGFtYmRhQmFzaWNFeGVjdXRpb25Sb2xlXCIsXG4gICAgICAgICAgICAuLi4oYXJncy52cGNcbiAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICBcImFybjphd3M6aWFtOjphd3M6cG9saWN5L3NlcnZpY2Utcm9sZS9BV1NMYW1iZGFWUENBY2Nlc3NFeGVjdXRpb25Sb2xlXCIsXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICA6IFtdKSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gemlwQnVuZGxlRm9sZGVyKCkge1xuICAgICAgLy8gTm90ZTogY2Fubm90IHBvaW50IHRoZSBidW5kbGUgdG8gdGhlIGAub3Blbi1uZXh0L3NlcnZlci1mdW5jdGlvbmBcbiAgICAgIC8vICAgICAgIGIvYyB0aGUgZm9sZGVyIGNvbnRhaW5zIG5vZGVfbW9kdWxlcy4gQW5kIHBucG0gbm9kZV9tb2R1bGVzXG4gICAgICAvLyAgICAgICBjb250YWlucyBzeW1saW5rcy4gUHVsdW1pIGNhbm5vdCB6aXAgc3ltbGlua3MgY29ycmVjdGx5LlxuICAgICAgLy8gICAgICAgV2Ugd2lsbCB6aXAgdGhlIGZvbGRlciBvdXJzZWx2ZXMuXG4gICAgICByZXR1cm4gYWxsKFtidW5kbGUsIHdyYXBwZXIsIGNvcHlGaWxlc10pLmFwcGx5KFxuICAgICAgICBhc3luYyAoW2J1bmRsZSwgd3JhcHBlciwgY29weUZpbGVzXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHppcFBhdGggPSBwYXRoLnJlc29sdmUoXG4gICAgICAgICAgICAkY2xpLnBhdGhzLndvcmssXG4gICAgICAgICAgICBcImFydGlmYWN0c1wiLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIFwiY29kZS56aXBcIixcbiAgICAgICAgICApO1xuICAgICAgICAgIGF3YWl0IGZzLnByb21pc2VzLm1rZGlyKHBhdGguZGlybmFtZSh6aXBQYXRoKSwge1xuICAgICAgICAgICAgcmVjdXJzaXZlOiB0cnVlLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd3MgPSBmcy5jcmVhdGVXcml0ZVN0cmVhbSh6aXBQYXRoKTtcbiAgICAgICAgICAgIGNvbnN0IGFyY2hpdmUgPSBhcmNoaXZlcihcInppcFwiLCB7XG4gICAgICAgICAgICAgIC8vIEVuc3VyZSBkZXRlcm1pbmlzdGljIHppcCBmaWxlIGhhc2hlc1xuICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXJjaGl2ZXJqcy9ub2RlLWFyY2hpdmVyL2lzc3Vlcy8zOTcjaXNzdWVjb21tZW50LTU1NDMyNzMzOFxuICAgICAgICAgICAgICBzdGF0Q29uY3VycmVuY3k6IDEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFyY2hpdmUub24oXCJ3YXJuaW5nXCIsIHJlamVjdCk7XG4gICAgICAgICAgICBhcmNoaXZlLm9uKFwiZXJyb3JcIiwgcmVqZWN0KTtcbiAgICAgICAgICAgIC8vIGFyY2hpdmUgaGFzIGJlZW4gZmluYWxpemVkIGFuZCB0aGUgb3V0cHV0IGZpbGUgZGVzY3JpcHRvciBoYXMgY2xvc2VkLCByZXNvbHZlIHByb21pc2VcbiAgICAgICAgICAgIC8vIHRoaXMgaGFzIHRvIGJlIGRvbmUgYmVmb3JlIGNhbGxpbmcgYGZpbmFsaXplYCBzaW5jZSB0aGUgZXZlbnRzIG1heSBmaXJlIGltbWVkaWF0ZWx5IGFmdGVyLlxuICAgICAgICAgICAgLy8gc2VlIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2FyY2hpdmVyXG4gICAgICAgICAgICB3cy5vbmNlKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICByZXNvbHZlKHppcFBhdGgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhcmNoaXZlLnBpcGUod3MpO1xuXG4gICAgICAgICAgICAvLyBzZXQgdGhlIGRhdGUgdG8gMCBzbyB0aGF0IHRoZSB6aXAgZmlsZSBpcyBkZXRlcm1pbmlzdGljXG4gICAgICAgICAgICBhcmNoaXZlLmdsb2IoXG4gICAgICAgICAgICAgIFwiKipcIixcbiAgICAgICAgICAgICAgeyBjd2Q6IGJ1bmRsZSwgZG90OiB0cnVlIH0sXG4gICAgICAgICAgICAgIHsgZGF0ZTogbmV3IERhdGUoMCksIG1vZGU6IDBvNzc3IH0sXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBBZGQgaGFuZGxlciB3cmFwcGVyIGludG8gdGhlIHppcFxuICAgICAgICAgICAgaWYgKHdyYXBwZXIpIHtcbiAgICAgICAgICAgICAgYXJjaGl2ZS5hcHBlbmQod3JhcHBlci5jb250ZW50LCB7XG4gICAgICAgICAgICAgICAgbmFtZTogd3JhcHBlci5uYW1lLFxuICAgICAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKDApLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIGNvcHlGaWxlcyBpbnRvIHRoZSB6aXBcbiAgICAgICAgICAgIGNvcHlGaWxlcy5mb3JFYWNoKGFzeW5jIChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAvLyBUT0RPXG4gICAgICAgICAgICAgIC8vaWYgKCRhcHAuIG1vZGUgPT09IFwiZGVwbG95XCIpXG4gICAgICAgICAgICAgIGVudHJ5LmlzRGlyXG4gICAgICAgICAgICAgICAgPyBhcmNoaXZlLmRpcmVjdG9yeShlbnRyeS5mcm9tLCBlbnRyeS50bywgeyBkYXRlOiBuZXcgRGF0ZSgwKSB9KVxuICAgICAgICAgICAgICAgIDogYXJjaGl2ZS5maWxlKGVudHJ5LmZyb20sIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZW50cnkudG8sXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKDApLFxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIC8vaWYgKG1vZGUgPT09IFwic3RhcnRcIikge1xuICAgICAgICAgICAgICAvLyAgdHJ5IHtcbiAgICAgICAgICAgICAgLy8gICAgY29uc3QgZGlyID0gcGF0aC5kaXJuYW1lKHRvUGF0aCk7XG4gICAgICAgICAgICAgIC8vICAgIGF3YWl0IGZzLm1rZGlyKGRpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICAgICAgICAgIC8vICAgIGF3YWl0IGZzLnN5bWxpbmsoZnJvbVBhdGgsIHRvUGF0aCk7XG4gICAgICAgICAgICAgIC8vICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAvLyAgICBMb2dnZXIuZGVidWcoXCJGYWlsZWQgdG8gc3ltbGlua1wiLCBmcm9tUGF0aCwgdG9QYXRoLCBleCk7XG4gICAgICAgICAgICAgIC8vICB9XG4gICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCBhcmNoaXZlLmZpbmFsaXplKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gemlwUGF0aDtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQnVja2V0T2JqZWN0KCkge1xuICAgICAgcmV0dXJuIG5ldyBhd3MuczMuQnVja2V0T2JqZWN0djIoXG4gICAgICAgIGAke25hbWV9Q29kZWAsXG4gICAgICAgIHtcbiAgICAgICAgICBrZXk6IGludGVycG9sYXRlYGFzc2V0cy8ke25hbWV9LWNvZGUtJHtidW5kbGVIYXNofS56aXBgLFxuICAgICAgICAgIGJ1Y2tldDogcmVnaW9uLmFwcGx5KChyZWdpb24pID0+XG4gICAgICAgICAgICBib290c3RyYXAuZm9yUmVnaW9uKHJlZ2lvbikudGhlbigoZCkgPT4gZC5hc3NldCksXG4gICAgICAgICAgKSxcbiAgICAgICAgICBzb3VyY2U6IHppcFBhdGguYXBwbHkoKHppcFBhdGgpID0+IG5ldyBhc3NldC5GaWxlQXJjaGl2ZSh6aXBQYXRoKSksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwYXJlbnQsXG4gICAgICAgICAgaWdub3JlQ2hhbmdlczogYXJncy5faWdub3JlQ29kZUNoYW5nZXNcbiAgICAgICAgICAgID8gW1wia2V5XCIsIFwic291cmNlXCJdXG4gICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICByZXRhaW5PbkRlbGV0ZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlTG9nR3JvdXAoKSB7XG4gICAgICByZXR1cm4gbmV3IGF3cy5jbG91ZHdhdGNoLkxvZ0dyb3VwKFxuICAgICAgICBgJHtuYW1lfUxvZ0dyb3VwYCxcbiAgICAgICAgdHJhbnNmb3JtKGFyZ3MudHJhbnNmb3JtPy5sb2dHcm91cCwge1xuICAgICAgICAgIG5hbWU6IGAvYXdzL2xhbWJkYS8ke3ByZWZpeE5hbWUoNjQsIGAke25hbWV9RnVuY3Rpb25gKX1gLFxuICAgICAgICAgIHJldGVudGlvbkluRGF5czogbG9nZ2luZy5hcHBseShcbiAgICAgICAgICAgIChsb2dnaW5nKSA9PiBSRVRFTlRJT05bbG9nZ2luZy5yZXRlbnRpb25dLFxuICAgICAgICAgICksXG4gICAgICAgIH0pLFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgYXdzLmxhbWJkYS5GdW5jdGlvbihcbiAgICAgICAgYCR7bmFtZX1GdW5jdGlvbmAsXG4gICAgICAgIHRyYW5zZm9ybShhcmdzLnRyYW5zZm9ybT8uZnVuY3Rpb24sIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYWxsKFthcmdzLmRlc2NyaXB0aW9uLCBkZXZdKS5hcHBseShcbiAgICAgICAgICAgIChbZGVzY3JpcHRpb24sIGRldl0pID0+XG4gICAgICAgICAgICAgIGRldlxuICAgICAgICAgICAgICAgID8gZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgID8gYCR7ZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDI0MCl9IChsaXZlKWBcbiAgICAgICAgICAgICAgICAgIDogXCJsaXZlXCJcbiAgICAgICAgICAgICAgICA6IGAke2Rlc2NyaXB0aW9uID8/IFwiXCJ9YCxcbiAgICAgICAgICApLFxuICAgICAgICAgIGNvZGU6IG5ldyBhc3NldC5GaWxlQXJjaGl2ZShcbiAgICAgICAgICAgIHBhdGguam9pbigkY2xpLnBhdGhzLnBsYXRmb3JtLCBcImZ1bmN0aW9uc1wiLCBcImVtcHR5LWZ1bmN0aW9uXCIpLFxuICAgICAgICAgICksXG4gICAgICAgICAgaGFuZGxlcixcbiAgICAgICAgICByb2xlOiBhcmdzLnJvbGUgPz8gcm9sZSEuYXJuLFxuICAgICAgICAgIHJ1bnRpbWUsXG4gICAgICAgICAgdGltZW91dDogdGltZW91dC5hcHBseSgodGltZW91dCkgPT4gdG9TZWNvbmRzKHRpbWVvdXQpKSxcbiAgICAgICAgICBtZW1vcnlTaXplOiBtZW1vcnkuYXBwbHkoKG1lbW9yeSkgPT4gdG9NQnMobWVtb3J5KSksXG4gICAgICAgICAgZW52aXJvbm1lbnQ6IHtcbiAgICAgICAgICAgIHZhcmlhYmxlczogZW52aXJvbm1lbnQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcmNoaXRlY3R1cmVzLFxuICAgICAgICAgIGxvZ2dpbmdDb25maWc6IHtcbiAgICAgICAgICAgIGxvZ0Zvcm1hdDogXCJUZXh0XCIsXG4gICAgICAgICAgICBsb2dHcm91cDogbG9nR3JvdXAubmFtZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHZwY0NvbmZpZzogYXJncy52cGMgJiYge1xuICAgICAgICAgICAgc2VjdXJpdHlHcm91cElkczogb3V0cHV0KGFyZ3MudnBjKS5zZWN1cml0eUdyb3VwcyxcbiAgICAgICAgICAgIHN1Ym5ldElkczogb3V0cHV0KGFyZ3MudnBjKS5zdWJuZXRzLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbGF5ZXJzOiBhcmdzLmxheWVycyxcbiAgICAgICAgfSksXG4gICAgICAgIHtcbiAgICAgICAgICBwYXJlbnQsXG4gICAgICAgICAgaWdub3JlQ2hhbmdlczogYXJncy5faWdub3JlQ29kZUNoYW5nZXNcbiAgICAgICAgICAgID8gW1wiY29kZVwiLCBcImhhbmRsZXJcIl1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVVcmwoKSB7XG4gICAgICByZXR1cm4gdXJsLmFwcGx5KCh1cmwpID0+IHtcbiAgICAgICAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgICAgICAgcmV0dXJuIG5ldyBhd3MubGFtYmRhLkZ1bmN0aW9uVXJsKFxuICAgICAgICAgIGAke25hbWV9VXJsYCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmdW5jdGlvbk5hbWU6IGZuLm5hbWUsXG4gICAgICAgICAgICBhdXRob3JpemF0aW9uVHlwZTogdXJsLmF1dGhvcml6YXRpb24udG9VcHBlckNhc2UoKSxcbiAgICAgICAgICAgIGludm9rZU1vZGU6IHN0cmVhbWluZy5hcHBseSgoc3RyZWFtaW5nKSA9PlxuICAgICAgICAgICAgICBzdHJlYW1pbmcgPyBcIlJFU1BPTlNFX1NUUkVBTVwiIDogXCJCVUZGRVJFRFwiLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvcnM6IHVybC5jb3JzLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUZ1bmN0aW9uQ29kZSgpIHtcbiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25Db2RlVXBkYXRlcihcbiAgICAgICAgYCR7bmFtZX1Db2RlVXBkYXRlcmAsXG4gICAgICAgIHtcbiAgICAgICAgICBmdW5jdGlvbk5hbWU6IGZuLm5hbWUsXG4gICAgICAgICAgczNCdWNrZXQ6IGZpbGUuYnVja2V0LFxuICAgICAgICAgIHMzS2V5OiBmaWxlLmtleSxcbiAgICAgICAgICBmdW5jdGlvbkxhc3RNb2RpZmllZDogZm4ubGFzdE1vZGlmaWVkLFxuICAgICAgICAgIHJlZ2lvbixcbiAgICAgICAgfSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB1bmRlcmx5aW5nIFtyZXNvdXJjZXNdKC9kb2NzL2NvbXBvbmVudHMvI25vZGVzKSB0aGlzIGNvbXBvbmVudCBjcmVhdGVzLlxuICAgKi9cbiAgcHVibGljIGdldCBub2RlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgSUFNIFJvbGUgdGhlIGZ1bmN0aW9uIHdpbGwgdXNlLlxuICAgICAgICovXG4gICAgICByb2xlOiB0aGlzLnJvbGUsXG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBV1MgTGFtYmRhIGZ1bmN0aW9uLlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbjogdGhpcy5mdW5jdGlvbixcbiAgICAgIC8qKlxuICAgICAgICogVGhlIENsb3VkV2F0Y2ggTG9nIEdyb3VwIHRoZSBmdW5jdGlvbiBsb2dzIGFyZSBzdG9yZWQuXG4gICAgICAgKi9cbiAgICAgIGxvZ0dyb3VwOiB0aGlzLmxvZ0dyb3VwLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogVGhlIExhbWJkYSBmdW5jdGlvbiBVUkwgaWYgYHVybGAgaXMgZW5hYmxlZC5cbiAgICovXG4gIHB1YmxpYyBnZXQgdXJsKCkge1xuICAgIHJldHVybiB0aGlzLmZuVXJsLmFwcGx5KCh1cmwpID0+IHtcbiAgICAgIGlmICghdXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJGdW5jdGlvbiBVUkwgaXMgbm90IGVuYWJsZWRcIik7XG4gICAgICByZXR1cm4gdXJsLmZ1bmN0aW9uVXJsO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBMYW1iZGEgZnVuY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZnVuY3Rpb24ubmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgQVJOIG9mIHRoZSBMYW1iZGEgZnVuY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgZ2V0IGFybigpIHtcbiAgICByZXR1cm4gdGhpcy5mdW5jdGlvbi5hcm47XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHN0YXRpYyBmcm9tRGVmaW5pdGlvbihcbiAgICBwYXJlbnQ6IENvbXBvbmVudCxcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgZGVmaW5pdGlvbjogSW5wdXQ8c3RyaW5nIHwgRnVuY3Rpb25BcmdzPixcbiAgICBvdmVycmlkZT86IFBpY2s8RnVuY3Rpb25BcmdzLCBcImRlc2NyaXB0aW9uXCIgfCBcInBlcm1pc3Npb25zXCI+LFxuICApIHtcbiAgICByZXR1cm4gb3V0cHV0KGRlZmluaXRpb24pLmFwcGx5KChkZWZpbml0aW9uKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGRlZmluaXRpb24gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHsgaGFuZGxlcjogZGVmaW5pdGlvbiwgLi4ub3ZlcnJpZGUgfSxcbiAgICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChkZWZpbml0aW9uLmhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLmRlZmluaXRpb24sXG4gICAgICAgICAgICAuLi5vdmVycmlkZSxcbiAgICAgICAgICAgIHBlcm1pc3Npb25zOiBhbGwoW1xuICAgICAgICAgICAgICBkZWZpbml0aW9uLnBlcm1pc3Npb25zLFxuICAgICAgICAgICAgICBvdmVycmlkZT8ucGVybWlzc2lvbnMsXG4gICAgICAgICAgICBdKS5hcHBseSgoW3Blcm1pc3Npb25zLCBvdmVycmlkZVBlcm1pc3Npb25zXSkgPT4gW1xuICAgICAgICAgICAgICAuLi4ocGVybWlzc2lvbnMgPz8gW10pLFxuICAgICAgICAgICAgICAuLi4ob3ZlcnJpZGVQZXJtaXNzaW9ucyA/PyBbXSksXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgcGFyZW50IH0sXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgZnVuY3Rpb24gZGVmaW5pdGlvbiBmb3IgdGhlIFwiJHtuYW1lfVwiIEZ1bmN0aW9uYCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHB1YmxpYyBnZXRTU1RMaW5rKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHVibGljIGdldFNTVEFXU1Blcm1pc3Npb25zKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGFjdGlvbnM6IFtcImxhbWJkYTpJbnZva2VGdW5jdGlvblwiXSxcbiAgICAgICAgcmVzb3VyY2VzOiBbdGhpcy5mdW5jdGlvbi5hcm5dLFxuICAgICAgfSxcbiAgICBdO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgQ3VzdG9tUmVzb3VyY2VPcHRpb25zLCBJbnB1dCwgT3V0cHV0LCBkeW5hbWljIH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQge1xuICBSb3V0ZTUzQ2xpZW50LFxuICBMaXN0SG9zdGVkWm9uZXNDb21tYW5kLFxuICBMaXN0SG9zdGVkWm9uZXNDb21tYW5kT3V0cHV0LFxufSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LXJvdXRlLTUzXCI7XG5pbXBvcnQgeyB1c2VDbGllbnQgfSBmcm9tIFwiLi4vaGVscGVycy9jbGllbnQuanNcIjtcblxuaW50ZXJmYWNlIElucHV0cyB7XG4gIGRvbWFpbjogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgT3V0cHV0cyB7XG4gIHpvbmVJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhvc3RlZFpvbmVMb29rdXBJbnB1dHMge1xuICBkb21haW46IElucHV0PElucHV0c1tcImRvbWFpblwiXT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSG9zdGVkWm9uZUxvb2t1cCB7XG4gIHpvbmVJZDogT3V0cHV0PE91dHB1dHNbXCJ6b25lSWRcIl0+O1xufVxuXG5jbGFzcyBQcm92aWRlciBpbXBsZW1lbnRzIGR5bmFtaWMuUmVzb3VyY2VQcm92aWRlciB7XG4gIGFzeW5jIGNyZWF0ZShpbnB1dHM6IElucHV0cyk6IFByb21pc2U8ZHluYW1pYy5DcmVhdGVSZXN1bHQ8T3V0cHV0cz4+IHtcbiAgICBjb25zdCB6b25lSWQgPSBhd2FpdCB0aGlzLmxvb2t1cChpbnB1dHMuZG9tYWluKTtcbiAgICByZXR1cm4geyBpZDogem9uZUlkLCBvdXRzOiB7IHpvbmVJZCB9IH07XG4gIH1cblxuICBhc3luYyB1cGRhdGUoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBvbGRzOiBJbnB1dHMsXG4gICAgbmV3czogSW5wdXRzLFxuICApOiBQcm9taXNlPGR5bmFtaWMuVXBkYXRlUmVzdWx0PE91dHB1dHM+PiB7XG4gICAgY29uc3Qgem9uZUlkID0gYXdhaXQgdGhpcy5sb29rdXAobmV3cy5kb21haW4pO1xuICAgIHJldHVybiB7IG91dHM6IHsgem9uZUlkIH0gfTtcbiAgfVxuXG4gIGFzeW5jIGxvb2t1cChkb21haW46IHN0cmluZykge1xuICAgIGNvbnN0IGNsaWVudCA9IHVzZUNsaWVudChSb3V0ZTUzQ2xpZW50KTtcblxuICAgIC8vIEdldCBhbGwgaG9zdGVkIHpvbmVzIGluIHRoZSBhY2NvdW50XG4gICAgY29uc3Qgem9uZXM6IExpc3RIb3N0ZWRab25lc0NvbW1hbmRPdXRwdXRbXCJIb3N0ZWRab25lc1wiXSA9IFtdO1xuICAgIGxldCBuZXh0TWFya2VyOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgZG8ge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LnNlbmQoXG4gICAgICAgIG5ldyBMaXN0SG9zdGVkWm9uZXNDb21tYW5kKHsgTWFya2VyOiBuZXh0TWFya2VyIH0pLFxuICAgICAgKTtcbiAgICAgIHpvbmVzLnB1c2goLi4uKHJlcy5Ib3N0ZWRab25lcyB8fCBbXSkpO1xuICAgICAgbmV4dE1hcmtlciA9IHJlcy5OZXh0TWFya2VyO1xuICAgIH0gd2hpbGUgKG5leHRNYXJrZXIpO1xuXG4gICAgLy8gU3BsaXQgem9uZU5hbWUgYnkgXCIuXCIgYW5kIHRyeSB0byBmaW5kIHRoZSBsb25nZXN0IG1hdGNoaW5nIHpvbmVcbiAgICAvLyBpZS4gZm9yIFwibXkuYXBwLmRvbWFpbi5jb21cIlxuICAgIC8vICAgICB0cnkgXCJteS5hcHAuZG9tYWluLmNvbVwiLCBcImFwcC5kb21haW4uY29tXCIsIFwiZG9tYWluLmNvbVxuICAgIGNvbnN0IHBhcnRzID0gZG9tYWluLnNwbGl0KFwiLlwiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBwYXJ0cy5sZW5ndGggLSAyOyBpKyspIHtcbiAgICAgIGNvbnN0IHpvbmUgPSB6b25lcy5maW5kKCh6KSA9PiB6Lk5hbWUgPT09IHBhcnRzLnNsaWNlKGkpLmpvaW4oXCIuXCIpICsgXCIuXCIpO1xuICAgICAgaWYgKHpvbmU/LklkKSB7XG4gICAgICAgIHJldHVybiB6b25lLklkLnJlcGxhY2UoXCIvaG9zdGVkem9uZS9cIiwgXCJcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBob3N0ZWQgem9uZSBmb3IgZG9tYWluICR7ZG9tYWlufWApO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBIb3N0ZWRab25lTG9va3VwIGV4dGVuZHMgZHluYW1pYy5SZXNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhcmdzOiBIb3N0ZWRab25lTG9va3VwSW5wdXRzLFxuICAgIG9wdHM/OiBDdXN0b21SZXNvdXJjZU9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKFxuICAgICAgbmV3IFByb3ZpZGVyKCksXG4gICAgICBgJHtuYW1lfS5zc3QuYXdzLkhvc3RlZFpvbmVMb29rdXBgLFxuICAgICAgeyAuLi5hcmdzLCB6b25lSWQ6IHVuZGVmaW5lZCB9LFxuICAgICAgb3B0cyxcbiAgICApO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLCBvdXRwdXQgfSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCAqIGFzIGF3cyBmcm9tIFwiQHB1bHVtaS9hd3NcIjtcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnRcIjtcbmltcG9ydCB7IHNhbml0aXplVG9QYXNjYWxDYXNlIH0gZnJvbSBcIi4uL25hbWluZ1wiO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXQuanNcIjtcblxuLyoqXG4gKiBQcm9wZXJ0aWVzIHRvIGNyZWF0ZSBhIEROUyB2YWxpZGF0ZWQgY2VydGlmaWNhdGUgbWFuYWdlZCBieSBBV1MgQ2VydGlmaWNhdGUgTWFuYWdlci5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEbnNWYWxpZGF0ZWRDZXJ0aWZpY2F0ZUFyZ3Mge1xuICAvKipcbiAgICogVGhlIGZ1bGx5IHF1YWxpZmllZCBkb21haW4gbmFtZSBpbiB0aGUgY2VydGlmaWNhdGUuXG4gICAqL1xuICBkb21haW5OYW1lOiBJbnB1dDxzdHJpbmc+O1xuICAvKipcbiAgICogUm91dGUgNTMgSG9zdGVkIFpvbmUgdXNlZCB0byBwZXJmb3JtIEROUyB2YWxpZGF0aW9uIG9mIHRoZSByZXF1ZXN0LiAgVGhlIHpvbmVcbiAgICogbXVzdCBiZSBhdXRob3JpdGF0aXZlIGZvciB0aGUgZG9tYWluIG5hbWUgc3BlY2lmaWVkIGluIHRoZSBDZXJ0aWZpY2F0ZSBSZXF1ZXN0LlxuICAgKi9cbiAgem9uZUlkOiBJbnB1dDxzdHJpbmc+O1xuICAvKipcbiAgICogU2V0IG9mIGRvbWFpbnMgdGhhdCBzaG91bGQgYmUgU0FOcyBpbiB0aGUgaXNzdWVkIGNlcnRpZmljYXRlXG4gICAqL1xuICBhbHRlcm5hdGl2ZU5hbWVzPzogSW5wdXQ8c3RyaW5nW10+O1xufVxuXG5leHBvcnQgY2xhc3MgRG5zVmFsaWRhdGVkQ2VydGlmaWNhdGUgZXh0ZW5kcyBDb21wb25lbnQge1xuICBwdWJsaWMgY2VydGlmaWNhdGVWYWxpZGF0aW9uOiBhd3MuYWNtLkNlcnRpZmljYXRlVmFsaWRhdGlvbjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogRG5zVmFsaWRhdGVkQ2VydGlmaWNhdGVBcmdzLFxuICAgIG9wdHM/OiBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmF3czpDZXJ0aWZpY2F0ZVwiLCBuYW1lLCBhcmdzLCBvcHRzKTtcblxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXM7XG4gICAgY29uc3QgeyBkb21haW5OYW1lLCBhbHRlcm5hdGl2ZU5hbWVzLCB6b25lSWQgfSA9IGFyZ3M7XG5cbiAgICBjb25zdCBjZXJ0aWZpY2F0ZSA9IG91dHB1dCh6b25lSWQpLmFwcGx5KCh6b25lSWQpID0+IHtcbiAgICAgIHJldHVybiBuZXcgYXdzLmFjbS5DZXJ0aWZpY2F0ZShcbiAgICAgICAgYCR7bmFtZX1DZXJ0aWZpY2F0ZWAsXG4gICAgICAgIHtcbiAgICAgICAgICBkb21haW5OYW1lLFxuICAgICAgICAgIHZhbGlkYXRpb25NZXRob2Q6IFwiRE5TXCIsXG4gICAgICAgICAgc3ViamVjdEFsdGVybmF0aXZlTmFtZXM6IGFsdGVybmF0aXZlTmFtZXMgPz8gW10sXG4gICAgICAgIH0sXG4gICAgICAgIHsgcGFyZW50IH0sXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgY29uc3QgcmVjb3JkcyA9IGNlcnRpZmljYXRlLmRvbWFpblZhbGlkYXRpb25PcHRpb25zLmFwcGx5KChvcHRpb25zKSA9PlxuICAgICAgb3B0aW9ucy5tYXAoKG9wdGlvbikgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IGF3cy5yb3V0ZTUzLlJlY29yZChcbiAgICAgICAgICBgJHtuYW1lfVJlY29yZCR7c2FuaXRpemVUb1Bhc2NhbENhc2Uob3B0aW9uLnJlc291cmNlUmVjb3JkTmFtZSl9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiBvcHRpb24ucmVzb3VyY2VSZWNvcmROYW1lLFxuICAgICAgICAgICAgem9uZUlkLFxuICAgICAgICAgICAgdHlwZTogb3B0aW9uLnJlc291cmNlUmVjb3JkVHlwZSxcbiAgICAgICAgICAgIHJlY29yZHM6IFtvcHRpb24ucmVzb3VyY2VSZWNvcmRWYWx1ZV0sXG4gICAgICAgICAgICB0dGw6IDYwLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICAgKTtcbiAgICAgIH0pLFxuICAgICk7XG5cbiAgICBjb25zdCBjZXJ0aWZpY2F0ZVZhbGlkYXRpb24gPSBuZXcgYXdzLmFjbS5DZXJ0aWZpY2F0ZVZhbGlkYXRpb24oXG4gICAgICBgJHtuYW1lfVZhbGlkYXRpb25gLFxuICAgICAge1xuICAgICAgICBjZXJ0aWZpY2F0ZUFybjogY2VydGlmaWNhdGUuYXJuLFxuICAgICAgICB2YWxpZGF0aW9uUmVjb3JkRnFkbnM6IHJlY29yZHMuYXBwbHkoKHJlY29yZHMpID0+XG4gICAgICAgICAgcmVjb3Jkcy5tYXAoKHJlY29yZCkgPT4gcmVjb3JkLmZxZG4pLFxuICAgICAgICApLFxuICAgICAgfSxcbiAgICAgIHsgcGFyZW50IH0sXG4gICAgKTtcblxuICAgIHRoaXMuY2VydGlmaWNhdGVWYWxpZGF0aW9uID0gY2VydGlmaWNhdGVWYWxpZGF0aW9uO1xuICB9XG5cbiAgcHVibGljIGdldCBhcm4oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2VydGlmaWNhdGVWYWxpZGF0aW9uLmNlcnRpZmljYXRlQXJuO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgSW5wdXQsIGFsbCB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuXG5leHBvcnQgbW9kdWxlIEhpbnQge1xuICBsZXQgaGludHMgPSB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBJbnB1dDxzdHJpbmc+PjtcbiAgZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIGhpbnRzID0ge307XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXIobmFtZTogSW5wdXQ8c3RyaW5nPiwgaGludDogSW5wdXQ8c3RyaW5nPikge1xuICAgIGFsbChbbmFtZV0pLmFwcGx5KChbbmFtZV0pID0+IHtcbiAgICAgIGhpbnRzW25hbWVdID0gaGludDtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBsaXN0KCkge1xuICAgIHJldHVybiBoaW50cztcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIENvbXBvbmVudFJlc291cmNlT3B0aW9ucyxcbiAgT3V0cHV0LFxuICBhbGwsXG4gIGludGVycG9sYXRlLFxuICBvdXRwdXQsXG59IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBQcmV0dGlmeSwgVHJhbnNmb3JtLCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50XCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmtcIjtcbmltcG9ydCB0eXBlIHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXRcIjtcbmltcG9ydCB7IEZ1bmN0aW9uLCBGdW5jdGlvbkFyZ3MgfSBmcm9tIFwiLi9mdW5jdGlvblwiO1xuaW1wb3J0IHtcbiAgaGFzaFN0cmluZ1RvUHJldHR5U3RyaW5nLFxuICBwcmVmaXhOYW1lLFxuICBzYW5pdGl6ZVRvUGFzY2FsQ2FzZSxcbn0gZnJvbSBcIi4uL25hbWluZ1wiO1xuaW1wb3J0IHsgVmlzaWJsZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9yXCI7XG5pbXBvcnQgeyBIb3N0ZWRab25lTG9va3VwIH0gZnJvbSBcIi4vcHJvdmlkZXJzL2hvc3RlZC16b25lLWxvb2t1cFwiO1xuaW1wb3J0IHsgRG5zVmFsaWRhdGVkQ2VydGlmaWNhdGUgfSBmcm9tIFwiLi9kbnMtdmFsaWRhdGVkLWNlcnRpZmljYXRlXCI7XG5pbXBvcnQgeyBIaW50IH0gZnJvbSBcIi4uL2hpbnRcIjtcbmltcG9ydCB7IFJFVEVOVElPTiB9IGZyb20gXCIuL2xvZ2dpbmdcIjtcblxuaW50ZXJmYWNlIERvbWFpbkFyZ3Mge1xuICAvKipcbiAgICogVGhlIGN1c3RvbSBkb21haW4geW91IHdhbnQgdG8gdXNlLiBTdXBwb3J0cyBkb21haW5zIGhvc3RlZCBvbiBbUm91dGUgNTNdKGh0dHBzOi8vYXdzLmFtYXpvbi5jb20vcm91dGU1My8pIG9yIG91dHNpZGUgQVdTLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZG9tYWluOiBcImRvbWFpbi5jb21cIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZG9tYWluTmFtZTogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIFtSb3V0ZSA1MyBob3N0ZWQgem9uZV0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL1JvdXRlNTMvbGF0ZXN0L0RldmVsb3Blckd1aWRlL2hvc3RlZC16b25lcy13b3JraW5nLXdpdGguaHRtbCkgdGhhdCBjb250YWlucyB0aGUgYGRvbWFpbk5hbWVgLiBZb3UgY2FuIGZpbmQgdGhlIGhvc3RlZCB6b25lIG5hbWUgaW4gdGhlIFJvdXRlIDUzIHBhcnQgb2YgdGhlIEFXUyBDb25zb2xlLlxuXG4gICAqXG4gICAqIFVzdWFsbHkgeW91ciBkb21haW4gbmFtZSBpcyBpbiBhIGhvc3RlZCB6b25lIHdpdGggdGhlIHNhbWUgbmFtZS4gRm9yIGV4YW1wbGUsXG4gICAqIGBkb21haW4uY29tYCBtaWdodCBiZSBpbiBhIGhvc3RlZCB6b25lIGFsc28gY2FsbGVkIGBkb21haW4uY29tYC4gU28gYnkgZGVmYXVsdCwgU1NUIHdpbGxcbiAgICogbG9vayBmb3IgYSBob3N0ZWQgem9uZSB0aGF0IG1hdGNoZXMgdGhlIGBkb21haW5OYW1lYC5cbiAgICpcbiAgICogVGhlcmUgYXJlIGNhc2VzIHdoZXJlIHRoZXNlIG1pZ2h0IG5vdCBiZSB0aGUgc2FtZS4gRm9yIGV4YW1wbGUsIGlmIHlvdSB1c2UgYSBzdWJkb21haW4sXG4gICAqIGBhcGkuZG9tYWluLmNvbWAsIHRoZSBob3N0ZWQgem9uZSBtaWdodCBiZSBgZG9tYWluLmNvbWAuIFNvIHlvdSdsbCBuZWVkIHRvIHBhc3MgaW4gdGhlXG4gICAqIGhvc3RlZCB6b25lIG5hbWUuXG4gICAqXG4gICAqIDo6Om5vdGVcbiAgICogSWYgYm90aCB0aGUgYGhvc3RlZFpvbmVgIGFuZCBgaG9zdGVkWm9uZUlkYCBhcmUgc2V0LCBgaG9zdGVkWm9uZUlkYCB3aWxsIHRha2UgcHJlY2VkZW5jZS5cbiAgICogOjo6XG4gICAqXG4gICAqIEBkZWZhdWx0IFNhbWUgYXMgdGhlIGBkb21haW5OYW1lYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqcyB7NH1cbiAgICoge1xuICAgKiAgIGRvbWFpbjoge1xuICAgKiAgICAgZG9tYWluTmFtZTogXCJhcGkuZG9tYWluLmNvbVwiLFxuICAgKiAgICAgaG9zdGVkWm9uZTogXCJkb21haW4uY29tXCJcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBob3N0ZWRab25lPzogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIFRoZSAxNCBsZXR0ZXIgSUQgb2YgdGhlIFtSb3V0ZSA1MyBob3N0ZWQgem9uZV0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL1JvdXRlNTMvbGF0ZXN0L0RldmVsb3Blckd1aWRlL2hvc3RlZC16b25lcy13b3JraW5nLXdpdGguaHRtbCkgdGhhdCBjb250YWlucyB0aGUgYGRvbWFpbk5hbWVgLiBZb3UgY2FuIGZpbmQgdGhlIGhvc3RlZCB6b25lIElEIGluIHRoZSBSb3V0ZSA1MyBwYXJ0IG9mIHRoZSBBV1MgQ29uc29sZS5cbiAgICpcbiAgICogVGhpcyBvcHRpb24gaXMgdXNlZnVsIGZvciBjYXNlcyB3aGVyZSB5b3UgaGF2ZSBtdWx0aXBsZSBob3N0ZWQgem9uZXMgdGhhdCBoYXZlIHRoZSBzYW1lXG4gICAqIGRvbWFpbi5cbiAgICpcbiAgICogOjo6bm90ZVxuICAgKiBJZiBib3RoIHRoZSBgaG9zdGVkWm9uZWAgYW5kIGBob3N0ZWRab25lSWRgIGFyZSBzZXQsIGBob3N0ZWRab25lSWRgIHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBganMgezR9XG4gICAqIHtcbiAgICogICBkb21haW46IHtcbiAgICogICAgIGRvbWFpbk5hbWU6IFwiYXBpLmRvbWFpbi5jb21cIixcbiAgICogICAgIGhvc3RlZFpvbmVJZDogXCJaMkZEVE5EQVRBUVlXMlwiXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgaG9zdGVkWm9uZUlkPzogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIFRoZSBiYXNlIG1hcHBpbmcgZm9yIHRoZSBjdXN0b20gZG9tYWluLiBUaGlzIGFkZHMgYSBzdWZmaXggdG8gdGhlIFVSTCBvZiB0aGUgQVBJLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBHaXZlbiB0aGUgZm9sbG93aW5nIGJhc2UgcGF0aCBhbmQgZG9tYWluIG5hbWUuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBkb21haW46IHtcbiAgICogICAgIGRvbWFpbk5hbWU6IFwiYXBpLmRvbWFpbi5jb21cIixcbiAgICogICAgIHBhdGg6IFwidjFcIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogVGhlIGZ1bGwgVVJMIG9mIHRoZSBBUEkgd2lsbCBiZSBgaHR0cHM6Ly9hcGkuZG9tYWluLmNvbS92MS9gLlxuICAgKlxuICAgKiA6Ojpub3RlXG4gICAqIFRoZXJlJ3MgYW4gZXh0cmEgdHJhaWxpbmcgc2xhc2ggd2hlbiBhIGJhc2UgcGF0aCBpcyBzZXQuXG4gICAqIDo6OlxuICAgKlxuICAgKiBCZSBkZWZhdWx0IHRoZXJlIGlzIG5vIGJhc2UgcGF0aCwgc28gaWYgdGhlIGBkb21haW5OYW1lYCBpcyBgYXBpLmRvbWFpbi5jb21gLCB0aGUgZnVsbCBVUkwgd2lsbCBiZSBgaHR0cHM6Ly9hcGkuZG9tYWluLmNvbWAuXG4gICAqL1xuICBwYXRoPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFwaUdhdGV3YXlWMkFyZ3Mge1xuICAvKipcbiAgICogU2V0IGEgY3VzdG9tIGRvbWFpbiBmb3IgeW91ciBIVFRQIEFQSS4gU3VwcG9ydHMgZG9tYWlucyBob3N0ZWQgZWl0aGVyIG9uXG4gICAqIFtSb3V0ZSA1M10oaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9yb3V0ZTUzLykgb3Igb3V0c2lkZSBBV1MuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIGFsc28gbWlncmF0ZSBhbiBleHRlcm5hbGx5IGhvc3RlZCBkb21haW4gdG8gQW1hem9uIFJvdXRlIDUzIGJ5XG4gICAqIFtmb2xsb3dpbmcgdGhpcyBndWlkZV0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL1JvdXRlNTMvbGF0ZXN0L0RldmVsb3Blckd1aWRlL01pZ3JhdGluZ0ROUy5odG1sKS5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBkb21haW46IFwiYXBpLmRvbWFpbi5jb21cIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTcGVjaWZ5IHRoZSBSb3V0ZSA1MyBob3N0ZWQgem9uZS5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGRvbWFpbjoge1xuICAgKiAgICAgZG9tYWluTmFtZTogXCJhcGkuZG9tYWluLmNvbVwiLFxuICAgKiAgICAgaG9zdGVkWm9uZTogXCJkb21haW4uY29tXCJcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBkb21haW4/OiBJbnB1dDxzdHJpbmcgfCBQcmV0dGlmeTxEb21haW5BcmdzPj47XG4gIC8qKlxuICAgKiBDb25maWd1cmUgdGhlIGFjY2VzcyBsb2dzIGluIENsb3VkV2F0Y2guXG4gICAqIEBkZWZhdWx0IGAmbGN1YjtyZXRlbnRpb246IFwiZm9yZXZlclwiJnJjdWI7YFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgYWNjZXNzTG9nOiB7XG4gICAqICAgICByZXRlbnRpb246IFwiMSB3ZWVrXCJcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBhY2Nlc3NMb2c/OiBJbnB1dDx7XG4gICAgLyoqXG4gICAgICogVGhlIGR1cmF0aW9uIHRoZSBmdW5jdGlvbiBsb2dzIGFyZSBrZXB0IGluIENsb3VkV2F0Y2guXG4gICAgICogQGRlZmF1bHQgYGZvcmV2ZXJgXG4gICAgICovXG4gICAgcmV0ZW50aW9uPzogSW5wdXQ8a2V5b2YgdHlwZW9mIFJFVEVOVElPTj47XG4gIH0+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0pIGhvdyB0aGlzIGNvbXBvbmVudCBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIEFQSSBHYXRld2F5IEhUVFAgQVBJIHJlc291cmNlLlxuICAgICAqL1xuICAgIGFwaT86IFRyYW5zZm9ybTxhd3MuYXBpZ2F0ZXdheXYyLkFwaUFyZ3M+O1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgQVBJIEdhdGV3YXkgSFRUUCBBUEkgc3RhZ2UgcmVzb3VyY2UuXG4gICAgICovXG4gICAgc3RhZ2U/OiBUcmFuc2Zvcm08YXdzLmFwaWdhdGV3YXl2Mi5TdGFnZUFyZ3M+O1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgQVBJIEdhdGV3YXkgSFRUUCBBUEkgZG9tYWluIG5hbWUgcmVzb3VyY2UuXG4gICAgICovXG4gICAgZG9tYWluTmFtZT86IFRyYW5zZm9ybTxhd3MuYXBpZ2F0ZXdheXYyLkRvbWFpbk5hbWVBcmdzPjtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIENsb3VkV2F0Y2ggTG9nR3JvdXAgcmVzb3VyY2UgdXNlZCBmb3IgYWNjZXNzIGxvZ3MuXG4gICAgICovXG4gICAgYWNjZXNzTG9nPzogVHJhbnNmb3JtPGF3cy5jbG91ZHdhdGNoLkxvZ0dyb3VwQXJncz47XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBpR2F0ZXdheVYyUm91dGVBcmdzIHtcbiAgLyoqXG4gICAqIEVuYWJsZSBhdXRoIGZvciB5b3VyIEhUVFAgQVBJLlxuICAgKlxuICAgKiA6Ojpub3RlXG4gICAqIEN1cnJlbnRseSBJQU0gYW5kIEpXVCBhdXRoIGFyZSBzdXBwb3J0ZWQuXG4gICAqIDo6OlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgYXV0aDoge1xuICAgKiAgICAgaWFtOiB0cnVlXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYXV0aD86IElucHV0PHtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgSUFNIGF1dGhvcml6YXRpb24gZm9yIGEgZ2l2ZW4gQVBJIHJvdXRlLiBXaGVuIElBTSBhdXRoIGlzIGVuYWJsZWQsIGNsaWVudHMgbmVlZCB0byB1c2UgU2lnbmF0dXJlIFZlcnNpb24gNCB0byBzaWduIHRoZWlyIHJlcXVlc3RzIHdpdGggdGhlaXIgQVdTIGNyZWRlbnRpYWxzLlxuICAgICAqL1xuICAgIGlhbT86IElucHV0PHRydWU+O1xuICAgIC8qKlxuICAgICAqIEVuYWJsZSBKV1Qgb3IgSlNPTiBXZWIgVG9rZW4gYXV0aG9yaXphdGlvbiBmb3IgYSBnaXZlbiBBUEkgcm91dGUuIFdoZW4gSldUIGF1dGggaXMgZW5hYmxlZCwgY2xpZW50cyBuZWVkIHRvIGluY2x1ZGUgYSB2YWxpZCBKV1QgaW4gdGhlaXIgcmVxdWVzdHMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIFlvdSBjYW4gY29uZmlndXJlIEpXVCBhdXRoLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB7XG4gICAgICogICBhdXRoOiB7XG4gICAgICogICAgIGp3dDoge1xuICAgICAqICAgICAgIGlzc3VlcjogXCJodHRwczovL2lzc3Vlci5jb20vXCIsXG4gICAgICogICAgICAgYXVkaWVuY2VzOiBbXCJodHRwczovL2FwaS5leGFtcGxlLmNvbVwiXSxcbiAgICAgKiAgICAgICBzY29wZXM6IFtcInJlYWQ6cHJvZmlsZVwiLCBcIndyaXRlOnByb2ZpbGVcIl0sXG4gICAgICogICAgICAgaWRlbnRpdHlTb3VyY2U6IFwiJHJlcXVlc3QuaGVhZGVyLkFjY2Vzc1Rva2VuXCJcbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFlvdSBjYW4gYWxzbyB1c2UgQ29nbml0byBhcyB0aGUgaWRlbnRpdHkgcHJvdmlkZXIuXG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIHtcbiAgICAgKiAgIGF1dGg6IHtcbiAgICAgKiAgICAgand0OiB7XG4gICAgICogICAgICAgYXVkaWVuY2VzOiBbdXNlclBvb2xDbGllbnQuaWRdLFxuICAgICAqICAgICAgIGlzc3VlcjogJGludGVycG9sYXRlYGh0dHBzOi8vY29nbml0by1pZHAuJHthd3MuZ2V0QXJuT3V0cHV0KHVzZXJQb29sKS5yZWdpb259LmFtYXpvbmF3cy5jb20vJHt1c2VyUG9vbC5pZH1gLFxuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogV2hlcmUgYHVzZXJQb29sYCBhbmQgYHVzZXJQb29sQ2xpZW50YCBhcmU6XG4gICAgICpcbiAgICAgKiBgYGBqc1xuICAgICAqIGNvbnN0IHVzZXJQb29sID0gbmV3IGF3cy5jb2duaXRvLlVzZXJQb29sKCk7XG4gICAgICogY29uc3QgdXNlclBvb2xDbGllbnQgPSBuZXcgYXdzLmNvZ25pdG8uVXNlclBvb2xDbGllbnQoKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBqd3Q/OiBJbnB1dDx7XG4gICAgICAvKipcbiAgICAgICAqIEJhc2UgZG9tYWluIG9mIHRoZSBpZGVudGl0eSBwcm92aWRlciB0aGF0IGlzc3VlcyBKU09OIFdlYiBUb2tlbnMuXG4gICAgICAgKi9cbiAgICAgIGlzc3VlcjogSW5wdXQ8c3RyaW5nPjtcbiAgICAgIC8qKlxuICAgICAgICogTGlzdCBvZiB0aGUgaW50ZW5kZWQgcmVjaXBpZW50cyBvZiB0aGUgSldULiBBIHZhbGlkIEpXVCBtdXN0IHByb3ZpZGUgYW4gYGF1ZGAgdGhhdCBtYXRjaGVzIGF0IGxlYXN0IG9uZSBlbnRyeSBpbiB0aGlzIGxpc3QuXG4gICAgICAgKi9cbiAgICAgIGF1ZGllbmNlczogSW5wdXQ8SW5wdXQ8c3RyaW5nPltdPjtcbiAgICAgIC8qKlxuICAgICAgICogRGVmaW5lcyB0aGUgcGVybWlzc2lvbnMgb3IgYWNjZXNzIGxldmVscyB0aGF0IHRoZSBKV1QgZ3JhbnRzLiBJZiB0aGUgSldUIGRvZXMgbm90IGhhdmUgdGhlIHJlcXVpcmVkIHNjb3BlLCB0aGUgcmVxdWVzdCBpcyByZWplY3RlZC4gQnkgZGVmYXVsdCBpdCBkb2VzIG5vdCByZXF1aXJlIGFueSBzY29wZXMuXG4gICAgICAgKi9cbiAgICAgIHNjb3Blcz86IElucHV0PElucHV0PHN0cmluZz5bXT47XG4gICAgICAvKipcbiAgICAgICAqIFNwZWNpZmllcyB3aGVyZSB0byBleHRyYWN0IHRoZSBKV1QgZnJvbSB0aGUgcmVxdWVzdC5cbiAgICAgICAqIEBkZWZhdWx0IGBcIiRyZXF1ZXN0LmhlYWRlci5BdXRob3JpemF0aW9uXCJgXG4gICAgICAgKi9cbiAgICAgIGlkZW50aXR5U291cmNlPzogSW5wdXQ8c3RyaW5nPjtcbiAgICB9PjtcbiAgfT47XG4gIC8qKlxuICAgKiBbVHJhbnNmb3JtXSgvZG9jcy9jb21wb25lbnRzI3RyYW5zZm9ybSkgaG93IHRoaXMgY29tcG9uZW50IGNyZWF0ZXMgaXRzIHVuZGVybHlpbmdcbiAgICogcmVzb3VyY2VzLlxuICAgKi9cbiAgdHJhbnNmb3JtPzoge1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgQVBJIEdhdGV3YXkgSFRUUCBBUEkgaW50ZWdyYXRpb24gcmVzb3VyY2UuXG4gICAgICovXG4gICAgaW50ZWdyYXRpb24/OiBUcmFuc2Zvcm08YXdzLmFwaWdhdGV3YXl2Mi5JbnRlZ3JhdGlvbkFyZ3M+O1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgQVBJIEdhdGV3YXkgSFRUUCBBUEkgcm91dGUgcmVzb3VyY2UuXG4gICAgICovXG4gICAgcm91dGU/OiBUcmFuc2Zvcm08YXdzLmFwaWdhdGV3YXl2Mi5Sb3V0ZUFyZ3M+O1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgQVBJIEdhdGV3YXkgYXV0aG9yaXplciByZXNvdXJjZS5cbiAgICAgKi9cbiAgICBhdXRob3JpemVyPzogVHJhbnNmb3JtPGF3cy5hcGlnYXRld2F5djIuQXV0aG9yaXplckFyZ3M+O1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBgQXBpR2F0ZXdheVYyYCBjb21wb25lbnQgbGV0cyB5b3UgYWRkIGFuIFtBbWF6b24gQVBJIEdhdGV3YXkgSFRUUCBBUEldKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9hcGlnYXRld2F5L2xhdGVzdC9kZXZlbG9wZXJndWlkZS9odHRwLWFwaS5odG1sKSB0byB5b3VyIGFwcC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICMjIyMgQ3JlYXRlIHRoZSBBUElcbiAqXG4gKiBgYGB0c1xuICogY29uc3QgYXBpID0gbmV3IHNzdC5hd3MuQXBpR2F0ZXdheVYyKFwiTXlBcGlcIik7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEFkZCBhIGN1c3RvbSBkb21haW5cbiAqXG4gKiBgYGBqcyB7Mn1cbiAqIG5ldyBzc3QuYXdzLkFwaUdhdGV3YXlWMihcIk15QXBpXCIsIHtcbiAqICAgZG9tYWluOiBcImFwaS5kb21haW4uY29tXCJcbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBBZGQgcm91dGVzXG4gKlxuICogYGBgdHNcbiAqIGFwaVxuICogIC5yb3V0ZShcIkdFVCAvXCIsIFwic3JjL2dldC5oYW5kbGVyXCIpXG4gKiAgLnJvdXRlKFwiUE9TVCAvXCIsIFwic3JjL3Bvc3QuaGFuZGxlclwiKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQXBpR2F0ZXdheVYyIGV4dGVuZHMgQ29tcG9uZW50IGltcGxlbWVudHMgTGluay5MaW5rYWJsZSB7XG4gIHByaXZhdGUgY29uc3RydWN0b3JOYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgYXBpOiBhd3MuYXBpZ2F0ZXdheXYyLkFwaTtcbiAgcHJpdmF0ZSBhcGlnRG9tYWluPzogYXdzLmFwaWdhdGV3YXl2Mi5Eb21haW5OYW1lO1xuICBwcml2YXRlIGFwaU1hcHBpbmc/OiBPdXRwdXQ8YXdzLmFwaWdhdGV3YXl2Mi5BcGlNYXBwaW5nPjtcbiAgcHJpdmF0ZSBhdXRob3JpemVyczogUmVjb3JkPHN0cmluZywgYXdzLmFwaWdhdGV3YXl2Mi5BdXRob3JpemVyPiA9IHt9O1xuICBwcml2YXRlIGxvZ0dyb3VwOiBhd3MuY2xvdWR3YXRjaC5Mb2dHcm91cDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogQXBpR2F0ZXdheVYyQXJncyA9IHt9LFxuICAgIG9wdHM6IENvbXBvbmVudFJlc291cmNlT3B0aW9ucyA9IHt9LFxuICApIHtcbiAgICBzdXBlcihcInNzdDphd3M6QXBpR2F0ZXdheVYyXCIsIG5hbWUsIGFyZ3MsIG9wdHMpO1xuXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcztcblxuICAgIGNvbnN0IGFjY2Vzc0xvZyA9IG5vcm1hbGl6ZUFjY2Vzc0xvZygpO1xuICAgIGNvbnN0IGRvbWFpbiA9IG5vcm1hbGl6ZURvbWFpbigpO1xuXG4gICAgY29uc3QgYXBpID0gY3JlYXRlQXBpKCk7XG4gICAgY29uc3QgbG9nR3JvdXAgPSBjcmVhdGVMb2dHcm91cCgpO1xuICAgIGNyZWF0ZVN0YWdlKCk7XG5cbiAgICBjb25zdCB6b25lSWQgPSBsb29rdXBIb3N0ZWRab25lSWQoKTtcbiAgICBjb25zdCBjZXJ0aWZpY2F0ZSA9IGNyZWF0ZVNzbCgpO1xuICAgIGNvbnN0IGFwaWdEb21haW4gPSBjcmVhdGVEb21haW5OYW1lKCk7XG4gICAgY3JlYXRlUm91dGU1M1JlY29yZHMoKTtcbiAgICBjb25zdCBhcGlNYXBwaW5nID0gY3JlYXRlRG9tYWluTWFwcGluZygpO1xuXG4gICAgdGhpcy5jb25zdHJ1Y3Rvck5hbWUgPSBuYW1lO1xuICAgIHRoaXMuYXBpID0gYXBpO1xuICAgIHRoaXMuYXBpZ0RvbWFpbiA9IGFwaWdEb21haW47XG4gICAgdGhpcy5hcGlNYXBwaW5nID0gYXBpTWFwcGluZztcbiAgICB0aGlzLmxvZ0dyb3VwID0gbG9nR3JvdXA7XG5cbiAgICBIaW50LnJlZ2lzdGVyKHRoaXMudXJuLCB0aGlzLnVybCk7XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVBY2Nlc3NMb2coKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3MuYWNjZXNzTG9nKS5hcHBseSgoYWNjZXNzTG9nKSA9PiAoe1xuICAgICAgICAuLi5hY2Nlc3NMb2csXG4gICAgICAgIHJldGVudGlvbjogYWNjZXNzTG9nPy5yZXRlbnRpb24gPz8gXCJmb3JldmVyXCIsXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplRG9tYWluKCkge1xuICAgICAgaWYgKCFhcmdzLmRvbWFpbikgcmV0dXJuO1xuXG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3MuZG9tYWluKS5hcHBseSgoZG9tYWluKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgZG9tYWluID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgcmV0dXJuIHsgZG9tYWluTmFtZTogZG9tYWluIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWRvbWFpbi5kb21haW5OYW1lKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIFwiZG9tYWluTmFtZVwiIGZvciBkb21haW4uYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvbWFpbi5ob3N0ZWRab25lICYmIGRvbWFpbi5ob3N0ZWRab25lSWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERvIG5vdCBzZXQgYm90aCBcImhvc3RlZFpvbmVcIiBhbmQgXCJob3N0ZWRab25lSWRcIi5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9tYWluO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQXBpKCkge1xuICAgICAgcmV0dXJuIG5ldyBhd3MuYXBpZ2F0ZXdheXYyLkFwaShcbiAgICAgICAgYCR7bmFtZX1BcGlgLFxuICAgICAgICB0cmFuc2Zvcm0oYXJncy50cmFuc2Zvcm0/LmFwaSwge1xuICAgICAgICAgIHByb3RvY29sVHlwZTogXCJIVFRQXCIsXG4gICAgICAgICAgY29yc0NvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICAgIGFsbG93Q3JlZGVudGlhbHM6IGZhbHNlLFxuICAgICAgICAgICAgYWxsb3dIZWFkZXJzOiBbXCIqXCJdLFxuICAgICAgICAgICAgYWxsb3dNZXRob2RzOiBbXCIqXCJdLFxuICAgICAgICAgICAgYWxsb3dPcmlnaW5zOiBbXCIqXCJdLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVMb2dHcm91cCgpIHtcbiAgICAgIHJldHVybiBuZXcgYXdzLmNsb3Vkd2F0Y2guTG9nR3JvdXAoXG4gICAgICAgIGAke25hbWV9QWNjZXNzTG9nYCxcbiAgICAgICAgdHJhbnNmb3JtKGFyZ3MudHJhbnNmb3JtPy5hY2Nlc3NMb2csIHtcbiAgICAgICAgICBuYW1lOiBgL2F3cy92ZW5kZWRsb2dzL2FwaXMvJHtwcmVmaXhOYW1lKDY0LCBuYW1lKX1gLFxuICAgICAgICAgIHJldGVudGlvbkluRGF5czogYWNjZXNzTG9nLmFwcGx5KFxuICAgICAgICAgICAgKGFjY2Vzc0xvZykgPT4gUkVURU5USU9OW2FjY2Vzc0xvZy5yZXRlbnRpb25dLFxuICAgICAgICAgICksXG4gICAgICAgIH0pLFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTdGFnZSgpIHtcbiAgICAgIG5ldyBhd3MuYXBpZ2F0ZXdheXYyLlN0YWdlKFxuICAgICAgICBgJHtuYW1lfVN0YWdlYCxcbiAgICAgICAgdHJhbnNmb3JtKGFyZ3MudHJhbnNmb3JtPy5zdGFnZSwge1xuICAgICAgICAgIGFwaUlkOiBhcGkuaWQsXG4gICAgICAgICAgYXV0b0RlcGxveTogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiBcIiRkZWZhdWx0XCIsXG4gICAgICAgICAgYWNjZXNzTG9nU2V0dGluZ3M6IHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uQXJuOiBsb2dHcm91cC5hcm4sXG4gICAgICAgICAgICBmb3JtYXQ6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgLy8gcmVxdWVzdCBpbmZvXG4gICAgICAgICAgICAgIHJlcXVlc3RUaW1lOiBgXCIkY29udGV4dC5yZXF1ZXN0VGltZVwiYCxcbiAgICAgICAgICAgICAgcmVxdWVzdElkOiBgXCIkY29udGV4dC5yZXF1ZXN0SWRcImAsXG4gICAgICAgICAgICAgIGh0dHBNZXRob2Q6IGBcIiRjb250ZXh0Lmh0dHBNZXRob2RcImAsXG4gICAgICAgICAgICAgIHBhdGg6IGBcIiRjb250ZXh0LnBhdGhcImAsXG4gICAgICAgICAgICAgIHJvdXRlS2V5OiBgXCIkY29udGV4dC5yb3V0ZUtleVwiYCxcbiAgICAgICAgICAgICAgc3RhdHVzOiBgJGNvbnRleHQuc3RhdHVzYCwgLy8gaW50ZWdlciB2YWx1ZSwgZG8gbm90IHdyYXAgaW4gcXVvdGVzXG4gICAgICAgICAgICAgIHJlc3BvbnNlTGF0ZW5jeTogYCRjb250ZXh0LnJlc3BvbnNlTGF0ZW5jeWAsIC8vIGludGVnZXIgdmFsdWUsIGRvIG5vdCB3cmFwIGluIHF1b3Rlc1xuICAgICAgICAgICAgICAvLyBpbnRlZ3JhdGlvbiBpbmZvXG4gICAgICAgICAgICAgIGludGVncmF0aW9uUmVxdWVzdElkOiBgXCIkY29udGV4dC5pbnRlZ3JhdGlvbi5yZXF1ZXN0SWRcImAsXG4gICAgICAgICAgICAgIGludGVncmF0aW9uU3RhdHVzOiBgXCIkY29udGV4dC5pbnRlZ3JhdGlvbi5zdGF0dXNcImAsXG4gICAgICAgICAgICAgIGludGVncmF0aW9uTGF0ZW5jeTogYFwiJGNvbnRleHQuaW50ZWdyYXRpb24ubGF0ZW5jeVwiYCxcbiAgICAgICAgICAgICAgaW50ZWdyYXRpb25TZXJ2aWNlU3RhdHVzOiBgXCIkY29udGV4dC5pbnRlZ3JhdGlvbi5pbnRlZ3JhdGlvblN0YXR1c1wiYCxcbiAgICAgICAgICAgICAgLy8gY2FsbGVyIGluZm9cbiAgICAgICAgICAgICAgaXA6IGBcIiRjb250ZXh0LmlkZW50aXR5LnNvdXJjZUlwXCJgLFxuICAgICAgICAgICAgICB1c2VyQWdlbnQ6IGBcIiRjb250ZXh0LmlkZW50aXR5LnVzZXJBZ2VudFwiYCxcbiAgICAgICAgICAgICAgLy9jb2duaXRvSWRlbnRpdHlJZDpgXCIkY29udGV4dC5pZGVudGl0eS5jb2duaXRvSWRlbnRpdHlJZFwiYCwgLy8gbm90IHN1cHBvcnRlZCBpbiB1cy13ZXN0LTIgcmVnaW9uXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9va3VwSG9zdGVkWm9uZUlkKCkge1xuICAgICAgaWYgKCFkb21haW4pIHJldHVybjtcblxuICAgICAgcmV0dXJuIGRvbWFpbi5hcHBseSgoZG9tYWluKSA9PiB7XG4gICAgICAgIGlmIChkb21haW4uaG9zdGVkWm9uZUlkKSByZXR1cm4gb3V0cHV0KGRvbWFpbi5ob3N0ZWRab25lSWQpO1xuXG4gICAgICAgIHJldHVybiBuZXcgSG9zdGVkWm9uZUxvb2t1cChcbiAgICAgICAgICBgJHtuYW1lfUhvc3RlZFpvbmVMb29rdXBgLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRvbWFpbjogZG9tYWluLmhvc3RlZFpvbmUgPz8gZG9tYWluLmRvbWFpbk5hbWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgICApLnpvbmVJZDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNzbCgpIHtcbiAgICAgIGlmICghZG9tYWluIHx8ICF6b25lSWQpIHJldHVybjtcblxuICAgICAgcmV0dXJuIG5ldyBEbnNWYWxpZGF0ZWRDZXJ0aWZpY2F0ZShcbiAgICAgICAgYCR7bmFtZX1Tc2xgLFxuICAgICAgICB7XG4gICAgICAgICAgZG9tYWluTmFtZTogZG9tYWluLmRvbWFpbk5hbWUsXG4gICAgICAgICAgem9uZUlkLFxuICAgICAgICB9LFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEb21haW5OYW1lKCkge1xuICAgICAgaWYgKCFkb21haW4gfHwgIWNlcnRpZmljYXRlKSByZXR1cm47XG5cbiAgICAgIHJldHVybiBuZXcgYXdzLmFwaWdhdGV3YXl2Mi5Eb21haW5OYW1lKFxuICAgICAgICBgJHtuYW1lfURvbWFpbk5hbWVgLFxuICAgICAgICB0cmFuc2Zvcm0oYXJncy50cmFuc2Zvcm0/LmRvbWFpbk5hbWUsIHtcbiAgICAgICAgICBkb21haW5OYW1lOiBkb21haW4/LmRvbWFpbk5hbWUsXG4gICAgICAgICAgZG9tYWluTmFtZUNvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICAgIGNlcnRpZmljYXRlQXJuOiBjZXJ0aWZpY2F0ZS5hcm4sXG4gICAgICAgICAgICBlbmRwb2ludFR5cGU6IFwiUkVHSU9OQUxcIixcbiAgICAgICAgICAgIHNlY3VyaXR5UG9saWN5OiBcIlRMU18xXzJcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUm91dGU1M1JlY29yZHMoKTogdm9pZCB7XG4gICAgICBpZiAoIWRvbWFpbiB8fCAhem9uZUlkIHx8ICFhcGlnRG9tYWluKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZG9tYWluLmRvbWFpbk5hbWUuYXBwbHkoKGRvbWFpbk5hbWUpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCB0eXBlIG9mIFtcIkFcIiwgXCJBQUFBXCJdKSB7XG4gICAgICAgICAgbmV3IGF3cy5yb3V0ZTUzLlJlY29yZChcbiAgICAgICAgICAgIGAke25hbWV9JHt0eXBlfVJlY29yZCR7c2FuaXRpemVUb1Bhc2NhbENhc2UoZG9tYWluTmFtZSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZTogZG9tYWluLmRvbWFpbk5hbWUsXG4gICAgICAgICAgICAgIHpvbmVJZCxcbiAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgYWxpYXNlczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGFwaWdEb21haW4uZG9tYWluTmFtZUNvbmZpZ3VyYXRpb24udGFyZ2V0RG9tYWluTmFtZSxcbiAgICAgICAgICAgICAgICAgIHpvbmVJZDogYXBpZ0RvbWFpbi5kb21haW5OYW1lQ29uZmlndXJhdGlvbi5ob3N0ZWRab25lSWQsXG4gICAgICAgICAgICAgICAgICBldmFsdWF0ZVRhcmdldEhlYWx0aDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgcGFyZW50IH0sXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRG9tYWluTWFwcGluZygpIHtcbiAgICAgIGlmICghZG9tYWluIHx8ICFhcGlnRG9tYWluKSByZXR1cm47XG5cbiAgICAgIHJldHVybiBkb21haW4ucGF0aD8uYXBwbHkoXG4gICAgICAgIChwYXRoKSA9PlxuICAgICAgICAgIG5ldyBhd3MuYXBpZ2F0ZXdheXYyLkFwaU1hcHBpbmcoXG4gICAgICAgICAgICBgJHtuYW1lfURvbWFpbk1hcHBpbmdgLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBhcGlJZDogYXBpLmlkLFxuICAgICAgICAgICAgICBkb21haW5OYW1lOiBhcGlnRG9tYWluLmlkLFxuICAgICAgICAgICAgICBzdGFnZTogXCIkZGVmYXVsdFwiLFxuICAgICAgICAgICAgICBhcGlNYXBwaW5nS2V5OiBwYXRoLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgcGFyZW50IH0sXG4gICAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBVUkwgb2YgdGhlIEFQSS5cbiAgICpcbiAgICogSWYgdGhlIGBkb21haW5gIGlzIHNldCwgdGhpcyBpcyB0aGUgVVJMIHdpdGggdGhlIGN1c3RvbSBkb21haW4uXG4gICAqIE90aGVyd2lzZSwgaXQncyB0aGUgYXV0b2dlbmVyYXRlZCBBUEkgR2F0ZXdheSBVUkwuXG4gICAqL1xuICBwdWJsaWMgZ2V0IHVybCgpIHtcbiAgICAvLyBOb3RlOiBJZiBtYXBwaW5nIGtleSBpcyBzZXQsIHRoZSBVUkwgbmVlZHMgYSB0cmFpbGluZyBzbGFzaC4gV2l0aG91dCB0aGVcbiAgICAvLyAgICAgICB0cmFpbGluZyBzbGFzaCwgdGhlIEFQSSBmYWlscyB3aXRoIHRoZSBlcnJvciB7XCJtZXNzYWdlXCI6XCJOb3QgRm91bmRcIn1cbiAgICByZXR1cm4gdGhpcy5hcGlnRG9tYWluICYmIHRoaXMuYXBpTWFwcGluZ1xuICAgICAgPyBhbGwoW3RoaXMuYXBpZ0RvbWFpbi5kb21haW5OYW1lLCB0aGlzLmFwaU1hcHBpbmcuYXBpTWFwcGluZ0tleV0pLmFwcGx5KFxuICAgICAgICAgIChbZG9tYWluLCBrZXldKSA9PlxuICAgICAgICAgICAga2V5ID8gYGh0dHBzOi8vJHtkb21haW59LyR7a2V5fS9gIDogYGh0dHBzOi8vJHtkb21haW59YCxcbiAgICAgICAgKVxuICAgICAgOiB0aGlzLmFwaS5hcGlFbmRwb2ludDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdW5kZXJseWluZyBbcmVzb3VyY2VzXSgvZG9jcy9jb21wb25lbnRzLyNub2RlcykgdGhpcyBjb21wb25lbnQgY3JlYXRlcy5cbiAgICovXG4gIHB1YmxpYyBnZXQgbm9kZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFtYXpvbiBBUEkgR2F0ZXdheSBIVFRQIEFQSVxuICAgICAgICovXG4gICAgICBhcGk6IHRoaXMuYXBpLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcm91dGUgdG8gdGhlIEFQSSBHYXRld2F5IEhUVFAgQVBJLiBUaGUgcm91dGUgaXMgYSBjb21iaW5hdGlvbiBvZlxuICAgKiAtIEFuIEhUVFAgbWV0aG9kIGFuZCBhIHBhdGgsIGB7TUVUSE9EfSAve3BhdGh9YC5cbiAgICogLSBPciBhIGAkZGVmYXVsdGAgcm91dGUuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBUaGUgYCRkZWZhdWx0YCByb3V0ZSBpcyBhIGRlZmF1bHQgb3IgY2F0Y2gtYWxsIHJvdXRlLiBJdCdsbCBtYXRjaCBpZiBubyBvdGhlciByb3V0ZSBtYXRjaGVzLlxuICAgKiA6OjpcbiAgICpcbiAgICogQSBtZXRob2QgY291bGQgYmUgb25lIG9mIGBHRVRgLCBgUE9TVGAsIGBQVVRgLCBgREVMRVRFYCwgYFBBVENIYCwgYEhFQURgLCBgT1BUSU9OU2AsIG9yIGBBTllgLiBIZXJlIGBBTllgIG1hdGNoZXMgYW55IEhUVFAgbWV0aG9kLlxuICAgKlxuICAgKiBUaGUgcGF0aCBjYW4gYmUgYSBjb21iaW5hdGlvbiBvZlxuICAgKiAtIExpdGVyYWwgc2VnbWVudHMsIGAvbm90ZXNgLCBgL25vdGVzL25ld2AsIGV0Yy5cbiAgICogLSBQYXJhbWV0ZXIgc2VnbWVudHMsIGAvbm90ZXMve25vdGVJZH1gLCBgL25vdGVzL3tub3RlSWR9L2F0dGFjaG1lbnRzL3thdHRhY2htZW50SWR9YCwgZXRjLlxuICAgKiAtIEdyZWVkeSBzZWdtZW50cywgYC97cHJveHkrfWAsIGAvbm90ZXMve3Byb3h5K31gLCAgZXRjLiBUaGUgYHtwcm94eSt9YCBzZWdtZW50IGlzIGEgZ3JlZWR5IHNlZ21lbnQgdGhhdCBtYXRjaGVzIGFsbCBjaGlsZCBwYXRocy4gSXQgbmVlZHMgdG8gYmUgYXQgdGhlIGVuZCBvZiB0aGUgcGF0aC5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIFRoZSBge3Byb3h5K31gIGlzIGEgZ3JlZWR5IHNlZ21lbnQsIGl0IG1hdGNoZXMgYWxsIGl0cyBjaGlsZCBwYXRocy5cbiAgICogOjo6XG4gICAqXG4gICAqIFRoZSBgJGRlZmF1bHRgIGlzIGEgcmVzZXJ2ZWQga2V5d29yZCBmb3IgdGhlIGRlZmF1bHQgcm91dGUuIEl0J2xsIGJlIG1hdGNoZWQgaWYgbm8gb3RoZXIgcm91dGUgbWF0Y2hlcy5cbiAgICpcbiAgICogOjo6bm90ZVxuICAgKiBZb3UgY2Fubm90IGhhdmUgZHVwbGljYXRlIHJvdXRlcy5cbiAgICogOjo6XG4gICAqXG4gICAqIFdoZW4gYSByZXF1ZXN0IGNvbWVzIGluLCB0aGUgQVBJIEdhdGV3YXkgd2lsbCBsb29rIGZvciB0aGUgbW9zdCBzcGVjaWZpYyBtYXRjaC4gSWYgbm8gcm91dGUgbWF0Y2hlcywgdGhlIGAkZGVmYXVsdGAgcm91dGUgd2lsbCBiZSBpbnZva2VkLlxuICAgKlxuICAgKiBAcGFyYW0gcm91dGUgVGhlIHBhdGggZm9yIHRoZSByb3V0ZS5cbiAgICogQHBhcmFtIGhhbmRsZXIgVGhlIGZ1bmN0aW9uIHRoYXQnbGwgYmUgaW52b2tlZC5cbiAgICogQHBhcmFtIGFyZ3MgQ29uZmlndXJlIHRoZSByb3V0ZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogSGVyZSdzIGhvdyB5b3UgYWRkIGEgc2ltcGxlIHJvdXRlLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBhcGkucm91dGUoXCJHRVQgL1wiLCBcInNyYy9nZXQuaGFuZGxlclwiKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEFkZCBtdWx0aXBsZSByb3V0ZXMuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGFwaVxuICAgKiAgIC5yb3V0ZShcIkdFVCAvXCIsIFwic3JjL2dldC5oYW5kbGVyXCIpXG4gICAqICAgLnJvdXRlKFwiUE9TVCAvXCIsIFwic3JjL3Bvc3QuaGFuZGxlclwiKTtcbiAgICogYGBgXG4gICAqXG4gICAqIE1hdGNoIGFueSBIVFRQIG1ldGhvZC5cbiAgICpcbiAgICogYGBganNcbiAgICogYXBpLnJvdXRlKFwiQU5ZIC9cIiwgXCJzcmMvcm91dGUuaGFuZGxlclwiKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEFkZCBhIGRlZmF1bHQgcm91dGUuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGFwaVxuICAgKiAgIC5yb3V0ZShcIkdFVCAvXCIsIFwic3JjL2dldC5oYW5kbGVyXCIpXG4gICAqICAgLnJvdXRlKCRkZWZhdWx0LCBcInNyYy9kZWZhdWx0LmhhbmRsZXJcIik7XG4gICAqIGBgYFxuICAgKlxuICAgKiBBZGQgYSBwYXJhbWV0ZXJpemVkIHJvdXRlLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiBhcGkucm91dGUoXCJHRVQgL25vdGVzL3tpZH1cIiwgXCJzcmMvZ2V0LmhhbmRsZXJcIik7XG4gICAqIGBgYFxuICAgKlxuICAgKiBBZGQgYSBncmVlZHkgcm91dGUuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGFwaS5yb3V0ZShcIkdFVCAvbm90ZXMve3Byb3h5K31cIiwgXCJzcmMvZ3JlZWR5LmhhbmRsZXJcIik7XG4gICAqIGBgYFxuICAgKlxuICAgKiBFbmFibGUgYXV0aCBmb3IgYSByb3V0ZS5cbiAgICpcbiAgICogYGBganNcbiAgICogYXBpXG4gICAqICAgLnJvdXRlKFwiR0VUIC9cIiwgXCJzcmMvZ2V0LmhhbmRsZXJcIilcbiAgICogICAucm91dGUoXCJQT1NUIC9cIiwgXCJzcmMvcG9zdC5oYW5kbGVyXCIsIHtcbiAgICogICAgIGF1dGg6IHtcbiAgICogICAgICAgaWFtOiB0cnVlXG4gICAqICAgICB9XG4gICAqICAgfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBDdXN0b21pemUgdGhlIHJvdXRlIGhhbmRsZXIuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGFwaS5yb3V0ZShcIkdFVCAvXCIsIHtcbiAgICogICBoYW5kbGVyOiBcInNyYy9nZXQuaGFuZGxlclwiLFxuICAgKiAgIG1lbW9yeTogXCIyMDQ4IE1CXCJcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHJvdXRlKFxuICAgIHJvdXRlOiBzdHJpbmcsXG4gICAgaGFuZGxlcjogc3RyaW5nIHwgRnVuY3Rpb25BcmdzLFxuICAgIGFyZ3M6IEFwaUdhdGV3YXlWMlJvdXRlQXJncyA9IHt9LFxuICApIHtcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xuICAgIGNvbnN0IHBhcmVudE5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yTmFtZTtcbiAgICBjb25zdCByb3V0ZUtleSA9IHBhcnNlUm91dGUoKTtcblxuICAgIC8vIEJ1aWxkIHJvdXRlIG5hbWVcbiAgICBjb25zdCBpZCA9IHNhbml0aXplVG9QYXNjYWxDYXNlKGhhc2hTdHJpbmdUb1ByZXR0eVN0cmluZyhyb3V0ZUtleSwgNCkpO1xuXG4gICAgY29uc3QgZm4gPSBGdW5jdGlvbi5mcm9tRGVmaW5pdGlvbihcbiAgICAgIHBhcmVudCxcbiAgICAgIGAke3BhcmVudE5hbWV9SGFuZGxlciR7aWR9YCxcbiAgICAgIGhhbmRsZXIsXG4gICAgICB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBgJHtwYXJlbnROYW1lfSByb3V0ZSAke3JvdXRlS2V5fWAsXG4gICAgICB9LFxuICAgICk7XG4gICAgY29uc3QgcGVybWlzc2lvbiA9IG5ldyBhd3MubGFtYmRhLlBlcm1pc3Npb24oXG4gICAgICBgJHtwYXJlbnROYW1lfUhhbmRsZXIke2lkfVBlcm1pc3Npb25zYCxcbiAgICAgIHtcbiAgICAgICAgYWN0aW9uOiBcImxhbWJkYTpJbnZva2VGdW5jdGlvblwiLFxuICAgICAgICBmdW5jdGlvbjogZm4uYXJuLFxuICAgICAgICBwcmluY2lwYWw6IFwiYXBpZ2F0ZXdheS5hbWF6b25hd3MuY29tXCIsXG4gICAgICAgIHNvdXJjZUFybjogaW50ZXJwb2xhdGVgJHt0aGlzLm5vZGVzLmFwaS5leGVjdXRpb25Bcm59LypgLFxuICAgICAgfSxcbiAgICAgIHsgcGFyZW50IH0sXG4gICAgKTtcbiAgICBjb25zdCBpbnRlZ3JhdGlvbiA9IG5ldyBhd3MuYXBpZ2F0ZXdheXYyLkludGVncmF0aW9uKFxuICAgICAgYCR7cGFyZW50TmFtZX1JbnRlZ3JhdGlvbiR7aWR9YCxcbiAgICAgIHRyYW5zZm9ybShhcmdzLnRyYW5zZm9ybT8uaW50ZWdyYXRpb24sIHtcbiAgICAgICAgYXBpSWQ6IHRoaXMuYXBpLmlkLFxuICAgICAgICBpbnRlZ3JhdGlvblR5cGU6IFwiQVdTX1BST1hZXCIsXG4gICAgICAgIGludGVncmF0aW9uVXJpOiBmbi5hcm4sXG4gICAgICAgIHBheWxvYWRGb3JtYXRWZXJzaW9uOiBcIjIuMFwiLFxuICAgICAgfSksXG4gICAgICB7IHBhcmVudCwgZGVwZW5kc09uOiBbcGVybWlzc2lvbl0gfSxcbiAgICApO1xuICAgIGNvbnN0IGF1dGhBcmdzID0gY3JlYXRlQXV0aG9yaXplcigpO1xuXG4gICAgYXV0aEFyZ3MuYXBwbHkoXG4gICAgICAoYXV0aEFyZ3MpID0+XG4gICAgICAgIG5ldyBhd3MuYXBpZ2F0ZXdheXYyLlJvdXRlKFxuICAgICAgICAgIGAke3BhcmVudE5hbWV9Um91dGUke2lkfWAsXG4gICAgICAgICAgdHJhbnNmb3JtKGFyZ3MudHJhbnNmb3JtPy5yb3V0ZSwge1xuICAgICAgICAgICAgYXBpSWQ6IHRoaXMuYXBpLmlkLFxuICAgICAgICAgICAgcm91dGVLZXksXG4gICAgICAgICAgICB0YXJnZXQ6IGludGVycG9sYXRlYGludGVncmF0aW9ucy8ke2ludGVncmF0aW9uLmlkfWAsXG4gICAgICAgICAgICAuLi5hdXRoQXJncyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgICApLFxuICAgICk7XG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgICBmdW5jdGlvbiBwYXJzZVJvdXRlKCkge1xuICAgICAgaWYgKHJvdXRlLnRvTG93ZXJDYXNlKCkgPT09IFwiJGRlZmF1bHRcIikgcmV0dXJuIFwiJGRlZmF1bHRcIjtcblxuICAgICAgY29uc3QgcGFydHMgPSByb3V0ZS5zcGxpdChcIiBcIik7XG4gICAgICBpZiAocGFydHMubGVuZ3RoICE9PSAyKSB7XG4gICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoXG4gICAgICAgICAgYEludmFsaWQgcm91dGUgJHtyb3V0ZX0uIEEgcm91dGUgbXVzdCBiZSBpbiB0aGUgZm9ybWF0IFwiTUVUSE9EIC9wYXRoXCIuYCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IFttZXRob2RSYXcsIHBhdGhdID0gcm91dGUuc3BsaXQoXCIgXCIpO1xuICAgICAgY29uc3QgbWV0aG9kID0gbWV0aG9kUmF3LnRvVXBwZXJDYXNlKCk7XG4gICAgICBpZiAoXG4gICAgICAgICFbXG4gICAgICAgICAgXCJBTllcIixcbiAgICAgICAgICBcIkRFTEVURVwiLFxuICAgICAgICAgIFwiR0VUXCIsXG4gICAgICAgICAgXCJIRUFEXCIsXG4gICAgICAgICAgXCJPUFRJT05TXCIsXG4gICAgICAgICAgXCJQQVRDSFwiLFxuICAgICAgICAgIFwiUE9TVFwiLFxuICAgICAgICAgIFwiUFVUXCIsXG4gICAgICAgIF0uaW5jbHVkZXMobWV0aG9kKVxuICAgICAgKVxuICAgICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKGBJbnZhbGlkIG1ldGhvZCAke21ldGhvZFJhd30gaW4gcm91dGUgJHtyb3V0ZX1gKTtcblxuICAgICAgaWYgKCFwYXRoLnN0YXJ0c1dpdGgoXCIvXCIpKVxuICAgICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKFxuICAgICAgICAgIGBJbnZhbGlkIHBhdGggJHtwYXRofSBpbiByb3V0ZSAke3JvdXRlfS4gUGF0aCBtdXN0IHN0YXJ0IHdpdGggXCIvXCIuYCxcbiAgICAgICAgKTtcblxuICAgICAgcmV0dXJuIGAke21ldGhvZH0gJHtwYXRofWA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQXV0aG9yaXplcigpIHtcbiAgICAgIHJldHVybiBvdXRwdXQoYXJncy5hdXRoKS5hcHBseSgoYXV0aCkgPT4ge1xuICAgICAgICBpZiAoYXV0aD8uaWFtKSByZXR1cm4geyBhdXRob3JpemF0aW9uVHlwZTogXCJBV1NfSUFNXCIgfTtcbiAgICAgICAgaWYgKGF1dGg/Lmp3dCkge1xuICAgICAgICAgIC8vIEJ1aWxkIGF1dGhvcml6ZXIgbmFtZVxuICAgICAgICAgIGNvbnN0IGlkID0gc2FuaXRpemVUb1Bhc2NhbENhc2UoXG4gICAgICAgICAgICBoYXNoU3RyaW5nVG9QcmV0dHlTdHJpbmcoXG4gICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBhdXRoLmp3dC5pc3N1ZXIsXG4gICAgICAgICAgICAgICAgLi4uYXV0aC5qd3QuYXVkaWVuY2VzLnNvcnQoKSxcbiAgICAgICAgICAgICAgICBhdXRoLmp3dC5pZGVudGl0eVNvdXJjZSA/PyBcIlwiLFxuICAgICAgICAgICAgICBdLmpvaW4oXCJcIiksXG4gICAgICAgICAgICAgIDQsXG4gICAgICAgICAgICApLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBjb25zdCBhdXRob3JpemVyID1cbiAgICAgICAgICAgIHBhcmVudC5hdXRob3JpemVyc1tpZF0gPz9cbiAgICAgICAgICAgIG5ldyBhd3MuYXBpZ2F0ZXdheXYyLkF1dGhvcml6ZXIoXG4gICAgICAgICAgICAgIGAke3BhcmVudE5hbWV9QXV0aG9yaXplciR7aWR9YCxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtKGFyZ3MudHJhbnNmb3JtPy5hdXRob3JpemVyLCB7XG4gICAgICAgICAgICAgICAgYXBpSWQ6IHBhcmVudC5hcGkuaWQsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXplclR5cGU6IFwiSldUXCIsXG4gICAgICAgICAgICAgICAgaWRlbnRpdHlTb3VyY2VzOiBbXG4gICAgICAgICAgICAgICAgICBhdXRoLmp3dC5pZGVudGl0eVNvdXJjZSA/PyBcIiRyZXF1ZXN0LmhlYWRlci5BdXRob3JpemF0aW9uXCIsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBqd3RDb25maWd1cmF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICBhdWRpZW5jZXM6IGF1dGguand0LmF1ZGllbmNlcyxcbiAgICAgICAgICAgICAgICAgIGlzc3VlcjogYXV0aC5qd3QuaXNzdWVyLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBwYXJlbnQuYXV0aG9yaXplcnNbaWRdID0gYXV0aG9yaXplcjtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhdXRob3JpemF0aW9uVHlwZTogXCJKV1RcIixcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb25TY29wZXM6IGF1dGguand0LnNjb3BlcyxcbiAgICAgICAgICAgIGF1dGhvcml6ZXJJZDogYXV0aG9yaXplci5pZCxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvblR5cGU6IFwiTk9ORVwiLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgZ2V0U1NUTGluaygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLFxuICBPdXRwdXQsXG4gIG91dHB1dCxcbiAgc2VjcmV0LFxufSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCAqIGFzIGF3cyBmcm9tIFwiQHB1bHVtaS9hd3NcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgVHJhbnNmb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgTGluayB9IGZyb20gXCIuLi9saW5rXCI7XG5pbXBvcnQgeyBGdW5jdGlvbkFyZ3MsIEZ1bmN0aW9uIH0gZnJvbSBcIi4vZnVuY3Rpb25cIjtcbmltcG9ydCB7IFByaXZhdGVLZXkgfSBmcm9tIFwiQHB1bHVtaS90bHNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBBdXRoQXJncyB7XG4gIGF1dGhlbnRpY2F0b3I6IEZ1bmN0aW9uQXJncztcbiAgdHJhbnNmb3JtPzoge1xuICAgIGJ1Y2tldFBvbGljeT86IFRyYW5zZm9ybTxhd3MuczMuQnVja2V0UG9saWN5QXJncz47XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBBdXRoIGV4dGVuZHMgQ29tcG9uZW50IGltcGxlbWVudHMgTGluay5MaW5rYWJsZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgX2tleTogUHJpdmF0ZUtleTtcbiAgcHJpdmF0ZSByZWFkb25seSBfYXV0aGVudGljYXRvcjogT3V0cHV0PEZ1bmN0aW9uPjtcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGFyZ3M6IEF1dGhBcmdzLCBvcHRzPzogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zKSB7XG4gICAgc3VwZXIoXCJzc3Q6YXdzOkF1dGhcIiwgbmFtZSwgYXJncywgb3B0cyk7XG5cbiAgICB0aGlzLl9rZXkgPSBuZXcgUHJpdmF0ZUtleShgJHtuYW1lfUtleXBhaXJgLCB7XG4gICAgICBhbGdvcml0aG06IFwiUlNBXCIsXG4gICAgfSk7XG5cbiAgICB0aGlzLl9hdXRoZW50aWNhdG9yID0gb3V0cHV0KGFyZ3MuYXV0aGVudGljYXRvcikuYXBwbHkoKGFyZ3MpID0+IHtcbiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oYCR7bmFtZX1BdXRoZW50aWNhdG9yYCwge1xuICAgICAgICAuLi5hcmdzLFxuICAgICAgICB1cmw6IHRydWUsXG4gICAgICAgIGVudmlyb25tZW50OiB7XG4gICAgICAgICAgLi4uYXJncy5lbnZpcm9ubWVudCxcbiAgICAgICAgICBBVVRIX1BSSVZBVEVfS0VZOiBzZWNyZXQodGhpcy5rZXkucHJpdmF0ZUtleVBlbVBrY3M4KSxcbiAgICAgICAgICBBVVRIX1BVQkxJQ19LRVk6IHNlY3JldCh0aGlzLmtleS5wdWJsaWNLZXlQZW0pLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGtleSgpIHtcbiAgICByZXR1cm4gdGhpcy5fa2V5O1xuICB9XG5cbiAgcHVibGljIGdldCBhdXRoZW50aWNhdG9yKCkge1xuICAgIHJldHVybiB0aGlzLl9hdXRoZW50aWNhdG9yO1xuICB9XG5cbiAgcHVibGljIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2F1dGhlbnRpY2F0b3IudXJsITtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHVibGljIGdldFNTVExpbmsoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgcHVibGljS2V5OiBzZWNyZXQodGhpcy5rZXkucHVibGljS2V5UGVtKSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHVibGljIGdldFNTVEFXU1Blcm1pc3Npb25zKCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIENvbXBvbmVudFJlc291cmNlT3B0aW9ucyxcbiAgb3V0cHV0LFxuICBpbnRlcnBvbGF0ZSxcbiAgYWxsLFxuICBPdXRwdXQsXG59IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuaW1wb3J0IHsgUmFuZG9tSWQgfSBmcm9tIFwiQHB1bHVtaS9yYW5kb21cIjtcbmltcG9ydCB7XG4gIHByZWZpeE5hbWUsXG4gIGhhc2hOdW1iZXJUb1ByZXR0eVN0cmluZyxcbiAgaGFzaFN0cmluZ1RvUHJldHR5U3RyaW5nLFxuICBzYW5pdGl6ZVRvUGFzY2FsQ2FzZSxcbn0gZnJvbSBcIi4uL25hbWluZ1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBQcmV0dGlmeSwgVHJhbnNmb3JtLCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50XCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmtcIjtcbmltcG9ydCB0eXBlIHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXRcIjtcbmltcG9ydCB7IEZ1bmN0aW9uLCBGdW5jdGlvbkFyZ3MgfSBmcm9tIFwiLi9mdW5jdGlvblwiO1xuaW1wb3J0IHsgRHVyYXRpb24sIHRvU2Vjb25kcyB9IGZyb20gXCIuLi9kdXJhdGlvblwiO1xuXG5pbnRlcmZhY2UgQnVja2V0Q29yc0FyZ3Mge1xuICAvKipcbiAgICogVGhlIEhUVFAgaGVhZGVycyB0aGF0IG9yaWdpbnMgY2FuIGluY2x1ZGUgaW4gcmVxdWVzdHMgdG8gdGhlIGJ1Y2tldC5cbiAgICogQGRlZmF1bHQgYFtcIipcIl1gXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBjb3JzOiB7XG4gICAqICAgICBhbGxvd0hlYWRlcnM6IFtcImRhdGVcIiwgXCJrZWVwLWFsaXZlXCIsIFwieC1jdXN0b20taGVhZGVyXCJdXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYWxsb3dIZWFkZXJzPzogSW5wdXQ8SW5wdXQ8c3RyaW5nPltdPjtcbiAgLyoqXG4gICAqIFRoZSBvcmlnaW5zIHRoYXQgY2FuIGFjY2VzcyB0aGUgYnVja2V0LlxuICAgKiBAZGVmYXVsdCBgW1wiKlwiXWBcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGNvcnM6IHtcbiAgICogICAgIGFsbG93T3JpZ2luczogW1wiaHR0cHM6Ly93d3cuZXhhbXBsZS5jb21cIiwgXCJodHRwOi8vbG9jYWxob3N0OjYwOTA1XCJdXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKiBPciB0aGUgd2lsZGNhcmQgZm9yIGFsbCBvcmlnaW5zLlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgY29yczoge1xuICAgKiAgICAgYWxsb3dPcmlnaW5zOiBbXCIqXCJdXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYWxsb3dPcmlnaW5zPzogSW5wdXQ8SW5wdXQ8c3RyaW5nPltdPjtcbiAgLyoqXG4gICAqIFRoZSBIVFRQIG1ldGhvZHMgdGhhdCBhcmUgYWxsb3dlZCB3aGVuIGNhbGxpbmcgdGhlIGJ1Y2tldC5cbiAgICogQGRlZmF1bHQgYFtcIkRFTEVURVwiIHwgXCJHRVRcIiB8IFwiSEVBRFwiIHwgXCJQT1NUXCIgfCBcIlBVVFwiXWBcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGNvcnM6IHtcbiAgICogICAgIGFsbG93TWV0aG9kczogW1wiR0VUXCIsIFwiUE9TVFwiLCBcIkRFTEVURVwiXVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGFsbG93TWV0aG9kcz86IElucHV0PElucHV0PFwiREVMRVRFXCIgfCBcIkdFVFwiIHwgXCJIRUFEXCIgfCBcIlBPU1RcIiB8IFwiUFVUXCI+W10+O1xuICAvKipcbiAgICogVGhlIEhUVFAgaGVhZGVycyB5b3Ugd2FudCB0byBleHBvc2UgdG8gYW4gb3JpZ2luIHRoYXQgY2FsbHMgdGhlIGJ1Y2tldC5cbiAgICogQGRlZmF1bHQgYFtdYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgY29yczoge1xuICAgKiAgICAgZXhwb3NlSGVhZGVyczogW1wiZGF0ZVwiLCBcImtlZXAtYWxpdmVcIiwgXCJ4LWN1c3RvbS1oZWFkZXJcIl1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBleHBvc2VIZWFkZXJzPzogSW5wdXQ8SW5wdXQ8c3RyaW5nPltdPjtcbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIGFtb3VudCBvZiB0aW1lIHRoZSBicm93c2VyIGNhbiBjYWNoZSByZXN1bHRzIG9mIGEgcHJlZmxpZ2h0IHJlcXVlc3QuIEJ5XG4gICAqIGRlZmF1bHQgdGhlIGJyb3dzZXIgZG9lc24ndCBjYWNoZSB0aGUgcmVzdWx0cy4gVGhlIG1heGltdW0gdmFsdWUgaXMgYDg2NDAwIHNlY29uZHNgIG9yIGAxIGRheWAuXG4gICAqIEBkZWZhdWx0IGBcIjAgc2Vjb25kc1wiYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgY29yczoge1xuICAgKiAgICAgbWF4QWdlOiBcIjEgZGF5XCJcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBtYXhBZ2U/OiBJbnB1dDxEdXJhdGlvbj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnVja2V0QXJncyB7XG4gIC8qKlxuICAgKiBFbmFibGUgcHVibGljIHJlYWQgYWNjZXNzIGZvciBhbGwgdGhlIGZpbGVzIGluIHRoZSBidWNrZXQuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgZG9uJ3QgbmVlZCB0byBlbmFibGUgdGhpcyBpZiB5b3UncmUgdXNpbmcgQ2xvdWRGcm9udCB0byBzZXJ2ZSBmaWxlcyBmcm9tIHRoZSBidWNrZXQuXG4gICAqIDo6OlxuICAgKlxuICAgKiBTaG91bGQgb25seSBiZSB0dXJuZWQgb24gaWYgeW91IHdhbnQgdG8gaG9zdCBwdWJsaWMgZmlsZXMgZGlyZWN0bHkgZnJvbSB0aGUgYnVja2V0LlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBwdWJsaWM6IHRydWVcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHB1YmxpYz86IElucHV0PGJvb2xlYW4+O1xuICAvKipcbiAgICogVGhlIENPUlMgY29uZmlndXJhdGlvbiBmb3IgdGhlIGJ1Y2tldC4gRGVmYXVsdHMgdG8gYHRydWVgLCB3aGljaCBpcyB0aGUgc2FtZSBhczpcbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGNvcnM6IHtcbiAgICogICAgIGFsbG93SGVhZGVyczogW1wiKlwiXSxcbiAgICogICAgIGFsbG93T3JpZ2luczogW1wiKlwiXSxcbiAgICogICAgIGFsbG93TWV0aG9kczogW1wiREVMRVRFXCIsIFwiR0VUXCIsIFwiSEVBRFwiLCBcIlBPU1RcIiwgXCJQVVRcIl0sXG4gICAqICAgICBleHBvc2VIZWFkZXJzOiBbXSxcbiAgICogICAgIG1heEFnZTogXCIwIHNlY29uZHNcIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQGRlZmF1bHQgYHRydWVgXG4gICAqL1xuICBjb3JzPzogSW5wdXQ8ZmFsc2UgfCBQcmV0dGlmeTxCdWNrZXRDb3JzQXJncz4+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0pIGhvdyB0aGlzIGNvbXBvbmVudCBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIFMzIEJ1Y2tldCByZXNvdXJjZS5cbiAgICAgKi9cbiAgICBidWNrZXQ/OiBUcmFuc2Zvcm08YXdzLnMzLkJ1Y2tldFYyQXJncz47XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoZSBTMyBCdWNrZXQgQ09SUyBjb25maWd1cmF0aW9uIHJlc291cmNlLlxuICAgICAqL1xuICAgIGNvcnM/OiBUcmFuc2Zvcm08YXdzLnMzLkJ1Y2tldENvcnNDb25maWd1cmF0aW9uVjJBcmdzPjtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIFMzIEJ1Y2tldCBQb2xpY3kgcmVzb3VyY2UuXG4gICAgICovXG4gICAgcG9saWN5PzogVHJhbnNmb3JtPGF3cy5zMy5CdWNrZXRQb2xpY3lBcmdzPjtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIHB1YmxpYyBhY2Nlc3MgYmxvY2sgcmVzb3VyY2UgdGhhdCdzIGF0dGFjaGVkIHRvIHRoZSBCdWNrZXQuXG4gICAgICovXG4gICAgcHVibGljQWNjZXNzQmxvY2s/OiBUcmFuc2Zvcm08YXdzLnMzLkJ1Y2tldFB1YmxpY0FjY2Vzc0Jsb2NrQXJncz47XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnVja2V0U3Vic2NyaWJlQXJncyB7XG4gIC8qKlxuICAgKiBUaGUgUzMgZXZlbnQgdHlwZXMgdGhhdCB3aWxsIHRyaWdnZXIgdGhlIG5vdGlmaWNhdGlvbi5cbiAgICogQGRlZmF1bHQgQWxsIFMzIGV2ZW50c1xuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZXZlbnRzOiBbXCJzMzpPYmplY3RDcmVhdGVkOipcIiwgXCJzMzpPYmplY3RSZW1vdmVkOipcIl1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGV2ZW50cz86IElucHV0PFxuICAgIElucHV0PFxuICAgICAgfCBcInMzOk9iamVjdENyZWF0ZWQ6KlwiXG4gICAgICB8IFwiczM6T2JqZWN0Q3JlYXRlZDpQdXRcIlxuICAgICAgfCBcInMzOk9iamVjdENyZWF0ZWQ6UG9zdFwiXG4gICAgICB8IFwiczM6T2JqZWN0Q3JlYXRlZDpDb3B5XCJcbiAgICAgIHwgXCJzMzpPYmplY3RDcmVhdGVkOkNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkXCJcbiAgICAgIHwgXCJzMzpPYmplY3RSZW1vdmVkOipcIlxuICAgICAgfCBcInMzOk9iamVjdFJlbW92ZWQ6RGVsZXRlXCJcbiAgICAgIHwgXCJzMzpPYmplY3RSZW1vdmVkOkRlbGV0ZU1hcmtlckNyZWF0ZWRcIlxuICAgICAgfCBcInMzOk9iamVjdFJlc3RvcmU6KlwiXG4gICAgICB8IFwiczM6T2JqZWN0UmVzdG9yZTpQb3N0XCJcbiAgICAgIHwgXCJzMzpPYmplY3RSZXN0b3JlOkNvbXBsZXRlZFwiXG4gICAgICB8IFwiczM6T2JqZWN0UmVzdG9yZTpEZWxldGVcIlxuICAgICAgfCBcInMzOlJlZHVjZWRSZWR1bmRhbmN5TG9zdE9iamVjdFwiXG4gICAgICB8IFwiczM6UmVwbGljYXRpb246KlwiXG4gICAgICB8IFwiczM6UmVwbGljYXRpb246T3BlcmF0aW9uRmFpbGVkUmVwbGljYXRpb25cIlxuICAgICAgfCBcInMzOlJlcGxpY2F0aW9uOk9wZXJhdGlvbk1pc3NlZFRocmVzaG9sZFwiXG4gICAgICB8IFwiczM6UmVwbGljYXRpb246T3BlcmF0aW9uUmVwbGljYXRlZEFmdGVyVGhyZXNob2xkXCJcbiAgICAgIHwgXCJzMzpSZXBsaWNhdGlvbjpPcGVyYXRpb25Ob3RUcmFja2VkXCJcbiAgICAgIHwgXCJzMzpMaWZlY3ljbGVFeHBpcmF0aW9uOipcIlxuICAgICAgfCBcInMzOkxpZmVjeWNsZUV4cGlyYXRpb246RGVsZXRlXCJcbiAgICAgIHwgXCJzMzpMaWZlY3ljbGVFeHBpcmF0aW9uOkRlbGV0ZU1hcmtlckNyZWF0ZWRcIlxuICAgICAgfCBcInMzOkxpZmVjeWNsZVRyYW5zaXRpb25cIlxuICAgICAgfCBcInMzOkludGVsbGlnZW50VGllcmluZ1wiXG4gICAgICB8IFwiczM6T2JqZWN0VGFnZ2luZzoqXCJcbiAgICAgIHwgXCJzMzpPYmplY3RUYWdnaW5nOlB1dFwiXG4gICAgICB8IFwiczM6T2JqZWN0VGFnZ2luZzpEZWxldGVcIlxuICAgICAgfCBcInMzOk9iamVjdEFjbDpQdXRcIlxuICAgID5bXVxuICA+O1xuICAvKipcbiAgICogQW4gUzMgb2JqZWN0IGtleSBwcmVmaXggdGhhdCB3aWxsIHRyaWdnZXIgdGhlIG5vdGlmaWNhdGlvbi5cbiAgICogQGV4YW1wbGVcbiAgICogQWxsIHRoZSBvYmplY3RzIGluIHRoZSBgaW1hZ2VzL2AgZm9sZGVyLlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZmlsdGVyUHJlZml4OiBcImltYWdlcy9cIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZmlsdGVyUHJlZml4PzogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIEFuIFMzIG9iamVjdCBrZXkgc3VmZml4IHRoYXQgd2lsbCB0cmlnZ2VyIHRoZSBub3RpZmljYXRpb24uXG4gICAqIEBleGFtcGxlXG4gICAqIEFsbCB0aGUgb2JqZWN0cyB3aXRoIHRoZSBgLmpwZ2Agc3VmZml4LlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICBmaWx0ZXJTdWZmaXg6IFwiLmpwZ1wiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBmaWx0ZXJTdWZmaXg/OiBJbnB1dDxzdHJpbmc+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0pIGhvdyB0aGlzIG5vdGlmaWNhdGlvbiBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIFMzIEJ1Y2tldCBOb3RpZmljYXRpb24gcmVzb3VyY2UuXG4gICAgICovXG4gICAgbm90aWZpY2F0aW9uPzogVHJhbnNmb3JtPGF3cy5zMy5CdWNrZXROb3RpZmljYXRpb25BcmdzPjtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgYEJ1Y2tldGAgY29tcG9uZW50IGxldHMgeW91IGFkZCBhbiBbQVdTIFMzIEJ1Y2tldF0oaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9zMy8pIHRvXG4gKiB5b3VyIGFwcC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICMjIyMgTWluaW1hbCBleGFtcGxlXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IGJ1Y2tldCA9IG5ldyBzc3QuYXdzLkJ1Y2tldChcIk15QnVja2V0XCIpO1xuICogYGBgXG4gKlxuICogIyMjIyBQdWJsaWMgcmVhZCBhY2Nlc3NcbiAqXG4gKiBFbmFibGUgYHB1YmxpY2AgcmVhZCBhY2Nlc3MgZm9yIGFsbCB0aGUgZmlsZXMgaW4gdGhlIGJ1Y2tldC4gVXNlZnVsIGZvciBob3N0aW5nIHB1YmxpYyBmaWxlcy5cbiAqXG4gKiBgYGB0c1xuICogbmV3IHNzdC5hd3MuQnVja2V0KFwiTXlCdWNrZXRcIiwge1xuICogICBwdWJsaWM6IHRydWVcbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBBZGQgYSBzdWJzY3JpYmVyXG4gKlxuICogYGBgdHNcbiAqIGJ1Y2tldC5zdWJzY3JpYmUoXCJzcmMvc3Vic2NyaWJlci5oYW5kbGVyXCIpO1xuICogYGBgXG4gKlxuICogIyMjIyBMaW5rIHRoZSBidWNrZXQgdG8gYSByZXNvdXJjZVxuICpcbiAqIFlvdSBjYW4gbGluayB0aGUgYnVja2V0IHRvIG90aGVyIHJlc291cmNlcywgbGlrZSBhIGZ1bmN0aW9uIG9yIHlvdXIgTmV4dC5qcyBhcHAuXG4gKlxuICogYGBgdHNcbiAqIG5ldyBzc3QuYXdzLk5leHRqcyhcIk15V2ViXCIsIHtcbiAqICAgbGluazogW2J1Y2tldF1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogT25jZSBsaW5rZWQsIHlvdSBjYW4gZ2VuZXJhdGUgYSBwcmUtc2lnbmVkIFVSTCB0byB1cGxvYWQgZmlsZXMgaW4geW91ciBhcHAuXG4gKlxuICogYGBgdHMgdGl0bGU9XCJhcHAvcGFnZS50c3hcIiB7MSw3fVxuICogaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tIFwic3N0XCI7XG4gKiBpbXBvcnQgeyBnZXRTaWduZWRVcmwgfSBmcm9tIFwiQGF3cy1zZGsvczMtcmVxdWVzdC1wcmVzaWduZXJcIjtcbiAqIGltcG9ydCB7IFMzQ2xpZW50LCBQdXRPYmplY3RDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zM1wiO1xuICpcbiAqIGNvbnN0IGNvbW1hbmQgPSBuZXcgUHV0T2JqZWN0Q29tbWFuZCh7XG4gKiAgICBLZXk6IFwiZmlsZS50eHRcIixcbiAqICAgIEJ1Y2tldDogUmVzb3VyY2UuTXlCdWNrZXQubmFtZVxuICogIH0pO1xuICogIGF3YWl0IGdldFNpZ25lZFVybChuZXcgUzNDbGllbnQoe30pLCBjb21tYW5kKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQnVja2V0XG4gIGV4dGVuZHMgQ29tcG9uZW50XG4gIGltcGxlbWVudHMgTGluay5MaW5rYWJsZSwgTGluay5BV1MuTGlua2FibGVcbntcbiAgcHJpdmF0ZSBjb25zdHJ1Y3Rvck5hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSBidWNrZXQ6IE91dHB1dDxhd3MuczMuQnVja2V0VjI+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhcmdzPzogQnVja2V0QXJncyxcbiAgICBvcHRzPzogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLFxuICApIHtcbiAgICBzdXBlcihcInNzdDphd3M6QnVja2V0XCIsIG5hbWUsIGFyZ3MsIG9wdHMpO1xuXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcztcbiAgICBjb25zdCBwdWJsaWNBY2Nlc3MgPSBub3JtYWxpemVQdWJsaWNBY2Nlc3MoKTtcblxuICAgIGNvbnN0IGJ1Y2tldCA9IGNyZWF0ZUJ1Y2tldCgpO1xuICAgIGNvbnN0IHB1YmxpY0FjY2Vzc0Jsb2NrID0gY3JlYXRlUHVibGljQWNjZXNzKCk7XG4gICAgY29uc3QgcG9saWN5ID0gY3JlYXRlQnVja2V0UG9saWN5KCk7XG4gICAgY3JlYXRlQ29yc1J1bGUoKTtcblxuICAgIHRoaXMuY29uc3RydWN0b3JOYW1lID0gbmFtZTtcbiAgICAvLyBFbnN1cmUgdGhlIHBvbGljeSBpcyBjcmVhdGVkIHdoZW4gdGhlIGJ1Y2tldCBpcyB1c2VkIGluIGFub3RoZXIgY29tcG9uZW50XG4gICAgLy8gKGllLiBidWNrZXQubmFtZSkuIEFsc28sIGEgYnVja2V0IGNhbiBvbmx5IGhhdmUgb25lIHBvbGljeS4gV2Ugd2FudCB0byBlbnN1cmVcbiAgICAvLyB0aGUgcG9saWN5IGNyZWF0ZWQgaGVyZSBpcyBjcmVhdGVkIGZpcnN0LiBBbmQgU1NUIHdpbGwgdGhyb3cgYW4gZXJyb3IgaWZcbiAgICAvLyBhbm90aGVyIHBvbGljeSBpcyBjcmVhdGVkIGFmdGVyIHRoaXMgb25lLlxuICAgIHRoaXMuYnVja2V0ID0gcG9saWN5LmFwcGx5KCgpID0+IGJ1Y2tldCk7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVCdWNrZXQoKSB7XG4gICAgICBjb25zdCBpbnB1dCA9IHRyYW5zZm9ybShhcmdzPy50cmFuc2Zvcm0/LmJ1Y2tldCwge1xuICAgICAgICBmb3JjZURlc3Ryb3k6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFpbnB1dC5idWNrZXQpIHtcbiAgICAgICAgY29uc3QgcmFuZG9tSWQgPSBuZXcgUmFuZG9tSWQoXG4gICAgICAgICAgYCR7bmFtZX1JZGAsXG4gICAgICAgICAgeyBieXRlTGVuZ3RoOiA2IH0sXG4gICAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICAgKTtcbiAgICAgICAgaW5wdXQuYnVja2V0ID0gcmFuZG9tSWQuZGVjLmFwcGx5KChkZWMpID0+XG4gICAgICAgICAgcHJlZml4TmFtZShcbiAgICAgICAgICAgIDYzLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIGAtJHtoYXNoTnVtYmVyVG9QcmV0dHlTdHJpbmcocGFyc2VJbnQoZGVjKSwgOCl9YCxcbiAgICAgICAgICApLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgYXdzLnMzLkJ1Y2tldFYyKGAke25hbWV9QnVja2V0YCwgaW5wdXQsIHsgcGFyZW50IH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVB1YmxpY0FjY2VzcygpIHtcbiAgICAgIHJldHVybiBwdWJsaWNBY2Nlc3MuYXBwbHkoKHB1YmxpY0FjY2VzcykgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IGF3cy5zMy5CdWNrZXRQdWJsaWNBY2Nlc3NCbG9jayhcbiAgICAgICAgICBgJHtuYW1lfVB1YmxpY0FjY2Vzc0Jsb2NrYCxcbiAgICAgICAgICB0cmFuc2Zvcm0oYXJncz8udHJhbnNmb3JtPy5wdWJsaWNBY2Nlc3NCbG9jaywge1xuICAgICAgICAgICAgYnVja2V0OiBidWNrZXQuYnVja2V0LFxuICAgICAgICAgICAgYmxvY2tQdWJsaWNBY2xzOiB0cnVlLFxuICAgICAgICAgICAgYmxvY2tQdWJsaWNQb2xpY3k6ICFwdWJsaWNBY2Nlc3MsXG4gICAgICAgICAgICBpZ25vcmVQdWJsaWNBY2xzOiB0cnVlLFxuICAgICAgICAgICAgcmVzdHJpY3RQdWJsaWNCdWNrZXRzOiAhcHVibGljQWNjZXNzLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIHsgcGFyZW50IH0sXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVCdWNrZXRQb2xpY3koKSB7XG4gICAgICByZXR1cm4gcHVibGljQWNjZXNzLmFwcGx5KChwdWJsaWNBY2Nlc3MpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdGVtZW50cyA9IFtdO1xuICAgICAgICBpZiAocHVibGljQWNjZXNzKSB7XG4gICAgICAgICAgc3RhdGVtZW50cy5wdXNoKHtcbiAgICAgICAgICAgIHByaW5jaXBhbHM6IFt7IHR5cGU6IFwiKlwiLCBpZGVudGlmaWVyczogW1wiKlwiXSB9XSxcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcInMzOkdldE9iamVjdFwiXSxcbiAgICAgICAgICAgIHJlc291cmNlczogW2ludGVycG9sYXRlYCR7YnVja2V0LmFybn0vKmBdLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlbWVudHMucHVzaCh7XG4gICAgICAgICAgZWZmZWN0OiBcIkRlbnlcIixcbiAgICAgICAgICBwcmluY2lwYWxzOiBbeyB0eXBlOiBcIipcIiwgaWRlbnRpZmllcnM6IFtcIipcIl0gfV0sXG4gICAgICAgICAgYWN0aW9uczogW1wiczM6KlwiXSxcbiAgICAgICAgICByZXNvdXJjZXM6IFtidWNrZXQuYXJuLCBpbnRlcnBvbGF0ZWAke2J1Y2tldC5hcm59LypgXSxcbiAgICAgICAgICBjb25kaXRpb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRlc3Q6IFwiQm9vbFwiLFxuICAgICAgICAgICAgICB2YXJpYWJsZTogXCJhd3M6U2VjdXJlVHJhbnNwb3J0XCIsXG4gICAgICAgICAgICAgIHZhbHVlczogW1wiZmFsc2VcIl0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBuZXcgYXdzLnMzLkJ1Y2tldFBvbGljeShcbiAgICAgICAgICBgJHtuYW1lfVBvbGljeWAsXG4gICAgICAgICAgdHJhbnNmb3JtKGFyZ3M/LnRyYW5zZm9ybT8ucG9saWN5LCB7XG4gICAgICAgICAgICBidWNrZXQ6IGJ1Y2tldC5idWNrZXQsXG4gICAgICAgICAgICBwb2xpY3k6IGF3cy5pYW0uZ2V0UG9saWN5RG9jdW1lbnRPdXRwdXQoeyBzdGF0ZW1lbnRzIH0pLmpzb24sXG4gICAgICAgICAgfSksXG4gICAgICAgICAge1xuICAgICAgICAgICAgcGFyZW50LFxuICAgICAgICAgICAgZGVwZW5kc09uOiBwdWJsaWNBY2Nlc3NCbG9jayxcbiAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ29yc1J1bGUoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3M/LmNvcnMpLmFwcGx5KChjb3JzKSA9PiB7XG4gICAgICAgIGlmIChjb3JzID09PSBmYWxzZSkgcmV0dXJuO1xuXG4gICAgICAgIHJldHVybiBuZXcgYXdzLnMzLkJ1Y2tldENvcnNDb25maWd1cmF0aW9uVjIoXG4gICAgICAgICAgYCR7bmFtZX1Db3JzYCxcbiAgICAgICAgICB0cmFuc2Zvcm0oYXJncz8udHJhbnNmb3JtPy5jb3JzLCB7XG4gICAgICAgICAgICBidWNrZXQ6IGJ1Y2tldC5idWNrZXQsXG4gICAgICAgICAgICBjb3JzUnVsZXM6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFsbG93ZWRIZWFkZXJzOiBjb3JzPy5hbGxvd0hlYWRlcnMgPz8gW1wiKlwiXSxcbiAgICAgICAgICAgICAgICBhbGxvd2VkTWV0aG9kczogY29ycz8uYWxsb3dNZXRob2RzID8/IFtcbiAgICAgICAgICAgICAgICAgIFwiREVMRVRFXCIsXG4gICAgICAgICAgICAgICAgICBcIkdFVFwiLFxuICAgICAgICAgICAgICAgICAgXCJIRUFEXCIsXG4gICAgICAgICAgICAgICAgICBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgIFwiUFVUXCIsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBhbGxvd2VkT3JpZ2luczogY29ycz8uYWxsb3dPcmlnaW5zID8/IFtcIipcIl0sXG4gICAgICAgICAgICAgICAgZXhwb3NlSGVhZGVyczogY29ycz8uZXhwb3NlSGVhZGVycyxcbiAgICAgICAgICAgICAgICBtYXhBZ2VTZWNvbmRzOiB0b1NlY29uZHMoY29ycz8ubWF4QWdlID8/IFwiMCBzZWNvbmRzXCIpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplUHVibGljQWNjZXNzKCkge1xuICAgICAgcmV0dXJuIG91dHB1dChhcmdzPy5wdWJsaWMpLmFwcGx5KCh2KSA9PiB2ID8/IGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIGdlbmVyYXRlZCBuYW1lIG9mIHRoZSBTMyBCdWNrZXQuXG4gICAqL1xuICBwdWJsaWMgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVja2V0LmJ1Y2tldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgQVJOIG9mIHRoZSBTMyBCdWNrZXQuXG4gICAqL1xuICBwdWJsaWMgZ2V0IGFybigpIHtcbiAgICByZXR1cm4gdGhpcy5idWNrZXQuYXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB1bmRlcmx5aW5nIFtyZXNvdXJjZXNdKC9kb2NzL2NvbXBvbmVudHMvI25vZGVzKSB0aGlzIGNvbXBvbmVudCBjcmVhdGVzLlxuICAgKi9cbiAgcHVibGljIGdldCBub2RlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgQW1hem9uIFMzIGJ1Y2tldC5cbiAgICAgICAqL1xuICAgICAgYnVja2V0OiB0aGlzLmJ1Y2tldCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZXMgdG8gZXZlbnRzIGZyb20gdGhpcyBidWNrZXQuXG4gICAqXG4gICAqIEBwYXJhbSBzdWJzY3JpYmVyIFRoZSBmdW5jdGlvbiB0aGF0J2xsIGJlIG5vdGlmaWVkLlxuICAgKiBAcGFyYW0gYXJncyBDb25maWd1cmUgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBganNcbiAgICogYnVja2V0LnN1YnNjcmliZShcInNyYy9zdWJzY3JpYmVyLmhhbmRsZXJcIik7XG4gICAqIGBgYFxuICAgKlxuICAgKiBBZGQgbXVsdGlwbGUgc3Vic2NyaWJlcnMuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGJ1Y2tldFxuICAgKiAgIC5zdWJzY3JpYmUoXCJzcmMvc3Vic2NyaWJlcjEuaGFuZGxlclwiKVxuICAgKiAgIC5zdWJzY3JpYmUoXCJzcmMvc3Vic2NyaWJlcjIuaGFuZGxlclwiKTtcbiAgICogYGBgXG4gICAqXG4gICAqIFN1YnNjcmliZSB0byBzcGVjaWZpYyBTMyBldmVudHMuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGJ1Y2tldC5zdWJzY3JpYmUoXCJzcmMvc3Vic2NyaWJlci5oYW5kbGVyXCIsIHtcbiAgICogICBldmVudHM6IFtcInMzOk9iamVjdENyZWF0ZWQ6KlwiLCBcInMzOk9iamVjdFJlbW92ZWQ6KlwiXVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIFN1YnNjcmliZSB0byBzcGVjaWZpYyBTMyBldmVudHMgZnJvbSBhIHNwZWNpZmljIGZvbGRlci5cbiAgICpcbiAgICogYGBganNcbiAgICogYnVja2V0LnN1YnNjcmliZShcInNyYy9zdWJzY3JpYmVyLmhhbmRsZXJcIiwge1xuICAgKiAgIGZpbHRlclByZWZpeDogXCJpbWFnZXMvXCIsXG4gICAqICAgZXZlbnRzOiBbXCJzMzpPYmplY3RDcmVhdGVkOipcIiwgXCJzMzpPYmplY3RSZW1vdmVkOipcIl1cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBDdXN0b21pemUgdGhlIHN1YnNjcmliZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGJ1Y2tldC5zdWJzY3JpYmUoe1xuICAgKiAgIGhhbmRsZXI6IFwic3JjL3N1YnNjcmliZXIuaGFuZGxlclwiLFxuICAgKiAgIHRpbWVvdXQ6IFwiNjAgc2Vjb25kc1wiLFxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqL1xuICBwdWJsaWMgc3Vic2NyaWJlKFxuICAgIHN1YnNjcmliZXI6IHN0cmluZyB8IEZ1bmN0aW9uQXJncyxcbiAgICBhcmdzPzogQnVja2V0U3Vic2NyaWJlQXJncyxcbiAgKSB7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcztcbiAgICBjb25zdCBwYXJlbnROYW1lID0gdGhpcy5jb25zdHJ1Y3Rvck5hbWU7XG5cbiAgICBhbGwoW3N1YnNjcmliZXIsIGFyZ3NdKS5hcHBseSgoW3N1YnNjcmliZXIsIGFyZ3NdKSA9PiB7XG4gICAgICBjb25zdCBldmVudHMgPSBhcmdzPy5ldmVudHMgPz8gW1xuICAgICAgICBcInMzOk9iamVjdENyZWF0ZWQ6KlwiLFxuICAgICAgICBcInMzOk9iamVjdFJlbW92ZWQ6KlwiLFxuICAgICAgICBcInMzOk9iamVjdFJlc3RvcmU6KlwiLFxuICAgICAgICBcInMzOlJlZHVjZWRSZWR1bmRhbmN5TG9zdE9iamVjdFwiLFxuICAgICAgICBcInMzOlJlcGxpY2F0aW9uOipcIixcbiAgICAgICAgXCJzMzpMaWZlY3ljbGVFeHBpcmF0aW9uOipcIixcbiAgICAgICAgXCJzMzpMaWZlY3ljbGVUcmFuc2l0aW9uXCIsXG4gICAgICAgIFwiczM6SW50ZWxsaWdlbnRUaWVyaW5nXCIsXG4gICAgICAgIFwiczM6T2JqZWN0VGFnZ2luZzoqXCIsXG4gICAgICAgIFwiczM6T2JqZWN0QWNsOlB1dFwiLFxuICAgICAgXTtcblxuICAgICAgLy8gQnVpbGQgc3Vic2NyaWJlciBuYW1lXG4gICAgICBjb25zdCBpZCA9IHNhbml0aXplVG9QYXNjYWxDYXNlKFxuICAgICAgICBoYXNoU3RyaW5nVG9QcmV0dHlTdHJpbmcoXG4gICAgICAgICAgW1xuICAgICAgICAgICAgLi4uZXZlbnRzLFxuICAgICAgICAgICAgYXJncz8uZmlsdGVyUHJlZml4ID8/IFwiXCIsXG4gICAgICAgICAgICBhcmdzPy5maWx0ZXJTdWZmaXggPz8gXCJcIixcbiAgICAgICAgICAgIHR5cGVvZiBzdWJzY3JpYmVyID09PSBcInN0cmluZ1wiID8gc3Vic2NyaWJlciA6IHN1YnNjcmliZXIuaGFuZGxlcixcbiAgICAgICAgICBdLmpvaW4oXCJcIiksXG4gICAgICAgICAgNCxcbiAgICAgICAgKSxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGZuID0gRnVuY3Rpb24uZnJvbURlZmluaXRpb24oXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgYCR7cGFyZW50TmFtZX1TdWJzY3JpYmVyJHtpZH1gLFxuICAgICAgICBzdWJzY3JpYmVyLFxuICAgICAgICB7XG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICBldmVudHMubGVuZ3RoIDwgNVxuICAgICAgICAgICAgICA/IGBTdWJzY3JpYmVkIHRvICR7cGFyZW50TmFtZX0gb24gJHtldmVudHMuam9pbihcIiwgXCIpfWBcbiAgICAgICAgICAgICAgOiBgU3Vic2NyaWJlZCB0byAke3BhcmVudE5hbWV9IG9uICR7ZXZlbnRzXG4gICAgICAgICAgICAgICAgICAuc2xpY2UoMCwgMylcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiLCBcIil9LCBhbmQgJHtldmVudHMubGVuZ3RoIC0gM30gbW9yZSBldmVudHNgLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHBlcm1pc3Npb24gPSBuZXcgYXdzLmxhbWJkYS5QZXJtaXNzaW9uKFxuICAgICAgICBgJHtwYXJlbnROYW1lfVN1YnNjcmliZXIke2lkfVBlcm1pc3Npb25zYCxcbiAgICAgICAge1xuICAgICAgICAgIGFjdGlvbjogXCJsYW1iZGE6SW52b2tlRnVuY3Rpb25cIixcbiAgICAgICAgICBmdW5jdGlvbjogZm4uYXJuLFxuICAgICAgICAgIHByaW5jaXBhbDogXCJzMy5hbWF6b25hd3MuY29tXCIsXG4gICAgICAgICAgc291cmNlQXJuOiB0aGlzLmFybixcbiAgICAgICAgfSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgICBuZXcgYXdzLnMzLkJ1Y2tldE5vdGlmaWNhdGlvbihcbiAgICAgICAgYCR7cGFyZW50TmFtZX1Ob3RpZmljYXRpb24ke2lkfWAsXG4gICAgICAgIHRyYW5zZm9ybShhcmdzPy50cmFuc2Zvcm0/Lm5vdGlmaWNhdGlvbiwge1xuICAgICAgICAgIGJ1Y2tldDogdGhpcy5idWNrZXQuYnVja2V0LFxuICAgICAgICAgIGxhbWJkYUZ1bmN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZDogYE5vdGlmaWNhdGlvbiR7aWR9YCxcbiAgICAgICAgICAgICAgbGFtYmRhRnVuY3Rpb25Bcm46IGZuLmFybixcbiAgICAgICAgICAgICAgZXZlbnRzLFxuICAgICAgICAgICAgICBmaWx0ZXJQcmVmaXg6IGFyZ3M/LmZpbHRlclByZWZpeCxcbiAgICAgICAgICAgICAgZmlsdGVyU3VmZml4OiBhcmdzPy5maWx0ZXJTdWZmaXgsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgICB7IHBhcmVudCwgZGVwZW5kc09uOiBbcGVybWlzc2lvbl0gfSxcbiAgICAgICk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHB1YmxpYyBnZXRTU1RMaW5rKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHVibGljIGdldFNTVEFXU1Blcm1pc3Npb25zKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGFjdGlvbnM6IFtcInMzOipcIl0sXG4gICAgICAgIHJlc291cmNlczogW3RoaXMuYXJuLCBpbnRlcnBvbGF0ZWAke3RoaXMuYXJufS8qYF0sXG4gICAgICB9LFxuICAgIF07XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsIG91dHB1dCwgT3V0cHV0IH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgKiBhcyBhd3MgZnJvbSBcIkBwdWx1bWkvYXdzXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIFRyYW5zZm9ybSwgdHJhbnNmb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgRnVuY3Rpb24sIEZ1bmN0aW9uQXJncyB9IGZyb20gXCIuL2Z1bmN0aW9uXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCIuLi9pbnB1dC5qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENyb25BcmdzIHtcbiAgLyoqXG4gICAqIFRoZSBmdW5jdGlvbiB0aGF0J2xsIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGNyb24gam9iIHJ1bnMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIHtcbiAgICogICBqb2I6IFwic3JjL2Nyb24uaGFuZGxlclwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gcGFzcyBpbiB0aGUgZnVsbCBmdW5jdGlvbiBwcm9wcy5cbiAgICpcbiAgICogYGBgdHNcbiAgICoge1xuICAgKiAgIGpvYjoge1xuICAgKiAgICAgaGFuZGxlcjogXCJzcmMvY3Jvbi5oYW5kbGVyXCIsXG4gICAqICAgICB0aW1lb3V0OiBcIjYwIHNlY29uZHNcIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGpvYjogSW5wdXQ8c3RyaW5nIHwgRnVuY3Rpb25BcmdzPjtcbiAgLyoqXG4gICAqIFRoZSBzY2hlZHVsZSBmb3IgdGhlIGNyb24gam9iLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBZb3UgY2FuIHVzZSBhIFtyYXRlIGV4cHJlc3Npb25dKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9sYW1iZGEvbGF0ZXN0L2RnL3NlcnZpY2VzLWNsb3Vkd2F0Y2hldmVudHMtZXhwcmVzc2lvbnMuaHRtbCkuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIHtcbiAgICogICBzY2hlZHVsZTogXCJyYXRlKDUgbWludXRlcylcIlxuICAgKiAgIC8vIHNjaGVkdWxlOiBcInJhdGUoMSBtaW51dGUpXCJcbiAgICogICAvLyBzY2hlZHVsZTogXCJyYXRlKDUgbWludXRlcylcIlxuICAgKiAgIC8vIHNjaGVkdWxlOiBcInJhdGUoMSBob3VyKVwiXG4gICAqICAgLy8gc2NoZWR1bGU6IFwicmF0ZSg1IGhvdXJzKVwiXG4gICAqICAgLy8gc2NoZWR1bGU6IFwicmF0ZSgxIGRheSlcIlxuICAgKiAgIC8vIHNjaGVkdWxlOiBcInJhdGUoNSBkYXlzKVwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqIE9yIGEgW2Nyb24gZXhwcmVzc2lvbl0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2V2ZW50YnJpZGdlL2xhdGVzdC91c2VyZ3VpZGUvZWItY3JlYXRlLXJ1bGUtc2NoZWR1bGUuaHRtbCNlYi1jcm9uLWV4cHJlc3Npb25zKS5cbiAgICpcbiAgICogYGBgdHNcbiAgICoge1xuICAgKiAgIHNjaGVkdWxlOiBcImNyb24oMTUgMTAgKiAqID8gKilcIiwgLy8gMTA6MTUgQU0gKFVUQykgZXZlcnkgZGF5XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBzY2hlZHVsZTogSW5wdXQ8YHJhdGUoJHtzdHJpbmd9KWAgfCBgY3Jvbigke3N0cmluZ30pYD47XG4gIC8qKlxuICAgKiBbVHJhbnNmb3JtXSgvZG9jcy9jb21wb25lbnRzI3RyYW5zZm9ybSkgaG93IHRoaXMgY29tcG9uZW50IGNyZWF0ZXMgaXRzIHVuZGVybHlpbmcgcmVzb3VyY2VzLlxuICAgKi9cbiAgdHJhbnNmb3JtPzoge1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgRXZlbnRCcmlkZ2UgUnVsZSByZXNvdXJjZS5cbiAgICAgKi9cbiAgICBydWxlPzogVHJhbnNmb3JtPGF3cy5jbG91ZHdhdGNoLkV2ZW50UnVsZUFyZ3M+O1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgRXZlbnRCcmlkZ2UgVGFyZ2V0IHJlc291cmNlLlxuICAgICAqL1xuICAgIHRhcmdldD86IFRyYW5zZm9ybTxhd3MuY2xvdWR3YXRjaC5FdmVudFRhcmdldEFyZ3M+O1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBgQ3JvbmAgY29tcG9uZW50IGxldHMgeW91IGFkZCBjcm9uIGpvYnMgdG8geW91ciBhcHAuXG4gKiBJdCB1c2VzIFtBbWF6b24gRXZlbnQgQnVzXShodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vZXZlbnRicmlkZ2UvbGF0ZXN0L3VzZXJndWlkZS9lYi1ldmVudC1idXMuaHRtbCkuXG4gKlxuICogQGV4YW1wbGVcbiAqICMjIyMgTWluaW1hbCBleGFtcGxlXG4gKlxuICogUGFzcyBpbiBhIGBzY2hlZHVsZWAgYW5kIGEgYGpvYmAgZnVuY3Rpb24gdGhhdCdsbCBiZSBleGVjdXRlZC5cbiAqXG4gKiBgYGB0c1xuICogbmV3IHNzdC5hd3MuQ3JvbihcIk15Q3JvbkpvYlwiLCB7XG4gKiAgIGpvYjogXCJzcmMvY3Jvbi5oYW5kbGVyXCIsXG4gKiAgIHNjaGVkdWxlOiBcInJhdGUoMSBtaW51dGUpXCJcbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBDdXN0b21pemUgdGhlIGZ1bmN0aW9uXG4gKlxuICogYGBganNcbiAqIG5ldyBzc3QuYXdzLkNyb24oXCJNeUNyb25Kb2JcIiwge1xuICogICBzY2hlZHVsZTogXCJyYXRlKDEgbWludXRlKVwiLFxuICogICBqb2I6IHtcbiAqICAgICBoYW5kbGVyOiBcInNyYy9jcm9uLmhhbmRsZXJcIixcbiAqICAgICB0aW1lb3V0OiBcIjYwIHNlY29uZHNcIlxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQ3JvbiBleHRlbmRzIENvbXBvbmVudCB7XG4gIHByaXZhdGUgZm46IE91dHB1dDxGdW5jdGlvbj47XG4gIHByaXZhdGUgcnVsZTogYXdzLmNsb3Vkd2F0Y2guRXZlbnRSdWxlO1xuICBwcml2YXRlIHRhcmdldDogYXdzLmNsb3Vkd2F0Y2guRXZlbnRUYXJnZXQ7XG5cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBhcmdzOiBDcm9uQXJncywgb3B0cz86IENvbXBvbmVudFJlc291cmNlT3B0aW9ucykge1xuICAgIHN1cGVyKFwic3N0OmF3czpDcm9uXCIsIG5hbWUsIGFyZ3MsIG9wdHMpO1xuXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcztcblxuICAgIGNvbnN0IGZuID0gY3JlYXRlRnVuY3Rpb24oKTtcbiAgICBjb25zdCBydWxlID0gY3JlYXRlUnVsZSgpO1xuICAgIGNvbnN0IHRhcmdldCA9IGNyZWF0ZVRhcmdldCgpO1xuICAgIGNyZWF0ZVBlcm1pc3Npb24oKTtcblxuICAgIHRoaXMuZm4gPSBmbjtcbiAgICB0aGlzLnJ1bGUgPSBydWxlO1xuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlRnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3Muam9iKS5hcHBseSgoam9iKSA9PlxuICAgICAgICBGdW5jdGlvbi5mcm9tRGVmaW5pdGlvbihwYXJlbnQsIGAke25hbWV9SGFuZGxlcmAsIGpvYiksXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVJ1bGUoKSB7XG4gICAgICByZXR1cm4gbmV3IGF3cy5jbG91ZHdhdGNoLkV2ZW50UnVsZShcbiAgICAgICAgYCR7bmFtZX1SdWxlYCxcbiAgICAgICAgdHJhbnNmb3JtKGFyZ3MudHJhbnNmb3JtPy5ydWxlLCB7XG4gICAgICAgICAgc2NoZWR1bGVFeHByZXNzaW9uOiBhcmdzLnNjaGVkdWxlLFxuICAgICAgICB9KSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVGFyZ2V0KCkge1xuICAgICAgcmV0dXJuIG5ldyBhd3MuY2xvdWR3YXRjaC5FdmVudFRhcmdldChcbiAgICAgICAgYCR7bmFtZX1UYXJnZXRgLFxuICAgICAgICB0cmFuc2Zvcm0oYXJncy50cmFuc2Zvcm0/LnRhcmdldCwge1xuICAgICAgICAgIGFybjogZm4uYXJuLFxuICAgICAgICAgIHJ1bGU6IHJ1bGUubmFtZSxcbiAgICAgICAgfSksXG4gICAgICAgIHsgcGFyZW50IH0sXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVBlcm1pc3Npb24oKSB7XG4gICAgICByZXR1cm4gbmV3IGF3cy5sYW1iZGEuUGVybWlzc2lvbihcbiAgICAgICAgYCR7bmFtZX1QZXJtaXNzaW9uYCxcbiAgICAgICAge1xuICAgICAgICAgIGFjdGlvbjogXCJsYW1iZGE6SW52b2tlRnVuY3Rpb25cIixcbiAgICAgICAgICBmdW5jdGlvbjogZm4uYXJuLFxuICAgICAgICAgIHByaW5jaXBhbDogXCJldmVudHMuYW1hem9uYXdzLmNvbVwiLFxuICAgICAgICAgIHNvdXJjZUFybjogcnVsZS5hcm4sXG4gICAgICAgIH0sXG4gICAgICAgIHsgcGFyZW50IH0sXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdW5kZXJseWluZyBbcmVzb3VyY2VzXSgvZG9jcy9jb21wb25lbnRzLyNub2RlcykgdGhpcyBjb21wb25lbnQgY3JlYXRlcy5cbiAgICovXG4gIHB1YmxpYyBnZXQgbm9kZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFXUyBMYW1iZGEgRnVuY3Rpb24gdGhhdCdzIGludm9rZWQgd2hlbiB0aGUgY3JvbiBqb2IgcnVucy5cbiAgICAgICAqL1xuICAgICAgam9iOiB0aGlzLmZuLFxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgRXZlbnRCcmlkZ2UgUnVsZSByZXNvdXJjZS5cbiAgICAgICAqL1xuICAgICAgcnVsZTogdGhpcy5ydWxlLFxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgRXZlbnRCcmlkZ2UgVGFyZ2V0IHJlc291cmNlLlxuICAgICAgICovXG4gICAgICB0YXJnZXQ6IHRoaXMudGFyZ2V0LFxuICAgIH07XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsXG4gIE91dHB1dCxcbiAgYWxsLFxuICBpbnRlcnBvbGF0ZSxcbiAgb3V0cHV0LFxufSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCAqIGFzIGF3cyBmcm9tIFwiQHB1bHVtaS9hd3NcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgVHJhbnNmb3JtLCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50XCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmtcIjtcbmltcG9ydCB0eXBlIHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXRcIjtcbmltcG9ydCB7IEZ1bmN0aW9uLCBGdW5jdGlvbkFyZ3MgfSBmcm9tIFwiLi9mdW5jdGlvblwiO1xuaW1wb3J0IHsgaGFzaFN0cmluZ1RvUHJldHR5U3RyaW5nLCBzYW5pdGl6ZVRvUGFzY2FsQ2FzZSB9IGZyb20gXCIuLi9uYW1pbmdcIjtcblxuZXhwb3J0IGludGVyZmFjZSBEeW5hbW9BcmdzIHtcbiAgLyoqXG4gICAqIEFuIG9iamVjdCBkZWZpbmluZyB0aGUgZmllbGRzIG9mIHRoZSB0YWJsZSB0aGF0J2xsIGJlIHVzZWQgdG8gY3JlYXRlIGluZGV4ZXMuIFRoZSBrZXkgaXMgdGhlIG5hbWUgb2YgdGhlIGZpZWxkIGFuZCB0aGUgdmFsdWUgaXMgdGhlIHR5cGUuXG4gICAqXG4gICAqIDo6Om5vdGVcbiAgICogWW91IGRvbid0IG5lZWQgdG8gZGVmaW5lIGFsbCB5b3VyIGZpZWxkcyBoZXJlLCBqdXN0IHRoZSBvbmVzIHlvdSB3YW50IHRvIHVzZSBmb3IgaW5kZXhlcy5cbiAgICogOjo6XG4gICAqXG4gICAqIFdoaWxlIHlvdSBjYW4gaGF2ZSBmaWVsZHMgZmllbGQgdHlwZXMgb3RoZXIgdGhhbiBgc3RyaW5nYCwgYG51bWJlcmAsIGFuZCBgYmluYXJ5YDsgeW91IGNhbiBvbmx5IHVzZSB0aGVzZSB0eXBlcyBmb3IgeW91ciBpbmRleGVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZmllbGRzOiB7XG4gICAqICAgICB1c2VySWQ6IFwic3RyaW5nXCIsXG4gICAqICAgICBub3RlSWQ6IFwic3RyaW5nXCJcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBmaWVsZHM6IElucHV0PFJlY29yZDxzdHJpbmcsIFwic3RyaW5nXCIgfCBcIm51bWJlclwiIHwgXCJiaW5hcnlcIj4+O1xuICAvKipcbiAgICogRGVmaW5lIHRoZSB0YWJsZSdzIHByaW1hcnkgaW5kZXguIFlvdSBjYW4gb25seSBoYXZlIG9uZSBwcmltYXJ5IGluZGV4LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgcHJpbWFyeUluZGV4OiB7IGhhc2hLZXk6IFwidXNlcklkXCIsIHJhbmdlS2V5OiBcIm5vdGVJZFwiIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHByaW1hcnlJbmRleDogSW5wdXQ8e1xuICAgIC8qKlxuICAgICAqIFRoZSBoYXNoIGtleSBmaWVsZCBvZiB0aGUgaW5kZXguIFRoaXMgZmllbGQgbmVlZHMgdG8gYmUgZGVmaW5lZCBpbiB0aGUgYGZpZWxkc2AuXG4gICAgICovXG4gICAgaGFzaEtleTogSW5wdXQ8c3RyaW5nPjtcbiAgICAvKipcbiAgICAgKiBUaGUgaGFzaCBrZXkgZmllbGQgb2YgdGhlIGluZGV4LiBUaGlzIGZpZWxkIG5lZWRzIHRvIGJlIGRlZmluZWQgaW4gdGhlIGBmaWVsZHNgLlxuICAgICAqL1xuICAgIHJhbmdlS2V5PzogSW5wdXQ8c3RyaW5nPjtcbiAgfT47XG4gIC8qKlxuICAgKiBDb25maWd1cmUgdGhlIHRhYmxlJ3MgZ2xvYmFsIHNlY29uZGFyeSBpbmRleGVzLlxuICAgKlxuICAgKiBZb3UgY2FuIGhhdmUgdXAgdG8gMjAgZ2xvYmFsIHNlY29uZGFyeSBpbmRleGVzIHBlciB0YWJsZS4gQW5kIGVhY2ggZ2xvYmFsIHNlY29uZGFyeSBpbmRleCBzaG91bGQgaGF2ZSBhIHVuaXF1ZSBuYW1lLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZ2xvYmFsSW5kZXhlczoge1xuICAgKiAgICAgQ3JlYXRlZEF0SW5kZXg6IHsgaGFzaEtleTogXCJ1c2VySWRcIiwgcmFuZ2VLZXk6IFwiY3JlYXRlZEF0XCIgfVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGdsb2JhbEluZGV4ZXM/OiBJbnB1dDxcbiAgICBSZWNvcmQ8XG4gICAgICBzdHJpbmcsXG4gICAgICBJbnB1dDx7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGFzaCBrZXkgZmllbGQgb2YgdGhlIGluZGV4LiBUaGlzIGZpZWxkIG5lZWRzIHRvIGJlIGRlZmluZWQgaW4gdGhlIGBmaWVsZHNgLlxuICAgICAgICAgKi9cbiAgICAgICAgaGFzaEtleTogSW5wdXQ8c3RyaW5nPjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSByYW5nZSBrZXkgZmllbGQgb2YgdGhlIGluZGV4LiBUaGlzIGZpZWxkIG5lZWRzIHRvIGJlIGRlZmluZWQgaW4gdGhlIGBmaWVsZHNgLlxuICAgICAgICAgKi9cbiAgICAgICAgcmFuZ2VLZXk/OiBJbnB1dDxzdHJpbmc+O1xuICAgICAgfT5cbiAgICA+XG4gID47XG4gIC8qKlxuICAgKiBDb25maWd1cmUgdGhlIHRhYmxlJ3MgbG9jYWwgc2Vjb25kYXJ5IGluZGV4ZXMuXG4gICAqXG4gICAqIFVubGlrZSBnbG9iYWwgaW5kZXhlcywgbG9jYWwgaW5kZXhlcyB1c2UgdGhlIHNhbWUgYGhhc2hLZXlgIGFzIHRoZSBgcHJpbWFyeUluZGV4YCBvZiB0aGUgdGFibGUuXG4gICAqXG4gICAqIFlvdSBjYW4gaGF2ZSB1cCB0byA1IGxvY2FsIHNlY29uZGFyeSBpbmRleGVzIHBlciB0YWJsZS4gQW5kIGVhY2ggbG9jYWwgc2Vjb25kYXJ5IGluZGV4IHNob3VsZCBoYXZlIGEgdW5pcXVlIG5hbWUuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBsb2NhbEluZGV4ZXM6IHtcbiAgICogICAgIENyZWF0ZWRBdEluZGV4OiB7IHJhbmdlS2V5OiBcImNyZWF0ZWRBdFwiIH1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBsb2NhbEluZGV4ZXM/OiBJbnB1dDxcbiAgICBSZWNvcmQ8XG4gICAgICBzdHJpbmcsXG4gICAgICBJbnB1dDx7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmFuZ2Uga2V5IGZpZWxkIG9mIHRoZSBpbmRleC4gVGhpcyBmaWVsZCBuZWVkcyB0byBiZSBkZWZpbmVkIGluIHRoZSBgZmllbGRzYC5cbiAgICAgICAgICovXG4gICAgICAgIHJhbmdlS2V5OiBJbnB1dDxzdHJpbmc+O1xuICAgICAgfT5cbiAgICA+XG4gID47XG4gIC8qKlxuICAgKiBFbmFibGUgW0R5bmFtb0RCIFN0cmVhbXNdKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9hbWF6b25keW5hbW9kYi9sYXRlc3QvZGV2ZWxvcGVyZ3VpZGUvU3RyZWFtcy5odG1sKSBmb3IgdGhlIHRhYmxlLlxuICAgKlxuICAgKiA6Ojpub3RlXG4gICAqIFN0cmVhbXMgYXJlIG5vdCBlbmFibGVkIGJ5IGRlZmF1bHQgc2luY2UgdGhlcmUncyBhIGNvc3QgYXR0YWNoZWQgdG8gc3RvcmluZyB0aGVtLlxuICAgKiA6OjpcbiAgICpcbiAgICogV2hlbiBhbiBpdGVtIGluIHRoZSB0YWJsZSBpcyBtb2RpZmllZCwgdGhlIHN0cmVhbSBjYXB0dXJlcyB0aGUgaW5mb3JtYXRpb24gYW5kIHNlbmRzIGl0IHRvIHlvdXIgc3Vic2NyaWJlciBmdW5jdGlvbi5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIFRoZSBgbmV3LWFuZC1vbGQtaW1hZ2VzYCBzdHJlYW0gdHlwZSBpcyBhIGdvb2QgZGVmYXVsdCBvcHRpb24gc2luY2UgaXQgaGFzIGJvdGggdGhlIG5ldyBhbmQgb2xkIGl0ZW1zLlxuICAgKiA6OjpcbiAgICpcbiAgICogWW91IGNhbiBjb25maWd1cmUgd2hhdCB3aWxsIGJlIHdyaXR0ZW4gdG8gdGhlIHN0cmVhbTpcbiAgICpcbiAgICogLSBgbmV3LWltYWdlYDogVGhlIGVudGlyZSBpdGVtIGFmdGVyIGl0IHdhcyBtb2RpZmllZC5cbiAgICogLSBgb2xkLWltYWdlYDogVGhlIGVudGlyZSBpdGVtIGJlZm9yZSBpdCB3YXMgbW9kaWZpZWQuXG4gICAqIC0gYG5ldy1hbmQtb2xkLWltYWdlc2A6XHRCb3RoIHRoZSBuZXcgYW5kIHRoZSBvbGQgaXRlbXMuIEEgZ29vZCBkZWZhdWx0IHRvIHVzZSBzaW5jZSBpdCBjb250YWlucyBhbGwgdGhlIGRhdGEuXG4gICAqIC0gYGtleXMtb25seWA6IE9ubHkgdGhlIGtleXMgb2YgdGhlIGZpZWxkcyBvZiB0aGUgbW9kaWZpZWQgaXRlbXMuIElmIHlvdSBhcmUgd29ycmllZCBhYm91dCB0aGUgY29zdHMsIHlvdSBjYW4gdXNlIHRoaXMgc2luY2UgaXQgc3RvcmVzIHRoZSBsZWFzdCBhbW91bnQgb2YgZGF0YS5cbiAgICogQGRlZmF1bHQgTm90IGVuYWJsZWRcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHN0cmVhbTogXCJuZXctYW5kLW9sZC1pbWFnZXNcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgc3RyZWFtPzogSW5wdXQ8XG4gICAgXCJrZXlzLW9ubHlcIiB8IFwibmV3LWltYWdlXCIgfCBcIm9sZC1pbWFnZVwiIHwgXCJuZXctYW5kLW9sZC1pbWFnZXNcIlxuICA+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0pIGhvdyB0aGlzIGNvbXBvbmVudCBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIER5bmFtb0RCIFRhYmxlIHJlc291cmNlLlxuICAgICAqL1xuICAgIHRhYmxlPzogVHJhbnNmb3JtPGF3cy5keW5hbW9kYi5UYWJsZUFyZ3M+O1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIER5bmFtb1N1YnNjcmliZUFyZ3Mge1xuICAvKipcbiAgICogRmlsdGVyIHRoZSByZWNvcmRzIHByb2Nlc3NlZCBieSB0aGUgYHN1YnNjcmliZXJgIGZ1bmN0aW9uLlxuICAgKlxuICAgKiA6Ojp0aXBcbiAgICogWW91IGNhbiBwYXNzIGluIHVwIHRvIDUgZGlmZmVyZW50IGZpbHRlcnMuXG4gICAqIDo6OlxuICAgKlxuICAgKiBZb3UgY2FuIHBhc3MgaW4gdXAgdG8gNSBkaWZmZXJlbnQgZmlsdGVyIHBvbGljaWVzLiBUaGVzZSB3aWxsIGxvZ2ljYWxseSBPUmVkIHRvZ2V0aGVyLiBNZWFuaW5nIHRoYXQgaWYgYW55IHNpbmdsZSBwb2xpY3kgbWF0Y2hlcywgdGhlIHJlY29yZCB3aWxsIGJlIHByb2Nlc3NlZC5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIExlYXJuIG1vcmUgYWJvdXQgdGhlIFtmaWx0ZXIgcnVsZSBzeW50YXhdKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9sYW1iZGEvbGF0ZXN0L2RnL2ludm9jYXRpb24tZXZlbnRmaWx0ZXJpbmcuaHRtbCNmaWx0ZXJpbmctc3ludGF4KS5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3VyIER5bmFtb0RCIHRhYmxlJ3Mgc3RyZWFtIGNvbnRhaW5zIHRoZSBmb2xsb3cgcmVjb3JkLlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZXZlbnRJRDogXCIxXCIsXG4gICAqICAgZXZlbnRWZXJzaW9uOiBcIjEuMFwiLFxuICAgKiAgIGR5bmFtb2RiOiB7XG4gICAqICAgICBBcHByb3hpbWF0ZUNyZWF0aW9uRGF0ZVRpbWU6IFwiMTY3ODgzMTIxOC4wXCIsXG4gICAqICAgICBLZXlzOiB7XG4gICAqICAgICAgIEN1c3RvbWVyTmFtZToge1xuICAgKiAgICAgICAgICAgXCJTXCI6IFwiQW55Q29tcGFueSBJbmR1c3RyaWVzXCJcbiAgICogICAgICAgfSxcbiAgICogICAgICAgTmV3SW1hZ2U6IHtcbiAgICogICAgICAgICBBY2NvdW50TWFuYWdlcjoge1xuICAgKiAgICAgICAgICAgUzogXCJQYXQgQ2FuZGVsbGFcIlxuICAgKiAgICAgICAgIH0sXG4gICAqICAgICAgICAgUGF5bWVudFRlcm1zOiB7XG4gICAqICAgICAgICAgICBTOiBcIjYwIGRheXNcIlxuICAgKiAgICAgICAgIH0sXG4gICAqICAgICAgICAgQ3VzdG9tZXJOYW1lOiB7XG4gICAqICAgICAgICAgICBTOiBcIkFueUNvbXBhbnkgSW5kdXN0cmllc1wiXG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9LFxuICAgKiAgICAgICBTZXF1ZW5jZU51bWJlcjogXCIxMTFcIixcbiAgICogICAgICAgU2l6ZUJ5dGVzOiAyNixcbiAgICogICAgICAgU3RyZWFtVmlld1R5cGU6IFwiTkVXX0lNQUdFXCJcbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFRvIHByb2Nlc3Mgb25seSB0aG9zZSByZWNvcmRzIHdoZXJlIHRoZSBgQ3VzdG9tZXJOYW1lYCBpcyBgQW55Q29tcGFueSBJbmR1c3RyaWVzYC5cblxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZmlsdGVyczogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBkeW5hbW9kYjoge1xuICAgKiAgICAgICAgIEtleXM6IHtcbiAgICogICAgICAgICAgIEN1c3RvbWVyTmFtZToge1xuICAgKiAgICAgICAgICAgICBTOiBbXCJBbnlDb21wYW55IEluZHVzdHJpZXNcIl1cbiAgICogICAgICAgICAgIH1cbiAgICogICAgICAgICB9XG4gICAqICAgICAgIH1cbiAgICogICAgIH1cbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBmaWx0ZXJzPzogSW5wdXQ8SW5wdXQ8UmVjb3JkPHN0cmluZywgYW55Pj5bXT47XG4gIC8qKlxuICAgKiBbVHJhbnNmb3JtXSgvZG9jcy9jb21wb25lbnRzI3RyYW5zZm9ybSkgaG93IHRoaXMgc3Vic2NyaXB0aW9uIGNyZWF0ZXMgaXRzIHVuZGVybHlpbmdcbiAgICogcmVzb3VyY2VzLlxuICAgKi9cbiAgdHJhbnNmb3JtPzoge1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgTGFtYmRhIEV2ZW50IFNvdXJjZSBNYXBwaW5nIHJlc291cmNlLlxuICAgICAqL1xuICAgIGV2ZW50U291cmNlTWFwcGluZz86IFRyYW5zZm9ybTxhd3MubGFtYmRhLkV2ZW50U291cmNlTWFwcGluZ0FyZ3M+O1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBgRHluYW1vYCBjb21wb25lbnQgbGV0cyB5b3UgYWRkIGFuIFtBbWF6b24gRHluYW1vREJdKGh0dHBzOi8vYXdzLmFtYXpvbi5jb20vZHluYW1vZGIvKSB0YWJsZSB0byB5b3VyIGFwcC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICMjIyMgTWluaW1hbCBleGFtcGxlXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHRhYmxlID0gbmV3IHNzdC5hd3MuRHluYW1vKFwiTXlUYWJsZVwiLCB7XG4gKiAgIGZpZWxkczoge1xuICogICAgIHVzZXJJZDogXCJzdHJpbmdcIixcbiAqICAgICBub3RlSWQ6IFwic3RyaW5nXCJcbiAqICAgfSxcbiAqICAgcHJpbWFyeUluZGV4OiB7IGhhc2hLZXk6IFwidXNlcklkXCIsIHJhbmdlS2V5OiBcIm5vdGVJZFwiIH1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBBZGQgYSBnbG9iYWwgaW5kZXhcbiAqXG4gKiBPcHRpb25hbGx5IGFkZCBhIGdsb2JhbCBpbmRleCB0byB0aGUgdGFibGUuXG4gKlxuICogYGBgdHMgezgtMTB9XG4gKiBuZXcgc3N0LmF3cy5EeW5hbW8oXCJNeVRhYmxlXCIsIHtcbiAqICAgZmllbGRzOiB7XG4gKiAgICAgdXNlcklkOiBcInN0cmluZ1wiLFxuICogICAgIG5vdGVJZDogXCJzdHJpbmdcIixcbiAqICAgICBjcmVhdGVkQXQ6IFwibnVtYmVyXCIsXG4gKiAgIH0sXG4gKiAgIHByaW1hcnlJbmRleDogeyBoYXNoS2V5OiBcInVzZXJJZFwiLCByYW5nZUtleTogXCJub3RlSWRcIiB9LFxuICogICBnbG9iYWxJbmRleGVzOiB7XG4gKiAgICAgQ3JlYXRlZEF0SW5kZXg6IHsgaGFzaEtleTogXCJ1c2VySWRcIiwgcmFuZ2VLZXk6IFwiY3JlYXRlZEF0XCIgfVxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgQWRkIGEgbG9jYWwgaW5kZXhcbiAqXG4gKiBPcHRpb25hbGx5IGFkZCBhIGxvY2FsIGluZGV4IHRvIHRoZSB0YWJsZS5cbiAqXG4gKiBgYGB0cyB7OC0xMH1cbiAqIG5ldyBzc3QuYXdzLkR5bmFtbyhcIk15VGFibGVcIiwge1xuICogICBmaWVsZHM6IHtcbiAqICAgICB1c2VySWQ6IFwic3RyaW5nXCIsXG4gKiAgICAgbm90ZUlkOiBcInN0cmluZ1wiLFxuICogICAgIGNyZWF0ZWRBdDogXCJudW1iZXJcIixcbiAqICAgfSxcbiAqICAgcHJpbWFyeUluZGV4OiB7IGhhc2hLZXk6IFwidXNlcklkXCIsIHJhbmdlS2V5OiBcIm5vdGVJZFwiIH0sXG4gKiAgIGxvY2FsSW5kZXhlczoge1xuICogICAgIENyZWF0ZWRBdEluZGV4OiB7IHJhbmdlS2V5OiBcImNyZWF0ZWRBdFwiIH1cbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFN1YnNjcmliZSB0byBhIER5bmFtb0RCIFN0cmVhbVxuICpcbiAqIFRvIHN1YnNjcmliZSB0byBhIFtEeW5hbW9EQiBTdHJlYW1dKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9hbWF6b25keW5hbW9kYi9sYXRlc3QvZGV2ZWxvcGVyZ3VpZGUvU3RyZWFtcy5odG1sKSwgc3RhcnQgYnkgZW5hYmxpbmcgaXQuXG4gKlxuICogYGBgdHMgezd9XG4gKiBjb25zdCB0YWJsZSA9IG5ldyBzc3QuYXdzLkR5bmFtbyhcIk15VGFibGVcIiwge1xuICogICBmaWVsZHM6IHtcbiAqICAgICB1c2VySWQ6IFwic3RyaW5nXCIsXG4gKiAgICAgbm90ZUlkOiBcInN0cmluZ1wiXG4gKiAgIH0sXG4gKiAgIHByaW1hcnlJbmRleDogeyBoYXNoS2V5OiBcInVzZXJJZFwiLCByYW5nZUtleTogXCJub3RlSWRcIiB9LFxuICogICBzdHJlYW06IFwibmV3LWFuZC1vbGQtaW1hZ2VzXCJcbiAqIH0pO1xuICogYGBgXG4gKlxuICogVGhlbiwgc3Vic2NyaWJpbmcgdG8gaXQuXG4gKlxuICogYGBgdHNcbiAqIHRhYmxlLnN1YnNjcmliZShcInNyYy9zdWJzY3JpYmVyLmhhbmRsZXJcIik7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIExpbmsgdGhlIHRhYmxlIHRvIGEgcmVzb3VyY2VcbiAqXG4gKiBZb3UgY2FuIGxpbmsgdGhlIHRhYmxlIHRvIG90aGVyIHJlc291cmNlcywgbGlrZSBhIGZ1bmN0aW9uIG9yIHlvdXIgTmV4dC5qcyBhcHAuXG4gKlxuICogYGBgdHNcbiAqIG5ldyBzc3QuYXdzLk5leHRqcyhcIk15V2ViXCIsIHtcbiAqICAgbGluazogW3RhYmxlXVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBPbmNlIGxpbmtlZCwgeW91IGNhbiBxdWVyeSB0aGUgdGFibGUgdGhyb3VnaCB5b3VyIGFwcC5cbiAqXG4gKiBgYGB0cyB0aXRsZT1cImFwcC9wYWdlLnRzeFwiIHsxLDd9XG4gKiBpbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gXCJzc3RcIjtcbiAqIGltcG9ydCB7IER5bmFtb0RCQ2xpZW50IH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1keW5hbW9kYlwiO1xuICogaW1wb3J0IHsgRHluYW1vREJEb2N1bWVudENsaWVudCwgUXVlcnlDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2xpYi1keW5hbW9kYlwiO1xuICpcbiAqIGNvbnN0IGNsaWVudCA9IER5bmFtb0RCRG9jdW1lbnRDbGllbnQuZnJvbShuZXcgRHluYW1vREJDbGllbnQoe30pKTtcbiAqXG4gKiBhd2FpdCBjbGllbnQuc2VuZChuZXcgUXVlcnlDb21tYW5kKHtcbiAqICAgVGFibGVOYW1lOiBSZXNvdXJjZS5NeVRhYmxlLm5hbWUsXG4gKiAgIEtleUNvbmRpdGlvbkV4cHJlc3Npb246IFwidXNlcklkID0gOnVzZXJJZFwiLFxuICogICBFeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzOiB7XG4gKiAgICAgXCI6dXNlcklkXCI6IFwibXktdXNlci1pZFwiXG4gKiAgIH1cbiAqIH0pKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgRHluYW1vXG4gIGV4dGVuZHMgQ29tcG9uZW50XG4gIGltcGxlbWVudHMgTGluay5MaW5rYWJsZSwgTGluay5BV1MuTGlua2FibGVcbntcbiAgcHJpdmF0ZSBjb25zdHJ1Y3Rvck5hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSB0YWJsZTogT3V0cHV0PGF3cy5keW5hbW9kYi5UYWJsZT47XG4gIHByaXZhdGUgaXNTdHJlYW1FbmFibGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M6IER5bmFtb0FyZ3MsXG4gICAgb3B0czogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zID0ge30sXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmF3czpEeW5hbW9cIiwgbmFtZSwgYXJncywgb3B0cyk7XG5cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xuXG4gICAgY29uc3QgdGFibGUgPSBjcmVhdGVUYWJsZSgpO1xuXG4gICAgdGhpcy5jb25zdHJ1Y3Rvck5hbWUgPSBuYW1lO1xuICAgIHRoaXMudGFibGUgPSB0YWJsZTtcbiAgICB0aGlzLmlzU3RyZWFtRW5hYmxlZCA9IEJvb2xlYW4oYXJncy5zdHJlYW0pO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlVGFibGUoKSB7XG4gICAgICByZXR1cm4gYWxsKFtcbiAgICAgICAgYXJncy5maWVsZHMsXG4gICAgICAgIGFyZ3MucHJpbWFyeUluZGV4LFxuICAgICAgICBhcmdzLmdsb2JhbEluZGV4ZXMsXG4gICAgICAgIGFyZ3MubG9jYWxJbmRleGVzLFxuICAgICAgICBhcmdzLnN0cmVhbSxcbiAgICAgIF0pLmFwcGx5KFxuICAgICAgICAoW2ZpZWxkcywgcHJpbWFyeUluZGV4LCBnbG9iYWxJbmRleGVzLCBsb2NhbEluZGV4ZXMsIHN0cmVhbV0pID0+XG4gICAgICAgICAgbmV3IGF3cy5keW5hbW9kYi5UYWJsZShcbiAgICAgICAgICAgIGAke25hbWV9VGFibGVgLFxuICAgICAgICAgICAgdHJhbnNmb3JtKGFyZ3MudHJhbnNmb3JtPy50YWJsZSwge1xuICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBPYmplY3QuZW50cmllcyhmaWVsZHMpLm1hcCgoW25hbWUsIHR5cGVdKSA9PiAoe1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZSA9PT0gXCJzdHJpbmdcIiA/IFwiU1wiIDogdHlwZSA9PT0gXCJudW1iZXJcIiA/IFwiTlwiIDogXCJCXCIsXG4gICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgYmlsbGluZ01vZGU6IFwiUEFZX1BFUl9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgIGhhc2hLZXk6IHByaW1hcnlJbmRleC5oYXNoS2V5LFxuICAgICAgICAgICAgICByYW5nZUtleTogcHJpbWFyeUluZGV4LnJhbmdlS2V5LFxuICAgICAgICAgICAgICBzdHJlYW1FbmFibGVkOiBCb29sZWFuKHN0cmVhbSksXG4gICAgICAgICAgICAgIHN0cmVhbVZpZXdUeXBlOiBzdHJlYW1cbiAgICAgICAgICAgICAgICA/IHN0cmVhbS50b1VwcGVyQ2FzZSgpLnJlcGxhY2VBbGwoXCItXCIsIFwiX1wiKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICBwb2ludEluVGltZVJlY292ZXJ5OiB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZ2xvYmFsU2Vjb25kYXJ5SW5kZXhlczogT2JqZWN0LmVudHJpZXMoZ2xvYmFsSW5kZXhlcyA/PyB7fSkubWFwKFxuICAgICAgICAgICAgICAgIChbbmFtZSwgaW5kZXhdKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgIGhhc2hLZXk6IGluZGV4Lmhhc2hLZXksXG4gICAgICAgICAgICAgICAgICByYW5nZUtleTogaW5kZXgucmFuZ2VLZXksXG4gICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uVHlwZTogXCJBTExcIixcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgbG9jYWxTZWNvbmRhcnlJbmRleGVzOiBPYmplY3QuZW50cmllcyhsb2NhbEluZGV4ZXMgPz8ge30pLm1hcChcbiAgICAgICAgICAgICAgICAoW25hbWUsIGluZGV4XSkgPT4gKHtcbiAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICByYW5nZUtleTogaW5kZXgucmFuZ2VLZXksXG4gICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uVHlwZTogXCJBTExcIixcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICAgICApLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIEFSTiBvZiB0aGUgRHluYW1vREIgVGFibGUuXG4gICAqL1xuICBwdWJsaWMgZ2V0IGFybigpIHtcbiAgICByZXR1cm4gdGhpcy50YWJsZS5hcm47XG4gIH1cblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIER5bmFtb0RCIFRhYmxlLlxuICAgKi9cbiAgcHVibGljIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLnRhYmxlLm5hbWU7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHVuZGVybHlpbmcgW3Jlc291cmNlc10oL2RvY3MvY29tcG9uZW50cy8jbm9kZXMpIHRoaXMgY29tcG9uZW50IGNyZWF0ZXMuXG4gICAqL1xuICBwdWJsaWMgZ2V0IG5vZGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBbWF6b24gRHluYW1vREIgVGFibGUuXG4gICAgICAgKi9cbiAgICAgIHRhYmxlOiB0aGlzLnRhYmxlLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIHRoaXMgdGFibGUncyBEeW5hbW9EQiBTdHJlYW0uXG4gICAqXG4gICAqIDo6Om5vdGVcbiAgICogWW91J2xsIGZpcnN0IG5lZWQgdG8gZW5hYmxlIHRoZSBgc3RyZWFtYCBiZWZvcmUgc3Vic2NyaWJpbmcgdG8gaXQuXG4gICAqIDo6OlxuICAgKlxuICAgKiBAcGFyYW0gc3Vic2NyaWJlciBUaGUgZnVuY3Rpb24gdGhhdCdsbCBiZSBub3RpZmllZC5cbiAgICogQHBhcmFtIGFyZ3MgQ29uZmlndXJlIHRoZSBzdWJzY3JpcHRpb24uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHRhYmxlLnN1YnNjcmliZShcInNyYy9zdWJzY3JpYmVyLmhhbmRsZXJcIik7XG4gICAqIGBgYFxuICAgKlxuICAgKiBBZGQgbXVsdGlwbGUgc3Vic2NyaWJlcnMuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHRhYmxlXG4gICAqICAgLnN1YnNjcmliZShcInNyYy9zdWJzY3JpYmVyMS5oYW5kbGVyXCIpXG4gICAqICAgLnN1YnNjcmliZShcInNyYy9zdWJzY3JpYmVyMi5oYW5kbGVyXCIpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQWRkIGEgZmlsdGVyIHRvIHRoZSBzdWJzY3JpcHRpb24uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHRhYmxlLnN1YnNjcmliZShcInNyYy9zdWJzY3JpYmVyLmhhbmRsZXJcIiwge1xuICAgKiAgIGZpbHRlcnM6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgZHluYW1vZGI6IHtcbiAgICogICAgICAgICBLZXlzOiB7XG4gICAqICAgICAgICAgICBDdXN0b21lck5hbWU6IHtcbiAgICogICAgICAgICAgICAgUzogW1wiQW55Q29tcGFueSBJbmR1c3RyaWVzXCJdXG4gICAqICAgICAgICAgICB9XG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9XG4gICAqICAgICB9XG4gICAqICAgXVxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqXG4gICAqIEN1c3RvbWl6ZSB0aGUgc3Vic2NyaWJlciBmdW5jdGlvbi5cbiAgICpcbiAgICogYGBganNcbiAgICogdGFibGUuc3Vic2NyaWJlKHtcbiAgICogICBoYW5kbGVyOiBcInNyYy9zdWJzY3JpYmVyLmhhbmRsZXJcIixcbiAgICogICB0aW1lb3V0OiBcIjYwIHNlY29uZHNcIlxuICAgKiB9KTtcbiAgICogYGBgXG4gICAqL1xuICBwdWJsaWMgc3Vic2NyaWJlKFxuICAgIHN1YnNjcmliZXI6IHN0cmluZyB8IEZ1bmN0aW9uQXJncyxcbiAgICBhcmdzOiBEeW5hbW9TdWJzY3JpYmVBcmdzID0ge30sXG4gICkge1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXM7XG4gICAgY29uc3QgcGFyZW50TmFtZSA9IHRoaXMuY29uc3RydWN0b3JOYW1lO1xuXG4gICAgLy8gVmFsaWRhdGUgc3RyZWFtIGlzIGVuYWJsZWRcbiAgICBpZiAoIXRoaXMuaXNTdHJlYW1FbmFibGVkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IHN1YnNjcmliZSB0byBcIiR7cGFyZW50TmFtZX1cIiBiZWNhdXNlIHN0cmVhbSBpcyBub3QgZW5hYmxlZC5gLFxuICAgICAgKTtcblxuICAgIC8vIEJ1aWxkIHN1YnNjcmliZXIgbmFtZVxuICAgIGNvbnN0IGlkID0gc2FuaXRpemVUb1Bhc2NhbENhc2UoXG4gICAgICBoYXNoU3RyaW5nVG9QcmV0dHlTdHJpbmcoSlNPTi5zdHJpbmdpZnkoYXJncy5maWx0ZXJzID8/IHt9KSwgNCksXG4gICAgKTtcblxuICAgIGNvbnN0IGZuID0gRnVuY3Rpb24uZnJvbURlZmluaXRpb24oXG4gICAgICBwYXJlbnQsXG4gICAgICBgJHtwYXJlbnROYW1lfVN1YnNjcmliZXIke2lkfWAsXG4gICAgICBzdWJzY3JpYmVyLFxuICAgICAge1xuICAgICAgICBkZXNjcmlwdGlvbjogYFN1YnNjcmliZWQgdG8gJHtwYXJlbnROYW1lfWAsXG4gICAgICAgIHBlcm1pc3Npb25zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICAgICBcImR5bmFtb2RiOkRlc2NyaWJlU3RyZWFtXCIsXG4gICAgICAgICAgICAgIFwiZHluYW1vZGI6R2V0UmVjb3Jkc1wiLFxuICAgICAgICAgICAgICBcImR5bmFtb2RiOkdldFNoYXJkSXRlcmF0b3JcIixcbiAgICAgICAgICAgICAgXCJkeW5hbW9kYjpMaXN0U3RyZWFtc1wiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHJlc291cmNlczogW3RoaXMubm9kZXMudGFibGUuc3RyZWFtQXJuXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICApO1xuICAgIG5ldyBhd3MubGFtYmRhLkV2ZW50U291cmNlTWFwcGluZyhcbiAgICAgIGAke3BhcmVudE5hbWV9RXZlbnRTb3VyY2VNYXBwaW5nJHtpZH1gLFxuICAgICAgdHJhbnNmb3JtKGFyZ3M/LnRyYW5zZm9ybT8uZXZlbnRTb3VyY2VNYXBwaW5nLCB7XG4gICAgICAgIGV2ZW50U291cmNlQXJuOiB0aGlzLm5vZGVzLnRhYmxlLnN0cmVhbUFybixcbiAgICAgICAgZnVuY3Rpb25OYW1lOiBmbi5uYW1lLFxuICAgICAgICBmaWx0ZXJDcml0ZXJpYTogYXJncz8uZmlsdGVycyAmJiB7XG4gICAgICAgICAgZmlsdGVyczogb3V0cHV0KGFyZ3MuZmlsdGVycykuYXBwbHkoKGZpbHRlcnMpID0+XG4gICAgICAgICAgICBmaWx0ZXJzLm1hcCgoZmlsdGVyKSA9PiAoe1xuICAgICAgICAgICAgICBwYXR0ZXJuOiBKU09OLnN0cmluZ2lmeShmaWx0ZXIpLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICksXG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJ0aW5nUG9zaXRpb246IFwiTEFURVNUXCIsXG4gICAgICB9KSxcbiAgICAgIHsgcGFyZW50IH0sXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHVibGljIGdldFNTVExpbmsoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgZ2V0U1NUQVdTUGVybWlzc2lvbnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgYWN0aW9uczogW1wiZHluYW1vZGI6KlwiXSxcbiAgICAgICAgcmVzb3VyY2VzOiBbdGhpcy5hcm4sIGludGVycG9sYXRlYCR7dGhpcy5hcm59LypgXSxcbiAgICAgIH0sXG4gICAgXTtcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbXBvbmVudFJlc291cmNlT3B0aW9ucywgb3V0cHV0LCBPdXRwdXQgfSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCAqIGFzIGF3cyBmcm9tIFwiQHB1bHVtaS9hd3NcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgVHJhbnNmb3JtLCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50XCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmtcIjtcbmltcG9ydCB7IElucHV0IH0gZnJvbSBcIi4uL2lucHV0LmpzXCI7XG5cbnR5cGUgQUNVID0gYCR7bnVtYmVyfSBBQ1VgO1xuXG5mdW5jdGlvbiBwYXJzZUFDVShhY3U6IEFDVSkge1xuICBjb25zdCByZXN1bHQgPSBwYXJzZUZsb2F0KGFjdS5zcGxpdChcIiBcIilbMF0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBvc3RncmVzQXJncyB7XG4gIC8qKlxuICAgKiBUaGUgUG9zdGdyZXMgZW5naW5lIHZlcnNpb24uIENoZWNrIG91dCB0aGUgW2F2YWlsYWJsZSB2ZXJzaW9ucyBpbiB5b3VyIHJlZ2lvbl0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL0FtYXpvblJEUy9sYXRlc3QvQXVyb3JhVXNlckd1aWRlL0NvbmNlcHRzLkF1cm9yYV9GZWFfUmVnaW9uc19EQi1lbmcuRmVhdHVyZS5TZXJ2ZXJsZXNzVjIuaHRtbCNDb25jZXB0cy5BdXJvcmFfRmVhX1JlZ2lvbnNfREItZW5nLkZlYXR1cmUuU2VydmVybGVzc1YyLmFwZykuXG4gICAqIEBkZWZhdWx0IGBcIjE1LjVcImBcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHZlcnNpb246IFwiMTMuOVwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICB2ZXJzaW9uPzogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIE5hbWUgb2YgYSBkYXRhYmFzZSB0aGF0IGlzIGF1dG9tYXRpY2FsbHkgY3JlYXRlZCBpbnNpZGUgdGhlIGNsdXN0ZXIuXG4gICAqXG4gICAqIFRoZSBuYW1lIG11c3QgYmVnaW4gd2l0aCBhIGxldHRlciBhbmQgY29udGFpbiBvbmx5IGxvd2VyY2FzZSBsZXR0ZXJzLCBudW1iZXJzLCBvciB1bmRlcnNjb3Jlcy4gQnkgZGVmYXVsdCwgaXQgdGFrZXMgdGhlIG5hbWUgb2YgdGhlIGFwcCwgYW5kIHJlcGxhY2VzIHRoZSBoeXBoZW5zIHdpdGggdW5kZXJzY29yZXMuXG4gICAqXG4gICAqIEBkZWZhdWx0IEJhc2VkIG9uIHRoZSBuYW1lIG9mIHRoZSBjdXJyZW50IGFwcFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZGF0YWJhc2VOYW1lOiBcImFjbWVcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZGF0YWJhc2VOYW1lPzogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIFRoZSBBdXJvcmEgU2VydmVybGVzcyB2MiBzY2FsaW5nIGNvbmZpZy4gQnkgZGVmYXVsdCwgdGhlIGNsdXN0ZXIgaGFzIG9uZSBEQiBpbnN0YW5jZSB0aGF0XG4gICAqIGlzIHVzZWQgZm9yIGJvdGggd3JpdGVzIGFuZCByZWFkcy4gVGhlIGluc3RhbmNlIGNhbiBzY2FsZSBmcm9tIHRoZSBtaW5pbXVtIG51bWJlciBvZiBBQ1VzXG4gICAqIHRvIHRoZSBtYXhpbXVtIG51bWJlciBvZiBBQ1VzLlxuICAgKlxuICAgKiA6OjpjYXV0aW9uXG4gICAqIEF1cm9yYSBTZXJ2ZXJsZXNzIHYyIGRvZXMgbm90IHNjYWxlIGRvd24gdG8gMC4gVGhlIG1pbmltdW0gY29zdCBvZiBhIFBvc3RncmVzIGNsdXN0ZXJcbiAgICogcGVyIG1vbnRoIGlzIHJvdWdobHkgYDAuNSAqICQwLjEyIHBlciBBQ1UgaG91ciAqIDI0IGhycyAqIDMwIGRheXMgPSAkNDMuMjBgLlxuICAgKiA6OjpcbiAgICpcbiAgICogQW4gQUNVIG9yIEF1cm9yYSBDYXBhY2l0eSBVbml0IGlzIGEgY29tYmluYXRpb24gb2YgQ1BVIGFuZCBSQU0uIFRoZSBjb3N0IG9mIGFuIEF1cm9yYSBTZXJ2ZXJsZXNzIHYyIGNsdXN0ZXIgaXMgYmFzZWQgb24gdGhlIEFDVSBob3Vyc1xuICAgKiB1c2VkLiBBZGRpdGlvbmFsbHksIHlvdSBhcmUgYmlsbGVkIGZvciBJL08gYW5kIHN0b3JhZ2UgdXNlZCBieSB0aGUgY2x1c3Rlci5cbiAgICogW1JlYWQgbW9yZSBoZXJlXShodHRwczovL2F3cy5hbWF6b24uY29tL3Jkcy9hdXJvcmEvcHJpY2luZy8pLlxuICAgKlxuICAgKiBFYWNoIEFDVSBpcyByb3VnaGx5IGVxdWl2YWxlbnQgdG8gMiBHQiBvZiBtZW1vcnkuIFNvIHBpY2sgdGhlIG1pbmltdW0gYW5kIG1heGltdW1cbiAgICogYmFzZWQgb24gdGhlIGJhc2VsaW5lIGFuZCBwZWFrIG1lbW9yeSB1c2FnZSBvZiB5b3VyIGFwcC5cbiAgICpcbiAgICogQGRlZmF1bHQgYCZsY3ViO21pbjogXCIwLjUgQUNVXCIsIG1heDogXCI0IEFDVVwiJnJjdWI7YFxuICAgKi9cbiAgc2NhbGluZz86IElucHV0PHtcbiAgICAvKipcbiAgICAgKiBUaGUgbWluaW11bSBudW1iZXIgb2YgQUNVcywgcmFuZ2VzIGZyb20gMC41IHRvIDEyOCwgaW4gaW5jcmVtZW50cyBvZiAwLjUuXG4gICAgICpcbiAgICAgKiBGb3IgeW91ciBwcm9kdWN0aW9uIHdvcmtsb2Fkcywgc2V0dGluZyBhIG1pbmltdW0gb2YgMC41IEFDVXMgbWlnaHQgbm90IGJlIGEgZ3JlYXQgaWRlYSBkdWVcbiAgICAgKiB0byB0aGUgZm9sbG93aW5nIHJlYXNvbnMsIHlvdSBjYW4gYWxzbyBbcmVhZCBtb3JlIGhlcmVdKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9BbWF6b25SRFMvbGF0ZXN0L0F1cm9yYVVzZXJHdWlkZS9hdXJvcmEtc2VydmVybGVzcy12Mi5zZXR0aW5nLWNhcGFjaXR5Lmh0bWwjYXVyb3JhLXNlcnZlcmxlc3MtdjIuc2V0dGluZy1jYXBhY2l0eS5pbmNvbXBhdGlibGVfcGFyYW1ldGVycykuXG4gICAgICogLSBJdCB0YWtlcyBsb25nZXIgdG8gc2NhbGUgZnJvbSBhIGxvdyBudW1iZXIgb2YgQUNVcyB0byBhIG11Y2ggaGlnaGVyIG51bWJlci5cbiAgICAgKiAtIFF1ZXJ5IHBlcmZvcm1hbmNlIGRlcGVuZHMgb24gdGhlIGJ1ZmZlciBjYWNoZS4gU28gaWYgZnJlcXVlbnRseSBhY2Nlc3NlZCBkYXRhIGNhbm5vdFxuICAgICAqICAgZml0IGludG8gdGhlIGJ1ZmZlciBjYWNoZSwgeW91IG1pZ2h0IHNlZSB1bmV2ZW4gcGVyZm9ybWFuY2UuXG4gICAgICogLSBUaGUgbWF4IGNvbm5lY3Rpb25zIGZvciBhIDAuNSBBQ1UgUG9zdGdyZXMgaW5zdGFuY2UgaXMgY2FwcGVkIGF0IDIwMDAuXG4gICAgICpcbiAgICAgKiBAZGVmYXVsdCBgMC41IEFDVWBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgc2NhbGluZzoge1xuICAgICAqICAgICBtaW46IFwiMiBBQ1VcIlxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBtaW4/OiBJbnB1dDxBQ1U+O1xuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBBQ1VzLCByYW5nZXMgZnJvbSAwLjUgdG8gMTI4LCBpbiBpbmNyZW1lbnRzIG9mIDAuNS5cbiAgICAgKlxuICAgICAqIEBkZWZhdWx0IGA0IEFDVWBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgc2NhbGluZzoge1xuICAgICAqICAgICBtYXg6IFwiMTI4IEFDVVwiXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIG1heD86IElucHV0PEFDVT47XG4gIH0+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0pIGhvdyB0aGlzIGNvbXBvbmVudCBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIFJEUyBDbHVzdGVyLlxuICAgICAqL1xuICAgIGNsdXN0ZXI/OiBUcmFuc2Zvcm08YXdzLnJkcy5DbHVzdGVyQXJncz47XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoZSBkYXRhYmFzZSBpbnN0YW5jZSBpbiB0aGUgUkRTIENsdXN0ZXIuXG4gICAgICovXG4gICAgaW5zdGFuY2U/OiBUcmFuc2Zvcm08YXdzLnJkcy5DbHVzdGVySW5zdGFuY2VBcmdzPjtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgYFBvc3RncmVzYCBjb21wb25lbnQgbGV0cyB5b3UgYWRkIGEgUG9zdGdyZXMgZGF0YWJhc2UgdG8geW91ciBhcHAgdXNpbmdcbiAqIFtBbWF6b24gQXVyb3JhIFNlcnZlcmxlc3MgdjJdKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9BbWF6b25SRFMvbGF0ZXN0L0F1cm9yYVVzZXJHdWlkZS9hdXJvcmEtc2VydmVybGVzcy12Mi5odG1sKS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICMjIyMgQ3JlYXRlIHRoZSBkYXRhYmFzZVxuICpcbiAqIGBgYGpzXG4gKiBjb25zdCBkYXRhYmFzZSA9IG5ldyBzc3QuYXdzLlBvc3RncmVzKFwiTXlEYXRhYmFzZVwiKTtcbiAqIGBgYFxuICpcbiAqICMjIyMgQ2hhbmdlIHRoZSBzY2FsaW5nIGNvbmZpZ1xuICpcbiAqIGBgYGpzXG4gKiBuZXcgc3N0LmF3cy5Qb3N0Z3JlcyhcIk15RGF0YWJhc2VcIiwge1xuICogICBzY2FsaW5nOiB7XG4gKiAgICAgbWluOiBcIjIgQUNVXCIsXG4gKiAgICAgbWF4OiBcIjEyOCBBQ1VcIlxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgTGluayB0byBhIHJlc291cmNlXG4gKlxuICogWW91IGNhbiBsaW5rIHlvdXIgZGF0YWJhc2UgdG8gb3RoZXIgcmVzb3VyY2VzLCBsaWtlIGEgZnVuY3Rpb24gb3IgeW91ciBOZXh0LmpzIGFwcC5cbiAqXG4gKiBgYGB0c1xuICogbmV3IHNzdC5hd3MuTmV4dGpzKFwiTXlXZWJcIiwge1xuICogICBsaW5rOiBbZGF0YWJhc2VdXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIE9uY2UgbGlua2VkLCB5b3UgY2FuIGNvbm5lY3QgdG8gaXQgZnJvbSB5b3VyIGZ1bmN0aW9uIGNvZGUuXG4gKlxuICogYGBgdHMgdGl0bGU9XCJhcHAvcGFnZS50c3hcIiB7MSw2LDcsOH1cbiAqIGltcG9ydCB7IFJlc291cmNlIH0gZnJvbSBcInNzdFwiO1xuICogaW1wb3J0IHsgZHJpenpsZSB9IGZyb20gXCJkcml6emxlLW9ybS9hd3MtZGF0YS1hcGkvcGdcIjtcbiAqIGltcG9ydCB7IFJEU0RhdGFDbGllbnQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LXJkcy1kYXRhXCI7XG4gKlxuICogZHJpenpsZShuZXcgUkRTRGF0YUNsaWVudCh7fSksIHtcbiAqICAgZGF0YWJhc2U6IFJlc291cmNlLk15RGF0YWJhc2UuZGF0YWJhc2UsXG4gKiAgIHNlY3JldEFybjogUmVzb3VyY2UuTXlEYXRhYmFzZS5zZWNyZXRBcm4sXG4gKiAgIHJlc291cmNlQXJuOiBSZXNvdXJjZS5NeURhdGFiYXNlLmNsdXN0ZXJBcm5cbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBQb3N0Z3Jlc1xuICBleHRlbmRzIENvbXBvbmVudFxuICBpbXBsZW1lbnRzIExpbmsuTGlua2FibGUsIExpbmsuQVdTLkxpbmthYmxlXG57XG4gIHByaXZhdGUgY2x1c3RlcjogYXdzLnJkcy5DbHVzdGVyO1xuICBwcml2YXRlIGluc3RhbmNlOiBhd3MucmRzLkNsdXN0ZXJJbnN0YW5jZTtcbiAgcHJpdmF0ZSBkYXRhYmFzZU5hbWU6IE91dHB1dDxzdHJpbmc+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhcmdzPzogUG9zdGdyZXNBcmdzLFxuICAgIG9wdHM/OiBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmF3czpQb3N0Z3Jlc1wiLCBuYW1lLCBhcmdzLCBvcHRzKTtcblxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXM7XG4gICAgY29uc3Qgc2NhbGluZyA9IG5vcm1hbGl6ZVNjYWxpbmcoKTtcbiAgICBjb25zdCB2ZXJzaW9uID0gbm9ybWFsaXplVmVyc2lvbigpO1xuICAgIGNvbnN0IGRhdGFiYXNlTmFtZSA9IG5vcm1hbGl6ZURhdGFiYXNlTmFtZSgpO1xuXG4gICAgY29uc3QgY2x1c3RlciA9IGNyZWF0ZUNsdXN0ZXIoKTtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGNyZWF0ZUluc3RhbmNlKCk7XG5cbiAgICB0aGlzLmNsdXN0ZXIgPSBjbHVzdGVyO1xuICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTtcbiAgICB0aGlzLmRhdGFiYXNlTmFtZSA9IGRhdGFiYXNlTmFtZTtcblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZVNjYWxpbmcoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3M/LnNjYWxpbmcpLmFwcGx5KChzY2FsaW5nKSA9PiAoe1xuICAgICAgICBtaW5DYXBhY2l0eTogcGFyc2VBQ1Uoc2NhbGluZz8ubWluID8/IFwiMC41IEFDVVwiKSxcbiAgICAgICAgbWF4Q2FwYWNpdHk6IHBhcnNlQUNVKHNjYWxpbmc/Lm1heCA/PyBcIjQgQUNVXCIpLFxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZVZlcnNpb24oKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3M/LnZlcnNpb24pLmFwcGx5KCh2ZXJzaW9uKSA9PiB2ZXJzaW9uID8/IFwiMTUuNVwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVEYXRhYmFzZU5hbWUoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3M/LmRhdGFiYXNlTmFtZSkuYXBwbHkoXG4gICAgICAgIChuYW1lKSA9PiBuYW1lID8/ICRhcHAubmFtZS5yZXBsYWNlQWxsKFwiLVwiLCBcIl9cIiksXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNsdXN0ZXIoKSB7XG4gICAgICByZXR1cm4gbmV3IGF3cy5yZHMuQ2x1c3RlcihcbiAgICAgICAgYCR7bmFtZX1DbHVzdGVyYCxcbiAgICAgICAgdHJhbnNmb3JtKGFyZ3M/LnRyYW5zZm9ybT8uY2x1c3Rlciwge1xuICAgICAgICAgIGVuZ2luZTogYXdzLnJkcy5FbmdpbmVUeXBlLkF1cm9yYVBvc3RncmVzcWwsXG4gICAgICAgICAgZW5naW5lTW9kZTogXCJwcm92aXNpb25lZFwiLFxuICAgICAgICAgIGVuZ2luZVZlcnNpb246IHZlcnNpb24sXG4gICAgICAgICAgZGF0YWJhc2VOYW1lLFxuICAgICAgICAgIG1hc3RlclVzZXJuYW1lOiBcInBvc3RncmVzXCIsXG4gICAgICAgICAgbWFuYWdlTWFzdGVyVXNlclBhc3N3b3JkOiB0cnVlLFxuICAgICAgICAgIHNlcnZlcmxlc3N2MlNjYWxpbmdDb25maWd1cmF0aW9uOiBzY2FsaW5nLFxuICAgICAgICAgIHNraXBGaW5hbFNuYXBzaG90OiB0cnVlLFxuICAgICAgICAgIGVuYWJsZUh0dHBFbmRwb2ludDogdHJ1ZSxcbiAgICAgICAgfSksXG4gICAgICAgIHtcbiAgICAgICAgICBwYXJlbnQsXG4gICAgICAgIH0sXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKCkge1xuICAgICAgcmV0dXJuIG5ldyBhd3MucmRzLkNsdXN0ZXJJbnN0YW5jZShcbiAgICAgICAgYCR7bmFtZX1JbnN0YW5jZWAsXG4gICAgICAgIHRyYW5zZm9ybShhcmdzPy50cmFuc2Zvcm0/Lmluc3RhbmNlLCB7XG4gICAgICAgICAgY2x1c3RlcklkZW50aWZpZXI6IGNsdXN0ZXIuaWQsXG4gICAgICAgICAgaW5zdGFuY2VDbGFzczogXCJkYi5zZXJ2ZXJsZXNzXCIsXG4gICAgICAgICAgZW5naW5lOiBhd3MucmRzLkVuZ2luZVR5cGUuQXVyb3JhUG9zdGdyZXNxbCxcbiAgICAgICAgICBlbmdpbmVWZXJzaW9uOiBjbHVzdGVyLmVuZ2luZVZlcnNpb24sXG4gICAgICAgIH0pLFxuICAgICAgICB7XG4gICAgICAgICAgcGFyZW50LFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIEFSTiBvZiB0aGUgUkRTIENsdXN0ZXIuXG4gICAqL1xuICBwdWJsaWMgZ2V0IGNsdXN0ZXJBcm4oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2x1c3Rlci5hcm47XG4gIH1cblxuICAvKipcbiAgICogVGhlIEFSTiBvZiB0aGUgbWFzdGVyIHVzZXIgc2VjcmV0LlxuICAgKi9cbiAgcHVibGljIGdldCBzZWNyZXRBcm4oKSB7XG4gICAgcmV0dXJuIHRoaXMuY2x1c3Rlci5tYXN0ZXJVc2VyU2VjcmV0c1swXS5zZWNyZXRBcm47XG4gIH1cblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICAgKi9cbiAgcHVibGljIGdldCBkYXRhYmFzZSgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhYmFzZU5hbWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG5vZGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjbHVzdGVyOiB0aGlzLmNsdXN0ZXIsXG4gICAgICBpbnN0YW5jZTogdGhpcy5pbnN0YW5jZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgZ2V0U1NUTGluaygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBjbHVzdGVyQXJuOiB0aGlzLmNsdXN0ZXJBcm4sXG4gICAgICAgIHNlY3JldEFybjogdGhpcy5zZWNyZXRBcm4sXG4gICAgICAgIGRhdGFiYXNlOiB0aGlzLmRhdGFiYXNlLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgZ2V0U1NUQVdTUGVybWlzc2lvbnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgYWN0aW9uczogW1wic2VjcmV0c21hbmFnZXI6R2V0U2VjcmV0VmFsdWVcIl0sXG4gICAgICAgIHJlc291cmNlczogW3RoaXMuY2x1c3Rlci5tYXN0ZXJVc2VyU2VjcmV0c1swXS5zZWNyZXRBcm5dLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgIFwicmRzLWRhdGE6QmF0Y2hFeGVjdXRlU3RhdGVtZW50XCIsXG4gICAgICAgICAgXCJyZHMtZGF0YTpCZWdpblRyYW5zYWN0aW9uXCIsXG4gICAgICAgICAgXCJyZHMtZGF0YTpDb21taXRUcmFuc2FjdGlvblwiLFxuICAgICAgICAgIFwicmRzLWRhdGE6RXhlY3V0ZVN0YXRlbWVudFwiLFxuICAgICAgICAgIFwicmRzLWRhdGE6Um9sbGJhY2tUcmFuc2FjdGlvblwiLFxuICAgICAgICBdLFxuICAgICAgICByZXNvdXJjZXM6IFt0aGlzLmNsdXN0ZXIuYXJuXSxcbiAgICAgIH0sXG4gICAgXTtcbiAgfVxufVxuIiwgImltcG9ydCB7IENvbXBvbmVudFJlc291cmNlT3B0aW9ucywgb3V0cHV0IH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgKiBhcyBhd3MgZnJvbSBcIkBwdWx1bWkvYXdzXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIFRyYW5zZm9ybSwgdHJhbnNmb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgTGluayB9IGZyb20gXCIuLi9saW5rXCI7XG5pbXBvcnQgdHlwZSB7IElucHV0IH0gZnJvbSBcIi4uL2lucHV0XCI7XG5pbXBvcnQgeyBGdW5jdGlvbiwgRnVuY3Rpb25BcmdzIH0gZnJvbSBcIi4vZnVuY3Rpb25cIjtcbmltcG9ydCB7IER1cmF0aW9uTWludXRlcywgdG9TZWNvbmRzIH0gZnJvbSBcIi4uL2R1cmF0aW9uXCI7XG5pbXBvcnQgeyBWaXNpYmxlRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JcIjtcblxuZXhwb3J0IGludGVyZmFjZSBRdWV1ZUFyZ3Mge1xuICAvKipcbiAgICogRklGTyBvciBfZmlyc3QtaW4tZmlyc3Qtb3V0XyBxdWV1ZXMgYXJlIGRlc2lnbmVkIHRvIGd1YXJhbnRlZSB0aGF0IG1lc3NhZ2VzIGFyZSBwcm9jZXNzZWQgZXhhY3RseSBvbmNlIGFuZCBpbiB0aGUgb3JkZXIgdGhhdCB0aGV5IGFyZSBzZW50LlxuICAgKlxuICAgKiA6OjpjYXV0aW9uXG4gICAqIENoYW5naW5nIGEgc3RhbmRhcmQgcXVldWUgdG8gYSBGSUZPIHF1ZXVlIChvciB0aGUgb3RoZXIgd2F5IGFyb3VuZCkgd2lsbCBjYXVzZSB0aGUgcXVldWUgdG8gYmUgZGVzdHJveWVkIGFuZCByZWNyZWF0ZWQuXG4gICAqIDo6OlxuICAgKlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBmaWZvOiB0cnVlXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBmaWZvPzogSW5wdXQ8Ym9vbGVhbj47XG4gIC8qKlxuICAgKiBbVHJhbnNmb3JtXSgvZG9jcy9jb21wb25lbnRzI3RyYW5zZm9ybSkgaG93IHRoaXMgY29tcG9uZW50IGNyZWF0ZXMgaXRzIHVuZGVybHlpbmdcbiAgICogcmVzb3VyY2VzLlxuICAgKi9cbiAgdHJhbnNmb3JtPzoge1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgU1FTIFF1ZXVlIHJlc291cmNlLlxuICAgICAqL1xuICAgIHF1ZXVlPzogVHJhbnNmb3JtPGF3cy5zcXMuUXVldWVBcmdzPjtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWV1ZVN1YnNjcmliZUFyZ3Mge1xuICAvKipcbiAgICogRmlsdGVyIHRoZSByZWNvcmRzIHRoYXQnbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoZSBgc3Vic2NyaWJlcmAgZnVuY3Rpb24uXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIHBhc3MgaW4gdXAgdG8gNSBkaWZmZXJlbnQgZmlsdGVycy5cbiAgICogOjo6XG4gICAqXG4gICAqIFlvdSBjYW4gcGFzcyBpbiB1cCB0byA1IGRpZmZlcmVudCBmaWx0ZXIgcG9saWNpZXMuIFRoZXNlIHdpbGwgbG9naWNhbGx5IE9SZWQgdG9nZXRoZXIuIE1lYW5pbmcgdGhhdCBpZiBhbnkgc2luZ2xlIHBvbGljeSBtYXRjaGVzLCB0aGUgcmVjb3JkIHdpbGwgYmUgcHJvY2Vzc2VkLiBMZWFybiBtb3JlIGFib3V0IHRoZSBbZmlsdGVyIHJ1bGUgc3ludGF4XShodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vbGFtYmRhL2xhdGVzdC9kZy9pbnZvY2F0aW9uLWV2ZW50ZmlsdGVyaW5nLmh0bWwjZmlsdGVyaW5nLXN5bnRheCkuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3UgUXVldWUgY29udGFpbnMgcmVjb3JkcyBpbiB0aGlzIEpTT04gZm9ybWF0LlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgUmVjb3JkTnVtYmVyOiAwMDAwLFxuICAgKiAgIFJlcXVlc3RDb2RlOiBcIkFBQUFcIixcbiAgICogICBUaW1lU3RhbXA6IFwieXl5eS1tbS1kZFRoaDptbTpzc1wiXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFRvIHByb2Nlc3Mgb25seSB0aG9zZSByZWNvcmRzIHdoZXJlIHRoZSBgUmVxdWVzdENvZGVgIGlzIGBCQkJCYC5cblxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZmlsdGVyczogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBib2R5OiB7XG4gICAqICAgICAgICAgUmVxdWVzdENvZGU6IFtcIkJCQkJcIl1cbiAgICogICAgICAgfVxuICAgKiAgICAgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQW5kIHRvIHByb2Nlc3Mgb25seSB0aG9zZSByZWNvcmRzIHdoZXJlIGBSZWNvcmROdW1iZXJgIGdyZWF0ZXIgdGhhbiBgOTk5OWAuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBmaWx0ZXJzOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIGJvZHk6IHtcbiAgICogICAgICAgICBSZWNvcmROdW1iZXI6IFt7IG51bWVyaWM6IFsgXCI+XCIsIDk5OTkgXSB9XVxuICAgKiAgICAgICB9XG4gICAqICAgICB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZmlsdGVycz86IElucHV0PElucHV0PFJlY29yZDxzdHJpbmcsIGFueT4+W10+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0pIGhvdyB0aGlzIGNvbXBvbmVudCBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIExhbWJkYSBFdmVudCBTb3VyY2UgTWFwcGluZyByZXNvdXJjZS5cbiAgICAgKi9cbiAgICBldmVudFNvdXJjZU1hcHBpbmc/OiBUcmFuc2Zvcm08YXdzLmxhbWJkYS5FdmVudFNvdXJjZU1hcHBpbmdBcmdzPjtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgYFF1ZXVlYCBjb21wb25lbnQgbGV0cyB5b3UgYWRkIGEgc2VydmVybGVzcyBxdWV1ZSB0byB5b3VyIGFwcC4gSXQgdXNlcyBbQW1hem9uIFNRU10oaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9zcXMvKS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICMjIyMgQ3JlYXRlIGEgcXVldWVcbiAqXG4gKiBgYGB0c1xuICogY29uc3QgcXVldWUgPSBuZXcgc3N0LmF3cy5RdWV1ZShcIk15UXVldWVcIik7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIE1ha2UgaXQgYSBGSUZPIHF1ZXVlXG4gKlxuICogWW91IGNhbiBvcHRpb25hbGx5IG1ha2UgaXQgYSBGSUZPIHF1ZXVlLlxuICpcbiAqIGBgYHRzIHsyfVxuICogbmV3IHNzdC5hd3MuUXVldWUoXCJNeVF1ZXVlXCIsIHtcbiAqICAgZmlmbzogdHJ1ZVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEFkZCBhIHN1YnNjcmliZXJcbiAqXG4gKiBgYGB0c1xuICogcXVldWUuc3Vic2NyaWJlKFwic3JjL3N1YnNjcmliZXIuaGFuZGxlclwiKTtcbiAqIGBgYFxuICpcbiAqICMjIyMgTGluayB0aGUgcXVldWUgdG8gYSByZXNvdXJjZVxuICpcbiAqIFlvdSBjYW4gbGluayB0aGUgcXVldWUgdG8gb3RoZXIgcmVzb3VyY2VzLCBsaWtlIGEgZnVuY3Rpb24gb3IgeW91ciBOZXh0LmpzIGFwcC5cbiAqXG4gKiBgYGB0c1xuICogbmV3IHNzdC5hd3MuTmV4dGpzKFwiTXlXZWJcIiwge1xuICogICBsaW5rOiBbcXVldWVdXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIE9uY2UgbGlua2VkLCB5b3UgY2FuIHNlbmQgbWVzc2FnZXMgdG8gdGhlIHF1ZXVlIGZyb20geW91ciBmdW5jdGlvbiBjb2RlLlxuICpcbiAqIGBgYHRzIHRpdGxlPVwiYXBwL3BhZ2UudHN4XCIgezEsN31cbiAqIGltcG9ydCB7IFJlc291cmNlIH0gZnJvbSBcInNzdFwiO1xuICogaW1wb3J0IHsgU1FTQ2xpZW50LCBTZW5kTWVzc2FnZUNvbW1hbmQgfSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LXNxc1wiO1xuICpcbiAqIGNvbnN0IHNxcyA9IG5ldyBTUVNDbGllbnQoe30pO1xuICpcbiAqIGF3YWl0IHNxcy5zZW5kKG5ldyBTZW5kTWVzc2FnZUNvbW1hbmQoe1xuICogICBRdWV1ZVVybDogUmVzb3VyY2UuTXlRdWV1ZS51cmwsXG4gKiAgIE1lc3NhZ2VCb2R5OiBcIkhlbGxvIGZyb20gTmV4dC5qcyFcIlxuICogfSkpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWV1ZVxuICBleHRlbmRzIENvbXBvbmVudFxuICBpbXBsZW1lbnRzIExpbmsuTGlua2FibGUsIExpbmsuQVdTLkxpbmthYmxlXG57XG4gIHByaXZhdGUgY29uc3RydWN0b3JOYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgcXVldWU6IGF3cy5zcXMuUXVldWU7XG4gIHByaXZhdGUgaXNTdWJzY3JpYmVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBhcmdzPzogUXVldWVBcmdzLCBvcHRzPzogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zKSB7XG4gICAgc3VwZXIoXCJzc3Q6YXdzOlF1ZXVlXCIsIG5hbWUsIGFyZ3MsIG9wdHMpO1xuXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcztcbiAgICBjb25zdCBmaWZvID0gbm9ybWFsaXplRmlmbygpO1xuXG4gICAgY29uc3QgcXVldWUgPSBjcmVhdGVRdWV1ZSgpO1xuXG4gICAgdGhpcy5jb25zdHJ1Y3Rvck5hbWUgPSBuYW1lO1xuICAgIHRoaXMucXVldWUgPSBxdWV1ZTtcblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZUZpZm8oKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3M/LmZpZm8pLmFwcGx5KCh2KSA9PiB2ID8/IGZhbHNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVRdWV1ZSgpIHtcbiAgICAgIHJldHVybiBuZXcgYXdzLnNxcy5RdWV1ZShcbiAgICAgICAgYCR7bmFtZX1RdWV1ZWAsXG4gICAgICAgIHRyYW5zZm9ybShhcmdzPy50cmFuc2Zvcm0/LnF1ZXVlLCB7XG4gICAgICAgICAgZmlmb1F1ZXVlOiBmaWZvLFxuICAgICAgICB9KSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBBUk4gb2YgdGhlIFNRUyBRdWV1ZS5cbiAgICovXG4gIHB1YmxpYyBnZXQgYXJuKCkge1xuICAgIHJldHVybiB0aGlzLnF1ZXVlLmFybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgU1FTIFF1ZXVlIFVSTC5cbiAgICovXG4gIHB1YmxpYyBnZXQgdXJsKCkge1xuICAgIHJldHVybiB0aGlzLnF1ZXVlLnVybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdW5kZXJseWluZyBbcmVzb3VyY2VzXSgvZG9jcy9jb21wb25lbnRzLyNub2RlcykgdGhpcyBjb21wb25lbnQgY3JlYXRlcy5cbiAgICovXG4gIHB1YmxpYyBnZXQgbm9kZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFtYXpvbiBTUVMgUXVldWUuXG4gICAgICAgKi9cbiAgICAgIHF1ZXVlOiB0aGlzLnF1ZXVlLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIHRoaXMgcXVldWUuXG4gICAqXG4gICAqIEBwYXJhbSBzdWJzY3JpYmVyIFRoZSBmdW5jdGlvbiB0aGF0J2xsIGJlIG5vdGlmaWVkLlxuICAgKiBAcGFyYW0gYXJncyBDb25maWd1cmUgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBganNcbiAgICogcXVldWUuc3Vic2NyaWJlKFwic3JjL3N1YnNjcmliZXIuaGFuZGxlclwiKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEFkZCBtdWx0aXBsZSBzdWJzY3JpYmVycy5cbiAgICpcbiAgICogYGBganNcbiAgICogcXVldWVcbiAgICogICAuc3Vic2NyaWJlKFwic3JjL3N1YnNjcmliZXIxLmhhbmRsZXJcIilcbiAgICogICAuc3Vic2NyaWJlKFwic3JjL3N1YnNjcmliZXIyLmhhbmRsZXJcIik7XG4gICAqIGBgYFxuICAgKlxuICAgKiBBZGQgYSBmaWx0ZXIgdG8gdGhlIHN1YnNjcmlwdGlvbi5cbiAgICpcbiAgICogYGBganNcbiAgICogcXVldWUuc3Vic2NyaWJlKFwic3JjL3N1YnNjcmliZXIuaGFuZGxlclwiLCB7XG4gICAqICAgZmlsdGVyczogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBib2R5OiB7XG4gICAqICAgICAgICAgUmVxdWVzdENvZGU6IFtcIkJCQkJcIl1cbiAgICogICAgICAgfVxuICAgKiAgICAgfVxuICAgKiAgIF1cbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBDdXN0b21pemUgdGhlIHN1YnNjcmliZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHF1ZXVlLnN1YnNjcmliZSh7XG4gICAqICAgaGFuZGxlcjogXCJzcmMvc3Vic2NyaWJlci5oYW5kbGVyXCIsXG4gICAqICAgdGltZW91dDogXCI2MCBzZWNvbmRzXCJcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKi9cbiAgcHVibGljIHN1YnNjcmliZShcbiAgICBzdWJzY3JpYmVyOiBzdHJpbmcgfCBGdW5jdGlvbkFyZ3MsXG4gICAgYXJncz86IFF1ZXVlU3Vic2NyaWJlQXJncyxcbiAgKSB7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcztcbiAgICBjb25zdCBwYXJlbnROYW1lID0gdGhpcy5jb25zdHJ1Y3Rvck5hbWU7XG5cbiAgICBpZiAodGhpcy5pc1N1YnNjcmliZWQpXG4gICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKFxuICAgICAgICBgQ2Fubm90IHN1YnNjcmliZSB0byB0aGUgXCIke3BhcmVudE5hbWV9XCIgcXVldWUgbXVsdGlwbGUgdGltZXMuIEFuIEFXUyBTUVMgcXVldWUgY2FuIG9ubHkgaGF2ZSBvbmUgc3Vic2NyaWJlci5gLFxuICAgICAgKTtcbiAgICB0aGlzLmlzU3Vic2NyaWJlZCA9IHRydWU7XG5cbiAgICBjb25zdCBmbiA9IEZ1bmN0aW9uLmZyb21EZWZpbml0aW9uKFxuICAgICAgcGFyZW50LFxuICAgICAgYCR7cGFyZW50TmFtZX1TdWJzY3JpYmVyYCxcbiAgICAgIHN1YnNjcmliZXIsXG4gICAgICB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBgU3Vic2NyaWJlZCB0byAke3BhcmVudE5hbWV9YCxcbiAgICAgICAgcGVybWlzc2lvbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgICAgIFwic3FzOkNoYW5nZU1lc3NhZ2VWaXNpYmlsaXR5XCIsXG4gICAgICAgICAgICAgIFwic3FzOkRlbGV0ZU1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgXCJzcXM6R2V0UXVldWVBdHRyaWJ1dGVzXCIsXG4gICAgICAgICAgICAgIFwic3FzOkdldFF1ZXVlVXJsXCIsXG4gICAgICAgICAgICAgIFwic3FzOlJlY2VpdmVNZXNzYWdlXCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgcmVzb3VyY2VzOiBbdGhpcy5hcm5dLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICk7XG4gICAgbmV3IGF3cy5sYW1iZGEuRXZlbnRTb3VyY2VNYXBwaW5nKFxuICAgICAgYCR7cGFyZW50TmFtZX1FdmVudFNvdXJjZU1hcHBpbmdgLFxuICAgICAgdHJhbnNmb3JtKGFyZ3M/LnRyYW5zZm9ybT8uZXZlbnRTb3VyY2VNYXBwaW5nLCB7XG4gICAgICAgIGV2ZW50U291cmNlQXJuOiB0aGlzLmFybixcbiAgICAgICAgZnVuY3Rpb25OYW1lOiBmbi5uYW1lLFxuICAgICAgICBmaWx0ZXJDcml0ZXJpYTogYXJncz8uZmlsdGVycyAmJiB7XG4gICAgICAgICAgZmlsdGVyczogb3V0cHV0KGFyZ3MuZmlsdGVycykuYXBwbHkoKGZpbHRlcnMpID0+XG4gICAgICAgICAgICBmaWx0ZXJzLm1hcCgoZmlsdGVyKSA9PiAoe1xuICAgICAgICAgICAgICBwYXR0ZXJuOiBKU09OLnN0cmluZ2lmeShmaWx0ZXIpLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICksXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICAgIHsgcGFyZW50IH0sXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgZ2V0U1NUTGluaygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgZ2V0U1NUQVdTUGVybWlzc2lvbnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHtcbiAgICAgICAgYWN0aW9uczogW1wic3FzOipcIl0sXG4gICAgICAgIHJlc291cmNlczogW3RoaXMuYXJuXSxcbiAgICAgIH0sXG4gICAgXTtcbiAgfVxufVxuIiwgImltcG9ydCB7IG91dHB1dCB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuaW1wb3J0IHsgbGF6eSB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2xhenlcIjtcblxuY29uc3QgdXNlUHJvdmlkZXJDYWNoZSA9IGxhenkoKCkgPT4gbmV3IE1hcDxzdHJpbmcsIGF3cy5Qcm92aWRlcj4oKSk7XG5cbmV4cG9ydCBjb25zdCB1c2VQcm92aWRlciA9IChyZWdpb246IGF3cy5SZWdpb24pID0+IHtcbiAgY29uc3QgY2FjaGUgPSB1c2VQcm92aWRlckNhY2hlKCk7XG4gIGNvbnN0IGV4aXN0aW5nID0gY2FjaGUuZ2V0KHJlZ2lvbik7XG4gIGlmIChleGlzdGluZykgcmV0dXJuIGV4aXN0aW5nO1xuXG4gIGNvbnN0IHByb3ZpZGVyID0gbmV3IGF3cy5Qcm92aWRlcihgQXdzUHJvdmlkZXIuc3N0LiR7cmVnaW9ufWAsIHtcbiAgICByZWdpb24sXG4gICAgZGVmYXVsdFRhZ3M6IHtcbiAgICAgIHRhZ3M6IG91dHB1dChhd3MuZ2V0RGVmYXVsdFRhZ3MoKSkuYXBwbHkoKHJlc3VsdCkgPT4gcmVzdWx0LnRhZ3MpLFxuICAgIH0sXG4gIH0pO1xuICBjYWNoZS5zZXQocmVnaW9uLCBwcm92aWRlcik7XG4gIHJldHVybiBwcm92aWRlcjtcbn07XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLCBhbGwsIG91dHB1dCB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuaW1wb3J0IHsgRG5zVmFsaWRhdGVkQ2VydGlmaWNhdGUgfSBmcm9tIFwiLi9kbnMtdmFsaWRhdGVkLWNlcnRpZmljYXRlLmpzXCI7XG5pbXBvcnQgeyBCdWNrZXQgfSBmcm9tIFwiLi9idWNrZXQuanNcIjtcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuLi9jb21wb25lbnQuanNcIjtcbmltcG9ydCB7IHNhbml0aXplVG9QYXNjYWxDYXNlIH0gZnJvbSBcIi4uL25hbWluZy5qc1wiO1xuaW1wb3J0IHsgdXNlUHJvdmlkZXIgfSBmcm9tIFwiLi9oZWxwZXJzL3Byb3ZpZGVyLmpzXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCIuLi9pbnB1dC5qc1wiO1xuXG4vKipcbiAqIFByb3BlcnRpZXMgdG8gY29uZmlndXJlIGFuIEhUVFBTIFJlZGlyZWN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSHR0cHNSZWRpcmVjdEFyZ3Mge1xuICAvKipcbiAgICogSG9zdGVkIHpvbmUgb2YgdGhlIGRvbWFpbiB3aGljaCB3aWxsIGJlIHVzZWQgdG8gY3JlYXRlIGFsaWFzIHJlY29yZChzKSBmcm9tXG4gICAqIGRvbWFpbiBuYW1lcyBpbiB0aGUgaG9zdGVkIHpvbmUgdG8gdGhlIHRhcmdldCBkb21haW4uIFRoZSBob3N0ZWQgem9uZSBtdXN0XG4gICAqIGNvbnRhaW4gZW50cmllcyBmb3IgdGhlIGRvbWFpbiBuYW1lKHMpIHN1cHBsaWVkIHRocm91Z2ggYHNvdXJjZURvbWFpbnNgIHRoYXRcbiAgICogd2lsbCByZWRpcmVjdCB0byB0aGUgdGFyZ2V0IGRvbWFpbi5cbiAgICpcbiAgICogRG9tYWluIG5hbWVzIGluIHRoZSBob3N0ZWQgem9uZSBjYW4gaW5jbHVkZSBhIHNwZWNpZmljIGRvbWFpbiAoZXhhbXBsZS5jb20pXG4gICAqIGFuZCBpdHMgc3ViZG9tYWlucyAoYWNtZS5leGFtcGxlLmNvbSwgemVuaXRoLmV4YW1wbGUuY29tKS5cbiAgICpcbiAgICovXG4gIHJlYWRvbmx5IHpvbmVJZDogSW5wdXQ8c3RyaW5nPjtcblxuICAvKipcbiAgICogVGhlIHJlZGlyZWN0IHRhcmdldCBmdWxseSBxdWFsaWZpZWQgZG9tYWluIG5hbWUgKEZRRE4pLiBBbiBhbGlhcyByZWNvcmRcbiAgICogd2lsbCBiZSBjcmVhdGVkIHRoYXQgcG9pbnRzIHRvIHlvdXIgQ2xvdWRGcm9udCBkaXN0cmlidXRpb24uIFJvb3QgZG9tYWluXG4gICAqIG9yIHN1Yi1kb21haW4gY2FuIGJlIHN1cHBsaWVkLlxuICAgKi9cbiAgcmVhZG9ubHkgdGFyZ2V0RG9tYWluOiBJbnB1dDxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBUaGUgZG9tYWluIG5hbWVzIHRoYXQgd2lsbCByZWRpcmVjdCB0byBgdGFyZ2V0RG9tYWluYFxuICAgKlxuICAgKiBAZGVmYXVsdCBEb21haW4gbmFtZSBvZiB0aGUgaG9zdGVkIHpvbmVcbiAgICovXG4gIHJlYWRvbmx5IHNvdXJjZURvbWFpbnM6IElucHV0PHN0cmluZ1tdPjtcbn1cblxuLyoqXG4gKiBBbGxvd3MgY3JlYXRpbmcgYSBkb21haW5BIC0+IGRvbWFpbkIgcmVkaXJlY3QgdXNpbmcgQ2xvdWRGcm9udCBhbmQgUzMuXG4gKiBZb3UgY2FuIHNwZWNpZnkgbXVsdGlwbGUgZG9tYWlucyB0byBiZSByZWRpcmVjdGVkLlxuICovXG5leHBvcnQgY2xhc3MgSHR0cHNSZWRpcmVjdCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhcmdzOiBIdHRwc1JlZGlyZWN0QXJncyxcbiAgICBvcHRzPzogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLFxuICApIHtcbiAgICBzdXBlcihcInNzdDphd3M6SHR0cHNSZWRpcmVjdFwiLCBuYW1lLCBhcmdzLCBvcHRzKTtcblxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXM7XG5cbiAgICBjb25zdCBjZXJ0aWZpY2F0ZSA9IG5ldyBEbnNWYWxpZGF0ZWRDZXJ0aWZpY2F0ZShcbiAgICAgIGAke25hbWV9U3NsYCxcbiAgICAgIHtcbiAgICAgICAgZG9tYWluTmFtZTogb3V0cHV0KGFyZ3Muc291cmNlRG9tYWlucykuYXBwbHkoKGRvbWFpbnMpID0+IGRvbWFpbnNbMF0pLFxuICAgICAgICBhbHRlcm5hdGl2ZU5hbWVzOiBvdXRwdXQoYXJncy5zb3VyY2VEb21haW5zKS5hcHBseSgoZG9tYWlucykgPT5cbiAgICAgICAgICBkb21haW5zLnNsaWNlKDEpLFxuICAgICAgICApLFxuICAgICAgICB6b25lSWQ6IGFyZ3Muem9uZUlkLFxuICAgICAgfSxcbiAgICAgIHsgcGFyZW50LCBwcm92aWRlcjogdXNlUHJvdmlkZXIoXCJ1cy1lYXN0LTFcIikgfSxcbiAgICApO1xuXG4gICAgY29uc3QgYnVja2V0ID0gbmV3IEJ1Y2tldChgJHtuYW1lfUJ1Y2tldGAsIHt9LCB7IHBhcmVudCB9KTtcblxuICAgIGNvbnN0IGJ1Y2tldFdlYnNpdGUgPSBuZXcgYXdzLnMzLkJ1Y2tldFdlYnNpdGVDb25maWd1cmF0aW9uVjIoXG4gICAgICBgJHtuYW1lfUJ1Y2tldFdlYnNpdGVgLFxuICAgICAge1xuICAgICAgICBidWNrZXQ6IGJ1Y2tldC5uYW1lLFxuICAgICAgICByZWRpcmVjdEFsbFJlcXVlc3RzVG86IHtcbiAgICAgICAgICBob3N0TmFtZTogYXJncy50YXJnZXREb21haW4sXG4gICAgICAgICAgcHJvdG9jb2w6IFwiaHR0cHNcIixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHBhcmVudCB9LFxuICAgICk7XG5cbiAgICBjb25zdCBkaXN0cmlidXRpb24gPSBuZXcgYXdzLmNsb3VkZnJvbnQuRGlzdHJpYnV0aW9uKFxuICAgICAgYCR7bmFtZX1EaXN0cmlidXRpb25gLFxuICAgICAge1xuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICB3YWl0Rm9yRGVwbG95bWVudDogZmFsc2UsXG4gICAgICAgIGFsaWFzZXM6IGFyZ3Muc291cmNlRG9tYWlucyxcbiAgICAgICAgcmVzdHJpY3Rpb25zOiB7XG4gICAgICAgICAgZ2VvUmVzdHJpY3Rpb246IHtcbiAgICAgICAgICAgIHJlc3RyaWN0aW9uVHlwZTogXCJub25lXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgY29tbWVudDogYWxsKFthcmdzLnRhcmdldERvbWFpbiwgYXJncy5zb3VyY2VEb21haW5zXSkuYXBwbHkoXG4gICAgICAgICAgKFt0YXJnZXREb21haW4sIHNvdXJjZURvbWFpbnNdKSA9PlxuICAgICAgICAgICAgYFJlZGlyZWN0IHRvICR7dGFyZ2V0RG9tYWlufSBmcm9tICR7c291cmNlRG9tYWlucy5qb2luKFwiLCBcIil9YCxcbiAgICAgICAgKSxcbiAgICAgICAgcHJpY2VDbGFzczogXCJQcmljZUNsYXNzX0FsbFwiLFxuICAgICAgICB2aWV3ZXJDZXJ0aWZpY2F0ZToge1xuICAgICAgICAgIGFjbUNlcnRpZmljYXRlQXJuOiBjZXJ0aWZpY2F0ZS5hcm4sXG4gICAgICAgICAgc3NsU3VwcG9ydE1ldGhvZDogXCJzbmktb25seVwiLFxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0Q2FjaGVCZWhhdmlvcjoge1xuICAgICAgICAgIGFsbG93ZWRNZXRob2RzOiBbXCJHRVRcIiwgXCJIRUFEXCIsIFwiT1BUSU9OU1wiXSxcbiAgICAgICAgICB0YXJnZXRPcmlnaW5JZDogXCJzM09yaWdpblwiLFxuICAgICAgICAgIHZpZXdlclByb3RvY29sUG9saWN5OiBcInJlZGlyZWN0LXRvLWh0dHBzXCIsXG4gICAgICAgICAgY2FjaGVkTWV0aG9kczogW1wiR0VUXCIsIFwiSEVBRFwiXSxcbiAgICAgICAgICBmb3J3YXJkZWRWYWx1ZXM6IHtcbiAgICAgICAgICAgIGNvb2tpZXM6IHsgZm9yd2FyZDogXCJub25lXCIgfSxcbiAgICAgICAgICAgIHF1ZXJ5U3RyaW5nOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBvcmlnaW5zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgb3JpZ2luSWQ6IFwiczNPcmlnaW5cIixcbiAgICAgICAgICAgIGRvbWFpbk5hbWU6IGJ1Y2tldFdlYnNpdGUud2Vic2l0ZUVuZHBvaW50LFxuICAgICAgICAgICAgY3VzdG9tT3JpZ2luQ29uZmlnOiB7XG4gICAgICAgICAgICAgIGh0dHBQb3J0OiA4MCxcbiAgICAgICAgICAgICAgaHR0cHNQb3J0OiA0NDMsXG4gICAgICAgICAgICAgIG9yaWdpblByb3RvY29sUG9saWN5OiBcImh0dHAtb25seVwiLFxuICAgICAgICAgICAgICBvcmlnaW5Tc2xQcm90b2NvbHM6IFtcIlRMU3YxLjJcIl0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAgeyBwYXJlbnQgfSxcbiAgICApO1xuXG4gICAgb3V0cHV0KGFyZ3Muc291cmNlRG9tYWlucykuYXBwbHkoKHNvdXJjZURvbWFpbnMpID0+IHtcbiAgICAgIGZvciAoY29uc3QgcmVjb3JkTmFtZSBvZiBzb3VyY2VEb21haW5zKSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBbXCJBXCIsIFwiQUFBQVwiXSkge1xuICAgICAgICAgIG5ldyBhd3Mucm91dGU1My5SZWNvcmQoXG4gICAgICAgICAgICBgJHtuYW1lfSR7dHlwZX1SZWNvcmQke3Nhbml0aXplVG9QYXNjYWxDYXNlKHJlY29yZE5hbWUpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5hbWU6IHJlY29yZE5hbWUsXG4gICAgICAgICAgICAgIHpvbmVJZDogYXJncy56b25lSWQsXG4gICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgIGFsaWFzZXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiBkaXN0cmlidXRpb24uZG9tYWluTmFtZSxcbiAgICAgICAgICAgICAgICAgIHpvbmVJZDogZGlzdHJpYnV0aW9uLmhvc3RlZFpvbmVJZCxcbiAgICAgICAgICAgICAgICAgIGV2YWx1YXRlVGFyZ2V0SGVhbHRoOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDdXN0b21SZXNvdXJjZU9wdGlvbnMsIElucHV0LCBPdXRwdXQsIGR5bmFtaWMgfSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCB7XG4gIENsb3VkRnJvbnRDbGllbnQsXG4gIEdldERpc3RyaWJ1dGlvbkNvbW1hbmQsXG59IGZyb20gXCJAYXdzLXNkay9jbGllbnQtY2xvdWRmcm9udFwiO1xuaW1wb3J0IHsgdXNlQ2xpZW50IH0gZnJvbSBcIi4uL2hlbHBlcnMvY2xpZW50LmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlzdHJpYnV0aW9uRGVwbG95bWVudFdhaXRlcklucHV0cyB7XG4gIGRpc3RyaWJ1dGlvbklkOiBJbnB1dDxJbnB1dHNbXCJkaXN0cmlidXRpb25JZFwiXT47XG4gIGV0YWc6IElucHV0PElucHV0c1tcImV0YWdcIl0+O1xuICB3YWl0OiBJbnB1dDxJbnB1dHNbXCJ3YWl0XCJdPjtcbn1cblxuaW50ZXJmYWNlIElucHV0cyB7XG4gIGRpc3RyaWJ1dGlvbklkOiBzdHJpbmc7XG4gIGV0YWc6IHN0cmluZztcbiAgd2FpdDogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIE91dHB1dHMge1xuICBpc0RvbmU6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlzdHJpYnV0aW9uRGVwbG95bWVudFdhaXRlciB7XG4gIGlzRG9uZTogT3V0cHV0PE91dHB1dHNbXCJpc0RvbmVcIl0+O1xufVxuXG5jbGFzcyBQcm92aWRlciBpbXBsZW1lbnRzIGR5bmFtaWMuUmVzb3VyY2VQcm92aWRlciB7XG4gIGFzeW5jIGNyZWF0ZShpbnB1dHM6IElucHV0cyk6IFByb21pc2U8ZHluYW1pYy5DcmVhdGVSZXN1bHQ8T3V0cHV0cz4+IHtcbiAgICBhd2FpdCB0aGlzLmhhbmRsZShpbnB1dHMpO1xuICAgIHJldHVybiB7IGlkOiBcIndhaXRlclwiLCBvdXRzOiB7IGlzRG9uZTogdHJ1ZSB9IH07XG4gIH1cblxuICBhc3luYyB1cGRhdGUoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBvbGRzOiBhbnksXG4gICAgbmV3czogSW5wdXRzLFxuICApOiBQcm9taXNlPGR5bmFtaWMuVXBkYXRlUmVzdWx0PE91dHB1dHM+PiB7XG4gICAgYXdhaXQgdGhpcy5oYW5kbGUobmV3cyk7XG4gICAgcmV0dXJuIHsgb3V0czogeyBpc0RvbmU6IHRydWUgfSB9O1xuICB9XG5cbiAgYXN5bmMgaGFuZGxlKGlucHV0czogSW5wdXRzKSB7XG4gICAgaWYgKCFpbnB1dHMud2FpdCkgcmV0dXJuO1xuXG4gICAgY29uc3QgeyBkaXN0cmlidXRpb25JZCB9ID0gaW5wdXRzO1xuICAgIGNvbnN0IGNsaWVudCA9IHVzZUNsaWVudChDbG91ZEZyb250Q2xpZW50KTtcbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG5cbiAgICBkbyB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQuc2VuZChcbiAgICAgICAgbmV3IEdldERpc3RyaWJ1dGlvbkNvbW1hbmQoe1xuICAgICAgICAgIElkOiBkaXN0cmlidXRpb25JZCxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgaWYgKHJlc3VsdC5EaXN0cmlidXRpb24/LlN0YXR1cyA9PT0gXCJEZXBsb3llZFwiKSByZXR1cm47XG5cbiAgICAgIC8vIHdhaXQgZm9yIDUgc2Vjb25kc1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwMCkpO1xuXG4gICAgICAvLyB0aW1lb3V0IGFmdGVyIDUgbWludXRlc1xuICAgIH0gd2hpbGUgKERhdGUubm93KCkgLSBzdGFydCA8IDMwMDAwMCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERpc3RyaWJ1dGlvbkRlcGxveW1lbnRXYWl0ZXIgZXh0ZW5kcyBkeW5hbWljLlJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M6IERpc3RyaWJ1dGlvbkRlcGxveW1lbnRXYWl0ZXJJbnB1dHMsXG4gICAgb3B0cz86IEN1c3RvbVJlc291cmNlT3B0aW9ucyxcbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICBuZXcgUHJvdmlkZXIoKSxcbiAgICAgIGAke25hbWV9LnNzdC5hd3MuRGlzdHJpYnV0aW9uRGVwbG95bWVudFdhaXRlcmAsXG4gICAgICBhcmdzLFxuICAgICAgb3B0cyxcbiAgICApO1xuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgT3V0cHV0LFxuICBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsXG4gIG91dHB1dCxcbiAgaW50ZXJwb2xhdGUsXG59IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuaW1wb3J0IHsgRG5zVmFsaWRhdGVkQ2VydGlmaWNhdGUgfSBmcm9tIFwiLi9kbnMtdmFsaWRhdGVkLWNlcnRpZmljYXRlLmpzXCI7XG5pbXBvcnQgeyBIdHRwc1JlZGlyZWN0IH0gZnJvbSBcIi4vaHR0cHMtcmVkaXJlY3QuanNcIjtcbmltcG9ydCB7IHVzZVByb3ZpZGVyIH0gZnJvbSBcIi4vaGVscGVycy9wcm92aWRlci5qc1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBQcmV0dGlmeSwgVHJhbnNmb3JtLCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50LmpzXCI7XG5pbXBvcnQgeyBzYW5pdGl6ZVRvUGFzY2FsQ2FzZSB9IGZyb20gXCIuLi9uYW1pbmcuanNcIjtcbmltcG9ydCB7IEhvc3RlZFpvbmVMb29rdXAgfSBmcm9tIFwiLi9wcm92aWRlcnMvaG9zdGVkLXpvbmUtbG9va3VwLmpzXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCIuLi9pbnB1dC5qc1wiO1xuaW1wb3J0IHsgRGlzdHJpYnV0aW9uRGVwbG95bWVudFdhaXRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy9kaXN0cmlidXRpb24tZGVwbG95bWVudC13YWl0ZXIuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDZG5Eb21haW5BcmdzIHtcbiAgLyoqXG4gICAqIFRoZSBjdXN0b20gZG9tYWluIHlvdSB3YW50IHRvIHVzZS4gU3VwcG9ydHMgZG9tYWlucyBob3N0ZWQgb24gW1JvdXRlIDUzXShodHRwczovL2F3cy5hbWF6b24uY29tL3JvdXRlNTMvKSBvciBvdXRzaWRlIEFXUy5cbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGRvbWFpbjogXCJkb21haW4uY29tXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGRvbWFpbk5hbWU6IElucHV0PHN0cmluZz47XG4gIC8qKlxuICAgKiBBbHRlcm5hdGUgZG9tYWlucyB0byBiZSB1c2VkLiBWaXNpdG9ycyB0byB0aGUgYWx0ZXJuYXRlIGRvbWFpbnMgd2lsbCBiZSByZWRpcmVjdGVkIHRvIHRoZVxuICAgKiBtYWluIGBkb21haW5OYW1lYC5cbiAgICpcbiAgICogOjo6bm90ZVxuICAgKiBVbmxpa2UgdGhlIGBhbGlhc2VzYCBvcHRpb24sIHRoaXMgd2lsbCByZWRpcmVjdCB2aXNpdG9ycyBiYWNrIHRvIHRoZSBtYWluIGBkb21haW5OYW1lYC5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIFVzZSB0aGlzIHRvIGNyZWF0ZSBhIGB3d3cuYCB2ZXJzaW9uIG9mIHlvdXIgZG9tYWluIGFuZCByZWRpcmVjdCB2aXNpdG9ycyB0byB0aGUgYXBleCBkb21haW4uXG4gICAqIGBgYGpzIHs0fVxuICAgKiB7XG4gICAqICAgZG9tYWluOiB7XG4gICAqICAgICBkb21haW5OYW1lOiBcImRvbWFpbi5jb21cIixcbiAgICogICAgIHJlZGlyZWN0czogW1wid3d3LmRvbWFpbi5jb21cIl1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICByZWRpcmVjdHM/OiBJbnB1dDxzdHJpbmdbXT47XG4gIC8qKlxuICAgKiBBbGlhcyBkb21haW5zIHRoYXQgc2hvdWxkIGJlIHVzZWQuIFVubGlrZSB0aGUgYHJlZGlyZWN0YCBvcHRpb24sIHRoaXMga2VlcHMgeW91ciB2aXNpdG9yc1xuICAgKiBvbiB0aGlzIGFsaWFzIGRvbWFpbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogU28gaWYgeW91ciB1c2VycyB2aXNpdCBgYXBwMi5kb21haW4uY29tYCwgdGhleSB3aWxsIHN0YXkgb24gYGFwcDIuZG9tYWluLmNvbWAgaW4gdGhlaXJcbiAgICogYnJvd3Nlci5cbiAgICogYGBganMgezR9XG4gICAqIHtcbiAgICogICBkb21haW46IHtcbiAgICogICAgIGRvbWFpbk5hbWU6IFwiYXBwMS5kb21haW4uY29tXCIsXG4gICAqICAgICBhbGlhc2VzOiBbXCJhcHAyLmRvbWFpbi5jb21cIl1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBhbGlhc2VzPzogSW5wdXQ8c3RyaW5nW10+O1xuICAvKipcbiAgICogTmFtZSBvZiB0aGUgW1JvdXRlIDUzIGhvc3RlZCB6b25lXShodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vUm91dGU1My9sYXRlc3QvRGV2ZWxvcGVyR3VpZGUvaG9zdGVkLXpvbmVzLXdvcmtpbmctd2l0aC5odG1sKSB0aGF0IGNvbnRhaW5zIHRoZSBgZG9tYWluTmFtZWAuIFlvdSBjYW4gZmluZCB0aGUgaG9zdGVkIHpvbmUgbmFtZSBpbiB0aGUgUm91dGUgNTMgcGFydCBvZiB0aGUgQVdTIENvbnNvbGUuXG5cbiAgICpcbiAgICogVXN1YWxseSB5b3VyIGRvbWFpbiBuYW1lIGlzIGluIGEgaG9zdGVkIHpvbmUgd2l0aCB0aGUgc2FtZSBuYW1lLiBGb3IgZXhhbXBsZSxcbiAgICogYGRvbWFpbi5jb21gIG1pZ2h0IGJlIGluIGEgaG9zdGVkIHpvbmUgYWxzbyBjYWxsZWQgYGRvbWFpbi5jb21gLiBTbyBieSBkZWZhdWx0LCBTU1Qgd2lsbFxuICAgKiBsb29rIGZvciBhIGhvc3RlZCB6b25lIHRoYXQgbWF0Y2hlcyB0aGUgYGRvbWFpbk5hbWVgLlxuICAgKlxuICAgKiBUaGVyZSBhcmUgY2FzZXMgd2hlcmUgdGhlc2UgbWlnaHQgbm90IGJlIHRoZSBzYW1lLiBGb3IgZXhhbXBsZSwgaWYgeW91IHVzZSBhIHN1YmRvbWFpbixcbiAgICogYGFwcC5kb21haW4uY29tYCwgdGhlIGhvc3RlZCB6b25lIG1pZ2h0IGJlIGBkb21haW4uY29tYC4gU28geW91J2xsIG5lZWQgdG8gcGFzcyBpbiB0aGVcbiAgICogaG9zdGVkIHpvbmUgbmFtZS5cbiAgICpcbiAgICogOjo6bm90ZVxuICAgKiBJZiBib3RoIHRoZSBgaG9zdGVkWm9uZWAgYW5kIGBob3N0ZWRab25lSWRgIGFyZSBzZXQsIGBob3N0ZWRab25lSWRgIHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGRlZmF1bHQgU2FtZSBhcyB0aGUgYGRvbWFpbk5hbWVgXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzIHs0fVxuICAgKiB7XG4gICAqICAgZG9tYWluOiB7XG4gICAqICAgICBkb21haW5OYW1lOiBcImFwcC5kb21haW4uY29tXCIsXG4gICAqICAgICBob3N0ZWRab25lOiBcImRvbWFpbi5jb21cIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGhvc3RlZFpvbmU/OiBJbnB1dDxzdHJpbmc+O1xuICAvKipcbiAgICogVGhlIDE0IGxldHRlciBJRCBvZiB0aGUgW1JvdXRlIDUzIGhvc3RlZCB6b25lXShodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vUm91dGU1My9sYXRlc3QvRGV2ZWxvcGVyR3VpZGUvaG9zdGVkLXpvbmVzLXdvcmtpbmctd2l0aC5odG1sKSB0aGF0IGNvbnRhaW5zIHRoZSBgZG9tYWluTmFtZWAuIFlvdSBjYW4gZmluZCB0aGUgaG9zdGVkIHpvbmUgSUQgaW4gdGhlIFJvdXRlIDUzIHBhcnQgb2YgdGhlIEFXUyBDb25zb2xlLlxuICAgKlxuICAgKiBUaGlzIG9wdGlvbiBpcyB1c2VmdWwgZm9yIGNhc2VzIHdoZXJlIHlvdSBoYXZlIG11bHRpcGxlIGhvc3RlZCB6b25lcyB0aGF0IGhhdmUgdGhlIHNhbWVcbiAgICogZG9tYWluLlxuICAgKlxuICAgKiA6Ojpub3RlXG4gICAqIElmIGJvdGggdGhlIGBob3N0ZWRab25lYCBhbmQgYGhvc3RlZFpvbmVJZGAgYXJlIHNldCwgYGhvc3RlZFpvbmVJZGAgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gICAqIDo6OlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqcyB7NH1cbiAgICoge1xuICAgKiAgIGRvbWFpbjoge1xuICAgKiAgICAgZG9tYWluTmFtZTogXCJkb21haW4uY29tXCIsXG4gICAqICAgICBob3N0ZWRab25lSWQ6IFwiWjJGRFROREFUQVFZVzJcIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGhvc3RlZFpvbmVJZD86IElucHV0PHN0cmluZz47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2RuQXJncyB7XG4gIC8qKlxuICAgKiBTZXQgYSBjdXN0b20gZG9tYWluIGZvciB5b3VyIFNTUiBzaXRlLiBTdXBwb3J0cyBkb21haW5zIGhvc3RlZCBlaXRoZXIgb25cbiAgICogW1JvdXRlIDUzXShodHRwczovL2F3cy5hbWF6b24uY29tL3JvdXRlNTMvKSBvciBvdXRzaWRlIEFXUy5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIFlvdSBjYW4gYWxzbyBtaWdyYXRlIGFuIGV4dGVybmFsbHkgaG9zdGVkIGRvbWFpbiB0byBBbWF6b24gUm91dGUgNTMgYnlcbiAgICogW2ZvbGxvd2luZyB0aGlzIGd1aWRlXShodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vUm91dGU1My9sYXRlc3QvRGV2ZWxvcGVyR3VpZGUvTWlncmF0aW5nRE5TLmh0bWwpLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGRvbWFpbjogXCJkb21haW4uY29tXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogU3BlY2lmeSB0aGUgUm91dGUgNTMgaG9zdGVkIHpvbmUgYW5kIGEgYHd3dy5gIHZlcnNpb24gb2YgdGhlIGN1c3RvbSBkb21haW4uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBkb21haW46IHtcbiAgICogICAgIGRvbWFpbk5hbWU6IFwiZG9tYWluLmNvbVwiLFxuICAgKiAgICAgaG9zdGVkWm9uZTogXCJkb21haW4uY29tXCIsXG4gICAqICAgICByZWRpcmVjdHM6IFtcInd3dy5kb21haW4uY29tXCJdXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZG9tYWluPzogSW5wdXQ8c3RyaW5nIHwgUHJldHRpZnk8Q2RuRG9tYWluQXJncz4+O1xuICAvKipcbiAgICogV2hldGhlciB0byB3YWl0IGZvciB0aGUgQ2xvdWRGcm9udCBkaXN0cmlidXRpb24gdG8gYmUgZGVwbG95ZWQgYmVmb3JlXG4gICAqIGNvbXBsZXRpbmcgdGhlIGRlcGxveW1lbnQuIFRoaXMgaXMgdXNlZnVsIGlmIHlvdSBuZWVkIHRvIHVzZSB0aGVcbiAgICogZGlzdHJpYnV0aW9uIFVSTCBpbiBvdGhlciByZXNvdXJjZXMuXG4gICAqIEBkZWZhdWx0IGB0cnVlYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB3YWl0OiBmYWxzZSxcbiAgICogYGBgXG4gICAqL1xuICB3YWl0PzogSW5wdXQ8Ym9vbGVhbj47XG4gIHRyYW5zZm9ybToge1xuICAgIGRpc3RyaWJ1dGlvbjogVHJhbnNmb3JtPGF3cy5jbG91ZGZyb250LkRpc3RyaWJ1dGlvbkFyZ3M+O1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgQ2RuIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBkaXN0cmlidXRpb246IE91dHB1dDxhd3MuY2xvdWRmcm9udC5EaXN0cmlidXRpb24+O1xuICBwcml2YXRlIF9kb21haW5Vcmw/OiBPdXRwdXQ8c3RyaW5nPjtcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGFyZ3M6IENkbkFyZ3MsIG9wdHM/OiBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMpIHtcbiAgICBzdXBlcihcInNzdDphd3M6Q0ROXCIsIG5hbWUsIGFyZ3MsIG9wdHMpO1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXM7XG5cbiAgICBjb25zdCBkb21haW4gPSBub3JtYWxpemVEb21haW4oKTtcblxuICAgIGNvbnN0IHpvbmVJZCA9IGxvb2t1cEhvc3RlZFpvbmVJZCgpO1xuICAgIGNvbnN0IGNlcnRpZmljYXRlID0gY3JlYXRlU3NsKCk7XG4gICAgY29uc3QgZGlzdHJpYnV0aW9uID0gY3JlYXRlRGlzdHJpYnV0aW9uKCk7XG4gICAgY29uc3Qgd2FpdGVyID0gY3JlYXRlRGlzdHJpYnV0aW9uRGVwbG95bWVudFdhaXRlcigpO1xuICAgIGNyZWF0ZVJvdXRlNTNSZWNvcmRzKCk7XG4gICAgY3JlYXRlUmVkaXJlY3RzKCk7XG5cbiAgICB0aGlzLmRpc3RyaWJ1dGlvbiA9IHdhaXRlci5pc0RvbmUuYXBwbHkoKCkgPT4gZGlzdHJpYnV0aW9uKTtcbiAgICB0aGlzLl9kb21haW5VcmwgPSBkb21haW4/LmRvbWFpbk5hbWVcbiAgICAgID8gaW50ZXJwb2xhdGVgaHR0cHM6Ly8ke2RvbWFpbi5kb21haW5OYW1lfWBcbiAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplRG9tYWluKCkge1xuICAgICAgaWYgKCFhcmdzLmRvbWFpbikgcmV0dXJuO1xuXG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3MuZG9tYWluKS5hcHBseSgoZG9tYWluKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgZG9tYWluID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgcmV0dXJuIHsgZG9tYWluTmFtZTogZG9tYWluLCBhbGlhc2VzOiBbXSwgcmVkaXJlY3RzOiBbXSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFkb21haW4uZG9tYWluTmFtZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBcImRvbWFpbk5hbWVcIiBmb3IgZG9tYWluLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb21haW4uaG9zdGVkWm9uZSAmJiBkb21haW4uaG9zdGVkWm9uZUlkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEbyBub3Qgc2V0IGJvdGggXCJob3N0ZWRab25lXCIgYW5kIFwiaG9zdGVkWm9uZUlkXCIuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgYWxpYXNlczogW10sIHJlZGlyZWN0czogW10sIC4uLmRvbWFpbiB9O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9va3VwSG9zdGVkWm9uZUlkKCkge1xuICAgICAgaWYgKCFkb21haW4pIHJldHVybjtcblxuICAgICAgcmV0dXJuIGRvbWFpbi5hcHBseSgoZG9tYWluKSA9PiB7XG4gICAgICAgIGlmIChkb21haW4uaG9zdGVkWm9uZUlkKSByZXR1cm4gb3V0cHV0KGRvbWFpbi5ob3N0ZWRab25lSWQpO1xuXG4gICAgICAgIHJldHVybiBuZXcgSG9zdGVkWm9uZUxvb2t1cChcbiAgICAgICAgICBgJHtuYW1lfUhvc3RlZFpvbmVMb29rdXBgLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRvbWFpbjogZG9tYWluLmhvc3RlZFpvbmUgPz8gZG9tYWluLmRvbWFpbk5hbWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgICApLnpvbmVJZDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNzbCgpIHtcbiAgICAgIGlmICghZG9tYWluIHx8ICF6b25lSWQpIHJldHVybjtcblxuICAgICAgLy8gQ2VydGlmaWNhdGVzIHVzZWQgZm9yIENsb3VkRnJvbnQgZGlzdHJpYnV0aW9ucyBhcmUgcmVxdWlyZWQgdG8gYmVcbiAgICAgIC8vIGNyZWF0ZWQgaW4gdGhlIHVzLWVhc3QtMSByZWdpb25cbiAgICAgIHJldHVybiBuZXcgRG5zVmFsaWRhdGVkQ2VydGlmaWNhdGUoXG4gICAgICAgIGAke25hbWV9U3NsYCxcbiAgICAgICAge1xuICAgICAgICAgIGRvbWFpbk5hbWU6IGRvbWFpbi5kb21haW5OYW1lLFxuICAgICAgICAgIGFsdGVybmF0aXZlTmFtZXM6IGRvbWFpbi5hbGlhc2VzLFxuICAgICAgICAgIHpvbmVJZCxcbiAgICAgICAgfSxcbiAgICAgICAgeyBwYXJlbnQsIHByb3ZpZGVyOiB1c2VQcm92aWRlcihcInVzLWVhc3QtMVwiKSB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEaXN0cmlidXRpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IGF3cy5jbG91ZGZyb250LkRpc3RyaWJ1dGlvbihcbiAgICAgICAgYCR7bmFtZX1EaXN0cmlidXRpb25gLFxuICAgICAgICB0cmFuc2Zvcm0oYXJncy50cmFuc2Zvcm0uZGlzdHJpYnV0aW9uLCB7XG4gICAgICAgICAgZGVmYXVsdENhY2hlQmVoYXZpb3I6IHtcbiAgICAgICAgICAgIGFsbG93ZWRNZXRob2RzOiBbXSxcbiAgICAgICAgICAgIGNhY2hlZE1ldGhvZHM6IFtdLFxuICAgICAgICAgICAgdGFyZ2V0T3JpZ2luSWQ6IFwicGxhY2Vob2xkZXJcIixcbiAgICAgICAgICAgIHZpZXdlclByb3RvY29sUG9saWN5OiBcInJlZGlyZWN0LXRvLWh0dHBzXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgIG9yaWdpbnM6IFtdLFxuICAgICAgICAgIHJlc3RyaWN0aW9uczoge1xuICAgICAgICAgICAgZ2VvUmVzdHJpY3Rpb246IHtcbiAgICAgICAgICAgICAgcmVzdHJpY3Rpb25UeXBlOiBcIm5vbmVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhbGlhc2VzOiBkb21haW5cbiAgICAgICAgICAgID8gb3V0cHV0KGRvbWFpbikuYXBwbHkoKGRvbWFpbikgPT4gW1xuICAgICAgICAgICAgICAgIGRvbWFpbi5kb21haW5OYW1lLFxuICAgICAgICAgICAgICAgIC4uLmRvbWFpbi5hbGlhc2VzLFxuICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICB2aWV3ZXJDZXJ0aWZpY2F0ZTogY2VydGlmaWNhdGVcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGFjbUNlcnRpZmljYXRlQXJuOiBjZXJ0aWZpY2F0ZS5hcm4sXG4gICAgICAgICAgICAgICAgc3NsU3VwcG9ydE1ldGhvZDogXCJzbmktb25seVwiLFxuICAgICAgICAgICAgICAgIG1pbmltdW1Qcm90b2NvbFZlcnNpb246IFwiVExTdjEuMl8yMDIxXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgY2xvdWRmcm9udERlZmF1bHRDZXJ0aWZpY2F0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICB3YWl0Rm9yRGVwbG95bWVudDogZmFsc2UsXG4gICAgICAgIH0pLFxuICAgICAgICB7XG4gICAgICAgICAgcGFyZW50LFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEaXN0cmlidXRpb25EZXBsb3ltZW50V2FpdGVyKCkge1xuICAgICAgcmV0dXJuIG91dHB1dChhcmdzLndhaXQpLmFwcGx5KCh3YWl0KSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgRGlzdHJpYnV0aW9uRGVwbG95bWVudFdhaXRlcihcbiAgICAgICAgICBgJHtuYW1lfVdhaXRlcmAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlzdHJpYnV0aW9uSWQ6IGRpc3RyaWJ1dGlvbi5pZCxcbiAgICAgICAgICAgIGV0YWc6IGRpc3RyaWJ1dGlvbi5ldGFnLFxuICAgICAgICAgICAgd2FpdDogd2FpdCA/PyB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBwYXJlbnQsIGlnbm9yZUNoYW5nZXM6IHdhaXQgPyB1bmRlZmluZWQgOiBbXCIqXCJdIH0sXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVSb3V0ZTUzUmVjb3JkcygpOiB2b2lkIHtcbiAgICAgIGlmICghZG9tYWluIHx8ICF6b25lSWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgRE5TIHJlY29yZFxuICAgICAgb3V0cHV0KGRvbWFpbikuYXBwbHkoKGRvbWFpbikgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IHJlY29yZE5hbWUgb2YgW2RvbWFpbi5kb21haW5OYW1lLCAuLi5kb21haW4uYWxpYXNlc10pIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHR5cGUgb2YgW1wiQVwiLCBcIkFBQUFcIl0pIHtcbiAgICAgICAgICAgIG5ldyBhd3Mucm91dGU1My5SZWNvcmQoXG4gICAgICAgICAgICAgIGAke25hbWV9JHt0eXBlfVJlY29yZCR7c2FuaXRpemVUb1Bhc2NhbENhc2UocmVjb3JkTmFtZSl9YCxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IHJlY29yZE5hbWUsXG4gICAgICAgICAgICAgICAgem9uZUlkLFxuICAgICAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICAgICAgYWxpYXNlczogW1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBkaXN0cmlidXRpb24uZG9tYWluTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgem9uZUlkOiBkaXN0cmlidXRpb24uaG9zdGVkWm9uZUlkLFxuICAgICAgICAgICAgICAgICAgICBldmFsdWF0ZVRhcmdldEhlYWx0aDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVSZWRpcmVjdHMoKTogdm9pZCB7XG4gICAgICBpZiAoIXpvbmVJZCB8fCAhZG9tYWluKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgb3V0cHV0KGRvbWFpbikuYXBwbHkoKGRvbWFpbikgPT4ge1xuICAgICAgICBpZiAoZG9tYWluLnJlZGlyZWN0cy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgICAgICBuZXcgSHR0cHNSZWRpcmVjdChcbiAgICAgICAgICBgJHtuYW1lfVJlZGlyZWN0YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB6b25lSWQsXG4gICAgICAgICAgICBzb3VyY2VEb21haW5zOiBkb21haW4ucmVkaXJlY3RzLFxuICAgICAgICAgICAgdGFyZ2V0RG9tYWluOiBkb21haW4uZG9tYWluTmFtZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgcGFyZW50IH0sXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIENsb3VkRnJvbnQgVVJMIG9mIHRoZSB3ZWJzaXRlLlxuICAgKi9cbiAgcHVibGljIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIGludGVycG9sYXRlYGh0dHBzOi8vJHt0aGlzLmRpc3RyaWJ1dGlvbi5kb21haW5OYW1lfWA7XG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlIGN1c3RvbSBkb21haW4gaXMgZW5hYmxlZCwgdGhpcyBpcyB0aGUgVVJMIG9mIHRoZSB3ZWJzaXRlIHdpdGggdGhlXG4gICAqIGN1c3RvbSBkb21haW4uXG4gICAqL1xuICBwdWJsaWMgZ2V0IGRvbWFpblVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZG9tYWluVXJsO1xuICB9XG5cbiAgcHVibGljIGdldCBub2RlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzdHJpYnV0aW9uOiB0aGlzLmRpc3RyaWJ1dGlvbixcbiAgICB9O1xuICB9XG59XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLCBhbGwsIG91dHB1dCB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBQcmV0dGlmeSwgVHJhbnNmb3JtLCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50XCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmtcIjtcbmltcG9ydCB0eXBlIHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXRcIjtcbmltcG9ydCB7IENkbiwgQ2RuRG9tYWluQXJncyB9IGZyb20gXCIuL2NkblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJvdXRlckFyZ3Mge1xuICAvKipcbiAgICogU2V0IGEgY3VzdG9tIGRvbWFpbiBmb3IgeW91ciBSb3V0ZXIuIFN1cHBvcnRzIGRvbWFpbnMgaG9zdGVkIGVpdGhlciBvblxuICAgKiBbUm91dGUgNTNdKGh0dHBzOi8vYXdzLmFtYXpvbi5jb20vcm91dGU1My8pIG9yIG91dHNpZGUgQVdTLlxuICAgKlxuICAgKiA6Ojp0aXBcbiAgICogWW91IGNhbiBhbHNvIG1pZ3JhdGUgYW4gZXh0ZXJuYWxseSBob3N0ZWQgZG9tYWluIHRvIEFtYXpvbiBSb3V0ZSA1MyBieVxuICAgKiBbZm9sbG93aW5nIHRoaXMgZ3VpZGVdKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9Sb3V0ZTUzL2xhdGVzdC9EZXZlbG9wZXJHdWlkZS9NaWdyYXRpbmdETlMuaHRtbCkuXG4gICAqIDo6OlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZG9tYWluOiBcImRvbWFpbi5jb21cIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTcGVjaWZ5IHRoZSBSb3V0ZSA1MyBob3N0ZWQgem9uZSBhbmQgYSBgd3d3LmAgdmVyc2lvbiBvZiB0aGUgY3VzdG9tIGRvbWFpbi5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGRvbWFpbjoge1xuICAgKiAgICAgZG9tYWluTmFtZTogXCJkb21haW4uY29tXCIsXG4gICAqICAgICBob3N0ZWRab25lOiBcImRvbWFpbi5jb21cIixcbiAgICogICAgIHJlZGlyZWN0czogW1wid3d3LmRvbWFpbi5jb21cIl1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBkb21haW4/OiBJbnB1dDxzdHJpbmcgfCBQcmV0dGlmeTxDZG5Eb21haW5BcmdzPj47XG4gIC8qKlxuICAgKiBBIG1hcCBvZiByb3V0ZXMgdG8gdGhlaXIgZGVzdGluYXRpb25zLiBUaGUgX2tleV8gaXMgdGhlIHJvdXRlIHBhdGggYW5kIHRoZVxuICAgKiBfdmFsdWVfIGlzIHRoZSBkZXN0aW5hdGlvbiBVUkwuIEFsbCByb3V0ZXMgbmVlZCB0byBzdGFydCB3aXRoIGAvYC5cbiAgICpcbiAgICogV2hlbiByb3V0ZXIgcmVjZWl2ZXMgYSByZXF1ZXN0LCB0aGUgcmVxdWVzdGVkIHBhdGggaXMgY29tcGFyZWQgd2l0aCBwYXRoIHBhdHRlcm5zXG4gICAqIGluIHRoZSBvcmRlciB0aGV5IGFyZSBsaXN0ZWQuIFRoZSBmaXJzdCBtYXRjaCBkZXRlcm1pbmVzIHdoaWNoIFVSTCB0aGVcbiAgICogcmVxdWVzdCBpcyByb3V0ZWQgdG8uXG4gICAqXG4gICAqIDo6OnRpcFtEZWZhdWx0IFJvdXRlXVxuICAgKiBUaGUgYC8qYCByb3V0ZSBpcyBhIGRlZmF1bHQgb3IgY2F0Y2gtYWxsIHJvdXRlLlxuICAgKiA6OjpcbiAgICpcbiAgICogIFRoZSBgLypgIHJvdXRlIGlzIGEgX2RlZmF1bHRfIHJvdXRlLCBtZWFuaW5nIHRoYXQgaWYgbm8gcm91dGVzIG1hdGNoLCB0aGUgYC8qYCByb3V0ZSB3aWxsIGJlIHVzZWQuIEl0IGRvZXMgbm90IG1hdHRlciB3aGVyZSB0aGUgYC8qYCByb3V0ZSBpcyBsaXN0ZWQgaW4gdGhlIHJvdXRlcyBvYmplY3QuXG4gICAqXG4gICAqIDo6Om5vdGVcbiAgICogSWYgeW91IGRvbid0IGhhdmUgYSBgLypgIHJvdXRlLCB5b3UnbGwgZ2V0IGEgNDA0IGVycm9yIGZvciBhbnkgcmVxdWVzdHMgdGhhdCBkb24ndCBtYXRjaCBhIHJvdXRlLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogU3VwcG9zZSB5b3UgaGF2ZSB0aGUgZm9sbG93aW5nIHRocmVlIHJvdXRlcy5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHJvdXRlczoge1xuICAgKiAgICAgXCIvYXBpLyouanNvblwiOiBcImV4YW1wbGUxLmNvbVwiLFxuICAgKiAgICAgXCIvYXBpLypcIjogXCJleGFtcGxlMi5jb21cIixcbiAgICogICAgIFwiLyoueG1sXCI6IFwiZXhhbXBsZTMuY29tXCIsXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEEgcmVxdWVzdCB0byBgL2FwaS9zYW1wbGUueG1sYCB3aWxsIG1hdGNoIGAvYXBpLypgIGZpcnN0IGFuZCByb3V0ZSB0byBpdDsgZXZlbiB0aG91Z2ggaXQgbWF0Y2hlcyBgLyoueG1sYC5cbiAgICpcbiAgICogIEhvd2V2ZXIgZm9yIHRoaXMgY2FzZSwgYSByZXF1ZXN0IHRvIGAvYXBpL3VzZXJzYCB3aWxsIHJvdXRlIHRvIGAvYXBpLypgIGV2ZW4gdGhvdWdoIGl0IGNvbWVzIGFmdGVyIGAvKmAuIFRoaXMgaXMgYmVjYXVzZSB0aGUgYC8qYCByb3V0ZSBpcyB0aGUgZGVmYXVsdCByb3V0ZS5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHJvdXRlczoge1xuICAgKiAgICAgXCIvKlwiOiBcIm15YXBwLmNvbVwiLFxuICAgKiAgICAgXCIvYXBpLypcIjogZnVuY3Rpb24udXJsXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgcm91dGVzOiBJbnB1dDxSZWNvcmQ8c3RyaW5nLCBJbnB1dDxzdHJpbmc+Pj47XG4gIC8qKlxuICAgKiBbVHJhbnNmb3JtXSgvZG9jcy9jb21wb25lbnRzI3RyYW5zZm9ybSkgaG93IHRoaXMgY29tcG9uZW50IGNyZWF0ZXMgaXRzIHVuZGVybHlpbmdcbiAgICogcmVzb3VyY2VzLlxuICAgKi9cbiAgdHJhbnNmb3JtPzoge1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgQ2FjaGUgUG9saWN5IHRoYXQncyBhdHRhY2hlZCB0byBlYWNoIENsb3VkRnJvbnQgYmVoYXZpb3IuXG4gICAgICovXG4gICAgY2FjaGVQb2xpY3k/OiBUcmFuc2Zvcm08YXdzLmNsb3VkZnJvbnQuQ2FjaGVQb2xpY3lBcmdzPjtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgYFJvdXRlcmAgY29tcG9uZW50IGxldHMgeW91IHVzZSBhIENsb3VkRnJvbnQgZGlzdHJpYnV0aW9uIHRvIHJvdXRlIHJlcXVlc3RzIHRvIGRpZmZlcmVudFxuICogcGFydHMgb2YgeW91ciBhcHAuXG4gKlxuICogWW91IGNhbiB1c2UgdGhpcyB0aGUgYHJvdXRlc2AgdG8gcm91dGUgdG8gZnVuY3Rpb24gVVJMcywgb3RoZXIgZG9tYWlucywgb3IgYW55IGNvbXBvbmVudCB0aGF0IGhhcyBhIFVSTC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICMjIyMgTWluaW1hbCBleGFtcGxlXG4gKlxuICogYGBgdHNcbiAqIG5ldyBzc3QuYXdzLlJvdXRlcihcIk15Um91dGVyXCIsIHtcbiAqICAgcm91dGVzOiB7XG4gKiAgICAgXCIvKlwiOiBcInNvbWUtaW50ZXJuYWwtc2VydmljZS5jb21cIlxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgUm91dGUgdG8gYSBmdW5jdGlvbiBVUkxcbiAqXG4gKiBgYGB0c1xuICogY29uc3QgZnVuY3Rpb24gPSBuZXcgc3N0LmF3cy5GdW5jdGlvbihcIk15RnVuY3Rpb25cIiwge1xuICogICBoYW5kbGVyOiBcInNyYy9hcGkuaGFuZGxlclwiLFxuICogICB1cmw6IHRydWUsXG4gKiB9KTtcbiAqXG4gKiBuZXcgc3N0LmF3cy5Sb3V0ZXIoXCJNeVJvdXRlclwiLCB7XG4gKiAgIHJvdXRlczoge1xuICogICAgIFwiLypcIjogZnVuY3Rpb24udXJsXG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBSb3V0ZSBhbGwgQVBJIHJlcXVlc3RzIHNlcGFyYXRlbHlcbiAqXG4gKiBgYGB0cyB7NH1cbiAqIG5ldyBzc3QuYXdzLlJvdXRlcihcIk15Um91dGVyXCIsIHtcbiAqICAgcm91dGVzOiB7XG4gKiAgICAgXCIvKlwiOiBcIm15YXBwLmNvbVwiLFxuICogICAgIFwiL2FwaS8qXCI6IGZ1bmN0aW9uLnVybFxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgQWRkIGEgY3VzdG9tIGRvbWFpblxuICpcbiAqIGBgYHRzIHsyfVxuICogbmV3IHNzdC5hd3MuUm91dGVyKFwiTXlSb3V0ZXJcIiwge1xuICogICBkb21haW46IFwibXlhcHAuY29tXCIsXG4gKiAgIHJvdXRlczoge1xuICogICAgIFwiLypcIjogZnVuY3Rpb24udXJsXG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSb3V0ZXIgZXh0ZW5kcyBDb21wb25lbnQgaW1wbGVtZW50cyBMaW5rLkxpbmthYmxlIHtcbiAgcHJpdmF0ZSBjZG46IENkbjtcbiAgcHJpdmF0ZSBjYWNoZVBvbGljeTogYXdzLmNsb3VkZnJvbnQuQ2FjaGVQb2xpY3k7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M6IFJvdXRlckFyZ3MsXG4gICAgb3B0czogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zID0ge30sXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmF3czpSb3V0ZXJcIiwgbmFtZSwgYXJncywgb3B0cyk7XG5cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xuXG4gICAgdmFsaWRhdGVSb3V0ZXMoKTtcblxuICAgIGNvbnN0IGNhY2hlUG9saWN5ID0gY3JlYXRlQ2FjaGVQb2xpY3koKTtcbiAgICBjb25zdCBjZG4gPSBjcmVhdGVDZG4oKTtcblxuICAgIHRoaXMuY2FjaGVQb2xpY3kgPSBjYWNoZVBvbGljeTtcbiAgICB0aGlzLmNkbiA9IGNkbjtcblxuICAgIGZ1bmN0aW9uIHZhbGlkYXRlUm91dGVzKCkge1xuICAgICAgb3V0cHV0KGFyZ3Mucm91dGVzKS5hcHBseSgocm91dGVzKSA9PiB7XG4gICAgICAgIE9iamVjdC5rZXlzKHJvdXRlcykubWFwKChwYXRoKSA9PiB7XG4gICAgICAgICAgaWYgKCFwYXRoLnN0YXJ0c1dpdGgoXCIvXCIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBJbiBcIiR7bmFtZX1cIiBSb3V0ZXIsIHRoZSByb3V0ZSBwYXRoIFwiJHtwYXRofVwiIG11c3Qgc3RhcnQgd2l0aCBhIFwiL1wiYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNhY2hlUG9saWN5KCkge1xuICAgICAgcmV0dXJuIG5ldyBhd3MuY2xvdWRmcm9udC5DYWNoZVBvbGljeShcbiAgICAgICAgYCR7bmFtZX1DYWNoZVBvbGljeWAsXG4gICAgICAgIHRyYW5zZm9ybShhcmdzLnRyYW5zZm9ybT8uY2FjaGVQb2xpY3ksIHtcbiAgICAgICAgICBjb21tZW50OiBgJHtuYW1lfSByb3V0ZXIgY2FjaGUgcG9saWN5YCxcbiAgICAgICAgICBkZWZhdWx0VHRsOiAwLFxuICAgICAgICAgIG1heFR0bDogMzE1MzYwMDAsIC8vIDEgeWVhclxuICAgICAgICAgIG1pblR0bDogMCxcbiAgICAgICAgICBwYXJhbWV0ZXJzSW5DYWNoZUtleUFuZEZvcndhcmRlZFRvT3JpZ2luOiB7XG4gICAgICAgICAgICBjb29raWVzQ29uZmlnOiB7XG4gICAgICAgICAgICAgIGNvb2tpZUJlaGF2aW9yOiBcIm5vbmVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoZWFkZXJzQ29uZmlnOiB7XG4gICAgICAgICAgICAgIGhlYWRlckJlaGF2aW9yOiBcIm5vbmVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBxdWVyeVN0cmluZ3NDb25maWc6IHtcbiAgICAgICAgICAgICAgcXVlcnlTdHJpbmdCZWhhdmlvcjogXCJhbGxcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbmFibGVBY2NlcHRFbmNvZGluZ0Jyb3RsaTogdHJ1ZSxcbiAgICAgICAgICAgIGVuYWJsZUFjY2VwdEVuY29kaW5nR3ppcDogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2RuKCkge1xuICAgICAgY29uc3Qgb3JpZ2lucyA9IGJ1aWxkT3JpZ2lucygpO1xuICAgICAgY29uc3QgYmVoYXZpb3JzID0gYnVpbGRCZWhhdmlvcnMoKTtcblxuICAgICAgcmV0dXJuIG5ldyBDZG4oXG4gICAgICAgIGAke25hbWV9Q2RuYCxcbiAgICAgICAge1xuICAgICAgICAgIGRvbWFpbjogYXJncy5kb21haW4sXG4gICAgICAgICAgd2FpdDogdHJ1ZSxcbiAgICAgICAgICB0cmFuc2Zvcm06IHtcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbjogKGRpc3RyaWJ1dGlvbikgPT4gKHtcbiAgICAgICAgICAgICAgLi4uZGlzdHJpYnV0aW9uLFxuICAgICAgICAgICAgICBjb21tZW50OiBgJHtuYW1lfSByb3V0ZXJgLFxuICAgICAgICAgICAgICBvcmlnaW5zLFxuICAgICAgICAgICAgICBkZWZhdWx0Q2FjaGVCZWhhdmlvcjogYmVoYXZpb3JzLmFwcGx5KFxuICAgICAgICAgICAgICAgIChiZWhhdmlvcnMpID0+IGJlaGF2aW9ycy5maW5kKChiKSA9PiAhYi5wYXRoUGF0dGVybikhLFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBvcmRlcmVkQ2FjaGVCZWhhdmlvcnM6IGJlaGF2aW9ycy5hcHBseShcbiAgICAgICAgICAgICAgICAoYmVoYXZpb3JzKSA9PlxuICAgICAgICAgICAgICAgICAgYmVoYXZpb3JzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAgICAgKGIpID0+IGIucGF0aFBhdHRlcm4sXG4gICAgICAgICAgICAgICAgICApIGFzIGF3cy50eXBlcy5pbnB1dC5jbG91ZGZyb250LkRpc3RyaWJ1dGlvbk9yZGVyZWRDYWNoZUJlaGF2aW9yW10sXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZE9yaWdpbnMoKSB7XG4gICAgICBjb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICAgICAgICBjdXN0b21PcmlnaW5Db25maWc6IHtcbiAgICAgICAgICBodHRwUG9ydDogODAsXG4gICAgICAgICAgaHR0cHNQb3J0OiA0NDMsXG4gICAgICAgICAgb3JpZ2luUHJvdG9jb2xQb2xpY3k6IFwiaHR0cHMtb25seVwiLFxuICAgICAgICAgIG9yaWdpblJlYWRUaW1lb3V0OiAyMCxcbiAgICAgICAgICBvcmlnaW5Tc2xQcm90b2NvbHM6IFtcIlRMU3YxLjJcIl0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3Mucm91dGVzKS5hcHBseSgocm91dGVzKSA9PiB7XG4gICAgICAgIGNvbnN0IG9yaWdpbnMgPSBPYmplY3QuZW50cmllcyhyb3V0ZXMpLm1hcCgoW3BhdGgsIHVybF0pID0+ICh7XG4gICAgICAgICAgb3JpZ2luSWQ6IHBhdGgsXG4gICAgICAgICAgZG9tYWluTmFtZTogbmV3IFVSTCh1cmwpLmhvc3QsXG4gICAgICAgICAgLi4uZGVmYXVsdENvbmZpZyxcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIGlmICghcm91dGVzW1wiLypcIl0pIHtcbiAgICAgICAgICBvcmlnaW5zLnB1c2goe1xuICAgICAgICAgICAgb3JpZ2luSWQ6IFwiLypcIixcbiAgICAgICAgICAgIGRvbWFpbk5hbWU6IFwiZG8tbm90LWV4aXN0XCIsXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q29uZmlnLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcmlnaW5zO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRCZWhhdmlvcnMoKSB7XG4gICAgICBjb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICAgICAgICB2aWV3ZXJQcm90b2NvbFBvbGljeTogXCJyZWRpcmVjdC10by1odHRwc1wiLFxuICAgICAgICBhbGxvd2VkTWV0aG9kczogW1xuICAgICAgICAgIFwiREVMRVRFXCIsXG4gICAgICAgICAgXCJHRVRcIixcbiAgICAgICAgICBcIkhFQURcIixcbiAgICAgICAgICBcIk9QVElPTlNcIixcbiAgICAgICAgICBcIlBBVENIXCIsXG4gICAgICAgICAgXCJQT1NUXCIsXG4gICAgICAgICAgXCJQVVRcIixcbiAgICAgICAgXSxcbiAgICAgICAgY2FjaGVkTWV0aG9kczogW1wiR0VUXCIsIFwiSEVBRFwiXSxcbiAgICAgICAgZGVmYXVsdFR0bDogMCxcbiAgICAgICAgY29tcHJlc3M6IHRydWUsXG4gICAgICAgIC8vIENsb3VkRnJvbnQncyBNYW5hZ2VkLUFsbFZpZXdlckV4Y2VwdEhvc3RIZWFkZXIgcG9saWN5XG4gICAgICAgIGNhY2hlUG9saWN5SWQ6IGNhY2hlUG9saWN5LmlkLFxuICAgICAgICBvcmlnaW5SZXF1ZXN0UG9saWN5SWQ6IFwiYjY4OWIwYTgtNTNkMC00MGFiLWJhZjItNjg3MzhlMjk2NmFjXCIsXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3Mucm91dGVzKS5hcHBseSgocm91dGVzKSA9PiB7XG4gICAgICAgIGNvbnN0IGJlaGF2aW9ycyA9IE9iamVjdC5lbnRyaWVzKHJvdXRlcykubWFwKChbcGF0aF0pID0+ICh7XG4gICAgICAgICAgLi4uKHBhdGggPT09IFwiLypcIiA/IHt9IDogeyBwYXRoUGF0dGVybjogcGF0aCB9KSxcbiAgICAgICAgICB0YXJnZXRPcmlnaW5JZDogcGF0aCxcbiAgICAgICAgICAuLi5kZWZhdWx0Q29uZmlnLFxuICAgICAgICB9KSk7XG5cbiAgICAgICAgaWYgKCFyb3V0ZXNbXCIvKlwiXSkge1xuICAgICAgICAgIGJlaGF2aW9ycy5wdXNoKHtcbiAgICAgICAgICAgIHRhcmdldE9yaWdpbklkOiBcIi8qXCIsXG4gICAgICAgICAgICAuLi5kZWZhdWx0Q29uZmlnLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiZWhhdmlvcnM7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIFVSTCBvZiB0aGUgUm91dGVyLlxuICAgKlxuICAgKiBJZiB0aGUgYGRvbWFpbmAgaXMgc2V0LCB0aGlzIGlzIHRoZSBVUkwgd2l0aCB0aGUgY3VzdG9tIGRvbWFpbi5cbiAgICogT3RoZXJ3aXNlLCBpdCdzIHRoZSBhdXRvZ2VuZXJhdGVkIENsb3VkRnJvbnQgVVJMLlxuICAgKi9cbiAgcHVibGljIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIGFsbChbdGhpcy5jZG4uZG9tYWluVXJsLCB0aGlzLmNkbi51cmxdKS5hcHBseShcbiAgICAgIChbZG9tYWluVXJsLCB1cmxdKSA9PiBkb21haW5VcmwgPz8gdXJsLFxuICAgICk7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHB1YmxpYyBnZXRTU1RMaW5rKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsIG91dHB1dCB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBUcmFuc2Zvcm0sIHRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRcIjtcbmltcG9ydCB7IExpbmsgfSBmcm9tIFwiLi4vbGlua1wiO1xuaW1wb3J0IHR5cGUgeyBJbnB1dCB9IGZyb20gXCIuLi9pbnB1dFwiO1xuaW1wb3J0IHsgRnVuY3Rpb24sIEZ1bmN0aW9uQXJncyB9IGZyb20gXCIuL2Z1bmN0aW9uXCI7XG5pbXBvcnQgeyBoYXNoU3RyaW5nVG9QcmV0dHlTdHJpbmcsIHNhbml0aXplVG9QYXNjYWxDYXNlIH0gZnJvbSBcIi4uL25hbWluZ1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNuc1RvcGljQXJncyB7XG4gIC8qKlxuICAgKiBGSUZPIChGaXJzdC1Jbi1GaXJzdC1PdXQpIHRvcGljcyBhcmUgZGVzaWduZWQgdG8gcHJvdmlkZSBzdHJpY3QgbWVzc2FnZSBvcmRlcmluZy5cbiAgICpcbiAgICogOjo6Y2F1dGlvblxuICAgKiBDaGFuZ2luZyBhIHN0YW5kYXJkIHRvcGljIHRvIGEgRklGTyB0b3BpYyBvciB0aGUgb3RoZXIgd2F5IGFyb3VuZCB3aWxsIHJlc3VsdCBpbiB0aGUgZGVzdHJ1Y3Rpb24gYW5kIHJlY3JlYXRpb24gb2YgdGhlIHRvcGljLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGRlZmF1bHQgYGZhbHNlYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZmlmbzogdHJ1ZVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZmlmbz86IElucHV0PGJvb2xlYW4+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0pIGhvdyB0aGlzIGNvbXBvbmVudCBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIFNOUyBUb3BpYyByZXNvdXJjZS5cbiAgICAgKi9cbiAgICB0b3BpYz86IFRyYW5zZm9ybTxhd3Muc25zLlRvcGljQXJncz47XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU25zVG9waWNTdWJzY3JpYmVBcmdzIHtcbiAgLyoqXG4gICAqIEZpbHRlciB0aGUgbWVzc2FnZXMgdGhhdCdsbCBiZSBwcm9jZXNzZWQgYnkgdGhlIGBzdWJzY3JpYmVyYCBmdW5jdGlvbi5cbiAgICpcbiAgICogSWYgYW55IHNpbmdsZSBwcm9wZXJ0eSBpbiB0aGUgZmlsdGVyIGRvZXNuJ3QgbWF0Y2hcbiAgICogYW4gYXR0cmlidXRlIGFzc2lnbmVkIHRvIHRoZSBtZXNzYWdlLCB0aGVuIHRoZSBwb2xpY3kgcmVqZWN0cyB0aGUgbWVzc2FnZS5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIExlYXJuIG1vcmUgYWJvdXQgW3N1YnNjcmlwdGlvbiBmaWx0ZXIgcG9saWNpZXNdKGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9zbnMvbGF0ZXN0L2RnL3Nucy1zdWJzY3JpcHRpb24tZmlsdGVyLXBvbGljaWVzLmh0bWwpLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogRm9yIGV4YW1wbGUsIGlmIHlvdXIgU05TIFRvcGljIG1lc3NhZ2UgY29udGFpbnMgdGhpcyBpbiBhIEpTT04gZm9ybWF0LlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgc3RvcmU6IFwiZXhhbXBsZV9jb3JwXCIsXG4gICAqICAgZXZlbnQ6IFwib3JkZXItcGxhY2VkXCIsXG4gICAqICAgY3VzdG9tZXJfaW50ZXJlc3RzOiBbXG4gICAqICAgICAgXCJzb2NjZXJcIixcbiAgICogICAgICBcInJ1Z2J5XCIsXG4gICAqICAgICAgXCJob2NrZXlcIlxuICAgKiAgIF0sXG4gICAqICAgcHJpY2VfdXNkOiAyMTAuNzVcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogVGhlbiB0aGlzIGZpbHRlciBwb2xpY3kgYWNjZXB0cyB0aGUgbWVzc2FnZS5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGZpbHRlcjoge1xuICAgKiAgICAgc3RvcmU6IFtcImV4YW1wbGVfY29ycFwiXSxcbiAgICogICAgIGV2ZW50OiBbe1wiYW55dGhpbmctYnV0XCI6IFwib3JkZXJfY2FuY2VsbGVkXCJ9XSxcbiAgICogICAgIGN1c3RvbWVyX2ludGVyZXN0czogW1xuICAgKiAgICAgICAgXCJydWdieVwiLFxuICAgKiAgICAgICAgXCJmb290YmFsbFwiLFxuICAgKiAgICAgICAgXCJiYXNlYmFsbFwiXG4gICAqICAgICBdLFxuICAgKiAgICAgcHJpY2VfdXNkOiBbe251bWVyaWM6IFtcIj49XCIsIDEwMF19XVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGZpbHRlcj86IElucHV0PFJlY29yZDxzdHJpbmcsIGFueT4+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0pIGhvdyB0aGlzIHN1YnNjcmlwdGlvbiBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIFNOUyBUb3BpYyBTdWJzY3JpcHRpb24gcmVzb3VyY2UuXG4gICAgICovXG4gICAgc3Vic2NyaXB0aW9uPzogVHJhbnNmb3JtPGF3cy5zbnMuVG9waWNTdWJzY3JpcHRpb25BcmdzPjtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgYFNuc1RvcGljYCBjb21wb25lbnQgbGV0cyB5b3UgYWRkIGFuIFtBbWF6b24gU05TIFRvcGljXShodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vc25zL2xhdGVzdC9kZy9zbnMtY3JlYXRlLXRvcGljLmh0bWwpIHRvIHlvdXIgYXBwLlxuICpcbiAqIDo6Om5vdGVcbiAqIFRoZSBkaWZmZXJlbmNlIGJldHdlZW4gYW4gYFNuc1RvcGljYCBhbmQgYSBgUXVldWVgIGlzIHRoYXQgd2l0aCBhIHRvcGljIHlvdSBjYW4gZGVsaXZlciBtZXNzYWdlcyB0byBtdWx0aXBsZSBzdWJzY3JpYmVycy5cbiAqIDo6OlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogIyMjIyBDcmVhdGUgYSB0b3BpY1xuICpcbiAqIGBgYHRzXG4gKiBjb25zdCB0b3BpYyA9IG5ldyBzc3QuYXdzLlNuc1RvcGljKFwiTXlUb3BpY1wiKTtcbiAqIGBgYFxuICpcbiAqICMjIyMgTWFrZSBpdCBhIEZJRk8gdG9waWNcbiAqXG4gKiBZb3UgY2FuIG9wdGlvbmFsbHkgbWFrZSBpdCBhIEZJRk8gdG9waWMuXG4gKlxuICogYGBgdHMgezJ9XG4gKiBuZXcgc3N0LmF3cy5TbnNUb3BpYyhcIk15VG9waWNcIiwge1xuICogICBmaWZvOiB0cnVlXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgQWRkIGEgc3Vic2NyaWJlclxuICpcbiAqIGBgYHRzXG4gKiB0b3BpYy5zdWJzY3JpYmUoXCJzcmMvc3Vic2NyaWJlci5oYW5kbGVyXCIpO1xuICogYGBgXG4gKlxuICogIyMjIyBMaW5rIHRoZSB0b3BpYyB0byBhIHJlc291cmNlXG4gKlxuICogWW91IGNhbiBsaW5rIHRoZSB0b3BpYyB0byBvdGhlciByZXNvdXJjZXMsIGxpa2UgYSBmdW5jdGlvbiBvciB5b3VyIE5leHQuanMgYXBwLlxuICpcbiAqIGBgYHRzXG4gKiBuZXcgc3N0LmF3cy5OZXh0anMoXCJNeVdlYlwiLCB7XG4gKiAgIGxpbms6IFt0b3BpY11cbiAqIH0pO1xuICogYGBgXG4gKlxuICogT25jZSBsaW5rZWQsIHlvdSBjYW4gcHVibGlzaCBtZXNzYWdlcyB0byB0aGUgdG9waWMgZnJvbSB5b3VyIGZ1bmN0aW9uIGNvZGUuXG4gKlxuICogYGBgdHMgdGl0bGU9XCJhcHAvcGFnZS50c3hcIiB7MSw3fVxuICogaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tIFwic3N0XCI7XG4gKiBpbXBvcnQgeyBTTlNDbGllbnQsIFB1Ymxpc2hDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zbnNcIjtcbiAqXG4gKiBjb25zdCBzbnMgPSBuZXcgU05TQ2xpZW50KHt9KTtcbiAqXG4gKiBhd2FpdCBzbnMuc2VuZChuZXcgUHVibGlzaENvbW1hbmQoe1xuICogICBUb3BpY0FybjogUmVzb3VyY2UuTXlUb3BpYy5hcm4sXG4gKiAgIE1lc3NhZ2U6IFwiSGVsbG8gZnJvbSBOZXh0LmpzIVwiXG4gKiB9KSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFNuc1RvcGljXG4gIGV4dGVuZHMgQ29tcG9uZW50XG4gIGltcGxlbWVudHMgTGluay5MaW5rYWJsZSwgTGluay5BV1MuTGlua2FibGVcbntcbiAgcHJpdmF0ZSBjb25zdHJ1Y3Rvck5hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSB0b3BpYzogYXdzLnNucy5Ub3BpYztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogU25zVG9waWNBcmdzID0ge30sXG4gICAgb3B0czogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zID0ge30sXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmF3czpTbnNUb3BpY1wiLCBuYW1lLCBhcmdzLCBvcHRzKTtcblxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXM7XG4gICAgY29uc3QgZmlmbyA9IG5vcm1hbGl6ZUZpZm8oKTtcblxuICAgIGNvbnN0IHRvcGljID0gY3JlYXRlVG9waWMoKTtcblxuICAgIHRoaXMuY29uc3RydWN0b3JOYW1lID0gbmFtZTtcbiAgICB0aGlzLnRvcGljID0gdG9waWM7XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVGaWZvKCkge1xuICAgICAgcmV0dXJuIG91dHB1dChhcmdzLmZpZm8pLmFwcGx5KCh2KSA9PiB2ID8/IGZhbHNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVUb3BpYygpIHtcbiAgICAgIHJldHVybiBuZXcgYXdzLnNucy5Ub3BpYyhcbiAgICAgICAgYCR7bmFtZX1Ub3BpY2AsXG4gICAgICAgIHRyYW5zZm9ybShhcmdzLnRyYW5zZm9ybT8udG9waWMsIHtcbiAgICAgICAgICBmaWZvVG9waWM6IGZpZm8sXG4gICAgICAgIH0pLFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIEFSTiBvZiB0aGUgU05TIFRvcGljLlxuICAgKi9cbiAgcHVibGljIGdldCBhcm4oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9waWMuYXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBTTlMgVG9waWMuXG4gICAqL1xuICBwdWJsaWMgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9waWMubmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdW5kZXJseWluZyBbcmVzb3VyY2VzXSgvZG9jcy9jb21wb25lbnRzLyNub2RlcykgdGhpcyBjb21wb25lbnQgY3JlYXRlcy5cbiAgICovXG4gIHB1YmxpYyBnZXQgbm9kZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFtYXpvbiBTTlMgVG9waWMuXG4gICAgICAgKi9cbiAgICAgIHRvcGljOiB0aGlzLnRvcGljLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlcyB0byB0aGlzIFNOUyBUb3BpYy5cbiAgICpcbiAgICogQHBhcmFtIHN1YnNjcmliZXIgVGhlIGZ1bmN0aW9uIHRoYXQnbGwgYmUgbm90aWZpZWQuXG4gICAqIEBwYXJhbSBhcmdzIENvbmZpZ3VyZSB0aGUgc3Vic2NyaXB0aW9uLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB0b3BpYy5zdWJzY3JpYmUoXCJzcmMvc3Vic2NyaWJlci5oYW5kbGVyXCIpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQWRkIG11bHRpcGxlIHN1YnNjcmliZXJzLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB0b3BpY1xuICAgKiAgIC5zdWJzY3JpYmUoXCJzcmMvc3Vic2NyaWJlcjEuaGFuZGxlclwiKVxuICAgKiAgIC5zdWJzY3JpYmUoXCJzcmMvc3Vic2NyaWJlcjIuaGFuZGxlclwiKTtcbiAgICogYGBgXG4gICAqXG4gICAqIEFkZCBhIGZpbHRlciB0byB0aGUgc3Vic2NyaXB0aW9uLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB0b3BpYy5zdWJzY3JpYmUoXCJzcmMvc3Vic2NyaWJlci5oYW5kbGVyXCIsIHtcbiAgICogICBmaWx0ZXI6IHtcbiAgICogICAgIHByaWNlX3VzZDogW3tudW1lcmljOiBbXCI+PVwiLCAxMDBdfV1cbiAgICogICB9XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICpcbiAgICogQ3VzdG9taXplIHRoZSBzdWJzY3JpYmVyIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB0b3BpYy5zdWJzY3JpYmUoe1xuICAgKiAgIGhhbmRsZXI6IFwic3JjL3N1YnNjcmliZXIuaGFuZGxlclwiLFxuICAgKiAgIHRpbWVvdXQ6IFwiNjAgc2Vjb25kc1wiXG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICovXG4gIHB1YmxpYyBzdWJzY3JpYmUoXG4gICAgc3Vic2NyaWJlcjogc3RyaW5nIHwgRnVuY3Rpb25BcmdzLFxuICAgIGFyZ3M6IFNuc1RvcGljU3Vic2NyaWJlQXJncyA9IHt9LFxuICApIHtcbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xuICAgIGNvbnN0IHBhcmVudE5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yTmFtZTtcblxuICAgIC8vIEJ1aWxkIHN1YnNjcmliZXIgbmFtZVxuICAgIGNvbnN0IGlkID0gc2FuaXRpemVUb1Bhc2NhbENhc2UoXG4gICAgICBoYXNoU3RyaW5nVG9QcmV0dHlTdHJpbmcoSlNPTi5zdHJpbmdpZnkoYXJncy5maWx0ZXIgPz8ge30pLCA0KSxcbiAgICApO1xuXG4gICAgY29uc3QgZm4gPSBGdW5jdGlvbi5mcm9tRGVmaW5pdGlvbihcbiAgICAgIHBhcmVudCxcbiAgICAgIGAke3BhcmVudE5hbWV9U3Vic2NyaWJlciR7aWR9YCxcbiAgICAgIHN1YnNjcmliZXIsXG4gICAgICB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBgU3Vic2NyaWJlZCB0byAke3BhcmVudE5hbWV9YCxcbiAgICAgIH0sXG4gICAgKTtcbiAgICBjb25zdCBwZXJtaXNzaW9uID0gbmV3IGF3cy5sYW1iZGEuUGVybWlzc2lvbihcbiAgICAgIGAke3BhcmVudE5hbWV9U3Vic2NyaWJlciR7aWR9UGVybWlzc2lvbnNgLFxuICAgICAge1xuICAgICAgICBhY3Rpb246IFwibGFtYmRhOkludm9rZUZ1bmN0aW9uXCIsXG4gICAgICAgIGZ1bmN0aW9uOiBmbi5hcm4sXG4gICAgICAgIHByaW5jaXBhbDogXCJzbnMuYW1hem9uYXdzLmNvbVwiLFxuICAgICAgICBzb3VyY2VBcm46IHRoaXMuYXJuLFxuICAgICAgfSxcbiAgICAgIHsgcGFyZW50IH0sXG4gICAgKTtcbiAgICBuZXcgYXdzLnNucy5Ub3BpY1N1YnNjcmlwdGlvbihcbiAgICAgIGAke3BhcmVudE5hbWV9U3Vic2NyaXB0aW9uJHtpZH1gLFxuICAgICAgdHJhbnNmb3JtKGFyZ3M/LnRyYW5zZm9ybT8uc3Vic2NyaXB0aW9uLCB7XG4gICAgICAgIHRvcGljOiB0aGlzLnRvcGljLmFybixcbiAgICAgICAgcHJvdG9jb2w6IFwibGFtYmRhXCIsXG4gICAgICAgIGVuZHBvaW50OiBmbi5hcm4sXG4gICAgICAgIGZpbHRlclBvbGljeTogSlNPTi5zdHJpbmdpZnkoYXJncy5maWx0ZXIgPz8ge30pLFxuICAgICAgfSksXG4gICAgICB7IHBhcmVudCwgZGVwZW5kc09uOiBbcGVybWlzc2lvbl0gfSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHB1YmxpYyBnZXRTU1RMaW5rKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIGFybjogdGhpcy5hcm4sXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHB1YmxpYyBnZXRTU1RBV1NQZXJtaXNzaW9ucygpIHtcbiAgICByZXR1cm4gW1xuICAgICAge1xuICAgICAgICBhY3Rpb25zOiBbXCJzbnM6KlwiXSxcbiAgICAgICAgcmVzb3VyY2VzOiBbdGhpcy5hcm5dLFxuICAgICAgfSxcbiAgICBdO1xuICB9XG59XG4iLCAiaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHsgQ3VzdG9tUmVzb3VyY2VPcHRpb25zLCBJbnB1dCwgZHluYW1pYyB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0IHsgUzNDbGllbnQsIFB1dE9iamVjdENvbW1hbmQsIFMzIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zM1wiO1xuaW1wb3J0IHsgdXNlQ2xpZW50IH0gZnJvbSBcIi4uL2hlbHBlcnMvY2xpZW50LmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnVja2V0RmlsZSB7XG4gIHNvdXJjZTogc3RyaW5nO1xuICBrZXk6IHN0cmluZztcbiAgY2FjaGVDb250cm9sPzogc3RyaW5nO1xuICBjb250ZW50VHlwZTogc3RyaW5nO1xuICBoYXNoPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJ1Y2tldEZpbGVzSW5wdXRzIHtcbiAgYnVja2V0TmFtZTogSW5wdXQ8c3RyaW5nPjtcbiAgZmlsZXM6IElucHV0PEJ1Y2tldEZpbGVbXT47XG59XG5cbmludGVyZmFjZSBJbnB1dHMge1xuICBidWNrZXROYW1lOiBzdHJpbmc7XG4gIGZpbGVzOiBCdWNrZXRGaWxlW107XG59XG5cbmNsYXNzIFByb3ZpZGVyIGltcGxlbWVudHMgZHluYW1pYy5SZXNvdXJjZVByb3ZpZGVyIHtcbiAgYXN5bmMgY3JlYXRlKGlucHV0czogSW5wdXRzKTogUHJvbWlzZTxkeW5hbWljLkNyZWF0ZVJlc3VsdD4ge1xuICAgIGF3YWl0IHRoaXMudXBsb2FkKGlucHV0cy5idWNrZXROYW1lLCBpbnB1dHMuZmlsZXMsIFtdKTtcbiAgICByZXR1cm4geyBpZDogXCJmaWxlc1wiIH07XG4gIH1cblxuICBhc3luYyB1cGRhdGUoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBvbGRzOiBJbnB1dHMsXG4gICAgbmV3czogSW5wdXRzLFxuICApOiBQcm9taXNlPGR5bmFtaWMuVXBkYXRlUmVzdWx0PiB7XG4gICAgYXdhaXQgdGhpcy51cGxvYWQoXG4gICAgICBuZXdzLmJ1Y2tldE5hbWUsXG4gICAgICBuZXdzLmZpbGVzLFxuICAgICAgbmV3cy5idWNrZXROYW1lID09PSBvbGRzLmJ1Y2tldE5hbWUgPyBvbGRzLmZpbGVzIDogW10sXG4gICAgKTtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBhc3luYyB1cGxvYWQoXG4gICAgYnVja2V0TmFtZTogc3RyaW5nLFxuICAgIGZpbGVzOiBCdWNrZXRGaWxlW10sXG4gICAgb2xkRmlsZXM6IEJ1Y2tldEZpbGVbXSxcbiAgKSB7XG4gICAgY29uc3Qgb2xkRmlsZXNNYXAgPSBuZXcgTWFwKG9sZEZpbGVzLm1hcCgoZikgPT4gW2Yua2V5LCBmXSkpO1xuXG4gICAgY29uc3QgczMgPSB1c2VDbGllbnQoUzNDbGllbnQpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgZmlsZXMubWFwKGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgIGNvbnN0IG9sZEZpbGUgPSBvbGRGaWxlc01hcC5nZXQoZmlsZS5rZXkpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgb2xkRmlsZSAmJlxuICAgICAgICAgIG9sZEZpbGUuaGFzaCA9PT0gZmlsZS5oYXNoICYmXG4gICAgICAgICAgb2xkRmlsZS5jYWNoZUNvbnRyb2wgPT09IGZpbGUuY2FjaGVDb250cm9sICYmXG4gICAgICAgICAgb2xkRmlsZS5jb250ZW50VHlwZSA9PT0gZmlsZS5jb250ZW50VHlwZVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBzMy5zZW5kKFxuICAgICAgICAgIG5ldyBQdXRPYmplY3RDb21tYW5kKHtcbiAgICAgICAgICAgIEJ1Y2tldDogYnVja2V0TmFtZSxcbiAgICAgICAgICAgIEtleTogZmlsZS5rZXksXG4gICAgICAgICAgICBCb2R5OiBhd2FpdCBmcy5wcm9taXNlcy5yZWFkRmlsZShmaWxlLnNvdXJjZSksXG4gICAgICAgICAgICBDYWNoZUNvbnRyb2w6IGZpbGUuY2FjaGVDb250cm9sLFxuICAgICAgICAgICAgQ29udGVudFR5cGU6IGZpbGUuY29udGVudFR5cGUsXG4gICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgICB9KSxcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCdWNrZXRGaWxlcyBleHRlbmRzIGR5bmFtaWMuUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogQnVja2V0RmlsZXNJbnB1dHMsXG4gICAgb3B0cz86IEN1c3RvbVJlc291cmNlT3B0aW9ucyxcbiAgKSB7XG4gICAgc3VwZXIobmV3IFByb3ZpZGVyKCksIGAke25hbWV9LnNzdC5hd3MuQnVja2V0RmlsZXNgLCBhcmdzLCBvcHRzKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEN1c3RvbVJlc291cmNlT3B0aW9ucywgSW5wdXQsIGR5bmFtaWMsIG91dHB1dCB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0IHtcbiAgQ2xvdWRGcm9udENsaWVudCxcbiAgQ3JlYXRlSW52YWxpZGF0aW9uQ29tbWFuZCxcbiAgd2FpdFVudGlsSW52YWxpZGF0aW9uQ29tcGxldGVkLFxufSBmcm9tIFwiQGF3cy1zZGsvY2xpZW50LWNsb3VkZnJvbnRcIjtcbmltcG9ydCB7IHVzZUNsaWVudCB9IGZyb20gXCIuLi9oZWxwZXJzL2NsaWVudC5qc1wiO1xuXG4vLyBDbG91ZEZyb250IGFsbG93cyB5b3UgdG8gc3BlY2lmeSB1cCB0byAzLDAwMCBwYXRocyBpbiBhIHNpbmdsZSBpbnZhbGlkYXRpb25cbi8vIGh0dHBzOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9BbWF6b25DbG91ZEZyb250L2xhdGVzdC9EZXZlbG9wZXJHdWlkZS9jbG91ZGZyb250LWxpbWl0cy5odG1sI2xpbWl0cy1pbnZhbGlkYXRpb25zXG5jb25zdCBGSUxFX0xJTUlUID0gMzAwMDtcbmNvbnN0IFdJTERDQVJEX0xJTUlUID0gMTU7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGlzdHJpYnV0aW9uSW52YWxpZGF0aW9uSW5wdXRzIHtcbiAgZGlzdHJpYnV0aW9uSWQ6IElucHV0PElucHV0c1tcImRpc3RyaWJ1dGlvbklkXCJdPjtcbiAgcGF0aHM6IElucHV0PElucHV0c1tcInBhdGhzXCJdPjtcbiAgd2FpdDogSW5wdXQ8SW5wdXRzW1wid2FpdFwiXT47XG4gIHZlcnNpb246IElucHV0PElucHV0c1tcInZlcnNpb25cIl0+O1xufVxuXG5pbnRlcmZhY2UgSW5wdXRzIHtcbiAgZGlzdHJpYnV0aW9uSWQ6IHN0cmluZztcbiAgcGF0aHM6IHN0cmluZ1tdO1xuICB3YWl0OiBib29sZWFuO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59XG5cbmNsYXNzIFByb3ZpZGVyIGltcGxlbWVudHMgZHluYW1pYy5SZXNvdXJjZVByb3ZpZGVyIHtcbiAgYXN5bmMgY3JlYXRlKGlucHV0czogSW5wdXRzKTogUHJvbWlzZTxkeW5hbWljLkNyZWF0ZVJlc3VsdD4ge1xuICAgIGF3YWl0IHRoaXMuaGFuZGxlKGlucHV0cyk7XG4gICAgcmV0dXJuIHsgaWQ6IFwiaW52YWxpZGF0aW9uXCIgfTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZShcbiAgICBpZDogc3RyaW5nLFxuICAgIG9sZHM6IGFueSxcbiAgICBuZXdzOiBJbnB1dHMsXG4gICk6IFByb21pc2U8ZHluYW1pYy5VcGRhdGVSZXN1bHQ+IHtcbiAgICBhd2FpdCB0aGlzLmhhbmRsZShuZXdzKTtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBhc3luYyBoYW5kbGUoaW5wdXRzOiBJbnB1dHMpIHtcbiAgICBjb25zdCBjbGllbnQgPSB1c2VDbGllbnQoQ2xvdWRGcm9udENsaWVudCk7XG4gICAgY29uc3QgaWRzID0gYXdhaXQgdGhpcy5pbnZhbGlkYXRlKGNsaWVudCwgaW5wdXRzKTtcbiAgICBpZiAoaW5wdXRzLndhaXQpIHtcbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvckludmFsaWRhdGlvbihjbGllbnQsIGlucHV0cywgaWRzKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBpbnZhbGlkYXRlKGNsaWVudDogQ2xvdWRGcm9udENsaWVudCwgaW5wdXRzOiBJbnB1dHMpIHtcbiAgICBjb25zdCB7IGRpc3RyaWJ1dGlvbklkLCBwYXRocyB9ID0gaW5wdXRzO1xuXG4gICAgLy8gU3BsaXQgcGF0aHMgaW50byBmaWxlcyBhbmQgd2lsZGNhcmQgcGF0aHNcbiAgICBjb25zdCBwYXRoc0ZpbGU6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgcGF0aHNXaWxkY2FyZDogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHBhdGggb2YgcGF0aHMpIHtcbiAgICAgIGlmIChwYXRoLnRyaW0oKS5lbmRzV2l0aChcIipcIikpIHtcbiAgICAgICAgcGF0aHNXaWxkY2FyZC5wdXNoKHBhdGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGF0aHNGaWxlLnB1c2gocGF0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc3RlcHNDb3VudDogbnVtYmVyID0gTWF0aC5tYXgoXG4gICAgICBNYXRoLmNlaWwocGF0aHNGaWxlLmxlbmd0aCAvIEZJTEVfTElNSVQpLFxuICAgICAgTWF0aC5jZWlsKHBhdGhzV2lsZGNhcmQubGVuZ3RoIC8gV0lMRENBUkRfTElNSVQpLFxuICAgICk7XG5cbiAgICBjb25zdCBpbnZhbGlkYXRpb25JZHM6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGVwc0NvdW50OyBpKyspIHtcbiAgICAgIGNvbnN0IHN0ZXBQYXRocyA9IFtcbiAgICAgICAgLi4ucGF0aHNGaWxlLnNsaWNlKGkgKiBGSUxFX0xJTUlULCAoaSArIDEpICogRklMRV9MSU1JVCksXG4gICAgICAgIC4uLnBhdGhzV2lsZGNhcmQuc2xpY2UoaSAqIFdJTERDQVJEX0xJTUlULCAoaSArIDEpICogV0lMRENBUkRfTElNSVQpLFxuICAgICAgXTtcbiAgICAgIGludmFsaWRhdGlvbklkcy5wdXNoKFxuICAgICAgICBhd2FpdCB0aGlzLmludmFsaWRhdGVDaHVuayhjbGllbnQsIGRpc3RyaWJ1dGlvbklkLCBzdGVwUGF0aHMpLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGludmFsaWRhdGlvbklkcztcbiAgfVxuXG4gIGFzeW5jIGludmFsaWRhdGVDaHVuayhcbiAgICBjbGllbnQ6IENsb3VkRnJvbnRDbGllbnQsXG4gICAgZGlzdHJpYnV0aW9uSWQ6IHN0cmluZyxcbiAgICBwYXRoczogc3RyaW5nW10sXG4gICkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5zZW5kKFxuICAgICAgbmV3IENyZWF0ZUludmFsaWRhdGlvbkNvbW1hbmQoe1xuICAgICAgICBEaXN0cmlidXRpb25JZDogZGlzdHJpYnV0aW9uSWQsXG4gICAgICAgIEludmFsaWRhdGlvbkJhdGNoOiB7XG4gICAgICAgICAgQ2FsbGVyUmVmZXJlbmNlOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgICAgUGF0aHM6IHtcbiAgICAgICAgICAgIFF1YW50aXR5OiBwYXRocy5sZW5ndGgsXG4gICAgICAgICAgICBJdGVtczogcGF0aHMsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICk7XG4gICAgY29uc3QgaW52YWxpZGF0aW9uSWQgPSByZXN1bHQuSW52YWxpZGF0aW9uPy5JZDtcblxuICAgIGlmICghaW52YWxpZGF0aW9uSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWRhdGlvbiBJRCBub3QgZm91bmRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGludmFsaWRhdGlvbklkO1xuICB9XG5cbiAgYXN5bmMgd2FpdEZvckludmFsaWRhdGlvbihcbiAgICBjbGllbnQ6IENsb3VkRnJvbnRDbGllbnQsXG4gICAgaW5wdXRzOiBJbnB1dHMsXG4gICAgaW52YWxpZGF0aW9uSWRzOiBzdHJpbmdbXSxcbiAgKSB7XG4gICAgY29uc3QgeyBkaXN0cmlidXRpb25JZCB9ID0gaW5wdXRzO1xuICAgIGZvciAoY29uc3QgaW52YWxpZGF0aW9uSWQgb2YgaW52YWxpZGF0aW9uSWRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB3YWl0VW50aWxJbnZhbGlkYXRpb25Db21wbGV0ZWQoXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xpZW50LFxuICAgICAgICAgICAgbWF4V2FpdFRpbWU6IDYwMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIERpc3RyaWJ1dGlvbklkOiBkaXN0cmlidXRpb25JZCxcbiAgICAgICAgICAgIElkOiBpbnZhbGlkYXRpb25JZCxcbiAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBzdXByZXNzIGVycm9yc1xuICAgICAgICAvL2NvbnNvbGUuZXJyb3IoZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEaXN0cmlidXRpb25JbnZhbGlkYXRpb24gZXh0ZW5kcyBkeW5hbWljLlJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M6IERpc3RyaWJ1dGlvbkludmFsaWRhdGlvbklucHV0cyxcbiAgICBvcHRzPzogQ3VzdG9tUmVzb3VyY2VPcHRpb25zLFxuICApIHtcbiAgICBzdXBlcihcbiAgICAgIG5ldyBQcm92aWRlcigpLFxuICAgICAgYCR7bmFtZX0uc3N0LmF3cy5EaXN0cmlidXRpb25JbnZhbGlkYXRpb25gLFxuICAgICAgYXJncyxcbiAgICAgIG9wdHMsXG4gICAgKTtcbiAgfVxufVxuIiwgImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCJjaGlsZF9wcm9jZXNzXCI7XG5pbXBvcnQgeyBhbGwsIG91dHB1dCwgT3V0cHV0IH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgeyBIaW50IH0gZnJvbSBcIi4uL2hpbnQuanNcIjtcbmltcG9ydCB7IExpbmsgfSBmcm9tIFwiLi4vbGluay5qc1wiO1xuaW1wb3J0IHsgVmlzaWJsZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLmpzXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCIuLi9pbnB1dC5qc1wiO1xuaW1wb3J0IHsgUHJldHRpZnkgfSBmcm9tIFwiLi4vY29tcG9uZW50LmpzXCI7XG5pbXBvcnQgeyBCYXNlU2l0ZUZpbGVPcHRpb25zIH0gZnJvbSBcIi4vYmFzZS1zaXRlLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVN0YXRpY1NpdGVBcmdzIHtcbiAgcGF0aD86IElucHV0PHN0cmluZz47XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgaW5kZXggcGFnZSBvZiB0aGUgc2l0ZS4gVGhpcyBpcyBhIHBhdGggcmVsYXRpdmUgdG8gdGhlIHJvb3Qgb2YgeW91ciBzaXRlLCBvciB0aGUgYHBhdGhgLlxuICAgKlxuICAgKiA6Ojpub3RlXG4gICAqIFRoZSBpbmRleCBwYWdlIG9ubHkgYXBwbGllcyB0byB0aGUgcm9vdCBvZiB5b3VyIHNpdGUuXG4gICAqIDo6OlxuICAgKlxuICAgKiBCeSBkZWZhdWx0IHRoaXMgaXMgc2V0IHRvIGBpbmRleC5odG1sYC4gU28gaWYgYSB2aXNpdG9yIGdvZXMgdG8geW91ciBzaXRlLCBsZXQncyBzYXkgYGV4YW1wbGUuY29tYCwgYGV4YW1wbGUuY29tL2luZGV4Lmh0bWxgIHdpbGwgYmUgc2VydmVkLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgXCJpbmRleC5odG1sXCJgXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBpbmRleFBhZ2U6IFwiaG9tZS5odG1sXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGluZGV4UGFnZT86IHN0cmluZztcbiAgLyoqXG4gICAqIFRoZSBlcnJvciBwYWdlIHRvIGRpc3BsYXkgb24gYSA0MDMgb3IgNDA0IGVycm9yLiBUaGlzIGlzIGEgcGF0aCByZWxhdGl2ZSB0byB0aGUgcm9vdCBvZiB5b3VyIHNpdGUsIG9yIHRoZSBgcGF0aGAuXG4gICAqIEBkZWZhdWx0IFRoZSBgaW5kZXhQYWdlYCBvZiB5b3VyIHNpdGUuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBlcnJvclBhZ2U6IFwiNDA0Lmh0bWxcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZXJyb3JQYWdlPzogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIFNldCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZm9yIHlvdXIgc3RhdGljIHNpdGUuIFRoZXNlIGFyZSBtYWRlIGF2YWlsYWJsZTpcbiAgICpcbiAgICogMS4gTG9jYWxseSB3aGlsZSBydW5uaW5nIHlvdXIgc2l0ZSB0aHJvdWdoIGBzc3QgZGV2YC5cbiAgICogMi4gSW4gdGhlIGJ1aWxkIHByb2Nlc3Mgd2hlbiBydW5uaW5nIGBidWlsZC5jb21tYW5kYC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICogZW52aXJvbm1lbnQ6IHtcbiAgICogICBBUElfVVJMOiBhcGkudXJsXG4gICAqICAgU1RSSVBFX1BVQkxJU0hBQkxFX0tFWTogXCJwa190ZXN0XzEyM1wiXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFNvbWUgc3RhdGljIHNpdGUgZ2VuZXJhdG9ycyBsaWtlIFZpdGUgaGF2ZSB0aGVpciBbY29uY2VwdCBvZiBlbnZpcm9ubWVudCB2YXJpYWJsZXNdKGh0dHBzOi8vdml0ZWpzLmRldi9ndWlkZS9lbnYtYW5kLW1vZGUpLCBhbmQgeW91IGNhbiB1c2UgdGhpcyBvcHRpb24gdG8gc2V0IHRoZW0uXG4gICAqXG4gICAqIDo6Om5vdGVcbiAgICogVGhlIHR5cGVzIGZvciB0aGUgVml0ZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIGdlbmVyYXRlZCBhdXRvbWF0aWNhbGx5LiBZb3UgY2FuIGNoYW5nZSB0aGVpciBsb2NhdGlvbiB0aHJvdWdoIGB2aXRlLnR5cGVzYC5cbiAgICogOjo6XG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSBhY2Nlc3NlZCBhcyBgaW1wb3J0Lm1ldGEuZW52YCBpbiB5b3VyIHNpdGUuIEFuZCBvbmx5IHRoZSBvbmVzIHByZWZpeGVkIHdpdGggYFZJVEVfYCBjYW4gYmUgYWNjZXNzZWQgaW4gdGhlIGJyb3dzZXIuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIGVudmlyb25tZW50OiB7XG4gICAqICAgQVBJX1VSTDogYXBpLnVybFxuICAgKiAgIC8vIEFjY2Vzc2libGUgaW4gdGhlIGJyb3dzZXJcbiAgICogICBWSVRFX1NUUklQRV9QVUJMSVNIQUJMRV9LRVk6IFwicGtfdGVzdF8xMjNcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZW52aXJvbm1lbnQ/OiBJbnB1dDxSZWNvcmQ8c3RyaW5nLCBJbnB1dDxzdHJpbmc+Pj47XG4gIGJ1aWxkPzogSW5wdXQ8e1xuICAgIC8qKlxuICAgICAqIFRoZSBjb21tYW5kIHRoYXQgYnVpbGRzIHRoZSBzdGF0aWMgc2l0ZS4gSXQncyBydW4gYmVmb3JlIHlvdXIgc2l0ZSBpcyBkZXBsb3llZC4gVGhpcyBpcyBydW4gYXQgdGhlIHJvb3Qgb2YgeW91ciBzaXRlLCBgcGF0aGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBqc1xuICAgICAqIHtcbiAgICAgKiAgIGJ1aWxkOiB7XG4gICAgICogICAgIGNvbW1hbmQ6IFwieWFybiBidWlsZFwiXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIGNvbW1hbmQ6IElucHV0PHN0cmluZz47XG4gICAgLyoqXG4gICAgICogVGhlIGRpcmVjdG9yeSB3aGVyZSB0aGUgYnVpbGQgb3V0cHV0IG9mIHlvdXIgc3RhdGljIHNpdGUgaXMgZ2VuZXJhdGVkLiBUaGlzIHdpbGwgYmUgdXBsb2FkZWQuXG4gICAgICpcbiAgICAgKiBUaGUgcGF0aCBpcyByZWxhdGl2ZSB0byB0aGUgcm9vdCBvZiB5b3VyIHNpdGUsIGBwYXRoYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgYnVpbGQ6IHtcbiAgICAgKiAgICAgb3V0cHV0OiBcImJ1aWxkXCJcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgb3V0cHV0OiBJbnB1dDxzdHJpbmc+O1xuICB9PjtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZSBbVml0ZV0oaHR0cHM6Ly92aXRlanMuZGV2KSByZWxhdGVkIG9wdGlvbnMuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBJZiBhIGB2aXRlLmNvbmZpZy50c2Agb3IgYHZpdGUuY29uZmlnLmpzYCBmaWxlIGlzIGRldGVjdGVkIGluIHRoZSBgcGF0aGAsIHRoZW4gdGhlc2Ugb3B0aW9ucyB3aWxsIGJlIHVzZWQgZHVyaW5nIHRoZSBidWlsZCBhbmQgZGVwbG95IHByb2Nlc3MuXG4gICAqIDo6OlxuICAgKi9cbiAgdml0ZT86IElucHV0PHtcbiAgICAvKipcbiAgICAgKiBUaGUgcGF0aCB3aGVyZSB0aGUgdHlwZSBkZWZpbml0aW9uIGZvciB0aGUgYGVudmlyb25tZW50YCB2YXJpYWJsZXMgYXJlIGdlbmVyYXRlZC4gVGhpcyBpcyByZWxhdGl2ZSB0byB0aGUgYHBhdGhgLiBbUmVhZCBtb3JlXShodHRwczovL3ZpdGVqcy5kZXYvZ3VpZGUvZW52LWFuZC1tb2RlI2ludGVsbGlzZW5zZS1mb3ItdHlwZXNjcmlwdCkuXG4gICAgICpcbiAgICAgKiBAZGVmYXVsdCBgXCJzcmMvc3N0LWVudi5kLnRzXCJgXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBqc1xuICAgICAqIHtcbiAgICAgKiAgIHZpdGU6IHtcbiAgICAgKiAgICAgdHlwZXM6IFwib3RoZXIvcGF0aC9zc3QtZW52LmQudHNcIlxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICB0eXBlcz86IHN0cmluZztcbiAgfT47XG4gIGFzc2V0cz86IElucHV0PHtcbiAgICAvKipcbiAgICAgKiBDaGFyYWN0ZXIgZW5jb2RpbmcgZm9yIHRleHQgYmFzZWQgYXNzZXRzIHVwbG9hZGVkLCBsaWtlIEhUTUwsIENTUywgSlMuIFRoaXMgaXNcbiAgICAgKiB1c2VkIHRvIHNldCB0aGUgYENvbnRlbnQtVHlwZWAgaGVhZGVyIHdoZW4gdGhlc2UgZmlsZXMgYXJlIHNlcnZlZCBvdXQuXG4gICAgICpcbiAgICAgKiBJZiBzZXQgdG8gYFwibm9uZVwiYCwgdGhlbiBubyBjaGFyc2V0IHdpbGwgYmUgcmV0dXJuZWQgaW4gaGVhZGVyLlxuICAgICAqIEBkZWZhdWx0IGBcInV0Zi04XCJgXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGBqc1xuICAgICAqIHtcbiAgICAgKiAgIGFzc2V0czoge1xuICAgICAqICAgICB0ZXh0RW5jb2Rpbmc6IFwiaXNvLTg4NTktMVwiXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHRleHRFbmNvZGluZz86IElucHV0PFxuICAgICAgXCJ1dGYtOFwiIHwgXCJpc28tODg1OS0xXCIgfCBcIndpbmRvd3MtMTI1MlwiIHwgXCJhc2NpaVwiIHwgXCJub25lXCJcbiAgICA+O1xuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgdGhlIGBDb250ZW50LVR5cGVgIGFuZCBgQ2FjaGUtQ29udHJvbGAgaGVhZGVycyBmb3Igc3BlY2lmaWMgZmlsZXMuIFRoaXMgYWxsb3dzXG4gICAgICogeW91IHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGZvciBzcGVjaWZpYyBmaWxlcyB1c2luZyBnbG9iIHBhdHRlcm5zLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgdGhpcyBpcyBzZXQgdG8gY2FjaGUgQ1NTL0pTIGZpbGVzIGZvciAxIHllYXIgYW5kIG5vdCBjYWNoZSBIVE1MIGZpbGVzLlxuICAgICAqXG4gICAgICogYGBganNcbiAgICAgKiB7XG4gICAgICogICBhc3NldHM6IHtcbiAgICAgKiAgICAgZmlsZU9wdGlvbnM6IFtcbiAgICAgKiAgICAgICB7XG4gICAgICogICAgICAgICBmaWxlczogW1wiKipcXC8qLmNzc1wiLCBcIioqXFwvKi5qc1wiXSxcbiAgICAgKiAgICAgICAgIGNhY2hlQ29udHJvbDogXCJtYXgtYWdlPTMxNTM2MDAwLHB1YmxpYyxpbW11dGFibGVcIlxuICAgICAqICAgICAgIH0sXG4gICAgICogICAgICAge1xuICAgICAqICAgICAgICAgZmlsZXM6IFwiKipcXC8qLmh0bWxcIixcbiAgICAgKiAgICAgICAgIGNhY2hlQ29udHJvbDogXCJtYXgtYWdlPTAsbm8tY2FjaGUsbm8tc3RvcmUsbXVzdC1yZXZhbGlkYXRlXCJcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIF1cbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAZGVmYXVsdCBgT2JqZWN0W11gXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBZb3UgY2FuIGNoYW5nZSB0aGUgZGVmYXVsdCBvcHRpb25zLiBGb3IgZXhhbXBsZSwgYXBwbHkgYENhY2hlLUNvbnRyb2xgIGFuZCBgQ29udGVudC1UeXBlYCB0byBhbGwgemlwIGZpbGVzLlxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgYXNzZXRzOiB7XG4gICAgICogICAgIGZpbGVPcHRpb25zOiBbXG4gICAgICogICAgICAge1xuICAgICAqICAgICAgICAgZmlsZXM6IFwiKipcXC8qLnppcFwiLFxuICAgICAqICAgICAgICAgY29udGVudFR5cGU6IFwiYXBwbGljYXRpb24vemlwXCIsXG4gICAgICogICAgICAgICBjYWNoZUNvbnRyb2w6IFwicHJpdmF0ZSxuby1jYWNoZSxuby1zdG9yZSxtdXN0LXJldmFsaWRhdGVcIlxuICAgICAqICAgICAgIH0sXG4gICAgICogICAgIF0sXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqIEFwcGx5IGBDYWNoZS1Db250cm9sYCB0byBhbGwgQ1NTIGFuZCBKUyBmaWxlcyBleGNlcHQgZm9yIENTUyBmaWxlcyB3aXRoIGBpbmRleC1gXG4gICAgICogcHJlZml4IGluIHRoZSBgbWFpbi9gIGRpcmVjdG9yeS5cbiAgICAgKiBgYGBqc1xuICAgICAqIHtcbiAgICAgKiAgIGFzc2V0czoge1xuICAgICAqICAgICBmaWxlT3B0aW9uczogW1xuICAgICAqICAgICAgIHtcbiAgICAgKiAgICAgICAgIGZpbGVzOiBbXCIqKlxcLyouY3NzXCIsIFwiKipcXC8qLmpzXCJdLFxuICAgICAqICAgICAgICAgaWdub3JlOiBcIm1haW5cXC9pbmRleC0qLmNzc1wiLFxuICAgICAqICAgICAgICAgY2FjaGVDb250cm9sOiBcInByaXZhdGUsbm8tY2FjaGUsbm8tc3RvcmUsbXVzdC1yZXZhbGlkYXRlXCJcbiAgICAgKiAgICAgICB9LFxuICAgICAqICAgICBdLFxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBmaWxlT3B0aW9ucz86IElucHV0PFByZXR0aWZ5PEJhc2VTaXRlRmlsZU9wdGlvbnM+W10+O1xuICB9Pjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmUoYXJnczogQmFzZVN0YXRpY1NpdGVBcmdzKSB7XG4gIGNvbnN0IHNpdGVQYXRoID0gbm9ybWFsaXplU2l0ZVBhdGgoKTtcbiAgY29uc3QgZW52aXJvbm1lbnQgPSBub3JtYWxpemVFbnZpcm9ubWVudCgpO1xuICBjb25zdCBpbmRleFBhZ2UgPSBub3JtYWxpemVJbmRleFBhZ2UoKTtcbiAgZ2VuZXJhdGVWaXRlVHlwZXMoKTtcblxuICByZXR1cm4ge1xuICAgIHNpdGVQYXRoLFxuICAgIGVudmlyb25tZW50LFxuICAgIGluZGV4UGFnZSxcbiAgfTtcblxuICBmdW5jdGlvbiBub3JtYWxpemVTaXRlUGF0aCgpIHtcbiAgICByZXR1cm4gb3V0cHV0KGFyZ3MucGF0aCkuYXBwbHkoKHNpdGVQYXRoKSA9PiB7XG4gICAgICBpZiAoIXNpdGVQYXRoKSByZXR1cm4gXCIuXCI7XG5cbiAgICAgIGlmICghZnMuZXhpc3RzU3luYyhzaXRlUGF0aCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZpc2libGVFcnJvcihgTm8gc2l0ZSBmb3VuZCBhdCBcIiR7cGF0aC5yZXNvbHZlKHNpdGVQYXRoKX1cIi5gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzaXRlUGF0aDtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZUVudmlyb25tZW50KCkge1xuICAgIHJldHVybiBvdXRwdXQoYXJncy5lbnZpcm9ubWVudCkuYXBwbHkoKGVudmlyb25tZW50KSA9PiBlbnZpcm9ubWVudCA/PyB7fSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVJbmRleFBhZ2UoKSB7XG4gICAgcmV0dXJuIG91dHB1dChhcmdzLmluZGV4UGFnZSkuYXBwbHkoXG4gICAgICAoaW5kZXhQYWdlKSA9PiBpbmRleFBhZ2UgPz8gXCJpbmRleC5odG1sXCIsXG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlVml0ZVR5cGVzKCkge1xuICAgIHJldHVybiBhbGwoW3NpdGVQYXRoLCBhcmdzLnZpdGUsIGVudmlyb25tZW50XSkuYXBwbHkoXG4gICAgICAoW3NpdGVQYXRoLCB2aXRlLCBlbnZpcm9ubWVudF0pID0+IHtcbiAgICAgICAgLy8gQnVpbGQgdGhlIHBhdGhcbiAgICAgICAgbGV0IHR5cGVzUGF0aCA9IHZpdGU/LnR5cGVzO1xuICAgICAgICBpZiAoIXR5cGVzUGF0aCkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKHNpdGVQYXRoLCBcInZpdGUuY29uZmlnLmpzXCIpKSB8fFxuICAgICAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oc2l0ZVBhdGgsIFwidml0ZS5jb25maWcudHNcIikpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0eXBlc1BhdGggPSBcInNyYy9zc3QtZW52LmQudHNcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0eXBlc1BhdGgpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgdHlwZSBmaWxlXG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5yZXNvbHZlKHBhdGguam9pbihzaXRlUGF0aCwgdHlwZXNQYXRoKSk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBgLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJ2aXRlL2NsaWVudFwiIC8+XG4gIGludGVyZmFjZSBJbXBvcnRNZXRhRW52IHtcbiAgJHtPYmplY3Qua2V5cyhlbnZpcm9ubWVudClcbiAgICAubWFwKChrZXkpID0+IGAgIHJlYWRvbmx5ICR7a2V5fTogc3RyaW5nYClcbiAgICAuam9pbihcIlxcblwiKX1cbiAgfVxuICBpbnRlcmZhY2UgSW1wb3J0TWV0YSB7XG4gICAgcmVhZG9ubHkgZW52OiBJbXBvcnRNZXRhRW52XG4gIH1gO1xuXG4gICAgICAgIGNvbnN0IGZpbGVEaXIgPSBwYXRoLmRpcm5hbWUoZmlsZVBhdGgpO1xuICAgICAgICBmcy5ta2RpclN5bmMoZmlsZURpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgfSxcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEFwcChcbiAgbmFtZTogc3RyaW5nLFxuICBidWlsZDogQmFzZVN0YXRpY1NpdGVBcmdzW1wiYnVpbGRcIl0sXG4gIHNpdGVQYXRoOiBSZXR1cm5UeXBlPHR5cGVvZiBwcmVwYXJlPltcInNpdGVQYXRoXCJdLFxuICBlbnZpcm9ubWVudDogUmV0dXJuVHlwZTx0eXBlb2YgcHJlcGFyZT5bXCJlbnZpcm9ubWVudFwiXSxcbikge1xuICByZXR1cm4gYWxsKFtidWlsZCwgc2l0ZVBhdGgsIGVudmlyb25tZW50XSkuYXBwbHkoXG4gICAgKFtidWlsZCwgc2l0ZVBhdGgsIGVudmlyb25tZW50XSkgPT4ge1xuICAgICAgaWYgKCRkZXYpXG4gICAgICAgIHJldHVybiBwYXRoLmpvaW4oJGNsaS5wYXRocy5wbGF0Zm9ybSwgXCJmdW5jdGlvbnNcIiwgXCJlbXB0eS1zaXRlXCIpO1xuICAgICAgaWYgKCFidWlsZCkgcmV0dXJuIHNpdGVQYXRoO1xuXG4gICAgICAvLyBSdW4gYnVpbGRcbiAgICAgIGlmICghcHJvY2Vzcy5lbnYuU0tJUCkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGBSdW5uaW5nIFwiJHtidWlsZC5jb21tYW5kfVwiIHNjcmlwdGApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGV4ZWNTeW5jKGJ1aWxkLmNvbW1hbmQsIHtcbiAgICAgICAgICAgIGN3ZDogc2l0ZVBhdGgsXG4gICAgICAgICAgICBzdGRpbzogXCJpbmhlcml0XCIsXG4gICAgICAgICAgICBlbnY6IHtcbiAgICAgICAgICAgICAgLi4ucHJvY2Vzcy5lbnYsXG4gICAgICAgICAgICAgIC4uLmVudmlyb25tZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoYFRoZXJlIHdhcyBhIHByb2JsZW0gYnVpbGRpbmcgXCIke25hbWV9XCIuYCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgYnVpbGQgb3V0cHV0XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoYnVpbGQub3V0cHV0KSkge1xuICAgICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKFxuICAgICAgICAgIGBObyBidWlsZCBvdXRwdXQgZm91bmQgYXQgXCIke3BhdGgucmVzb2x2ZShidWlsZC5vdXRwdXQpfVwiLmAsXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWlsZC5vdXRwdXQ7XG4gICAgfSxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFudXAoXG4gIHVybjogT3V0cHV0PHN0cmluZz4sXG4gIHVybDogT3V0cHV0PHN0cmluZz4sXG4gIHNpdGVQYXRoOiBSZXR1cm5UeXBlPHR5cGVvZiBwcmVwYXJlPltcInNpdGVQYXRoXCJdLFxuICBlbnZpcm9ubWVudDogUmV0dXJuVHlwZTx0eXBlb2YgcHJlcGFyZT5bXCJlbnZpcm9ubWVudFwiXSxcbikge1xuICBhbGwoW3NpdGVQYXRoLCBlbnZpcm9ubWVudF0pLmFwcGx5KChbc2l0ZXBhdGgsIGVudmlyb25tZW50XSkgPT4ge1xuICAgIExpbmsuUmVjZWl2ZXIucmVnaXN0ZXIoc2l0ZXBhdGgsIFtdLCBlbnZpcm9ubWVudCk7XG4gIH0pO1xuXG4gIEhpbnQucmVnaXN0ZXIodXJuLCB1cmwpO1xufVxuIiwgImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCAqIGFzIGF3cyBmcm9tIFwiQHB1bHVtaS9hd3NcIjtcbmltcG9ydCB7XG4gIENvbXBvbmVudFJlc291cmNlT3B0aW9ucyxcbiAgYWxsLFxuICBpbnRlcnBvbGF0ZSxcbiAgb3V0cHV0LFxufSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCB7IENkbiwgQ2RuRG9tYWluQXJncyB9IGZyb20gXCIuL2Nkbi5qc1wiO1xuaW1wb3J0IHsgQnVja2V0LCBCdWNrZXRBcmdzIH0gZnJvbSBcIi4vYnVja2V0LmpzXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIFByZXR0aWZ5LCBUcmFuc2Zvcm0sIHRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnQuanNcIjtcbmltcG9ydCB7IExpbmsgfSBmcm9tIFwiLi4vbGluay5qc1wiO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXQuanNcIjtcbmltcG9ydCB7IGdsb2JTeW5jIH0gZnJvbSBcImdsb2JcIjtcbmltcG9ydCB7IEJ1Y2tldEZpbGUsIEJ1Y2tldEZpbGVzIH0gZnJvbSBcIi4vcHJvdmlkZXJzL2J1Y2tldC1maWxlcy5qc1wiO1xuaW1wb3J0IHsgRGlzdHJpYnV0aW9uSW52YWxpZGF0aW9uIH0gZnJvbSBcIi4vcHJvdmlkZXJzL2Rpc3RyaWJ1dGlvbi1pbnZhbGlkYXRpb24uanNcIjtcbmltcG9ydCB7XG4gIEJhc2VTdGF0aWNTaXRlQXJncyxcbiAgYnVpbGRBcHAsXG4gIGNsZWFudXAsXG4gIHByZXBhcmUsXG59IGZyb20gXCIuLi9iYXNlL2Jhc2Utc3RhdGljLXNpdGUuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTdGF0aWNTaXRlQXJncyBleHRlbmRzIEJhc2VTdGF0aWNTaXRlQXJncyB7XG4gIC8qKlxuICAgKiBQYXRoIHRvIHRoZSBkaXJlY3Rvcnkgd2hlcmUgeW91ciBzdGF0aWMgc2l0ZSBpcyBsb2NhdGVkLiBCeSBkZWZhdWx0IHRoaXMgYXNzdW1lcyB5b3VyIHN0YXRpYyBzaXRlIGlzIGluIHRoZSByb290IG9mIHlvdXIgU1NUIGFwcC5cbiAgICpcbiAgICogVGhpcyBkaXJlY3Rvcnkgd2lsbCBiZSB1cGxvYWRlZCB0byBTMy4gVGhlIHBhdGggaXMgcmVsYXRpdmUgdG8geW91ciBgc3N0LmNvbmZpZy50c2AuXG4gICAqXG4gICAqIDo6Om5vdGVcbiAgICogSWYgdGhlIGBidWlsZGAgb3B0aW9ucyBhcmUgc3BlY2lmaWVkLCBgYnVpbGQub3V0cHV0YCB3aWxsIGJlIHVwbG9hZGVkIHRvIFMzIGluc3RlYWQuXG4gICAqIDo6OlxuICAgKlxuICAgKiBJZiB5b3UgYXJlIHVzaW5nIGEgc3RhdGljIHNpdGUgZ2VuZXJhdG9yLCBsaWtlIFZpdGUsIHlvdSdsbCBuZWVkIHRvIGNvbmZpZ3VyZSB0aGUgYGJ1aWxkYCBvcHRpb25zLiBXaGVuIHRoZXNlIGFyZSBzZXQsIHRoZSBgYnVpbGQub3V0cHV0YCBkaXJlY3Rvcnkgd2lsbCBiZSB1cGxvYWRlZCB0byBTMyBpbnN0ZWFkLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgXCIuXCJgXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIENoYW5nZSB3aGVyZSB5b3VyIHN0YXRpYyBzaXRlIGlzIGxvY2F0ZWQuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBwYXRoOiBcInBhY2thZ2VzL3dlYlwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBwYXRoPzogQmFzZVN0YXRpY1NpdGVBcmdzW1wicGF0aFwiXTtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZSBpZiB5b3VyIHN0YXRpYyBzaXRlIG5lZWRzIHRvIGJlIGJ1aWx0LiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3UgYXJlIHVzaW5nIGEgc3RhdGljIHNpdGUgZ2VuZXJhdG9yLlxuICAgKlxuICAgKiBUaGUgYGJ1aWxkLm91dHB1dGAgZGlyZWN0b3J5IHdpbGwgYmUgdXBsb2FkZWQgdG8gUzMgaW5zdGVhZC5cbiAgICogQGV4YW1wbGVcbiAgICogRm9yIGEgVml0ZSBwcm9qZWN0IHVzaW5nIG5wbSB0aGlzIG1pZ2h0IGxvb2sgbGlrZSB0aGlzLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgYnVpbGQ6IHtcbiAgICogICAgIGNvbW1hbmQ6IFwibnBtIHJ1biBidWlsZFwiLFxuICAgKiAgICAgb3V0cHV0OiBcImRpc3RcIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGJ1aWxkPzogQmFzZVN0YXRpY1NpdGVBcmdzW1wiYnVpbGRcIl07XG4gIC8qKlxuICAgKiBDb25maWd1cmUgaG93IHRoZSBzdGF0aWMgc2l0ZSdzIGFzc2V0cyBhcmUgdXBsb2FkZWQgdG8gUzMuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHRoaXMgaXMgc2V0IHRvIHRoZSBmb2xsb3dpbmcuIFJlYWQgbW9yZSBhYm91dCB0aGVzZSBvcHRpb25zIGJlbG93LlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgYXNzZXRzOiB7XG4gICAqICAgICB0ZXh0RW5jb2Rpbmc6IFwidXRmLThcIixcbiAgICogICAgIGZpbGVPcHRpb25zOiBbXG4gICAqICAgICAgIHtcbiAgICogICAgICAgICBmaWxlczogW1wiKipcXC8qLmNzc1wiLCBcIioqXFwvKi5qc1wiXSxcbiAgICogICAgICAgICBjYWNoZUNvbnRyb2w6IFwibWF4LWFnZT0zMTUzNjAwMCxwdWJsaWMsaW1tdXRhYmxlXCJcbiAgICogICAgICAgfSxcbiAgICogICAgICAge1xuICAgKiAgICAgICAgIGZpbGVzOiBcIioqXFwvKi5odG1sXCIsXG4gICAqICAgICAgICAgY2FjaGVDb250cm9sOiBcIm1heC1hZ2U9MCxuby1jYWNoZSxuby1zdG9yZSxtdXN0LXJldmFsaWRhdGVcIlxuICAgKiAgICAgICB9XG4gICAqICAgICBdXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKiBAZGVmYXVsdCBgT2JqZWN0YFxuICAgKi9cbiAgYXNzZXRzPzogQmFzZVN0YXRpY1NpdGVBcmdzW1wiYXNzZXRzXCJdO1xuICAvKipcbiAgICogU2V0IGEgY3VzdG9tIGRvbWFpbiBmb3IgeW91ciBzdGF0aWMgc2l0ZS4gU3VwcG9ydHMgZG9tYWlucyBob3N0ZWQgZWl0aGVyIG9uXG4gICAqIFtSb3V0ZSA1M10oaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9yb3V0ZTUzLykgb3Igb3V0c2lkZSBBV1MuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIGFsc28gbWlncmF0ZSBhbiBleHRlcm5hbGx5IGhvc3RlZCBkb21haW4gdG8gQW1hem9uIFJvdXRlIDUzIGJ5XG4gICAqIFtmb2xsb3dpbmcgdGhpcyBndWlkZV0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL1JvdXRlNTMvbGF0ZXN0L0RldmVsb3Blckd1aWRlL01pZ3JhdGluZ0ROUy5odG1sKS5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBkb21haW46IFwiZG9tYWluLmNvbVwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFNwZWNpZnkgdGhlIFJvdXRlIDUzIGhvc3RlZCB6b25lIGFuZCBhIGB3d3cuYCB2ZXJzaW9uIG9mIHRoZSBjdXN0b20gZG9tYWluLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZG9tYWluOiB7XG4gICAqICAgICBkb21haW5OYW1lOiBcImRvbWFpbi5jb21cIixcbiAgICogICAgIGhvc3RlZFpvbmU6IFwiZG9tYWluLmNvbVwiLFxuICAgKiAgICAgcmVkaXJlY3RzOiBbXCJ3d3cuZG9tYWluLmNvbVwiXVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGRvbWFpbj86IElucHV0PHN0cmluZyB8IFByZXR0aWZ5PENkbkRvbWFpbkFyZ3M+PjtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZSBob3cgdGhlIENsb3VkRnJvbnQgY2FjaGUgaW52YWxpZGF0aW9ucyBhcmUgaGFuZGxlZC4gVGhpcyBpcyBydW4gYWZ0ZXIgeW91ciBzdGF0aWMgc2l0ZSBoYXMgYmVlbiBkZXBsb3llZC5cbiAgICogOjo6dGlwXG4gICAqIFlvdSBnZXQgMTAwMCBmcmVlIGludmFsaWRhdGlvbnMgcGVyIG1vbnRoLiBBZnRlciB0aGF0IHlvdSBwYXkgJDAuMDA1IHBlciBpbnZhbGlkYXRpb24gcGF0aC4gW1JlYWQgbW9yZSBoZXJlXShodHRwczovL2F3cy5hbWF6b24uY29tL2Nsb3VkZnJvbnQvcHJpY2luZy8pLlxuICAgKiA6OjpcbiAgICogQGRlZmF1bHQgYCZsY3ViO3BhdGhzOiBcImFsbFwiLCB3YWl0OiBmYWxzZSZyY3ViO2BcbiAgICogQGV4YW1wbGVcbiAgICogVHVybiBvZmYgaW52YWxpZGF0aW9ucy5cbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGludmFsaWRhdGlvbjogZmFsc2VcbiAgICogfVxuICAgKiBgYGBcbiAgICogV2FpdCBmb3IgYWxsIHBhdGhzIHRvIGJlIGludmFsaWRhdGVkLlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgaW52YWxpZGF0aW9uOiB7XG4gICAqICAgICBwYXRoczogXCJhbGxcIixcbiAgICogICAgIHdhaXQ6IHRydWVcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBpbnZhbGlkYXRpb24/OiBJbnB1dDxcbiAgICB8IGZhbHNlXG4gICAgfCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb25maWd1cmUgaWYgYHNzdCBkZXBsb3lgIHNob3VsZCB3YWl0IGZvciB0aGUgQ2xvdWRGcm9udCBjYWNoZSBpbnZhbGlkYXRpb24gdG8gZmluaXNoLlxuICAgICAgICAgKlxuICAgICAgICAgKiA6Ojp0aXBcbiAgICAgICAgICogRm9yIG5vbi1wcm9kIGVudmlyb25tZW50cyBpdCBtaWdodCBtYWtlIHNlbnNlIHRvIHBhc3MgaW4gYGZhbHNlYC5cbiAgICAgICAgICogOjo6XG4gICAgICAgICAqXG4gICAgICAgICAqIFdhaXRpbmcgZm9yIHRoZSBDbG91ZEZyb250IGNhY2hlIGludmFsaWRhdGlvbiBwcm9jZXNzIHRvIGZpbmlzaCBlbnN1cmVzIHRoYXQgdGhlIG5ldyBjb250ZW50IHdpbGwgYmUgc2VydmVkIG9uY2UgdGhlIGRlcGxveSBmaW5pc2hlcy4gSG93ZXZlciwgdGhpcyBwcm9jZXNzIGNhbiBzb21ldGltZXMgdGFrZSBtb3JlIHRoYW4gNSBtaW5zLlxuICAgICAgICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqIGBgYGpzXG4gICAgICAgICAqIHtcbiAgICAgICAgICogICBpbnZhbGlkYXRpb246IHtcbiAgICAgICAgICogICAgIHdhaXQ6IHRydWVcbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICB3YWl0PzogSW5wdXQ8Ym9vbGVhbj47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcGF0aHMgdG8gaW52YWxpZGF0ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogWW91IGNhbiBlaXRoZXIgcGFzcyBpbiBhbiBhcnJheSBvZiBnbG9iIHBhdHRlcm5zIHRvIGludmFsaWRhdGUgc3BlY2lmaWMgZmlsZXMuIE9yIHlvdSBjYW4gdXNlIHRoZSBidWlsdC1pbiBvcHRpb24gYGFsbGAgdG8gaW52YWxpZGF0aW9uIGFsbCBmaWxlcyB3aGVuIGFueSBmaWxlIGNoYW5nZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIDo6Om5vdGVcbiAgICAgICAgICogSW52YWxpZGF0aW5nIGBhbGxgIGNvdW50cyBhcyBvbmUgaW52YWxpZGF0aW9uLCB3aGlsZSBlYWNoIGdsb2IgcGF0dGVybiBjb3VudHMgYXMgYSBzaW5nbGUgaW52YWxpZGF0aW9uIHBhdGguXG4gICAgICAgICAqIDo6OlxuICAgICAgICAgKiBAZGVmYXVsdCBgXCJhbGxcImBcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogSW52YWxpZGF0ZSB0aGUgYGluZGV4Lmh0bWxgIGFuZCBhbGwgZmlsZXMgdW5kZXIgdGhlIGBwcm9kdWN0cy9gIHJvdXRlLlxuICAgICAgICAgKiBgYGBqc1xuICAgICAgICAgKiB7XG4gICAgICAgICAqICAgaW52YWxpZGF0aW9uOiB7XG4gICAgICAgICAqICAgICBwYXRoczogW1wiL2luZGV4Lmh0bWxcIiwgXCIvcHJvZHVjdHMvKlwiXVxuICAgICAgICAgKiAgIH1cbiAgICAgICAgICogfVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHBhdGhzPzogSW5wdXQ8XCJhbGxcIiB8IHN0cmluZ1tdPjtcbiAgICAgIH1cbiAgPjtcbiAgLyoqXG4gICAqIFtUcmFuc2Zvcm1dKC9kb2NzL2NvbXBvbmVudHMjdHJhbnNmb3JtKSBob3cgdGhpcyBjb21wb25lbnQgY3JlYXRlcyBpdHMgdW5kZXJseWluZ1xuICAgKiByZXNvdXJjZXMuXG4gICAqL1xuICB0cmFuc2Zvcm0/OiB7XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoZSBCdWNrZXQgcmVzb3VyY2UgdXNlZCBmb3IgdXBsb2FkaW5nIHRoZSBhc3NldHMuXG4gICAgICovXG4gICAgYXNzZXRzPzogVHJhbnNmb3JtPEJ1Y2tldEFyZ3M+O1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBgU3RhdGljU2l0ZWAgY29tcG9uZW50IGxldHMgeW91IGRlcGxveSBhIHN0YXRpYyB3ZWJzaXRlIHRvIEFXUy4gSXQgdXNlcyBbQW1hem9uIFMzXShodHRwczovL2F3cy5hbWF6b24uY29tL3MzLykgdG8gc3RvcmUgeW91ciBmaWxlcyBhbmQgW0FtYXpvbiBDbG91ZEZyb250XShodHRwczovL2F3cy5hbWF6b24uY29tL2Nsb3VkZnJvbnQvKSB0byBzZXJ2ZSB0aGVtLlxuICpcbiAqIEl0IGNhbiBhbHNvIGBidWlsZGAgeW91ciBzaXRlIGJ5IHJ1bm5pbmcgeW91ciBzdGF0aWMgc2l0ZSBnZW5lcmF0b3IsIGxpa2UgW1ZpdGVdKGh0dHBzOi8vdml0ZWpzLmRldikgYW5kIHVwbG9hZGluZyB0aGUgYnVpbGQgb3V0cHV0IHRvIFMzLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogIyMjIyBNaW5pbWFsIGV4YW1wbGVcbiAqXG4gKiBTaW1wbHkgdXBsb2FkcyB0aGUgY3VycmVudCBkaXJlY3RvcnkgYXMgYSBzdGF0aWMgc2l0ZS5cbiAqXG4gKiBgYGBqc1xuICogbmV3IHNzdC5hd3MuU3RhdGljU2l0ZShcIk15V2ViXCIpO1xuICogYGBgXG4gKlxuICogIyMjIyBDaGFuZ2UgdGhlIHBhdGhcbiAqXG4gKiBDaGFuZ2UgdGhlIGBwYXRoYCB0aGF0IHNob3VsZCBiZSB1cGxvYWRlZC5cbiAqXG4gKiBgYGBqc1xuICogbmV3IHNzdC5hd3MuU3RhdGljU2l0ZShcIk15V2ViXCIsIHtcbiAqICAgcGF0aDogXCJwYXRoL3RvL3NpdGVcIlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIERlcGxveSBhIFZpdGUgU1BBXG4gKlxuICogVXNlIFtWaXRlXShodHRwczovL3ZpdGVqcy5kZXYpIHRvIGRlcGxveSBhIFJlYWN0L1Z1ZS9TdmVsdGUvZXRjLiBTUEEgYnkgc3BlY2lmeWluZyB0aGUgYGJ1aWxkYCBjb25maWcuXG4gKlxuICogYGBganNcbiAqIG5ldyBzc3QuYXdzLlN0YXRpY1NpdGUoXCJNeVdlYlwiLCB7XG4gKiAgIGJ1aWxkOiB7XG4gKiAgICAgY29tbWFuZDogXCJucG0gcnVuIGJ1aWxkXCIsXG4gKiAgICAgb3V0cHV0OiBcImRpc3RcIlxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgRGVwbG95IGEgSmVreWxsIHNpdGVcbiAqXG4gKiBVc2UgW0pla3lsbF0oaHR0cHM6Ly9qZWt5bGxyYi5jb20pIHRvIGRlcGxveSBhIHN0YXRpYyBzaXRlLlxuICpcbiAqIGBgYGpzXG4gKiBuZXcgc3N0LmF3cy5TdGF0aWNTaXRlKFwiTXlXZWJcIiwge1xuICogICBlcnJvclBhZ2U6IFwiNDA0Lmh0bWxcIixcbiAqICAgYnVpbGQ6IHtcbiAqICAgICBjb21tYW5kOiBcImJ1bmRsZSBleGVjIGpla3lsbCBidWlsZFwiLFxuICogICAgIG91dHB1dDogXCJfc2l0ZVwiXG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBEZXBsb3kgYSBHYXRzYnkgc2l0ZVxuICpcbiAqIFVzZSBbR2F0c2J5XShodHRwczovL3d3dy5nYXRzYnlqcy5jb20pIHRvIGRlcGxveSBhIHN0YXRpYyBzaXRlLlxuICpcbiAqIGBgYGpzXG4gKiBuZXcgc3N0LmF3cy5TdGF0aWNTaXRlKFwiTXlXZWJcIiwge1xuICogICBlcnJvclBhZ2U6IFwiNDA0Lmh0bWxcIixcbiAqICAgYnVpbGQ6IHtcbiAqICAgICBjb21tYW5kOiBcIm5wbSBydW4gYnVpbGRcIixcbiAqICAgICBvdXRwdXQ6IFwicHVibGljXCJcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIERlcGxveSBhbiBBbmd1bGFyIFNQQVxuICpcbiAqIFVzZSBbQW5ndWxhcl0oaHR0cHM6Ly9hbmd1bGFyLmRldikgdG8gZGVwbG95IGEgU1BBLlxuICpcbiAqIGBgYGpzXG4gKiBuZXcgc3N0LmF3cy5TdGF0aWNTaXRlKFwiTXlXZWJcIiwge1xuICogICBidWlsZDoge1xuICogICAgIGNvbW1hbmQ6IFwibmcgYnVpbGQgLS1vdXRwdXQtcGF0aCBkaXN0XCIsXG4gKiAgICAgb3V0cHV0OiBcImRpc3RcIlxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgQWRkIGEgY3VzdG9tIGRvbWFpblxuICpcbiAqIFNldCBhIGN1c3RvbSBkb21haW4gZm9yIHlvdXIgc2l0ZS5cbiAqXG4gKiBgYGBqcyB7Mn1cbiAqIG5ldyBzc3QuYXdzLlN0YXRpY1NpdGUoXCJNeVdlYlwiLCB7XG4gKiAgIGRvbWFpbjogXCJteS1hcHAuY29tXCJcbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBSZWRpcmVjdCB3d3cgdG8gYXBleCBkb21haW5cbiAqXG4gKiBSZWRpcmVjdCBgd3d3Lm15LWFwcC5jb21gIHRvIGBteS1hcHAuY29tYC5cbiAqXG4gKiBgYGBqcyB7NH1cbiAqIG5ldyBzc3QuYXdzLlN0YXRpY1NpdGUoXCJNeVdlYlwiLCB7XG4gKiAgIGRvbWFpbjoge1xuICogICAgIGRvbWFpbk5hbWU6IFwibXktYXBwLmNvbVwiLFxuICogICAgIHJlZGlyZWN0czogW1wid3d3Lm15LWFwcC5jb21cIl1cbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFNldCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAqXG4gKiBTZXQgYGVudmlyb25tZW50YCB2YXJpYWJsZXMgZm9yIHRoZSBidWlsZCBwcm9jZXNzIG9mIHlvdXIgc3RhdGljIHNpdGUuIFRoZXNlIHdpbGwgYmUgdXNlZCBsb2NhbGx5IGFuZCBvbiBkZXBsb3kuXG4gKlxuICogOjo6dGlwXG4gKiBGb3IgVml0ZSwgdGhlIHR5cGVzIGZvciB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBhbHNvIGdlbmVyYXRlZC4gVGhpcyBjYW4gYmUgY29uZmlndXJlZCB0aHJvdWdoIHRoZSBgdml0ZWAgcHJvcC5cbiAqIDo6OlxuICpcbiAqIEZvciBzb21lIHN0YXRpYyBzaXRlIGdlbmVyYXRvcnMgbGlrZSBWaXRlLCBbZW52aXJvbm1lbnQgdmFyaWFibGVzXShodHRwczovL3ZpdGVqcy5kZXYvZ3VpZGUvZW52LWFuZC1tb2RlKSBwcmVmaXhlZCB3aXRoIGBWSVRFX2AgY2FuIGJlIGFjY2Vzc2VkIGluIHRoZSBicm93c2VyLlxuICpcbiAqIGBgYHRzIHs1LTd9XG4gKiBjb25zdCBidWNrZXQgPSBuZXcgc3N0LmF3cy5CdWNrZXQoXCJNeUJ1Y2tldFwiKTtcbiAqXG4gKiBuZXcgc3N0LmF3cy5TdGF0aWNTaXRlKFwiTXlXZWJcIiwge1xuICogICBlbnZpcm9ubWVudDoge1xuICogICAgIEJVQ0tFVF9OQU1FOiBidWNrZXQubmFtZSxcbiAqICAgICAvLyBBY2Nlc3NpYmxlIGluIHRoZSBicm93c2VyXG4gKiAgICAgVklURV9TVFJJUEVfUFVCTElTSEFCTEVfS0VZOiBcInBrX3Rlc3RfMTIzXCJcbiAqICAgfSxcbiAqICAgYnVpbGQ6IHtcbiAqICAgICBjb21tYW5kOiBcIm5wbSBydW4gYnVpbGRcIixcbiAqICAgICBvdXRwdXQ6IFwiZGlzdFwiXG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBTdGF0aWNTaXRlIGV4dGVuZHMgQ29tcG9uZW50IGltcGxlbWVudHMgTGluay5MaW5rYWJsZSB7XG4gIHByaXZhdGUgY2RuOiBDZG47XG4gIHByaXZhdGUgYXNzZXRzOiBCdWNrZXQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M6IFN0YXRpY1NpdGVBcmdzID0ge30sXG4gICAgb3B0czogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zID0ge30sXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmF3czpTdGF0aWNTaXRlXCIsIG5hbWUsIGFyZ3MsIG9wdHMpO1xuXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcztcbiAgICBjb25zdCB7IHNpdGVQYXRoLCBlbnZpcm9ubWVudCwgaW5kZXhQYWdlIH0gPSBwcmVwYXJlKGFyZ3MpO1xuICAgIGNvbnN0IG91dHB1dFBhdGggPSBidWlsZEFwcChuYW1lLCBhcmdzLmJ1aWxkLCBzaXRlUGF0aCwgZW52aXJvbm1lbnQpO1xuICAgIGNvbnN0IGFjY2VzcyA9IGNyZWF0ZUNsb3VkRnJvbnRPcmlnaW5BY2Nlc3NJZGVudGl0eSgpO1xuICAgIGNvbnN0IGJ1Y2tldCA9IGNyZWF0ZVMzQnVja2V0KCk7XG4gICAgY29uc3QgYnVja2V0RmlsZSA9IHVwbG9hZEFzc2V0cygpO1xuICAgIGNvbnN0IGRpc3RyaWJ1dGlvbiA9IGNyZWF0ZURpc3RyaWJ1dGlvbigpO1xuICAgIGNyZWF0ZURpc3RyaWJ1dGlvbkludmFsaWRhdGlvbigpO1xuICAgIHRoaXMuYXNzZXRzID0gYnVja2V0O1xuICAgIHRoaXMuY2RuID0gZGlzdHJpYnV0aW9uO1xuXG4gICAgY2xlYW51cCh0aGlzLnVybiwgdGhpcy51cmwsIHNpdGVQYXRoLCBlbnZpcm9ubWVudCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyT3V0cHV0cyh7XG4gICAgICBfbWV0YWRhdGE6IHtcbiAgICAgICAgcGF0aDogc2l0ZVBhdGgsXG4gICAgICAgIGVudmlyb25tZW50LFxuICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNsb3VkRnJvbnRPcmlnaW5BY2Nlc3NJZGVudGl0eSgpIHtcbiAgICAgIHJldHVybiBuZXcgYXdzLmNsb3VkZnJvbnQuT3JpZ2luQWNjZXNzSWRlbnRpdHkoXG4gICAgICAgIGAke25hbWV9T3JpZ2luQWNjZXNzSWRlbnRpdHlgLFxuICAgICAgICB7fSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUzNCdWNrZXQoKSB7XG4gICAgICByZXR1cm4gbmV3IEJ1Y2tldChcbiAgICAgICAgYCR7bmFtZX1Bc3NldHNgLFxuICAgICAgICB0cmFuc2Zvcm0oYXJncy50cmFuc2Zvcm0/LmFzc2V0cywge1xuICAgICAgICAgIHRyYW5zZm9ybToge1xuICAgICAgICAgICAgcG9saWN5OiAocG9saWN5QXJncykgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBuZXdQb2xpY3kgPSBhd3MuaWFtLmdldFBvbGljeURvY3VtZW50T3V0cHV0KHtcbiAgICAgICAgICAgICAgICBzdGF0ZW1lbnRzOiBbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHByaW5jaXBhbHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkFXU1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRlbnRpZmllcnM6IFthY2Nlc3MuaWFtQXJuXSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zOiBbXCJzMzpHZXRPYmplY3RcIl0sXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlczogW2ludGVycG9sYXRlYCR7YnVja2V0LmFybn0vKmBdLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICB9KS5qc29uO1xuICAgICAgICAgICAgICBwb2xpY3lBcmdzLnBvbGljeSA9IG91dHB1dChbcG9saWN5QXJncy5wb2xpY3ksIG5ld1BvbGljeV0pLmFwcGx5KFxuICAgICAgICAgICAgICAgIChbcG9saWN5LCBuZXdQb2xpY3ldKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBwb2xpY3lKc29uID0gSlNPTi5wYXJzZShwb2xpY3kgYXMgc3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BvbGljeUpzb24gPSBKU09OLnBhcnNlKG5ld1BvbGljeSBhcyBzdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgcG9saWN5SnNvbi5TdGF0ZW1lbnQucHVzaCguLi5uZXdQb2xpY3lKc29uLlN0YXRlbWVudCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocG9saWN5SnNvbik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICAgIHsgcGFyZW50LCByZXRhaW5PbkRlbGV0ZTogZmFsc2UgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBsb2FkQXNzZXRzKCkge1xuICAgICAgcmV0dXJuIGFsbChbb3V0cHV0UGF0aCwgYXJncy5hc3NldHNdKS5hcHBseShcbiAgICAgICAgYXN5bmMgKFtvdXRwdXRQYXRoLCBhc3NldHNdKSA9PiB7XG4gICAgICAgICAgY29uc3QgYnVja2V0RmlsZXM6IEJ1Y2tldEZpbGVbXSA9IFtdO1xuXG4gICAgICAgICAgLy8gQnVpbGQgZmlsZU9wdGlvbnNcbiAgICAgICAgICBjb25zdCBmaWxlT3B0aW9ucyA9IGFzc2V0cz8uZmlsZU9wdGlvbnMgPz8gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBmaWxlczogXCIqKlwiLFxuICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IFwibWF4LWFnZT0wLG5vLWNhY2hlLG5vLXN0b3JlLG11c3QtcmV2YWxpZGF0ZVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZmlsZXM6IFtcIioqLyouanNcIiwgXCIqKi8qLmNzc1wiXSxcbiAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiBcIm1heC1hZ2U9MzE1MzYwMDAscHVibGljLGltbXV0YWJsZVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdO1xuXG4gICAgICAgICAgLy8gVXBsb2FkIGZpbGVzIGJhc2VkIG9uIGZpbGVPcHRpb25zXG4gICAgICAgICAgY29uc3QgZmlsZXNQcm9jZXNzZWQ6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgZm9yIChjb25zdCBmaWxlT3B0aW9uIG9mIGZpbGVPcHRpb25zLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBnbG9iU3luYyhmaWxlT3B0aW9uLmZpbGVzLCB7XG4gICAgICAgICAgICAgIGN3ZDogcGF0aC5yZXNvbHZlKG91dHB1dFBhdGgpLFxuICAgICAgICAgICAgICBub2RpcjogdHJ1ZSxcbiAgICAgICAgICAgICAgZG90OiB0cnVlLFxuICAgICAgICAgICAgICBpZ25vcmU6IFtcbiAgICAgICAgICAgICAgICBcIi5zc3QvKipcIixcbiAgICAgICAgICAgICAgICAuLi4odHlwZW9mIGZpbGVPcHRpb24uaWdub3JlID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICA/IFtmaWxlT3B0aW9uLmlnbm9yZV1cbiAgICAgICAgICAgICAgICAgIDogZmlsZU9wdGlvbi5pZ25vcmUgPz8gW10pLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSkuZmlsdGVyKChmaWxlKSA9PiAhZmlsZXNQcm9jZXNzZWQuaW5jbHVkZXMoZmlsZSkpO1xuXG4gICAgICAgICAgICBidWNrZXRGaWxlcy5wdXNoKFxuICAgICAgICAgICAgICAuLi4oYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICAgICAgZmlsZXMubWFwKGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBwYXRoLnJlc29sdmUob3V0cHV0UGF0aCwgZmlsZSk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucHJvbWlzZXMucmVhZEZpbGUoc291cmNlKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBjcnlwdG9cbiAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZUhhc2goXCJzaGEyNTZcIilcbiAgICAgICAgICAgICAgICAgICAgLnVwZGF0ZShjb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuZGlnZXN0KFwiaGV4XCIpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBrZXk6IGZpbGUsXG4gICAgICAgICAgICAgICAgICAgIGhhc2gsXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogZmlsZU9wdGlvbi5jYWNoZUNvbnRyb2wsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBnZXRDb250ZW50VHlwZShmaWxlLCBcIlVURi04XCIpLFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKSksXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgZmlsZXNQcm9jZXNzZWQucHVzaCguLi5maWxlcyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIG5ldyBCdWNrZXRGaWxlcyhcbiAgICAgICAgICAgIGAke25hbWV9QXNzZXRGaWxlc2AsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGJ1Y2tldE5hbWU6IGJ1Y2tldC5uYW1lLFxuICAgICAgICAgICAgICBmaWxlczogYnVja2V0RmlsZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBwYXJlbnQsIGlnbm9yZUNoYW5nZXM6ICRkZXYgPyBbXCIqXCJdIDogdW5kZWZpbmVkIH0sXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29udGVudFR5cGUoZmlsZW5hbWU6IHN0cmluZywgdGV4dEVuY29kaW5nOiBzdHJpbmcpIHtcbiAgICAgIGNvbnN0IGV4dCA9IGZpbGVuYW1lLmVuZHNXaXRoKFwiLndlbGwta25vd24vc2l0ZS1hc3NvY2lhdGlvbi1qc29uXCIpXG4gICAgICAgID8gXCIuanNvblwiXG4gICAgICAgIDogcGF0aC5leHRuYW1lKGZpbGVuYW1lKTtcbiAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSB7XG4gICAgICAgIFtcIi50eHRcIl06IHsgbWltZTogXCJ0ZXh0L3BsYWluXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuaHRtXCJdOiB7IG1pbWU6IFwidGV4dC9odG1sXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuaHRtbFwiXTogeyBtaW1lOiBcInRleHQvaHRtbFwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLnhodG1sXCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24veGh0bWwreG1sXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuY3NzXCJdOiB7IG1pbWU6IFwidGV4dC9jc3NcIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5qc1wiXTogeyBtaW1lOiBcInRleHQvamF2YXNjcmlwdFwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLm1qc1wiXTogeyBtaW1lOiBcInRleHQvamF2YXNjcmlwdFwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLmFwbmdcIl06IHsgbWltZTogXCJpbWFnZS9hcG5nXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLmF2aWZcIl06IHsgbWltZTogXCJpbWFnZS9hdmlmXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLmdpZlwiXTogeyBtaW1lOiBcImltYWdlL2dpZlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5qcGVnXCJdOiB7IG1pbWU6IFwiaW1hZ2UvanBlZ1wiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5qcGdcIl06IHsgbWltZTogXCJpbWFnZS9qcGVnXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLnBuZ1wiXTogeyBtaW1lOiBcImltYWdlL3BuZ1wiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5zdmdcIl06IHsgbWltZTogXCJpbWFnZS9zdmcreG1sXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuYm1wXCJdOiB7IG1pbWU6IFwiaW1hZ2UvYm1wXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLnRpZmZcIl06IHsgbWltZTogXCJpbWFnZS90aWZmXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLndlYnBcIl06IHsgbWltZTogXCJpbWFnZS93ZWJwXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLmljb1wiXTogeyBtaW1lOiBcImltYWdlL3ZuZC5taWNyb3NvZnQuaWNvblwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5lb3RcIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi92bmQubXMtZm9udG9iamVjdFwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi50dGZcIl06IHsgbWltZTogXCJmb250L3R0ZlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5vdGZcIl06IHsgbWltZTogXCJmb250L290ZlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi53b2ZmXCJdOiB7IG1pbWU6IFwiZm9udC93b2ZmXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLndvZmYyXCJdOiB7IG1pbWU6IFwiZm9udC93b2ZmMlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5qc29uXCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24vanNvblwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLmpzb25sZFwiXTogeyBtaW1lOiBcImFwcGxpY2F0aW9uL2xkK2pzb25cIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi54bWxcIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi94bWxcIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5wZGZcIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi9wZGZcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIuemlwXCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24vemlwXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLndhc21cIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi93YXNtXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgIH07XG4gICAgICBjb25zdCBleHRlbnNpb25EYXRhID0gZXh0ZW5zaW9uc1tleHQgYXMga2V5b2YgdHlwZW9mIGV4dGVuc2lvbnNdO1xuICAgICAgY29uc3QgbWltZSA9IGV4dGVuc2lvbkRhdGE/Lm1pbWUgPz8gXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIjtcbiAgICAgIGNvbnN0IGNoYXJzZXQgPVxuICAgICAgICBleHRlbnNpb25EYXRhPy5pc1RleHQgJiYgdGV4dEVuY29kaW5nICE9PSBcIm5vbmVcIlxuICAgICAgICAgID8gYDtjaGFyc2V0PSR7dGV4dEVuY29kaW5nfWBcbiAgICAgICAgICA6IFwiXCI7XG4gICAgICByZXR1cm4gYCR7bWltZX0ke2NoYXJzZXR9YDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEaXN0cmlidXRpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IENkbihcbiAgICAgICAgYCR7bmFtZX1DZG5gLFxuICAgICAgICB7XG4gICAgICAgICAgZG9tYWluOiBhcmdzLmRvbWFpbixcbiAgICAgICAgICB3YWl0OiAhJGRldixcbiAgICAgICAgICB0cmFuc2Zvcm06IHtcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbjogKGRpc3RyaWJ1dGlvbikgPT4gKHtcbiAgICAgICAgICAgICAgLi4uZGlzdHJpYnV0aW9uLFxuICAgICAgICAgICAgICBjb21tZW50OiBgJHtuYW1lfSBzaXRlYCxcbiAgICAgICAgICAgICAgb3JpZ2luczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG9yaWdpbklkOiBcInMzXCIsXG4gICAgICAgICAgICAgICAgICBkb21haW5OYW1lOiBidWNrZXQubm9kZXMuYnVja2V0LmJ1Y2tldFJlZ2lvbmFsRG9tYWluTmFtZSxcbiAgICAgICAgICAgICAgICAgIG9yaWdpblBhdGg6IFwiXCIsXG4gICAgICAgICAgICAgICAgICBzM09yaWdpbkNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5BY2Nlc3NJZGVudGl0eTogYWNjZXNzLmNsb3VkZnJvbnRBY2Nlc3NJZGVudGl0eVBhdGgsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIGRlZmF1bHRSb290T2JqZWN0OiBpbmRleFBhZ2UsXG4gICAgICAgICAgICAgIGN1c3RvbUVycm9yUmVzcG9uc2VzOiBhcmdzLmVycm9yUGFnZVxuICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgZXJyb3JDb2RlOiA0MDMsXG4gICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VQYWdlUGF0aDogaW50ZXJwb2xhdGVgLyR7YXJncy5lcnJvclBhZ2V9YCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogNDA0LFxuICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlUGFnZVBhdGg6IGludGVycG9sYXRlYC8ke2FyZ3MuZXJyb3JQYWdlfWAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IDQwMyxcbiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZVBhZ2VQYXRoOiBpbnRlcnBvbGF0ZWAvJHtpbmRleFBhZ2V9YCxcbiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUNvZGU6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogNDA0LFxuICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlUGFnZVBhdGg6IGludGVycG9sYXRlYC8ke2luZGV4UGFnZX1gLFxuICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29kZTogMjAwLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgZGVmYXVsdENhY2hlQmVoYXZpb3I6IHtcbiAgICAgICAgICAgICAgICB0YXJnZXRPcmlnaW5JZDogXCJzM1wiLFxuICAgICAgICAgICAgICAgIHZpZXdlclByb3RvY29sUG9saWN5OiBcInJlZGlyZWN0LXRvLWh0dHBzXCIsXG4gICAgICAgICAgICAgICAgYWxsb3dlZE1ldGhvZHM6IFtcIkdFVFwiLCBcIkhFQURcIiwgXCJPUFRJT05TXCJdLFxuICAgICAgICAgICAgICAgIGNhY2hlZE1ldGhvZHM6IFtcIkdFVFwiLCBcIkhFQURcIl0sXG4gICAgICAgICAgICAgICAgY29tcHJlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgLy8gQ2xvdWRGcm9udCdzIG1hbmFnZWQgQ2FjaGluZ09wdGltaXplZCBwb2xpY3lcbiAgICAgICAgICAgICAgICBjYWNoZVBvbGljeUlkOiBcIjY1ODMyN2VhLWY4OWQtNGZhYi1hNjNkLTdlODg2MzllNThmNlwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLy8gY3JlYXRlIGRpc3RyaWJ1dGlvbiBhZnRlciBzMyB1cGxvYWQgZmluaXNoZXNcbiAgICAgICAgeyBkZXBlbmRzT246IGJ1Y2tldEZpbGUsIHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEaXN0cmlidXRpb25JbnZhbGlkYXRpb24oKSB7XG4gICAgICBhbGwoW291dHB1dFBhdGgsIGFyZ3MuaW52YWxpZGF0aW9uXSkuYXBwbHkoXG4gICAgICAgIChbb3V0cHV0UGF0aCwgaW52YWxpZGF0aW9uUmF3XSkgPT4ge1xuICAgICAgICAgIC8vIE5vcm1hbGl6ZSBpbnZhbGlkYXRpb25cbiAgICAgICAgICBpZiAoaW52YWxpZGF0aW9uUmF3ID09PSBmYWxzZSkgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IGludmFsaWRhdGlvbiA9IHtcbiAgICAgICAgICAgIHdhaXQ6IGZhbHNlLFxuICAgICAgICAgICAgcGF0aHM6IFwiYWxsXCIgYXMgY29uc3QsXG4gICAgICAgICAgICAuLi5pbnZhbGlkYXRpb25SYXcsXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIEJ1aWxkIGludmFsaWRhdGlvbiBwYXRoc1xuICAgICAgICAgIGNvbnN0IGludmFsaWRhdGlvblBhdGhzID1cbiAgICAgICAgICAgIGludmFsaWRhdGlvbi5wYXRocyA9PT0gXCJhbGxcIiA/IFtcIi8qXCJdIDogaW52YWxpZGF0aW9uLnBhdGhzO1xuICAgICAgICAgIGlmIChpbnZhbGlkYXRpb25QYXRocy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgICAgICAgIC8vIENhbGN1bGF0ZSBhIGhhc2ggYmFzZWQgb24gdGhlIGNvbnRlbnRzIG9mIHRoZSBTMyBmaWxlcy4gVGhpcyB3aWxsIGJlXG4gICAgICAgICAgLy8gdXNlZCB0byBkZXRlcm1pbmUgaWYgd2UgbmVlZCB0byBpbnZhbGlkYXRlIG91ciBDbG91ZEZyb250IGNhY2hlLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gVGhlIGJlbG93IG9wdGlvbnMgYXJlIG5lZWRlZCB0byBzdXBwb3J0IGZvbGxvd2luZyBzeW1saW5rcyB3aGVuIGJ1aWxkaW5nIHppcCBmaWxlczpcbiAgICAgICAgICAvLyAtIG5vZGlyOiBUaGlzIHdpbGwgcHJldmVudCBzeW1saW5rcyB0aGVtc2VsdmVzIGZyb20gYmVpbmcgY29waWVkIGludG8gdGhlIHppcC5cbiAgICAgICAgICAvLyAtIGZvbGxvdzogVGhpcyB3aWxsIGZvbGxvdyBzeW1saW5rcyBhbmQgY29weSB0aGUgZmlsZXMgd2l0aGluLlxuICAgICAgICAgIGNvbnN0IGhhc2ggPSBjcnlwdG8uY3JlYXRlSGFzaChcIm1kNVwiKTtcbiAgICAgICAgICBnbG9iU3luYyhcIioqXCIsIHtcbiAgICAgICAgICAgIGRvdDogdHJ1ZSxcbiAgICAgICAgICAgIG5vZGlyOiB0cnVlLFxuICAgICAgICAgICAgZm9sbG93OiB0cnVlLFxuICAgICAgICAgICAgY3dkOiBwYXRoLnJlc29sdmUob3V0cHV0UGF0aCksXG4gICAgICAgICAgfSkuZm9yRWFjaCgoZmlsZVBhdGgpID0+XG4gICAgICAgICAgICBoYXNoLnVwZGF0ZShmcy5yZWFkRmlsZVN5bmMocGF0aC5yZXNvbHZlKG91dHB1dFBhdGgsIGZpbGVQYXRoKSkpLFxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBuZXcgRGlzdHJpYnV0aW9uSW52YWxpZGF0aW9uKFxuICAgICAgICAgICAgYCR7bmFtZX1JbnZhbGlkYXRpb25gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBkaXN0cmlidXRpb25JZDogZGlzdHJpYnV0aW9uLm5vZGVzLmRpc3RyaWJ1dGlvbi5pZCxcbiAgICAgICAgICAgICAgcGF0aHM6IGludmFsaWRhdGlvblBhdGhzLFxuICAgICAgICAgICAgICB2ZXJzaW9uOiBoYXNoLmRpZ2VzdChcImhleFwiKSxcbiAgICAgICAgICAgICAgd2FpdDogaW52YWxpZGF0aW9uLndhaXQsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBwYXJlbnQsXG4gICAgICAgICAgICAgIGlnbm9yZUNoYW5nZXM6ICRkZXYgPyBbXCIqXCJdIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIFVSTCBvZiB0aGUgd2Vic2l0ZS5cbiAgICpcbiAgICogSWYgdGhlIGBkb21haW5gIGlzIHNldCwgdGhpcyBpcyB0aGUgVVJMIHdpdGggdGhlIGN1c3RvbSBkb21haW4uXG4gICAqIE90aGVyd2lzZSwgaXQncyB0aGUgYXV0b2dlbmVyYXRlZCBDbG91ZEZyb250IFVSTC5cbiAgICovXG4gIHB1YmxpYyBnZXQgdXJsKCkge1xuICAgIHJldHVybiBhbGwoW3RoaXMuY2RuLmRvbWFpblVybCwgdGhpcy5jZG4udXJsXSkuYXBwbHkoXG4gICAgICAoW2RvbWFpblVybCwgdXJsXSkgPT4gZG9tYWluVXJsID8/IHVybCxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB1bmRlcmx5aW5nIFtyZXNvdXJjZXNdKC9kb2NzL2NvbXBvbmVudHMvI25vZGVzKSB0aGlzIGNvbXBvbmVudCBjcmVhdGVzLlxuICAgKi9cbiAgcHVibGljIGdldCBub2RlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgQW1hem9uIFMzIEJ1Y2tldCB0aGF0IHN0b3JlcyB0aGUgYXNzZXRzLlxuICAgICAgICovXG4gICAgICBhc3NldHM6IHRoaXMuYXNzZXRzLFxuICAgIH07XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHB1YmxpYyBnZXRTU1RMaW5rKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDdXN0b21SZXNvdXJjZU9wdGlvbnMsIElucHV0LCBkeW5hbWljIH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQge1xuICBSRFNEYXRhQ2xpZW50LFxuICBFeGVjdXRlU3RhdGVtZW50Q29tbWFuZCxcbn0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1yZHMtZGF0YVwiO1xuaW1wb3J0IHsgdXNlQ2xpZW50IH0gZnJvbSBcIi4uL2hlbHBlcnMvY2xpZW50LmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9zdGdyZXNUYWJsZUlucHV0cyB7XG4gIGNsdXN0ZXJBcm46IElucHV0PHN0cmluZz47XG4gIHNlY3JldEFybjogSW5wdXQ8c3RyaW5nPjtcbiAgZGF0YWJhc2VOYW1lOiBJbnB1dDxzdHJpbmc+O1xuICB0YWJsZU5hbWU6IElucHV0PHN0cmluZz47XG4gIHZlY3RvclNpemU6IElucHV0PG51bWJlcj47XG59XG5cbmludGVyZmFjZSBJbnB1dHMge1xuICBjbHVzdGVyQXJuOiBzdHJpbmc7XG4gIHNlY3JldEFybjogc3RyaW5nO1xuICBkYXRhYmFzZU5hbWU6IHN0cmluZztcbiAgdGFibGVOYW1lOiBzdHJpbmc7XG4gIHZlY3RvclNpemU6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIE91dHB1dHMge1xuICB2ZWN0b3JTaXplOiBJbnB1dHNbXCJ2ZWN0b3JTaXplXCJdO1xufVxuXG5jbGFzcyBQcm92aWRlciBpbXBsZW1lbnRzIGR5bmFtaWMuUmVzb3VyY2VQcm92aWRlciB7XG4gIGFzeW5jIGNyZWF0ZShpbnB1dHM6IElucHV0cyk6IFByb21pc2U8ZHluYW1pYy5DcmVhdGVSZXN1bHQ8T3V0cHV0cz4+IHtcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZURhdGFiYXNlKGlucHV0cyk7XG4gICAgYXdhaXQgdGhpcy5lbmFibGVQZ3ZlY3RvckV4dGVuc2lvbihpbnB1dHMpO1xuICAgIGF3YWl0IHRoaXMuZW5hYmxlUGd0cmdtRXh0ZW5zaW9uKGlucHV0cyk7XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVUYWJsZShpbnB1dHMpO1xuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkaW5nSW5kZXgoaW5wdXRzKTtcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZU1ldGFkYXRhSW5kZXgoaW5wdXRzKTtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGlucHV0cy50YWJsZU5hbWUsXG4gICAgICBvdXRzOiB7IHZlY3RvclNpemU6IGlucHV0cy52ZWN0b3JTaXplIH0sXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZShcbiAgICBpZDogc3RyaW5nLFxuICAgIG9sZHM6IE91dHB1dHMsXG4gICAgbmV3czogSW5wdXRzLFxuICApOiBQcm9taXNlPGR5bmFtaWMuVXBkYXRlUmVzdWx0PE91dHB1dHM+PiB7XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVEYXRhYmFzZShuZXdzKTtcbiAgICBhd2FpdCB0aGlzLmVuYWJsZVBndmVjdG9yRXh0ZW5zaW9uKG5ld3MpO1xuICAgIGF3YWl0IHRoaXMuZW5hYmxlUGd0cmdtRXh0ZW5zaW9uKG5ld3MpO1xuICAgIGlmIChvbGRzLnZlY3RvclNpemUgIT09IG5ld3MudmVjdG9yU2l6ZSkge1xuICAgICAgYXdhaXQgdGhpcy5yZW1vdmVUYWJsZShuZXdzKTtcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVUYWJsZShuZXdzKTtcbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGluZ0luZGV4KG5ld3MpO1xuICAgIGF3YWl0IHRoaXMuY3JlYXRlTWV0YWRhdGFJbmRleChuZXdzKTtcbiAgICByZXR1cm4ge1xuICAgICAgb3V0czogeyB2ZWN0b3JTaXplOiBuZXdzLnZlY3RvclNpemUgfSxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlRGF0YWJhc2UoaW5wdXRzOiBJbnB1dHMpIHtcbiAgICBjb25zdCBjbGllbnQgPSB1c2VDbGllbnQoUkRTRGF0YUNsaWVudCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNsaWVudC5zZW5kKFxuICAgICAgICBuZXcgRXhlY3V0ZVN0YXRlbWVudENvbW1hbmQoe1xuICAgICAgICAgIHJlc291cmNlQXJuOiBpbnB1dHMuY2x1c3RlckFybixcbiAgICAgICAgICBzZWNyZXRBcm46IGlucHV0cy5zZWNyZXRBcm4sXG4gICAgICAgICAgc3FsOiBgY3JlYXRlIGRhdGFiYXNlICR7aW5wdXRzLmRhdGFiYXNlTmFtZX1gLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgLy8gRVJST1I6IGRhdGFiYXNlIFwicGxheWdyb3VuZF9mcmFua1wiIGFscmVhZHkgZXhpc3RzOyBTUUxTdGF0ZTogNDJQMDRcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmVuZHNXaXRoKFwiU1FMU3RhdGU6IDQyUDA0XCIpKSByZXR1cm47XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBlbmFibGVQZ3ZlY3RvckV4dGVuc2lvbihpbnB1dHM6IElucHV0cykge1xuICAgIGNvbnN0IGNsaWVudCA9IHVzZUNsaWVudChSRFNEYXRhQ2xpZW50KTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY2xpZW50LnNlbmQoXG4gICAgICAgIG5ldyBFeGVjdXRlU3RhdGVtZW50Q29tbWFuZCh7XG4gICAgICAgICAgcmVzb3VyY2VBcm46IGlucHV0cy5jbHVzdGVyQXJuLFxuICAgICAgICAgIHNlY3JldEFybjogaW5wdXRzLnNlY3JldEFybixcbiAgICAgICAgICBkYXRhYmFzZTogaW5wdXRzLmRhdGFiYXNlTmFtZSxcbiAgICAgICAgICBzcWw6IGBjcmVhdGUgZXh0ZW5zaW9uIHZlY3RvcjtgLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgLy8gRVJST1I6IGV4dGVuc2lvbiBcInZlY3RvclwiIGFscmVhZHkgZXhpc3RzOyBTUUxTdGF0ZTogNDI3MTBcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmVuZHNXaXRoKFwiU1FMU3RhdGU6IDQyNzEwXCIpKSByZXR1cm47XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBlbmFibGVQZ3RyZ21FeHRlbnNpb24oaW5wdXRzOiBJbnB1dHMpIHtcbiAgICBjb25zdCBjbGllbnQgPSB1c2VDbGllbnQoUkRTRGF0YUNsaWVudCk7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNsaWVudC5zZW5kKFxuICAgICAgICBuZXcgRXhlY3V0ZVN0YXRlbWVudENvbW1hbmQoe1xuICAgICAgICAgIHJlc291cmNlQXJuOiBpbnB1dHMuY2x1c3RlckFybixcbiAgICAgICAgICBzZWNyZXRBcm46IGlucHV0cy5zZWNyZXRBcm4sXG4gICAgICAgICAgZGF0YWJhc2U6IGlucHV0cy5kYXRhYmFzZU5hbWUsXG4gICAgICAgICAgc3FsOiBgY3JlYXRlIGV4dGVuc2lvbiBwZ190cmdtO2AsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAvLyBFUlJPUjogZXh0ZW5zaW9uIFwidmVjdG9yXCIgYWxyZWFkeSBleGlzdHM7IFNRTFN0YXRlOiA0MjcxMFxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuZW5kc1dpdGgoXCJTUUxTdGF0ZTogNDI3MTBcIikpIHJldHVybjtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVRhYmxlKGlucHV0czogSW5wdXRzKSB7XG4gICAgY29uc3QgY2xpZW50ID0gdXNlQ2xpZW50KFJEU0RhdGFDbGllbnQpO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjbGllbnQuc2VuZChcbiAgICAgICAgbmV3IEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kKHtcbiAgICAgICAgICByZXNvdXJjZUFybjogaW5wdXRzLmNsdXN0ZXJBcm4sXG4gICAgICAgICAgc2VjcmV0QXJuOiBpbnB1dHMuc2VjcmV0QXJuLFxuICAgICAgICAgIGRhdGFiYXNlOiBpbnB1dHMuZGF0YWJhc2VOYW1lLFxuICAgICAgICAgIHNxbDogYGNyZWF0ZSB0YWJsZSAke2lucHV0cy50YWJsZU5hbWV9IChcbiAgICAgICAgICAgIGlkIGJpZ3NlcmlhbCBwcmltYXJ5IGtleSxcbiAgICAgICAgICAgIGVtYmVkZGluZyB2ZWN0b3IoJHtpbnB1dHMudmVjdG9yU2l6ZX0pLFxuICAgICAgICAgICAgbWV0YWRhdGEganNvbmJcbiAgICAgICAgICApO2AsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAvLyBFUlJPUjogcmVsYXRpb24gXCJlbWJlZGRpbmdzXCIgYWxyZWFkeSBleGlzdHM7IFNRTFN0YXRlOiA0MlAwN1xuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuZW5kc1dpdGgoXCJTUUxTdGF0ZTogNDJQMDdcIikpIHJldHVybjtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlbW92ZVRhYmxlKGlucHV0czogSW5wdXRzKSB7XG4gICAgYXdhaXQgdXNlQ2xpZW50KFJEU0RhdGFDbGllbnQpLnNlbmQoXG4gICAgICBuZXcgRXhlY3V0ZVN0YXRlbWVudENvbW1hbmQoe1xuICAgICAgICByZXNvdXJjZUFybjogaW5wdXRzLmNsdXN0ZXJBcm4sXG4gICAgICAgIHNlY3JldEFybjogaW5wdXRzLnNlY3JldEFybixcbiAgICAgICAgZGF0YWJhc2U6IGlucHV0cy5kYXRhYmFzZU5hbWUsXG4gICAgICAgIHNxbDogYGRyb3AgdGFibGUgaWYgZXhpc3RzICR7aW5wdXRzLnRhYmxlTmFtZX07YCxcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICBhc3luYyBjcmVhdGVFbWJlZGRpbmdJbmRleChpbnB1dHM6IElucHV0cykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB1c2VDbGllbnQoUkRTRGF0YUNsaWVudCkuc2VuZChcbiAgICAgICAgbmV3IEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kKHtcbiAgICAgICAgICByZXNvdXJjZUFybjogaW5wdXRzLmNsdXN0ZXJBcm4sXG4gICAgICAgICAgc2VjcmV0QXJuOiBpbnB1dHMuc2VjcmV0QXJuLFxuICAgICAgICAgIGRhdGFiYXNlOiBpbnB1dHMuZGF0YWJhc2VOYW1lLFxuICAgICAgICAgIHNxbDogYGNyZWF0ZSBpbmRleCBvbiAke2lucHV0cy50YWJsZU5hbWV9IHVzaW5nIGhuc3cgKGVtYmVkZGluZyB2ZWN0b3JfY29zaW5lX29wcyk7YCxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIC8vIEVSUk9SOiByZWxhdGlvbiBcImVtYmVkZGluZ3NcIiBhbHJlYWR5IGV4aXN0czsgU1FMU3RhdGU6IDQyUDA3XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZS5lbmRzV2l0aChcIlNRTFN0YXRlOiA0MlAwN1wiKSkgcmV0dXJuO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlTWV0YWRhdGFJbmRleChpbnB1dHM6IElucHV0cykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB1c2VDbGllbnQoUkRTRGF0YUNsaWVudCkuc2VuZChcbiAgICAgICAgbmV3IEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kKHtcbiAgICAgICAgICByZXNvdXJjZUFybjogaW5wdXRzLmNsdXN0ZXJBcm4sXG4gICAgICAgICAgc2VjcmV0QXJuOiBpbnB1dHMuc2VjcmV0QXJuLFxuICAgICAgICAgIGRhdGFiYXNlOiBpbnB1dHMuZGF0YWJhc2VOYW1lLFxuICAgICAgICAgIHNxbDogYGNyZWF0ZSBpbmRleCBvbiAke2lucHV0cy50YWJsZU5hbWV9IHVzaW5nIGdpbiAobWV0YWRhdGEpO2AsXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAvLyBFUlJPUjogcmVsYXRpb24gXCJlbWJlZGRpbmdzXCIgYWxyZWFkeSBleGlzdHM7IFNRTFN0YXRlOiA0MlAwN1xuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuZW5kc1dpdGgoXCJTUUxTdGF0ZTogNDJQMDdcIikpIHJldHVybjtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRW1iZWRkaW5nc1RhYmxlIGV4dGVuZHMgZHluYW1pYy5SZXNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhcmdzOiBQb3N0Z3Jlc1RhYmxlSW5wdXRzLFxuICAgIG9wdHM/OiBDdXN0b21SZXNvdXJjZU9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKG5ldyBQcm92aWRlcigpLCBgJHtuYW1lfS5zc3QuYXdzLkVtYmVkZGluZ3NUYWJsZWAsIGFyZ3MsIG9wdHMpO1xuICB9XG59XG4iLCAiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7XG4gIENvbXBvbmVudFJlc291cmNlT3B0aW9ucyxcbiAgYWxsLFxuICBpbnRlcnBvbGF0ZSxcbiAgb3V0cHV0LFxufSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgVHJhbnNmb3JtLCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50LmpzXCI7XG5pbXBvcnQgeyBQb3N0Z3JlcywgUG9zdGdyZXNBcmdzIH0gZnJvbSBcIi4vcG9zdGdyZXMuanNcIjtcbmltcG9ydCB7IEVtYmVkZGluZ3NUYWJsZSB9IGZyb20gXCIuL3Byb3ZpZGVycy9lbWJlZGRpbmdzLXRhYmxlLmpzXCI7XG5pbXBvcnQgeyBGdW5jdGlvbiB9IGZyb20gXCIuL2Z1bmN0aW9uLmpzXCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmsuanNcIjtcbmltcG9ydCB7IFZpc2libGVFcnJvciB9IGZyb20gXCIuLi9lcnJvci5qc1wiO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXQuanNcIjtcblxuY29uc3QgTW9kZWxJbmZvID0ge1xuICBcImFtYXpvbi50aXRhbi1lbWJlZC10ZXh0LXYxXCI6IHsgcHJvdmlkZXI6IFwiYmVkcm9ja1wiIGFzIGNvbnN0LCBzaXplOiAxNTM2IH0sXG4gIFwiYW1hem9uLnRpdGFuLWVtYmVkLWltYWdlLXYxXCI6IHsgcHJvdmlkZXI6IFwiYmVkcm9ja1wiIGFzIGNvbnN0LCBzaXplOiAxMDI0IH0sXG4gIFwidGV4dC1lbWJlZGRpbmctYWRhLTAwMlwiOiB7IHByb3ZpZGVyOiBcIm9wZW5haVwiIGFzIGNvbnN0LCBzaXplOiAxNTM2IH0sXG4gIFwidGV4dC1lbWJlZGRpbmctMy1zbWFsbFwiOiB7IHByb3ZpZGVyOiBcIm9wZW5haVwiIGFzIGNvbnN0LCBzaXplOiAxNTM2IH0sXG4gIFwidGV4dC1lbWJlZGRpbmctMy1sYXJnZVwiOiB7IHByb3ZpZGVyOiBcIm9wZW5haVwiIGFzIGNvbnN0LCBzaXplOiAyMDAwIH0sXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFZlY3RvckFyZ3Mge1xuICAvKipcbiAgICogVGhlIG1vZGVsIHVzZWQgZm9yIGdlbmVyYXRpbmcgdGhlIHZlY3RvcnMuIFN1cHBvcnRzIEFXUycgYW5kIE9wZW5BSSdzIG1vZGVscy5cbiAgICpcbiAgICogVG8gdXNlIE9wZW5BSSdzIGB0ZXh0LWVtYmVkZGluZy1hZGEtMDAyYCwgYHRleHQtZW1iZWRkaW5nLTMtc21hbGxgLCBvciBgdGV4dC1lbWJlZGRpbmctMy1sYXJnZWAgbW9kZWwsIHlvdSdsbCBuZWVkIHRvIHBhc3MgaW4gYW4gYG9wZW5BaUFwaUtleWAuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBUbyB1c2UgT3BlbkFJJ3MgbW9kZWxzLCB5b3UnbGwgbmVlZCB0byBwYXNzIGluIGFuIGBvcGVuQWlBcGlLZXlgLlxuICAgKiA6OjpcbiAgICpcbiAgICogT3BlbkFJJ3MgYHRleHQtZW1iZWRkaW5nLTMtbGFyZ2VgIG1vZGVsIHByb2R1Y2VzIGVtYmVkZGluZ3Mgd2l0aCAzMDcyIGRpbWVuc2lvbnMuIFRoaXMgaXMgW3NjYWxlZCBkb3duXShodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvZW1iZWRkaW5ncy91c2UtY2FzZXMpIHRvIDIwMDAgZGltZW5zaW9ucyB0byBzdG9yZSBpdCBpbiBQb3N0Z3Jlcy4gVGhlIFBvc3RncmVzIGRhdGFiYXNlIGluIHRoaXMgY29tcG9uZW50IGNhbiBzdG9yZSB1cCB0byAyMDAwIGRpbWVuc2lvbnMgd2l0aCBhIHBndmVjdG9yIFtITlNXIGluZGV4XShodHRwczovL2dpdGh1Yi5jb20vcGd2ZWN0b3IvcGd2ZWN0b3I/dGFiPXJlYWRtZS1vdi1maWxlI2huc3cpLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgXCJhbWF6b24udGl0YW4tZW1iZWQtdGV4dC12MVwiYFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKlxuICAgKiB7XG4gICAqICAgbW9kZWw6IFwiYW1hem9uLnRpdGFuLWVtYmVkLWltYWdlLXYxXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIG1vZGVsPzogSW5wdXQ8a2V5b2YgdHlwZW9mIE1vZGVsSW5mbz47XG4gIC8qKlxuICAgKiBZb3VyIE9wZW5BSSBBUEkga2V5LiBUaGlzIGlzIG5lZWRlZCBvbmx5IGlmIHlvdSdyZSB1c2luZyB0aGUgYHRleHQtZW1iZWRkaW5nLWFkYS0wMDJgLCBgdGV4dC1lbWJlZGRpbmctMy1zbWFsbGAsIG9yIGB0ZXh0LWVtYmVkZGluZy0zLXNtYWxsYCBtb2RlbC5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIFVzZSBgc3N0LlNlY3JldGAgdG8gc3RvcmUgeW91ciBBUEkga2V5IHNlY3VyZWx5LlxuICAgKiA6OjpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICpcbiAgICoge1xuICAgKiAgIG9wZW5BaUFwaUtleTogXCI8eW91ci1hcGkta2V5PlwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBvcGVuQWlBcGlLZXk/OiBJbnB1dDxzdHJpbmc+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0pIGhvdyB0aGlzIGNvbXBvbmVudCBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIFBvc3RncmVzIGNvbXBvbmVudC5cbiAgICAgKi9cbiAgICBwb3N0Z3Jlcz86IFRyYW5zZm9ybTxQb3N0Z3Jlc0FyZ3M+O1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBgVmVjdG9yYCBjb21wb25lbnQgbGV0cyB5b3Ugc3RvcmUgYW5kIHJldHJpZXZlIHZlY3RvciBkYXRhIGluIHlvdXIgYXBwLlxuICpcbiAqIC0gSXQgdXNlcyBhbiBMTE0gdG8gZ2VuZXJhdGUgdGhlIGVtYmVkZGluZy5cbiAqIC0gU3RvcmVzIGl0IGluIGEgdmVjdG9yIGRhdGFiYXNlIHBvd2VyZWQgYnkgW1JEUyBQb3N0Z3JlcyBTZXJ2ZXJsZXNzIHYyXShodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vQW1hem9uUkRTL2xhdGVzdC9BdXJvcmFVc2VyR3VpZGUvYXVyb3JhLXNlcnZlcmxlc3MtdjIuaHRtbCkuXG4gKiAtIFByb3ZpZGVzIGEgW1NES10oL2RvY3MvcmVmZXJlbmNlL3Nkay8pIHRvIGluZ2VzdCwgcmV0cmlldmUsIGFuZCByZW1vdmUgdGhlIHZlY3RvciBkYXRhLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogIyMjIyBDcmVhdGUgdGhlIGRhdGFiYXNlXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHZlY3RvciA9IG5ldyBzc3QuYXdzLlZlY3RvcihcIk15VmVjdG9yREJcIik7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIENoYW5nZSB0aGUgbW9kZWxcbiAqXG4gKiBPcHRpb25hbGx5LCB1c2UgYSBkaWZmZXJlbnQgbW9kZWwsIGxpa2UgT3BlbkFJJ3MgYHRleHQtZW1iZWRkaW5nLTMtc21hbGxgIG1vZGVsLiBZb3UnbGwgbmVlZCB0byBwYXNzIGluIHlvdXIgT3BlbkFJIEFQSSBrZXkuXG4gKlxuICogYGBgdHMgezN9XG4gKiBuZXcgc3N0LmF3cy5WZWN0b3IoXCJNeVZlY3RvckRCXCIsIHtcbiAqICAgb3BlbkFpQXBpS2V5OiBuZXcgc3N0LmF3cy5TZWNyZXQoXCJPcGVuQWlBcGlLZXlcIikudmFsdWUsXG4gKiAgIG1vZGVsOiBcInRleHQtZW1iZWRkaW5nLTMtc21hbGxcIlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIExpbmsgdG8gYSByZXNvdXJjZVxuICpcbiAqIFlvdSBjYW4gbGluayBpdCB0byBvdGhlciByZXNvdXJjZXMsIGxpa2UgYSBmdW5jdGlvbiBvciB5b3VyIE5leHQuanMgYXBwLlxuICpcbiAqIGBgYHRzXG4gKiBuZXcgc3N0LmF3cy5OZXh0anMoXCJNeVdlYlwiLCB7XG4gKiAgIGxpbms6IFt2ZWN0b3JdXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIE9uY2UgbGlua2VkLCB5b3UgY2FuIHF1ZXJ5IGl0IGluIHlvdXIgZnVuY3Rpb24gY29kZSB1c2luZyB0aGUgW1NES10oL2RvY3MvcmVmZXJlbmNlL3Nkay8pLlxuICpcbiAqIGBgYHRzIHRpdGxlPVwiYXBwL3BhZ2UudHN4XCIgezN9XG4gKiBpbXBvcnQgeyBWZWN0b3JDbGllbnQgfSBmcm9tIFwic3N0XCI7XG4gKlxuICogY29uc3QgdmVjdG9yID0gVmVjdG9yQ2xpZW50KFwiTXlWZWN0b3JEQlwiKTtcbiAqXG4gKiBhd2FpdCB2ZWN0b3IucmV0cmlldmUoe1xuICogICB0ZXh0OiBcIlNvbWUgdGV4dCB0byBzZWFyY2ggZm9yXCJcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBWZWN0b3JcbiAgZXh0ZW5kcyBDb21wb25lbnRcbiAgaW1wbGVtZW50cyBMaW5rLkxpbmthYmxlLCBMaW5rLkFXUy5MaW5rYWJsZVxue1xuICBwcml2YXRlIGluZ2VzdEhhbmRsZXI6IEZ1bmN0aW9uO1xuICBwcml2YXRlIHJldHJpZXZlSGFuZGxlcjogRnVuY3Rpb247XG4gIHByaXZhdGUgcmVtb3ZlSGFuZGxlcjogRnVuY3Rpb247XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M/OiBWZWN0b3JBcmdzLFxuICAgIG9wdHM/OiBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmF3czpWZWN0b3JcIiwgbmFtZSwgYXJncywgb3B0cyk7XG5cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xuICAgIGNvbnN0IG1vZGVsID0gbm9ybWFsaXplTW9kZWwoKTtcbiAgICBjb25zdCB2ZWN0b3JTaXplID0gbm9ybWFsaXplVmVjdG9yU2l6ZSgpO1xuICAgIGNvbnN0IG9wZW5BaUFwaUtleSA9IG5vcm1hbGl6ZU9wZW5BaUFwaUtleSgpO1xuICAgIGNvbnN0IGRhdGFiYXNlTmFtZSA9IG5vcm1hbGl6ZURhdGFiYXNlTmFtZSgpO1xuICAgIGNvbnN0IHRhYmxlTmFtZSA9IG5vcm1hbGl6ZVRhYmxlTmFtZSgpO1xuXG4gICAgY29uc3QgcG9zdGdyZXMgPSBjcmVhdGVEQigpO1xuICAgIGNyZWF0ZURCVGFibGUoKTtcbiAgICBjb25zdCBpbmdlc3RIYW5kbGVyID0gY3JlYXRlSW5nZXN0SGFuZGxlcigpO1xuICAgIGNvbnN0IHJldHJpZXZlSGFuZGxlciA9IGNyZWF0ZVJldHJpZXZlSGFuZGxlcigpO1xuICAgIGNvbnN0IHJlbW92ZUhhbmRsZXIgPSBjcmVhdGVSZW1vdmVIYW5kbGVyKCk7XG5cbiAgICB0aGlzLmluZ2VzdEhhbmRsZXIgPSBpbmdlc3RIYW5kbGVyO1xuICAgIHRoaXMucmV0cmlldmVIYW5kbGVyID0gcmV0cmlldmVIYW5kbGVyO1xuICAgIHRoaXMucmVtb3ZlSGFuZGxlciA9IHJlbW92ZUhhbmRsZXI7XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVNb2RlbCgpIHtcbiAgICAgIHJldHVybiBvdXRwdXQoYXJncz8ubW9kZWwpLmFwcGx5KChtb2RlbCkgPT4ge1xuICAgICAgICBpZiAobW9kZWwgJiYgIU1vZGVsSW5mb1ttb2RlbF0pXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG1vZGVsOiAke21vZGVsfWApO1xuICAgICAgICByZXR1cm4gbW9kZWwgPz8gXCJhbWF6b24udGl0YW4tZW1iZWQtaW1hZ2UtdjFcIjtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZU9wZW5BaUFwaUtleSgpIHtcbiAgICAgIHJldHVybiBhbGwoW21vZGVsLCBhcmdzPy5vcGVuQWlBcGlLZXldKS5hcHBseSgoW21vZGVsLCBvcGVuQWlBcGlLZXldKSA9PiB7XG4gICAgICAgIGlmIChNb2RlbEluZm9bbW9kZWxdLnByb3ZpZGVyID09PSBcIm9wZW5haVwiICYmICFvcGVuQWlBcGlLZXkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKFxuICAgICAgICAgICAgYFBsZWFzZSBwYXNzIGluIHRoZSBPUEVOQUlfQVBJX0tFWSB2aWEgZW52aXJvbm1lbnQgdmFyaWFibGUgdG8gdXNlIHRoZSAke21vZGVsfSBtb2RlbC4gWW91IGNhbiBnZXQgeW91ciBBUEkga2V5cyBoZXJlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vYXBpLWtleXNgLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wZW5BaUFwaUtleTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZVZlY3RvclNpemUoKSB7XG4gICAgICByZXR1cm4gbW9kZWwuYXBwbHkoKG1vZGVsKSA9PiBNb2RlbEluZm9bbW9kZWxdLnNpemUpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZURhdGFiYXNlTmFtZSgpIHtcbiAgICAgIHJldHVybiAkYXBwLnN0YWdlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZVRhYmxlTmFtZSgpIHtcbiAgICAgIHJldHVybiBcImVtYmVkZGluZ3NcIjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEQigpIHtcbiAgICAgIHJldHVybiBuZXcgUG9zdGdyZXMoXG4gICAgICAgIGAke25hbWV9RGF0YWJhc2VgLFxuICAgICAgICB0cmFuc2Zvcm0oYXJncz8udHJhbnNmb3JtPy5wb3N0Z3Jlcywge30pLFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEQlRhYmxlKCkge1xuICAgICAgbmV3IEVtYmVkZGluZ3NUYWJsZShcbiAgICAgICAgYCR7bmFtZX1UYWJsZWAsXG4gICAgICAgIHtcbiAgICAgICAgICBjbHVzdGVyQXJuOiBwb3N0Z3Jlcy5ub2Rlcy5jbHVzdGVyLmFybixcbiAgICAgICAgICBzZWNyZXRBcm46IHBvc3RncmVzLm5vZGVzLmNsdXN0ZXIubWFzdGVyVXNlclNlY3JldHNbMF0uc2VjcmV0QXJuLFxuICAgICAgICAgIGRhdGFiYXNlTmFtZSxcbiAgICAgICAgICB0YWJsZU5hbWUsXG4gICAgICAgICAgdmVjdG9yU2l6ZSxcbiAgICAgICAgfSxcbiAgICAgICAgeyBwYXJlbnQsIGRlcGVuZHNPbjogcG9zdGdyZXMubm9kZXMuaW5zdGFuY2UgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlSW5nZXN0SGFuZGxlcigpIHtcbiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXG4gICAgICAgIGAke25hbWV9SW5nZXN0b3JgLFxuICAgICAgICB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IGAke25hbWV9IGluZ2VzdCBoYW5kbGVyYCxcbiAgICAgICAgICBidW5kbGU6IGJ1aWxkQnVuZGxlUGF0aCgpLFxuICAgICAgICAgIGhhbmRsZXI6IFwiaW5kZXguaW5nZXN0XCIsXG4gICAgICAgICAgZW52aXJvbm1lbnQ6IGJ1aWxkSGFuZGxlckVudmlyb25tZW50KCksXG4gICAgICAgICAgcGVybWlzc2lvbnM6IGJ1aWxkSGFuZGxlclBlcm1pc3Npb25zKCksXG4gICAgICAgIH0sXG4gICAgICAgIHsgcGFyZW50IH0sXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVJldHJpZXZlSGFuZGxlcigpIHtcbiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXG4gICAgICAgIGAke25hbWV9UmV0cmlldmVyYCxcbiAgICAgICAge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJHtuYW1lfSByZXRyaWV2ZSBoYW5kbGVyYCxcbiAgICAgICAgICBidW5kbGU6IGJ1aWxkQnVuZGxlUGF0aCgpLFxuICAgICAgICAgIGhhbmRsZXI6IFwiaW5kZXgucmV0cmlldmVcIixcbiAgICAgICAgICBlbnZpcm9ubWVudDogYnVpbGRIYW5kbGVyRW52aXJvbm1lbnQoKSxcbiAgICAgICAgICBwZXJtaXNzaW9uczogYnVpbGRIYW5kbGVyUGVybWlzc2lvbnMoKSxcbiAgICAgICAgfSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUmVtb3ZlSGFuZGxlcigpIHtcbiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oXG4gICAgICAgIGAke25hbWV9UmVtb3ZlcmAsXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYCR7bmFtZX0gcmVtb3ZlIGhhbmRsZXJgLFxuICAgICAgICAgIGJ1bmRsZTogYnVpbGRCdW5kbGVQYXRoKCksXG4gICAgICAgICAgaGFuZGxlcjogXCJpbmRleC5yZW1vdmVcIixcbiAgICAgICAgICBlbnZpcm9ubWVudDogYnVpbGRIYW5kbGVyRW52aXJvbm1lbnQoKSxcbiAgICAgICAgICBwZXJtaXNzaW9uczogYnVpbGRIYW5kbGVyUGVybWlzc2lvbnMoKSxcbiAgICAgICAgfSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRCdW5kbGVQYXRoKCkge1xuICAgICAgcmV0dXJuIHBhdGguam9pbigkY2xpLnBhdGhzLnBsYXRmb3JtLCBcImRpc3RcIiwgXCJ2ZWN0b3ItaGFuZGxlclwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEhhbmRsZXJFbnZpcm9ubWVudCgpIHtcbiAgICAgIHJldHVybiBhbGwoW21vZGVsLCBvcGVuQWlBcGlLZXldKS5hcHBseSgoW21vZGVsLCBvcGVuQWlBcGlLZXldKSA9PiAoe1xuICAgICAgICBDTFVTVEVSX0FSTjogcG9zdGdyZXMubm9kZXMuY2x1c3Rlci5hcm4sXG4gICAgICAgIFNFQ1JFVF9BUk46IHBvc3RncmVzLm5vZGVzLmNsdXN0ZXIubWFzdGVyVXNlclNlY3JldHNbMF0uc2VjcmV0QXJuLFxuICAgICAgICBEQVRBQkFTRV9OQU1FOiBkYXRhYmFzZU5hbWUsXG4gICAgICAgIFRBQkxFX05BTUU6IHRhYmxlTmFtZSxcbiAgICAgICAgTU9ERUw6IG1vZGVsLFxuICAgICAgICBNT0RFTF9QUk9WSURFUjogTW9kZWxJbmZvW21vZGVsXS5wcm92aWRlcixcbiAgICAgICAgLi4uKG9wZW5BaUFwaUtleVxuICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBPUEVOQUlfQVBJX0tFWTogb3BlbkFpQXBpS2V5LFxuICAgICAgICAgICAgICBPUEVOQUlfTU9ERUxfRElNRU5TSU9OUzogTW9kZWxJbmZvW21vZGVsXS5zaXplLnRvU3RyaW5nKCksXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB7fSksXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRIYW5kbGVyUGVybWlzc2lvbnMoKSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgYWN0aW9uczogW1wiYmVkcm9jazpJbnZva2VNb2RlbFwiXSxcbiAgICAgICAgICByZXNvdXJjZXM6IFtcbiAgICAgICAgICAgIGludGVycG9sYXRlYGFybjphd3M6YmVkcm9jazp1cy1lYXN0LTE6OmZvdW5kYXRpb24tbW9kZWwvKmAsXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInNlY3JldHNtYW5hZ2VyOkdldFNlY3JldFZhbHVlXCJdLFxuICAgICAgICAgIHJlc291cmNlczogW3Bvc3RncmVzLm5vZGVzLmNsdXN0ZXIubWFzdGVyVXNlclNlY3JldHNbMF0uc2VjcmV0QXJuXSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGFjdGlvbnM6IFtcInJkcy1kYXRhOkV4ZWN1dGVTdGF0ZW1lbnRcIl0sXG4gICAgICAgICAgcmVzb3VyY2VzOiBbcG9zdGdyZXMubm9kZXMuY2x1c3Rlci5hcm5dLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGluZ2VzdG9yIExhbWJkYSBmdW5jdGlvbi5cbiAgICovXG4gIHB1YmxpYyBnZXQgaW5nZXN0b3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5nZXN0SGFuZGxlci5uYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSByZXRyaWV2ZXIgTGFtYmRhIGZ1bmN0aW9uLlxuICAgKi9cbiAgcHVibGljIGdldCByZXRyaWV2ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMucmV0cmlldmVIYW5kbGVyLm5hbWU7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIHJlbW92ZXIgTGFtYmRhIGZ1bmN0aW9uLlxuICAgKi9cbiAgcHVibGljIGdldCByZW1vdmVyKCkge1xuICAgIHJldHVybiB0aGlzLnJlbW92ZUhhbmRsZXIubmFtZTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHVibGljIGdldFNTVExpbmsoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgaW5nZXN0b3I6IHRoaXMuaW5nZXN0b3IsXG4gICAgICAgIHJldHJpZXZlcjogdGhpcy5yZXRyaWV2ZXIsXG4gICAgICAgIHJlbW92ZXI6IHRoaXMucmVtb3ZlcixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHVibGljIGdldFNTVEFXU1Blcm1pc3Npb25zKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGFjdGlvbnM6IFtcImxhbWJkYTpJbnZva2VGdW5jdGlvblwiXSxcbiAgICAgICAgcmVzb3VyY2VzOiBbXG4gICAgICAgICAgdGhpcy5pbmdlc3RIYW5kbGVyLm5vZGVzLmZ1bmN0aW9uLmFybixcbiAgICAgICAgICB0aGlzLnJldHJpZXZlSGFuZGxlci5ub2Rlcy5mdW5jdGlvbi5hcm4sXG4gICAgICAgICAgdGhpcy5yZW1vdmVIYW5kbGVyLm5vZGVzLmZ1bmN0aW9uLmFybixcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEN1c3RvbVJlc291cmNlT3B0aW9ucywgSW5wdXQsIE91dHB1dCwgZHluYW1pYyB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0IHtcbiAgQ2xvdWRGcm9udENsaWVudCxcbiAgR2V0Q2xvdWRGcm9udE9yaWdpbkFjY2Vzc0lkZW50aXR5Q29tbWFuZCxcbiAgQ3JlYXRlQ2xvdWRGcm9udE9yaWdpbkFjY2Vzc0lkZW50aXR5Q29tbWFuZCxcbiAgRGVsZXRlQ2xvdWRGcm9udE9yaWdpbkFjY2Vzc0lkZW50aXR5Q29tbWFuZCxcbn0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1jbG91ZGZyb250XCI7XG5pbXBvcnQgeyB1c2VDbGllbnQgfSBmcm9tIFwiLi4vaGVscGVycy9jbGllbnQuanNcIjtcblxuaW50ZXJmYWNlIElucHV0cyB7fVxuXG5pbnRlcmZhY2UgT3V0cHV0cyB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIE9yaWdpbkFjY2Vzc0lkZW50aXR5SW5wdXRzIHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3JpZ2luQWNjZXNzSWRlbnRpdHkge31cblxuY2xhc3MgUHJvdmlkZXIgaW1wbGVtZW50cyBkeW5hbWljLlJlc291cmNlUHJvdmlkZXIge1xuICBhc3luYyBjcmVhdGUoaW5wdXRzOiBJbnB1dHMpOiBQcm9taXNlPGR5bmFtaWMuQ3JlYXRlUmVzdWx0PE91dHB1dHM+PiB7XG4gICAgY29uc3QgY2xpZW50ID0gdXNlQ2xpZW50KENsb3VkRnJvbnRDbGllbnQpO1xuXG4gICAgY29uc3QgcmV0ID0gYXdhaXQgY2xpZW50LnNlbmQoXG4gICAgICBuZXcgQ3JlYXRlQ2xvdWRGcm9udE9yaWdpbkFjY2Vzc0lkZW50aXR5Q29tbWFuZCh7XG4gICAgICAgIENsb3VkRnJvbnRPcmlnaW5BY2Nlc3NJZGVudGl0eUNvbmZpZzoge1xuICAgICAgICAgIENhbGxlclJlZmVyZW5jZTogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICAgIENvbW1lbnQ6IFwiQ3JlYXRlZCBieSBTU1RcIixcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICk7XG4gICAgY29uc3QgaWQgPSByZXQuQ2xvdWRGcm9udE9yaWdpbkFjY2Vzc0lkZW50aXR5Py5JZCE7XG5cbiAgICByZXR1cm4geyBpZCwgb3V0czoge30gfTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZShpZDogc3RyaW5nLCBvdXRzOiBPdXRwdXRzKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgY2xpZW50ID0gdXNlQ2xpZW50KENsb3VkRnJvbnRDbGllbnQpO1xuXG4gICAgY29uc3QgcmV0ID0gYXdhaXQgY2xpZW50LnNlbmQoXG4gICAgICBuZXcgR2V0Q2xvdWRGcm9udE9yaWdpbkFjY2Vzc0lkZW50aXR5Q29tbWFuZCh7IElkOiBpZCB9KSxcbiAgICApO1xuXG4gICAgYXdhaXQgY2xpZW50LnNlbmQoXG4gICAgICBuZXcgRGVsZXRlQ2xvdWRGcm9udE9yaWdpbkFjY2Vzc0lkZW50aXR5Q29tbWFuZCh7XG4gICAgICAgIElkOiBpZCxcbiAgICAgICAgSWZNYXRjaDogcmV0LkVUYWcsXG4gICAgICB9KSxcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBPcmlnaW5BY2Nlc3NJZGVudGl0eSBleHRlbmRzIGR5bmFtaWMuUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogT3JpZ2luQWNjZXNzSWRlbnRpdHlJbnB1dHMsXG4gICAgb3B0cz86IEN1c3RvbVJlc291cmNlT3B0aW9ucyxcbiAgKSB7XG4gICAgc3VwZXIobmV3IFByb3ZpZGVyKCksIGAke25hbWV9LnNzdC5hd3MuT3JpZ2luQWNjZXNzSWRlbnRpdHlgLCBhcmdzLCBvcHRzKTtcbiAgfVxufVxuIiwgImltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgeyBnbG9iU3luYyB9IGZyb20gXCJnbG9iXCI7XG5pbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCB7XG4gIE91dHB1dCxcbiAgVW53cmFwLFxuICBvdXRwdXQsXG4gIGFsbCxcbiAgaW50ZXJwb2xhdGUsXG4gIENvbXBvbmVudFJlc291cmNlLFxuICBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsXG59IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuaW1wb3J0IHsgQ2RuLCBDZG5Eb21haW5BcmdzIH0gZnJvbSBcIi4vY2RuLmpzXCI7XG5pbXBvcnQgeyBGdW5jdGlvbiwgRnVuY3Rpb25BcmdzIH0gZnJvbSBcIi4vZnVuY3Rpb24uanNcIjtcbmltcG9ydCB7IERpc3RyaWJ1dGlvbkludmFsaWRhdGlvbiB9IGZyb20gXCIuL3Byb3ZpZGVycy9kaXN0cmlidXRpb24taW52YWxpZGF0aW9uLmpzXCI7XG5pbXBvcnQgeyB1c2VQcm92aWRlciB9IGZyb20gXCIuL2hlbHBlcnMvcHJvdmlkZXIuanNcIjtcbmltcG9ydCB7IEJ1Y2tldCwgQnVja2V0QXJncyB9IGZyb20gXCIuL2J1Y2tldC5qc1wiO1xuaW1wb3J0IHsgQnVja2V0RmlsZSwgQnVja2V0RmlsZXMgfSBmcm9tIFwiLi9wcm92aWRlcnMvYnVja2V0LWZpbGVzLmpzXCI7XG5pbXBvcnQgeyBzYW5pdGl6ZVRvUGFzY2FsQ2FzZSB9IGZyb20gXCIuLi9uYW1pbmcuanNcIjtcbmltcG9ydCB7IElucHV0IH0gZnJvbSBcIi4uL2lucHV0LmpzXCI7XG5pbXBvcnQgeyB0cmFuc2Zvcm0sIHR5cGUgUHJldHRpZnksIHR5cGUgVHJhbnNmb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudC5qc1wiO1xuaW1wb3J0IHsgVmlzaWJsZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLmpzXCI7XG5pbXBvcnQgeyBDcm9uIH0gZnJvbSBcIi4vY3Jvbi5qc1wiO1xuaW1wb3J0IHsgT3JpZ2luQWNjZXNzSWRlbnRpdHkgfSBmcm9tIFwiLi9wcm92aWRlcnMvb3JpZ2luLWFjY2Vzcy1pZGVudGl0eS5qc1wiO1xuaW1wb3J0IHsgQmFzZVNpdGVGaWxlT3B0aW9ucyB9IGZyb20gXCIuLi9iYXNlL2Jhc2Utc2l0ZS5qc1wiO1xuaW1wb3J0IHsgQmFzZVNzclNpdGVBcmdzIH0gZnJvbSBcIi4uL2Jhc2UvYmFzZS1zc3Itc2l0ZS5qc1wiO1xuXG50eXBlIENsb3VkRnJvbnRGdW5jdGlvbkNvbmZpZyA9IHsgaW5qZWN0aW9uczogc3RyaW5nW10gfTtcbnR5cGUgRWRnZUZ1bmN0aW9uQ29uZmlnID0geyBmdW5jdGlvbjogVW53cmFwPEZ1bmN0aW9uQXJncz4gfTtcbnR5cGUgU2VydmVyT3JpZ2luQ29uZmlnID0ge1xuICBmdW5jdGlvbjogVW53cmFwPEZ1bmN0aW9uQXJncz47XG4gIHN0cmVhbWluZz86IGJvb2xlYW47XG59O1xudHlwZSBJbWFnZU9wdGltaXphdGlvbk9yaWdpbkNvbmZpZyA9IHtcbiAgZnVuY3Rpb246IFVud3JhcDxGdW5jdGlvbkFyZ3M+O1xufTtcbnR5cGUgUzNPcmlnaW5Db25maWcgPSB7XG4gIG9yaWdpblBhdGg/OiBzdHJpbmc7XG4gIGNvcHk6IHtcbiAgICBmcm9tOiBzdHJpbmc7XG4gICAgdG86IHN0cmluZztcbiAgICBjYWNoZWQ6IGJvb2xlYW47XG4gICAgdmVyc2lvbmVkU3ViRGlyPzogc3RyaW5nO1xuICB9W107XG59O1xudHlwZSBPcmlnaW5Hcm91cENvbmZpZyA9IHtcbiAgcHJpbWFyeU9yaWdpbk5hbWU6IHN0cmluZztcbiAgZmFsbGJhY2tPcmlnaW5OYW1lOiBzdHJpbmc7XG4gIGZhbGxiYWNrU3RhdHVzQ29kZXM6IG51bWJlcltdO1xufTtcblxuZXhwb3J0IHR5cGUgUGxhbiA9IFJldHVyblR5cGU8dHlwZW9mIHZhbGlkYXRlUGxhbj47XG5leHBvcnQgaW50ZXJmYWNlIFNzclNpdGVBcmdzIGV4dGVuZHMgQmFzZVNzclNpdGVBcmdzIHtcbiAgZG9tYWluPzogSW5wdXQ8c3RyaW5nIHwgUHJldHRpZnk8Q2RuRG9tYWluQXJncz4+O1xuICBwZXJtaXNzaW9ucz86IEZ1bmN0aW9uQXJnc1tcInBlcm1pc3Npb25zXCJdO1xuICB3YXJtPzogSW5wdXQ8bnVtYmVyPjtcbiAgaW52YWxpZGF0aW9uPzogSW5wdXQ8XG4gICAgfCBmYWxzZVxuICAgIHwge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29uZmlndXJlIGlmIGBzc3QgZGVwbG95YCBzaG91bGQgd2FpdCBmb3IgdGhlIENsb3VkRnJvbnQgY2FjaGUgaW52YWxpZGF0aW9uIHRvIGZpbmlzaC5cbiAgICAgICAgICpcbiAgICAgICAgICogOjo6dGlwXG4gICAgICAgICAqIEZvciBub24tcHJvZCBlbnZpcm9ubWVudHMgaXQgbWlnaHQgbWFrZSBzZW5zZSB0byBwYXNzIGluIGBmYWxzZWAuXG4gICAgICAgICAqIDo6OlxuICAgICAgICAgKlxuICAgICAgICAgKiBXYWl0aW5nIGZvciB0aGlzIHByb2Nlc3MgdG8gZmluaXNoIGVuc3VyZXMgdGhhdCBuZXcgY29udGVudCB3aWxsIGJlIGF2YWlsYWJsZSBhZnRlciB0aGUgZGVwbG95IGZpbmlzaGVzLiBIb3dldmVyLCB0aGlzIHByb2Nlc3MgY2FuIHNvbWV0aW1lcyB0YWtlIG1vcmUgdGhhbiA1IG1pbnMuXG4gICAgICAgICAqIEBkZWZhdWx0IGBmYWxzZWBcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogYGBganNcbiAgICAgICAgICoge1xuICAgICAgICAgKiAgIGludmFsaWRhdGlvbjoge1xuICAgICAgICAgKiAgICAgd2FpdDogdHJ1ZVxuICAgICAgICAgKiAgIH1cbiAgICAgICAgICogfVxuICAgICAgICAgKiBgYGBcbiAgICAgICAgICovXG4gICAgICAgIHdhaXQ/OiBJbnB1dDxib29sZWFuPjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBwYXRocyB0byBpbnZhbGlkYXRlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBZb3UgY2FuIGVpdGhlciBwYXNzIGluIGFuIGFycmF5IG9mIGdsb2IgcGF0dGVybnMgdG8gaW52YWxpZGF0ZSBzcGVjaWZpYyBmaWxlcy4gT3IgeW91IGNhbiB1c2Ugb25lIG9mIHRoZXNlIGJ1aWx0LWluIG9wdGlvbnM6XG4gICAgICAgICAqIC0gYGFsbGA6IEFsbCBmaWxlcyB3aWxsIGJlIGludmFsaWRhdGVkIHdoZW4gYW55IGZpbGUgY2hhbmdlc1xuICAgICAgICAgKiAtIGB2ZXJzaW9uZWRgOiBPbmx5IHZlcnNpb25lZCBmaWxlcyB3aWxsIGJlIGludmFsaWRhdGVkIHdoZW4gdmVyc2lvbmVkIGZpbGVzIGNoYW5nZVxuICAgICAgICAgKlxuICAgICAgICAgKiA6Ojpub3RlXG4gICAgICAgICAqIEVhY2ggZ2xvYiBwYXR0ZXJuIGNvdW50cyBhcyBhIHNpbmdsZSBpbnZhbGlkYXRpb24uIEhvd2V2ZXIsIGludmFsaWRhdGluZyBgYWxsYCBjb3VudHMgYXMgYSBzaW5nbGUgaW52YWxpZGF0aW9uIGFzIHdlbGwuXG4gICAgICAgICAqIDo6OlxuICAgICAgICAgKiBAZGVmYXVsdCBgXCJhbGxcImBcbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogSW52YWxpZGF0ZSB0aGUgYGluZGV4Lmh0bWxgIGFuZCBhbGwgZmlsZXMgdW5kZXIgdGhlIGBwcm9kdWN0cy9gIHJvdXRlLiBUaGlzIGNvdW50cyBhcyB0d28gaW52YWxpZGF0aW9ucy5cbiAgICAgICAgICogYGBganNcbiAgICAgICAgICoge1xuICAgICAgICAgKiAgIGludmFsaWRhdGlvbjoge1xuICAgICAgICAgKiAgICAgcGF0aHM6IFtcIi9pbmRleC5odG1sXCIsIFwiL3Byb2R1Y3RzLypcIl1cbiAgICAgICAgICogICB9XG4gICAgICAgICAqIH1cbiAgICAgICAgICogYGBgXG4gICAgICAgICAqL1xuICAgICAgICBwYXRocz86IElucHV0PFwiYWxsXCIgfCBcInZlcnNpb25lZFwiIHwgc3RyaW5nW10+O1xuICAgICAgfVxuICA+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0pIGhvdyB0aGlzIGNvbXBvbmVudCBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIEJ1Y2tldCByZXNvdXJjZSB1c2VkIGZvciB1cGxvYWRpbmcgdGhlIGFzc2V0cy5cbiAgICAgKi9cbiAgICBhc3NldHM/OiBUcmFuc2Zvcm08QnVja2V0QXJncz47XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoZSBzZXJ2ZXIgRnVuY3Rpb24gcmVzb3VyY2UuXG4gICAgICovXG4gICAgc2VydmVyPzogVHJhbnNmb3JtPEZ1bmN0aW9uQXJncz47XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlKGFyZ3M6IFNzclNpdGVBcmdzLCBvcHRzOiBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMpIHtcbiAgY29uc3Qgc2l0ZVBhdGggPSBub3JtYWxpemVTaXRlUGF0aCgpO1xuICBjb25zdCBwYXJ0aXRpb24gPSBub3JtYWxpemVQYXJ0aXRpb24oKTtcbiAgY29uc3QgcmVnaW9uID0gbm9ybWFsaXplUmVnaW9uKCk7XG4gIGNoZWNrU3VwcG9ydGVkUmVnaW9uKCk7XG5cbiAgcmV0dXJuIHtcbiAgICBzaXRlUGF0aCxcbiAgICBwYXJ0aXRpb24sXG4gICAgcmVnaW9uLFxuICB9O1xuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVNpdGVQYXRoKCkge1xuICAgIHJldHVybiBvdXRwdXQoYXJncy5wYXRoKS5hcHBseSgoc2l0ZVBhdGgpID0+IHtcbiAgICAgIGlmICghc2l0ZVBhdGgpIHJldHVybiBcIi5cIjtcblxuICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKHNpdGVQYXRoKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKGBObyBzaXRlIGZvdW5kIGF0IFwiJHtwYXRoLnJlc29sdmUoc2l0ZVBhdGgpfVwiYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2l0ZVBhdGg7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVQYXJ0aXRpb24oKSB7XG4gICAgcmV0dXJuIGF3cy5nZXRQYXJ0aXRpb25PdXRwdXQodW5kZWZpbmVkLCB7IHByb3ZpZGVyOiBvcHRzPy5wcm92aWRlciB9KVxuICAgICAgLnBhcnRpdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVJlZ2lvbigpIHtcbiAgICByZXR1cm4gYXdzLmdldFJlZ2lvbk91dHB1dCh1bmRlZmluZWQsIHsgcHJvdmlkZXI6IG9wdHM/LnByb3ZpZGVyIH0pLm5hbWU7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja1N1cHBvcnRlZFJlZ2lvbigpIHtcbiAgICByZWdpb24uYXBwbHkoKHJlZ2lvbikgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhW1xuICAgICAgICAgIFwiYXAtc291dGgtMlwiLFxuICAgICAgICAgIFwiYXAtc291dGhlYXN0LTRcIixcbiAgICAgICAgICBcImV1LXNvdXRoLTJcIixcbiAgICAgICAgICBcImV1LWNlbnRyYWwtMlwiLFxuICAgICAgICAgIFwiaWwtY2VudHJhbC0xXCIsXG4gICAgICAgICAgXCJtZS1jZW50cmFsLTFcIixcbiAgICAgICAgXS5pbmNsdWRlcyhyZWdpb24pXG4gICAgICApXG4gICAgICAgIHJldHVybjtcbiAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoXG4gICAgICAgIGBSZWdpb24gJHtyZWdpb259IGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkLiBQbGVhc2UgdXNlIGEgZGlmZmVyZW50IHJlZ2lvbi5gLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQnVja2V0KFxuICBwYXJlbnQ6IENvbXBvbmVudFJlc291cmNlLFxuICBuYW1lOiBzdHJpbmcsXG4gIHBhcnRpdGlvbjogT3V0cHV0PHN0cmluZz4sXG4gIGFyZ3M6IFNzclNpdGVBcmdzLFxuKSB7XG4gIGNvbnN0IGFjY2VzcyA9IGNyZWF0ZUNsb3VkRnJvbnRPcmlnaW5BY2Nlc3NJZGVudGl0eSgpO1xuICBjb25zdCBidWNrZXQgPSBjcmVhdGVTM0J1Y2tldCgpO1xuICByZXR1cm4geyBhY2Nlc3MsIGJ1Y2tldCB9O1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNsb3VkRnJvbnRPcmlnaW5BY2Nlc3NJZGVudGl0eSgpIHtcbiAgICByZXR1cm4gbmV3IE9yaWdpbkFjY2Vzc0lkZW50aXR5KFxuICAgICAgYCR7bmFtZX1PcmlnaW5BY2Nlc3NJZGVudGl0eWAsXG4gICAgICB7fSxcbiAgICAgIHsgcGFyZW50IH0sXG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVMzQnVja2V0KCkge1xuICAgIHJldHVybiBuZXcgQnVja2V0KFxuICAgICAgYCR7bmFtZX1Bc3NldHNgLFxuICAgICAgdHJhbnNmb3JtKGFyZ3MudHJhbnNmb3JtPy5hc3NldHMsIHtcbiAgICAgICAgdHJhbnNmb3JtOiB7XG4gICAgICAgICAgcG9saWN5OiAocG9saWN5QXJncykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3UG9saWN5ID0gYXdzLmlhbS5nZXRQb2xpY3lEb2N1bWVudE91dHB1dCh7XG4gICAgICAgICAgICAgIHN0YXRlbWVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBwcmluY2lwYWxzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkFXU1wiLFxuICAgICAgICAgICAgICAgICAgICAgIGlkZW50aWZpZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZWBhcm46JHtwYXJ0aXRpb259OmlhbTo6Y2xvdWRmcm9udDp1c2VyL0Nsb3VkRnJvbnQgT3JpZ2luIEFjY2VzcyBJZGVudGl0eSAke2FjY2Vzcy5pZH1gLFxuICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgYWN0aW9uczogW1wiczM6R2V0T2JqZWN0XCJdLFxuICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzOiBbaW50ZXJwb2xhdGVgJHtidWNrZXQuYXJufS8qYF0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pLmpzb247XG5cbiAgICAgICAgICAgIHBvbGljeUFyZ3MucG9saWN5ID0gb3V0cHV0KFtwb2xpY3lBcmdzLnBvbGljeSwgbmV3UG9saWN5XSkuYXBwbHkoXG4gICAgICAgICAgICAgIChbcG9saWN5LCBuZXdQb2xpY3ldKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcG9saWN5SnNvbiA9IEpTT04ucGFyc2UocG9saWN5IGFzIHN0cmluZyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UG9saWN5SnNvbiA9IEpTT04ucGFyc2UobmV3UG9saWN5IGFzIHN0cmluZyk7XG4gICAgICAgICAgICAgICAgcG9saWN5SnNvbi5TdGF0ZW1lbnQucHVzaCguLi5uZXdQb2xpY3lKc29uLlN0YXRlbWVudCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHBvbGljeUpzb24pO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgICB7IHBhcmVudCwgcmV0YWluT25EZWxldGU6IGZhbHNlIH0sXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2VydmVyc0FuZERpc3RyaWJ1dGlvbihcbiAgcGFyZW50OiBDb21wb25lbnRSZXNvdXJjZSxcbiAgbmFtZTogc3RyaW5nLFxuICBhcmdzOiBTc3JTaXRlQXJncyxcbiAgb3V0cHV0UGF0aDogT3V0cHV0PHN0cmluZz4sXG4gIGFjY2VzczogT3JpZ2luQWNjZXNzSWRlbnRpdHksXG4gIGJ1Y2tldDogQnVja2V0LFxuICBwbGFuOiBJbnB1dDxQbGFuPixcbikge1xuICByZXR1cm4gYWxsKFtvdXRwdXRQYXRoLCBwbGFuXSkuYXBwbHkoKFtvdXRwdXRQYXRoLCBwbGFuXSkgPT4ge1xuICAgIGNvbnN0IHNzckZ1bmN0aW9uczogRnVuY3Rpb25bXSA9IFtdO1xuICAgIGxldCBzaW5nbGV0b25DYWNoZVBvbGljeTogYXdzLmNsb3VkZnJvbnQuQ2FjaGVQb2xpY3k7XG5cbiAgICBjb25zdCBidWNrZXRGaWxlID0gdXBsb2FkQXNzZXRzKCk7XG4gICAgY29uc3QgY2ZGdW5jdGlvbnMgPSBjcmVhdGVDbG91ZEZyb250RnVuY3Rpb25zKCk7XG4gICAgY29uc3QgZWRnZUZ1bmN0aW9ucyA9IGNyZWF0ZUVkZ2VGdW5jdGlvbnMoKTtcbiAgICBjb25zdCBvcmlnaW5zID0gYnVpbGRPcmlnaW5zKCk7XG4gICAgY29uc3Qgb3JpZ2luR3JvdXBzID0gYnVpbGRPcmlnaW5Hcm91cHMoKTtcbiAgICBjb25zdCBkaXN0cmlidXRpb24gPSBjcmVhdGVEaXN0cmlidXRpb24oKTtcbiAgICBhbGxvd1NlcnZlckZ1bmN0aW9uSW52YWxpZGF0ZURpc3RyaWJ1dGlvbigpO1xuICAgIGNyZWF0ZURpc3RyaWJ1dGlvbkludmFsaWRhdGlvbigpO1xuICAgIGNyZWF0ZVdhcm1lcigpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3RyaWJ1dGlvbixcbiAgICAgIHNzckZ1bmN0aW9ucyxcbiAgICAgIGVkZ2VGdW5jdGlvbnMsXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHVwbG9hZEFzc2V0cygpIHtcbiAgICAgIHJldHVybiBvdXRwdXQoYXJncy5hc3NldHMpLmFwcGx5KGFzeW5jIChhc3NldHMpID0+IHtcbiAgICAgICAgLy8gRGVmaW5lIGNvbnRlbnQgaGVhZGVyc1xuICAgICAgICBjb25zdCB2ZXJzaW9uZWRGaWxlc1RUTCA9IDMxNTM2MDAwOyAvLyAxIHllYXJcbiAgICAgICAgY29uc3Qgbm9uVmVyc2lvbmVkRmlsZXNUVEwgPSA4NjQwMDsgLy8gMSBkYXlcblxuICAgICAgICBjb25zdCBidWNrZXRGaWxlczogQnVja2V0RmlsZVtdID0gW107XG5cbiAgICAgICAgLy8gSGFuZGxlIGVhY2ggUzMgb3JpZ2luXG4gICAgICAgIGZvciAoY29uc3Qgb3JpZ2luIG9mIE9iamVjdC52YWx1ZXMocGxhbi5vcmlnaW5zKSkge1xuICAgICAgICAgIGlmICghb3JpZ2luLnMzKSBjb250aW51ZTtcblxuICAgICAgICAgIC8vIEhhbmRsZSBlYWNoIGNvcHkgc291cmNlXG4gICAgICAgICAgZm9yIChjb25zdCBjb3B5IG9mIG9yaWdpbi5zMy5jb3B5KSB7XG4gICAgICAgICAgICAvLyBCdWlsZCBmaWxlT3B0aW9uc1xuICAgICAgICAgICAgY29uc3QgZmlsZU9wdGlvbnM6IEJhc2VTaXRlRmlsZU9wdGlvbnNbXSA9IFtcbiAgICAgICAgICAgICAgLy8gdW52ZXJzaW9uZWQgZmlsZXNcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZpbGVzOiBcIioqXCIsXG4gICAgICAgICAgICAgICAgaWdub3JlOiBjb3B5LnZlcnNpb25lZFN1YkRpclxuICAgICAgICAgICAgICAgICAgPyBwYXRoLnBvc2l4LmpvaW4oY29weS52ZXJzaW9uZWRTdWJEaXIsIFwiKipcIilcbiAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDpcbiAgICAgICAgICAgICAgICAgIGFzc2V0cz8ubm9uVmVyc2lvbmVkRmlsZXNDYWNoZUhlYWRlciA/P1xuICAgICAgICAgICAgICAgICAgYHB1YmxpYyxtYXgtYWdlPTAscy1tYXhhZ2U9JHtub25WZXJzaW9uZWRGaWxlc1RUTH0sc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT0ke25vblZlcnNpb25lZEZpbGVzVFRMfWAsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIC8vIHZlcnNpb25lZCBmaWxlc1xuICAgICAgICAgICAgICAuLi4oY29weS52ZXJzaW9uZWRTdWJEaXJcbiAgICAgICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGZpbGVzOiBwYXRoLnBvc2l4LmpvaW4oY29weS52ZXJzaW9uZWRTdWJEaXIsIFwiKipcIiksXG4gICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzPy52ZXJzaW9uZWRGaWxlc0NhY2hlSGVhZGVyID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBgcHVibGljLG1heC1hZ2U9JHt2ZXJzaW9uZWRGaWxlc1RUTH0saW1tdXRhYmxlYCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICA6IFtdKSxcbiAgICAgICAgICAgICAgLi4uKGFzc2V0cz8uZmlsZU9wdGlvbnMgPz8gW10pLFxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgLy8gVXBsb2FkIGZpbGVzIGJhc2VkIG9uIGZpbGVPcHRpb25zXG4gICAgICAgICAgICBjb25zdCBmaWxlc1VwbG9hZGVkOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlT3B0aW9uIG9mIGZpbGVPcHRpb25zLnJldmVyc2UoKSkge1xuICAgICAgICAgICAgICBjb25zdCBmaWxlcyA9IGdsb2JTeW5jKGZpbGVPcHRpb24uZmlsZXMsIHtcbiAgICAgICAgICAgICAgICBjd2Q6IHBhdGgucmVzb2x2ZShvdXRwdXRQYXRoLCBjb3B5LmZyb20pLFxuICAgICAgICAgICAgICAgIG5vZGlyOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRvdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpZ25vcmU6IGZpbGVPcHRpb24uaWdub3JlLFxuICAgICAgICAgICAgICB9KS5maWx0ZXIoKGZpbGUpID0+ICFmaWxlc1VwbG9hZGVkLmluY2x1ZGVzKGZpbGUpKTtcblxuICAgICAgICAgICAgICBidWNrZXRGaWxlcy5wdXNoKFxuICAgICAgICAgICAgICAgIC4uLihhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgICAgICAgIGZpbGVzLm1hcChhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBwYXRoLnJlc29sdmUob3V0cHV0UGF0aCwgY29weS5mcm9tLCBmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnByb21pc2VzLnJlYWRGaWxlKHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBjcnlwdG9cbiAgICAgICAgICAgICAgICAgICAgICAuY3JlYXRlSGFzaChcInNoYTI1NlwiKVxuICAgICAgICAgICAgICAgICAgICAgIC51cGRhdGUoY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgICAuZGlnZXN0KFwiaGV4XCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IHBhdGgucG9zaXguam9pbihjb3B5LnRvLCBmaWxlKSxcbiAgICAgICAgICAgICAgICAgICAgICBoYXNoLFxuICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogZmlsZU9wdGlvbi5jYWNoZUNvbnRyb2wsXG4gICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6IGdldENvbnRlbnRUeXBlKGZpbGUsIFwiVVRGLThcIiksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICApKSxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgZmlsZXNVcGxvYWRlZC5wdXNoKC4uLmZpbGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IEJ1Y2tldEZpbGVzKFxuICAgICAgICAgIGAke25hbWV9QXNzZXRGaWxlc2AsXG4gICAgICAgICAge1xuICAgICAgICAgICAgYnVja2V0TmFtZTogYnVja2V0Lm5hbWUsXG4gICAgICAgICAgICBmaWxlczogYnVja2V0RmlsZXMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHBhcmVudCwgaWdub3JlQ2hhbmdlczogJGRldiA/IFtcIipcIl0gOiB1bmRlZmluZWQgfSxcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvbnRlbnRUeXBlKGZpbGVuYW1lOiBzdHJpbmcsIHRleHRFbmNvZGluZzogc3RyaW5nKSB7XG4gICAgICBjb25zdCBleHQgPSBmaWxlbmFtZS5lbmRzV2l0aChcIi53ZWxsLWtub3duL3NpdGUtYXNzb2NpYXRpb24tanNvblwiKVxuICAgICAgICA/IFwiLmpzb25cIlxuICAgICAgICA6IHBhdGguZXh0bmFtZShmaWxlbmFtZSk7XG4gICAgICBjb25zdCBleHRlbnNpb25zID0ge1xuICAgICAgICBbXCIudHh0XCJdOiB7IG1pbWU6IFwidGV4dC9wbGFpblwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLmh0bVwiXTogeyBtaW1lOiBcInRleHQvaHRtbFwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLmh0bWxcIl06IHsgbWltZTogXCJ0ZXh0L2h0bWxcIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi54aHRtbFwiXTogeyBtaW1lOiBcImFwcGxpY2F0aW9uL3hodG1sK3htbFwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLmNzc1wiXTogeyBtaW1lOiBcInRleHQvY3NzXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuanNcIl06IHsgbWltZTogXCJ0ZXh0L2phdmFzY3JpcHRcIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5tanNcIl06IHsgbWltZTogXCJ0ZXh0L2phdmFzY3JpcHRcIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5hcG5nXCJdOiB7IG1pbWU6IFwiaW1hZ2UvYXBuZ1wiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5hdmlmXCJdOiB7IG1pbWU6IFwiaW1hZ2UvYXZpZlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5naWZcIl06IHsgbWltZTogXCJpbWFnZS9naWZcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIuanBlZ1wiXTogeyBtaW1lOiBcImltYWdlL2pwZWdcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIuanBnXCJdOiB7IG1pbWU6IFwiaW1hZ2UvanBlZ1wiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5wbmdcIl06IHsgbWltZTogXCJpbWFnZS9wbmdcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIuc3ZnXCJdOiB7IG1pbWU6IFwiaW1hZ2Uvc3ZnK3htbFwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLmJtcFwiXTogeyBtaW1lOiBcImltYWdlL2JtcFwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi50aWZmXCJdOiB7IG1pbWU6IFwiaW1hZ2UvdGlmZlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi53ZWJwXCJdOiB7IG1pbWU6IFwiaW1hZ2Uvd2VicFwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5pY29cIl06IHsgbWltZTogXCJpbWFnZS92bmQubWljcm9zb2Z0Lmljb25cIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIuZW90XCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24vdm5kLm1zLWZvbnRvYmplY3RcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIudHRmXCJdOiB7IG1pbWU6IFwiZm9udC90dGZcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIub3RmXCJdOiB7IG1pbWU6IFwiZm9udC9vdGZcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIud29mZlwiXTogeyBtaW1lOiBcImZvbnQvd29mZlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi53b2ZmMlwiXTogeyBtaW1lOiBcImZvbnQvd29mZjJcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIuanNvblwiXTogeyBtaW1lOiBcImFwcGxpY2F0aW9uL2pzb25cIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5qc29ubGRcIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi9sZCtqc29uXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIueG1sXCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24veG1sXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIucGRmXCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24vcGRmXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLnppcFwiXTogeyBtaW1lOiBcImFwcGxpY2F0aW9uL3ppcFwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi53YXNtXCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24vd2FzbVwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICB9O1xuICAgICAgY29uc3QgZXh0ZW5zaW9uRGF0YSA9IGV4dGVuc2lvbnNbZXh0IGFzIGtleW9mIHR5cGVvZiBleHRlbnNpb25zXTtcbiAgICAgIGNvbnN0IG1pbWUgPSBleHRlbnNpb25EYXRhPy5taW1lID8/IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI7XG4gICAgICBjb25zdCBjaGFyc2V0ID1cbiAgICAgICAgZXh0ZW5zaW9uRGF0YT8uaXNUZXh0ICYmIHRleHRFbmNvZGluZyAhPT0gXCJub25lXCJcbiAgICAgICAgICA/IGA7Y2hhcnNldD0ke3RleHRFbmNvZGluZ31gXG4gICAgICAgICAgOiBcIlwiO1xuICAgICAgcmV0dXJuIGAke21pbWV9JHtjaGFyc2V0fWA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2xvdWRGcm9udEZ1bmN0aW9ucygpIHtcbiAgICAgIGNvbnN0IGZ1bmN0aW9uczogUmVjb3JkPHN0cmluZywgYXdzLmNsb3VkZnJvbnQuRnVuY3Rpb24+ID0ge307XG5cbiAgICAgIE9iamVjdC5lbnRyaWVzKHBsYW4uY2xvdWRGcm9udEZ1bmN0aW9ucyA/PyB7fSkuZm9yRWFjaChcbiAgICAgICAgKFtmbk5hbWUsIHsgaW5qZWN0aW9ucyB9XSkgPT4ge1xuICAgICAgICAgIGZ1bmN0aW9uc1tmbk5hbWVdID0gbmV3IGF3cy5jbG91ZGZyb250LkZ1bmN0aW9uKFxuICAgICAgICAgICAgYCR7bmFtZX1DbG91ZGZyb250RnVuY3Rpb24ke3Nhbml0aXplVG9QYXNjYWxDYXNlKGZuTmFtZSl9YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcnVudGltZTogXCJjbG91ZGZyb250LWpzLTEuMFwiLFxuICAgICAgICAgICAgICBjb2RlOiBgXG5mdW5jdGlvbiBoYW5kbGVyKGV2ZW50KSB7XG4gIHZhciByZXF1ZXN0ID0gZXZlbnQucmVxdWVzdDtcbiAgJHtpbmplY3Rpb25zLmpvaW4oXCJcXG5cIil9XG4gIHJldHVybiByZXF1ZXN0O1xufWAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbnM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlRWRnZUZ1bmN0aW9ucygpIHtcbiAgICAgIGNvbnN0IGZ1bmN0aW9uczogUmVjb3JkPHN0cmluZywgRnVuY3Rpb24+ID0ge307XG5cbiAgICAgIE9iamVjdC5lbnRyaWVzKHBsYW4uZWRnZUZ1bmN0aW9ucyA/PyB7fSkuZm9yRWFjaChcbiAgICAgICAgKFtmbk5hbWUsIHsgZnVuY3Rpb246IHByb3BzIH1dKSA9PiB7XG4gICAgICAgICAgLy8gRWRnZSBmdW5jdGlvbnMgZG9uJ3Qgc3VwcG9ydCBsaW5raW5nXG4gICAgICAgICAgb3V0cHV0KGFyZ3MubGluaykuYXBwbHkoKGxpbmspID0+IHtcbiAgICAgICAgICAgIGlmIChsaW5rPy5sZW5ndGgpXG4gICAgICAgICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoXG4gICAgICAgICAgICAgICAgYFJlc291cmNlIGxpbmtpbmcgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgd2hlbiBkZXBsb3lpbmcgdG8gdGhlIGVkZ2UuYCxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IGZuID0gbmV3IEZ1bmN0aW9uKFxuICAgICAgICAgICAgYCR7bmFtZX1FZGdlJHtzYW5pdGl6ZVRvUGFzY2FsQ2FzZShmbk5hbWUpfWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHJ1bnRpbWU6IFwibm9kZWpzMjAueFwiLFxuICAgICAgICAgICAgICB0aW1lb3V0OiBcIjIwIHNlY29uZHNcIixcbiAgICAgICAgICAgICAgbWVtb3J5OiBcIjEwMjQgTUJcIixcbiAgICAgICAgICAgICAgLi4ucHJvcHMsXG4gICAgICAgICAgICAgIG5vZGVqczoge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogXCJlc21cIiBhcyBjb25zdCxcbiAgICAgICAgICAgICAgICAuLi5wcm9wcy5ub2RlanMsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVudmlyb25tZW50OiBvdXRwdXQoYXJncy5lbnZpcm9ubWVudCkuYXBwbHkoKGVudmlyb25tZW50KSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLmVudmlyb25tZW50LFxuICAgICAgICAgICAgICAgIC4uLnByb3BzLmVudmlyb25tZW50LFxuICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgIGxpbms6IG91dHB1dChhcmdzLmxpbmspLmFwcGx5KChsaW5rKSA9PiBbXG4gICAgICAgICAgICAgICAgLi4uKHByb3BzLmxpbmsgPz8gW10pLFxuICAgICAgICAgICAgICAgIC4uLihsaW5rID8/IFtdKSxcbiAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgIHRyYW5zZm9ybToge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiAoYXJncykgPT4gKHsgLi4uYXJncywgcHVibGlzaDogdHJ1ZSB9KSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgIF9pZ25vcmVDb2RlQ2hhbmdlczogJGRldixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IHByb3ZpZGVyOiB1c2VQcm92aWRlcihcInVzLWVhc3QtMVwiKSwgcGFyZW50IH0sXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGZ1bmN0aW9uc1tmbk5hbWVdID0gZm47XG4gICAgICAgIH0sXG4gICAgICApO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9ucztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZE9yaWdpbnMoKSB7XG4gICAgICBjb25zdCBvcmlnaW5zOiBSZWNvcmQ8XG4gICAgICAgIHN0cmluZyxcbiAgICAgICAgYXdzLnR5cGVzLmlucHV0LmNsb3VkZnJvbnQuRGlzdHJpYnV0aW9uT3JpZ2luXG4gICAgICA+ID0ge307XG5cbiAgICAgIE9iamVjdC5lbnRyaWVzKHBsYW4ub3JpZ2lucyA/PyB7fSkuZm9yRWFjaCgoW25hbWUsIHByb3BzXSkgPT4ge1xuICAgICAgICBpZiAocHJvcHMuczMpIHtcbiAgICAgICAgICBvcmlnaW5zW25hbWVdID0gYnVpbGRTM09yaWdpbihuYW1lLCBwcm9wcy5zMyk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvcHMuc2VydmVyKSB7XG4gICAgICAgICAgb3JpZ2luc1tuYW1lXSA9IGJ1aWxkU2VydmVyT3JpZ2luKG5hbWUsIHByb3BzLnNlcnZlcik7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvcHMuaW1hZ2VPcHRpbWl6YXRpb24pIHtcbiAgICAgICAgICBvcmlnaW5zW25hbWVdID0gYnVpbGRJbWFnZU9wdGltaXphdGlvbk9yaWdpbihcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBwcm9wcy5pbWFnZU9wdGltaXphdGlvbixcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG9yaWdpbnM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRPcmlnaW5Hcm91cHMoKSB7XG4gICAgICBjb25zdCBvcmlnaW5Hcm91cHM6IFJlY29yZDxcbiAgICAgICAgc3RyaW5nLFxuICAgICAgICBhd3MudHlwZXMuaW5wdXQuY2xvdWRmcm9udC5EaXN0cmlidXRpb25PcmlnaW5Hcm91cFxuICAgICAgPiA9IHt9O1xuXG4gICAgICBPYmplY3QuZW50cmllcyhwbGFuLm9yaWdpbnMgPz8ge30pLmZvckVhY2goKFtuYW1lLCBwcm9wc10pID0+IHtcbiAgICAgICAgaWYgKHByb3BzLmdyb3VwKSB7XG4gICAgICAgICAgb3JpZ2luR3JvdXBzW25hbWVdID0ge1xuICAgICAgICAgICAgb3JpZ2luSWQ6IG5hbWUsXG4gICAgICAgICAgICBmYWlsb3ZlckNyaXRlcmlhOiB7XG4gICAgICAgICAgICAgIHN0YXR1c0NvZGVzOiBwcm9wcy5ncm91cC5mYWxsYmFja1N0YXR1c0NvZGVzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1lbWJlcnM6IFtcbiAgICAgICAgICAgICAgeyBvcmlnaW5JZDogcHJvcHMuZ3JvdXAucHJpbWFyeU9yaWdpbk5hbWUgfSxcbiAgICAgICAgICAgICAgeyBvcmlnaW5JZDogcHJvcHMuZ3JvdXAuZmFsbGJhY2tPcmlnaW5OYW1lIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gb3JpZ2luR3JvdXBzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkUzNPcmlnaW4obmFtZTogc3RyaW5nLCBwcm9wczogUzNPcmlnaW5Db25maWcpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9yaWdpbklkOiBuYW1lLFxuICAgICAgICBkb21haW5OYW1lOiBidWNrZXQubm9kZXMuYnVja2V0LmJ1Y2tldFJlZ2lvbmFsRG9tYWluTmFtZSxcbiAgICAgICAgb3JpZ2luUGF0aDogcHJvcHMub3JpZ2luUGF0aCA/IGAvJHtwcm9wcy5vcmlnaW5QYXRofWAgOiBcIlwiLFxuICAgICAgICBzM09yaWdpbkNvbmZpZzoge1xuICAgICAgICAgIG9yaWdpbkFjY2Vzc0lkZW50aXR5OiBpbnRlcnBvbGF0ZWBvcmlnaW4tYWNjZXNzLWlkZW50aXR5L2Nsb3VkZnJvbnQvJHthY2Nlc3MuaWR9YCxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRTZXJ2ZXJPcmlnaW4oZm5OYW1lOiBzdHJpbmcsIHByb3BzOiBTZXJ2ZXJPcmlnaW5Db25maWcpIHtcbiAgICAgIGNvbnN0IGZuID0gbmV3IEZ1bmN0aW9uKFxuICAgICAgICBgJHtuYW1lfSR7c2FuaXRpemVUb1Bhc2NhbENhc2UoZm5OYW1lKX1gLFxuICAgICAgICB0cmFuc2Zvcm0oYXJncy50cmFuc2Zvcm0/LnNlcnZlciwge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJHtuYW1lfSBzZXJ2ZXJgLFxuICAgICAgICAgIHJ1bnRpbWU6IFwibm9kZWpzMjAueFwiLFxuICAgICAgICAgIHRpbWVvdXQ6IFwiMjAgc2Vjb25kc1wiLFxuICAgICAgICAgIG1lbW9yeTogXCIxMDI0IE1CXCIsXG4gICAgICAgICAgLi4ucHJvcHMuZnVuY3Rpb24sXG4gICAgICAgICAgbm9kZWpzOiB7XG4gICAgICAgICAgICBmb3JtYXQ6IFwiZXNtXCIgYXMgY29uc3QsXG4gICAgICAgICAgICAuLi5wcm9wcy5mdW5jdGlvbi5ub2RlanMsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlbnZpcm9ubWVudDogb3V0cHV0KGFyZ3MuZW52aXJvbm1lbnQpLmFwcGx5KChlbnZpcm9ubWVudCkgPT4gKHtcbiAgICAgICAgICAgIC4uLmVudmlyb25tZW50LFxuICAgICAgICAgICAgLi4ucHJvcHMuZnVuY3Rpb24uZW52aXJvbm1lbnQsXG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIHN0cmVhbWluZzogcHJvcHMuc3RyZWFtaW5nLFxuICAgICAgICAgIGluamVjdGlvbnM6IGFyZ3Mud2FybVxuICAgICAgICAgICAgPyBbdXNlU2VydmVyRnVuY3Rpb25XYXJtaW5nSW5qZWN0aW9uKHByb3BzLnN0cmVhbWluZyldXG4gICAgICAgICAgICA6IFtdLFxuICAgICAgICAgIGxpbms6IG91dHB1dChhcmdzLmxpbmspLmFwcGx5KChsaW5rKSA9PiBbXG4gICAgICAgICAgICAuLi4ocHJvcHMuZnVuY3Rpb24ubGluayA/PyBbXSksXG4gICAgICAgICAgICAuLi4obGluayA/PyBbXSksXG4gICAgICAgICAgXSksXG4gICAgICAgICAgdXJsOiB0cnVlLFxuICAgICAgICAgIGxpdmU6IGZhbHNlLFxuICAgICAgICAgIF9pZ25vcmVDb2RlQ2hhbmdlczogJGRldixcbiAgICAgICAgfSksXG4gICAgICAgIHsgcGFyZW50IH0sXG4gICAgICApO1xuICAgICAgc3NyRnVuY3Rpb25zLnB1c2goZm4pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBvcmlnaW5JZDogZm5OYW1lLFxuICAgICAgICBkb21haW5OYW1lOiBmbi51cmwuYXBwbHkoKHVybCkgPT4gbmV3IFVSTCh1cmwhKS5ob3N0KSxcbiAgICAgICAgY3VzdG9tT3JpZ2luQ29uZmlnOiB7XG4gICAgICAgICAgaHR0cFBvcnQ6IDgwLFxuICAgICAgICAgIGh0dHBzUG9ydDogNDQzLFxuICAgICAgICAgIG9yaWdpblByb3RvY29sUG9saWN5OiBcImh0dHBzLW9ubHlcIixcbiAgICAgICAgICBvcmlnaW5SZWFkVGltZW91dDogMjAsXG4gICAgICAgICAgb3JpZ2luU3NsUHJvdG9jb2xzOiBbXCJUTFN2MS4yXCJdLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEltYWdlT3B0aW1pemF0aW9uT3JpZ2luKFxuICAgICAgZm5OYW1lOiBzdHJpbmcsXG4gICAgICBwcm9wczogSW1hZ2VPcHRpbWl6YXRpb25PcmlnaW5Db25maWcsXG4gICAgKSB7XG4gICAgICBjb25zdCBmbiA9IG5ldyBGdW5jdGlvbihcbiAgICAgICAgYCR7bmFtZX0ke3Nhbml0aXplVG9QYXNjYWxDYXNlKGZuTmFtZSl9YCxcbiAgICAgICAge1xuICAgICAgICAgIHRpbWVvdXQ6IFwiMjUgc2Vjb25kc1wiLFxuICAgICAgICAgIGxvZ2dpbmc6IHtcbiAgICAgICAgICAgIHJldGVudGlvbjogXCIzIGRheXNcIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBlcm1pc3Npb25zOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGFjdGlvbnM6IFtcInMzOkdldE9iamVjdFwiXSxcbiAgICAgICAgICAgICAgcmVzb3VyY2VzOiBbaW50ZXJwb2xhdGVgJHtidWNrZXQuYXJufS8qYF0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgLi4ucHJvcHMuZnVuY3Rpb24sXG4gICAgICAgICAgdXJsOiB0cnVlLFxuICAgICAgICAgIGxpdmU6IGZhbHNlLFxuICAgICAgICAgIF9pZ25vcmVDb2RlQ2hhbmdlczogJGRldixcbiAgICAgICAgICBfc2tpcE1ldGFkYXRhOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3JpZ2luSWQ6IGZuTmFtZSxcbiAgICAgICAgZG9tYWluTmFtZTogZm4udXJsLmFwcGx5KCh1cmwpID0+IG5ldyBVUkwodXJsISkuaG9zdCksXG4gICAgICAgIGN1c3RvbU9yaWdpbkNvbmZpZzoge1xuICAgICAgICAgIGh0dHBQb3J0OiA4MCxcbiAgICAgICAgICBodHRwc1BvcnQ6IDQ0MyxcbiAgICAgICAgICBvcmlnaW5Qcm90b2NvbFBvbGljeTogXCJodHRwcy1vbmx5XCIsXG4gICAgICAgICAgb3JpZ2luUmVhZFRpbWVvdXQ6IDIwLFxuICAgICAgICAgIG9yaWdpblNzbFByb3RvY29sczogW1wiVExTdjEuMlwiXSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRCZWhhdmlvcihiZWhhdmlvcjogUGxhbltcImJlaGF2aW9yc1wiXVtudW1iZXJdKSB7XG4gICAgICBjb25zdCBlZGdlRnVuY3Rpb24gPSBlZGdlRnVuY3Rpb25zW2JlaGF2aW9yLmVkZ2VGdW5jdGlvbiB8fCBcIlwiXTtcbiAgICAgIGNvbnN0IGNmRnVuY3Rpb24gPSBjZkZ1bmN0aW9uc1tiZWhhdmlvci5jZkZ1bmN0aW9uIHx8IFwiXCJdO1xuXG4gICAgICBpZiAoYmVoYXZpb3IuY2FjaGVUeXBlID09PSBcInN0YXRpY1wiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGFyZ2V0T3JpZ2luSWQ6IGJlaGF2aW9yLm9yaWdpbixcbiAgICAgICAgICB2aWV3ZXJQcm90b2NvbFBvbGljeTogXCJyZWRpcmVjdC10by1odHRwc1wiLFxuICAgICAgICAgIGFsbG93ZWRNZXRob2RzOiBiZWhhdmlvci5hbGxvd2VkTWV0aG9kcyA/PyBbXCJHRVRcIiwgXCJIRUFEXCIsIFwiT1BUSU9OU1wiXSxcbiAgICAgICAgICBjYWNoZWRNZXRob2RzOiBbXCJHRVRcIiwgXCJIRUFEXCJdLFxuICAgICAgICAgIGNvbXByZXNzOiB0cnVlLFxuICAgICAgICAgIC8vIENsb3VkRnJvbnQncyBtYW5hZ2VkIENhY2hpbmdPcHRpbWl6ZWQgcG9saWN5XG4gICAgICAgICAgY2FjaGVQb2xpY3lJZDogXCI2NTgzMjdlYS1mODlkLTRmYWItYTYzZC03ZTg4NjM5ZTU4ZjZcIixcbiAgICAgICAgICBmdW5jdGlvbkFzc29jaWF0aW9uczogY2ZGdW5jdGlvblxuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlOiBcInZpZXdlci1yZXF1ZXN0XCIsXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbkFybjogY2ZGdW5jdGlvbi5hcm4sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSBpZiAoYmVoYXZpb3IuY2FjaGVUeXBlID09PSBcInNlcnZlclwiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdGFyZ2V0T3JpZ2luSWQ6IGJlaGF2aW9yLm9yaWdpbixcbiAgICAgICAgICB2aWV3ZXJQcm90b2NvbFBvbGljeTogXCJyZWRpcmVjdC10by1odHRwc1wiLFxuICAgICAgICAgIGFsbG93ZWRNZXRob2RzOiBiZWhhdmlvci5hbGxvd2VkTWV0aG9kcyA/PyBbXG4gICAgICAgICAgICBcIkRFTEVURVwiLFxuICAgICAgICAgICAgXCJHRVRcIixcbiAgICAgICAgICAgIFwiSEVBRFwiLFxuICAgICAgICAgICAgXCJPUFRJT05TXCIsXG4gICAgICAgICAgICBcIlBBVENIXCIsXG4gICAgICAgICAgICBcIlBPU1RcIixcbiAgICAgICAgICAgIFwiUFVUXCIsXG4gICAgICAgICAgXSxcbiAgICAgICAgICBjYWNoZWRNZXRob2RzOiBbXCJHRVRcIiwgXCJIRUFEXCJdLFxuICAgICAgICAgIGNvbXByZXNzOiB0cnVlLFxuICAgICAgICAgIGNhY2hlUG9saWN5SWQ6IHVzZVNlcnZlckJlaGF2aW9yQ2FjaGVQb2xpY3koKS5pZCxcbiAgICAgICAgICAvLyBDbG91ZEZyb250J3MgTWFuYWdlZC1BbGxWaWV3ZXJFeGNlcHRIb3N0SGVhZGVyIHBvbGljeVxuICAgICAgICAgIG9yaWdpblJlcXVlc3RQb2xpY3lJZDogXCJiNjg5YjBhOC01M2QwLTQwYWItYmFmMi02ODczOGUyOTY2YWNcIixcbiAgICAgICAgICBmdW5jdGlvbkFzc29jaWF0aW9uczogY2ZGdW5jdGlvblxuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlOiBcInZpZXdlci1yZXF1ZXN0XCIsXG4gICAgICAgICAgICAgICAgICBmdW5jdGlvbkFybjogY2ZGdW5jdGlvbi5hcm4sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgOiBbXSxcbiAgICAgICAgICBsYW1iZGFGdW5jdGlvbkFzc29jaWF0aW9uczogZWRnZUZ1bmN0aW9uXG4gICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBpbmNsdWRlQm9keTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZTogXCJvcmlnaW4tcmVxdWVzdFwiLFxuICAgICAgICAgICAgICAgICAgbGFtYmRhQXJuOiBlZGdlRnVuY3Rpb24ubm9kZXMuZnVuY3Rpb24ucXVhbGlmaWVkQXJuLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIDogW10sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoYEludmFsaWQgYmVoYXZpb3IgdHlwZSBpbiB0aGUgXCIke25hbWV9XCIgc2l0ZS5gKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1c2VTZXJ2ZXJCZWhhdmlvckNhY2hlUG9saWN5KCkge1xuICAgICAgc2luZ2xldG9uQ2FjaGVQb2xpY3kgPVxuICAgICAgICBzaW5nbGV0b25DYWNoZVBvbGljeSA/P1xuICAgICAgICBuZXcgYXdzLmNsb3VkZnJvbnQuQ2FjaGVQb2xpY3koXG4gICAgICAgICAgYCR7bmFtZX1TZXJ2ZXJDYWNoZVBvbGljeWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgY29tbWVudDogXCJTU1Qgc2VydmVyIHJlc3BvbnNlIGNhY2hlIHBvbGljeVwiLFxuICAgICAgICAgICAgZGVmYXVsdFR0bDogMCxcbiAgICAgICAgICAgIG1heFR0bDogMzY1LFxuICAgICAgICAgICAgbWluVHRsOiAwLFxuICAgICAgICAgICAgcGFyYW1ldGVyc0luQ2FjaGVLZXlBbmRGb3J3YXJkZWRUb09yaWdpbjoge1xuICAgICAgICAgICAgICBjb29raWVzQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgY29va2llQmVoYXZpb3I6IFwibm9uZVwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBoZWFkZXJzQ29uZmlnOlxuICAgICAgICAgICAgICAgIChwbGFuLnNlcnZlckNhY2hlUG9saWN5Py5hbGxvd2VkSGVhZGVycyA/PyBbXSkubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgaGVhZGVyQmVoYXZpb3I6IFwid2hpdGVsaXN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHBsYW4uc2VydmVyQ2FjaGVQb2xpY3k/LmFsbG93ZWRIZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgIGhlYWRlckJlaGF2aW9yOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcXVlcnlTdHJpbmdzQ29uZmlnOiB7XG4gICAgICAgICAgICAgICAgcXVlcnlTdHJpbmdCZWhhdmlvcjogXCJhbGxcIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZW5hYmxlQWNjZXB0RW5jb2RpbmdCcm90bGk6IHRydWUsXG4gICAgICAgICAgICAgIGVuYWJsZUFjY2VwdEVuY29kaW5nR3ppcDogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgICApO1xuICAgICAgcmV0dXJuIHNpbmdsZXRvbkNhY2hlUG9saWN5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVzZVNlcnZlckZ1bmN0aW9uV2FybWluZ0luamVjdGlvbihzdHJlYW1pbmc/OiBib29sZWFuKSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBgaWYgKGV2ZW50LnR5cGUgPT09IFwid2FybWVyXCIpIHtgLFxuICAgICAgICBgICBjb25zdCBwID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtgLFxuICAgICAgICBgICAgIHNldFRpbWVvdXQoKCkgPT4ge2AsXG4gICAgICAgIGAgICAgICByZXNvbHZlKHsgc2VydmVySWQ6IFwic2VydmVyLVwiICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgOCkgfSk7YCxcbiAgICAgICAgYCAgICB9LCBldmVudC5kZWxheSk7YCxcbiAgICAgICAgYCAgfSk7YCxcbiAgICAgICAgLi4uKHN0cmVhbWluZ1xuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICBgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHA7YCxcbiAgICAgICAgICAgICAgYCAgcmVzcG9uc2VTdHJlYW0ud3JpdGUoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtgLFxuICAgICAgICAgICAgICBgICByZXNwb25zZVN0cmVhbS5lbmQoKTtgLFxuICAgICAgICAgICAgICBgICByZXR1cm47YCxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICA6IFtgICByZXR1cm4gcDtgXSksXG4gICAgICAgIGB9YCxcbiAgICAgIF0uam9pbihcIlxcblwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVEaXN0cmlidXRpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IENkbihcbiAgICAgICAgYCR7bmFtZX1DZG5gLFxuICAgICAgICB7XG4gICAgICAgICAgZG9tYWluOiBhcmdzLmRvbWFpbixcbiAgICAgICAgICB3YWl0OiAhJGRldixcbiAgICAgICAgICB0cmFuc2Zvcm06IHtcbiAgICAgICAgICAgIGRpc3RyaWJ1dGlvbjogKGRpc3RyaWJ1dGlvbikgPT4gKHtcbiAgICAgICAgICAgICAgLi4uZGlzdHJpYnV0aW9uLFxuICAgICAgICAgICAgICBjb21tZW50OiBgJHtuYW1lfSBhcHBgLFxuICAgICAgICAgICAgICBvcmlnaW5zOiBPYmplY3QudmFsdWVzKG9yaWdpbnMpLFxuICAgICAgICAgICAgICBvcmlnaW5Hcm91cHM6IE9iamVjdC52YWx1ZXMob3JpZ2luR3JvdXBzKSxcbiAgICAgICAgICAgICAgZGVmYXVsdFJvb3RPYmplY3Q6IFwiXCIsXG4gICAgICAgICAgICAgIGRlZmF1bHRDYWNoZUJlaGF2aW9yOiBidWlsZEJlaGF2aW9yKFxuICAgICAgICAgICAgICAgIHBsYW4uYmVoYXZpb3JzLmZpbmQoKGJlaGF2aW9yKSA9PiAhYmVoYXZpb3IucGF0dGVybikhLFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICBvcmRlcmVkQ2FjaGVCZWhhdmlvcnM6IHBsYW4uYmVoYXZpb3JzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoYmVoYXZpb3IpID0+IGJlaGF2aW9yLnBhdHRlcm4pXG4gICAgICAgICAgICAgICAgLm1hcCgoYmVoYXZpb3IpID0+ICh7XG4gICAgICAgICAgICAgICAgICBwYXRoUGF0dGVybjogYmVoYXZpb3IucGF0dGVybiEsXG4gICAgICAgICAgICAgICAgICAuLi5idWlsZEJlaGF2aW9yKGJlaGF2aW9yKSxcbiAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgIGN1c3RvbUVycm9yUmVzcG9uc2VzOiBwbGFuLmVycm9yUmVzcG9uc2VzLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLy8gY3JlYXRlIGRpc3RyaWJ1dGlvbiBhZnRlciBhc3NldHMgYXJlIHVwbG9hZGVkXG4gICAgICAgIHsgZGVwZW5kc09uOiBidWNrZXRGaWxlLCBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWxsb3dTZXJ2ZXJGdW5jdGlvbkludmFsaWRhdGVEaXN0cmlidXRpb24oKSB7XG4gICAgICBjb25zdCBwb2xpY3kgPSBuZXcgYXdzLmlhbS5Qb2xpY3koXG4gICAgICAgIGAke25hbWV9SW52YWxpZGF0aW9uUG9saWN5YCxcbiAgICAgICAge1xuICAgICAgICAgIHBvbGljeTogaW50ZXJwb2xhdGVge1xuICAgICAgICAgICAgXCJWZXJzaW9uXCI6IFwiMjAxMi0xMC0xN1wiLFxuICAgICAgICAgICAgXCJTdGF0ZW1lbnRcIjogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJBY3Rpb25cIjogXCJjbG91ZGZyb250OkNyZWF0ZUludmFsaWRhdGlvblwiLFxuICAgICAgICAgICAgICAgIFwiRWZmZWN0XCI6IFwiQWxsb3dcIixcbiAgICAgICAgICAgICAgICBcIlJlc291cmNlXCI6IFwiJHtkaXN0cmlidXRpb24ubm9kZXMuZGlzdHJpYnV0aW9uLmFybn1cIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfWAsXG4gICAgICAgIH0sXG4gICAgICAgIHsgcGFyZW50IH0sXG4gICAgICApO1xuXG4gICAgICBmb3IgKGNvbnN0IGZuIG9mIFsuLi5zc3JGdW5jdGlvbnMsIC4uLk9iamVjdC52YWx1ZXMoZWRnZUZ1bmN0aW9ucyldKSB7XG4gICAgICAgIGZuLm5vZGVzLmZ1bmN0aW9uLm5hbWUuYXBwbHkoKGZ1bmN0aW9uTmFtZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHVuaXF1ZUhhc2ggPSBjcnlwdG9cbiAgICAgICAgICAgIC5jcmVhdGVIYXNoKFwibWQ1XCIpXG4gICAgICAgICAgICAudXBkYXRlKGZ1bmN0aW9uTmFtZSlcbiAgICAgICAgICAgIC5kaWdlc3QoXCJoZXhcIilcbiAgICAgICAgICAgIC5zdWJzdHJpbmcoMCwgNCk7XG5cbiAgICAgICAgICBuZXcgYXdzLmlhbS5Sb2xlUG9saWN5QXR0YWNobWVudChcbiAgICAgICAgICAgIGAke25hbWV9SW52YWxpZGF0aW9uUG9saWN5QXR0YWNobWVudCR7dW5pcXVlSGFzaH1gLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBwb2xpY3lBcm46IHBvbGljeS5hcm4sXG4gICAgICAgICAgICAgIHJvbGU6IGZuLm5vZGVzLnJvbGUhLm5hbWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVXYXJtZXIoKSB7XG4gICAgICAvLyBub3RlOiBDdXJyZW50bHkgYWxsIHNpdGVzIGhhdmUgYSBzaW5nbGUgc2VydmVyIGZ1bmN0aW9uLiBXaGVuIHdlIGFkZFxuICAgICAgLy8gICAgICAgc3VwcG9ydCBmb3IgbXVsdGlwbGUgc2VydmVyIGZ1bmN0aW9ucyAoaWUuIHJvdXRlIHNwbGl0dGluZyksIHdlXG4gICAgICAvLyAgICAgICBuZWVkIHRvIGhhbmRsZSB3YXJtaW5nIG11bHRpcGxlIGZ1bmN0aW9ucy5cbiAgICAgIGlmICghYXJncy53YXJtKSByZXR1cm47XG5cbiAgICAgIGlmIChhcmdzLndhcm0gJiYgcGxhbi5lZGdlKSB7XG4gICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoXG4gICAgICAgICAgYEluIHRoZSBcIiR7bmFtZX1cIiBTaXRlLCB3YXJtaW5nIGlzIGN1cnJlbnRseSBzdXBwb3J0ZWQgb25seSBmb3IgdGhlIHJlZ2lvbmFsIG1vZGUuYCxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNzckZ1bmN0aW9ucy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgICAgLy8gQ3JlYXRlIGNyb24gam9iXG4gICAgICBjb25zdCBjcm9uID0gbmV3IENyb24oXG4gICAgICAgIGAke25hbWV9V2FybWVyYCxcbiAgICAgICAge1xuICAgICAgICAgIHNjaGVkdWxlOiBcInJhdGUoNSBtaW51dGVzKVwiLFxuICAgICAgICAgIGpvYjoge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke25hbWV9IHdhcm1lcmAsXG4gICAgICAgICAgICBidW5kbGU6IHBhdGguam9pbigkY2xpLnBhdGhzLnBsYXRmb3JtLCBcImRpc3RcIiwgXCJzc3Itd2FybWVyXCIpLFxuICAgICAgICAgICAgcnVudGltZTogXCJub2RlanMyMC54XCIsXG4gICAgICAgICAgICBoYW5kbGVyOiBcImluZGV4LmhhbmRsZXJcIixcbiAgICAgICAgICAgIHRpbWVvdXQ6IFwiOTAwIHNlY29uZHNcIixcbiAgICAgICAgICAgIG1lbW9yeTogXCIxMjggTUJcIixcbiAgICAgICAgICAgIGxpdmU6IGZhbHNlLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHtcbiAgICAgICAgICAgICAgRlVOQ1RJT05fTkFNRTogc3NyRnVuY3Rpb25zWzBdLm5vZGVzLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgIENPTkNVUlJFTkNZOiBvdXRwdXQoYXJncy53YXJtKS5hcHBseSgod2FybSkgPT4gd2FybS50b1N0cmluZygpKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsaW5rOiBbc3NyRnVuY3Rpb25zWzBdXSxcbiAgICAgICAgICAgIF9za2lwTWV0YWRhdGE6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0cmFuc2Zvcm06IHtcbiAgICAgICAgICAgIHRhcmdldDogKHRhcmdldEFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgdGFyZ2V0QXJncy5yZXRyeVBvbGljeSA9IHtcbiAgICAgICAgICAgICAgICBtYXhpbXVtUmV0cnlBdHRlbXB0czogMCxcbiAgICAgICAgICAgICAgICBtYXhpbXVtRXZlbnRBZ2VJblNlY29uZHM6IDYwLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcblxuICAgICAgLy8gUHJld2FybSBvbiBkZXBsb3lcbiAgICAgIG5ldyBhd3MubGFtYmRhLkludm9jYXRpb24oXG4gICAgICAgIGAke25hbWV9UHJld2FybWAsXG4gICAgICAgIHtcbiAgICAgICAgICBmdW5jdGlvbk5hbWU6IGNyb24ubm9kZXMuam9iLm5hbWUsXG4gICAgICAgICAgdHJpZ2dlcnM6IHtcbiAgICAgICAgICAgIHZlcnNpb246IERhdGUubm93KCkudG9TdHJpbmcoKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGlucHV0OiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgICAgIH0sXG4gICAgICAgIHsgcGFyZW50IH0sXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZURpc3RyaWJ1dGlvbkludmFsaWRhdGlvbigpIHtcbiAgICAgIGFsbChbb3V0cHV0UGF0aCwgYXJncy5pbnZhbGlkYXRpb25dKS5hcHBseShcbiAgICAgICAgKFtvdXRwdXRQYXRoLCBpbnZhbGlkYXRpb25SYXddKSA9PiB7XG4gICAgICAgICAgLy8gTm9ybWFsaXplIGludmFsaWRhdGlvblxuICAgICAgICAgIGlmIChpbnZhbGlkYXRpb25SYXcgPT09IGZhbHNlKSByZXR1cm47XG4gICAgICAgICAgY29uc3QgaW52YWxpZGF0aW9uID0ge1xuICAgICAgICAgICAgd2FpdDogZmFsc2UsXG4gICAgICAgICAgICBwYXRoczogXCJhbGxcIixcbiAgICAgICAgICAgIC4uLmludmFsaWRhdGlvblJhdyxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gV2Ugd2lsbCBnZW5lcmF0ZSBhIGhhc2ggYmFzZWQgb24gdGhlIGNvbnRlbnRzIG9mIHRoZSBTMyBmaWxlcyB3aXRoIGNhY2hlIGVuYWJsZWQuXG4gICAgICAgICAgLy8gVGhpcyB3aWxsIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSBvdXIgQ2xvdWRGcm9udCBjYWNoZS5cbiAgICAgICAgICBjb25zdCBzM09yaWdpbiA9IE9iamVjdC52YWx1ZXMocGxhbi5vcmlnaW5zKS5maW5kKFxuICAgICAgICAgICAgKG9yaWdpbikgPT4gb3JpZ2luLnMzLFxuICAgICAgICAgICk/LnMzO1xuICAgICAgICAgIGlmICghczNPcmlnaW4pIHJldHVybjtcbiAgICAgICAgICBjb25zdCBjYWNoZWRTM0ZpbGVzID0gczNPcmlnaW4uY29weS5maWx0ZXIoKGZpbGUpID0+IGZpbGUuY2FjaGVkKTtcbiAgICAgICAgICBpZiAoY2FjaGVkUzNGaWxlcy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgICAgICAgIC8vIEJ1aWxkIGludmFsaWRhdGlvbiBwYXRoc1xuICAgICAgICAgIGNvbnN0IGludmFsaWRhdGlvblBhdGhzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgIGlmIChpbnZhbGlkYXRpb24ucGF0aHMgPT09IFwiYWxsXCIpIHtcbiAgICAgICAgICAgIGludmFsaWRhdGlvblBhdGhzLnB1c2goXCIvKlwiKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGludmFsaWRhdGlvbi5wYXRocyA9PT0gXCJ2ZXJzaW9uZWRcIikge1xuICAgICAgICAgICAgY2FjaGVkUzNGaWxlcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgIGlmICghaXRlbS52ZXJzaW9uZWRTdWJEaXIpIHJldHVybjtcbiAgICAgICAgICAgICAgaW52YWxpZGF0aW9uUGF0aHMucHVzaChcbiAgICAgICAgICAgICAgICBwYXRoLnBvc2l4LmpvaW4oXCIvXCIsIGl0ZW0udG8sIGl0ZW0udmVyc2lvbmVkU3ViRGlyLCBcIipcIiksXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW52YWxpZGF0aW9uUGF0aHMucHVzaCguLi4oaW52YWxpZGF0aW9uPy5wYXRocyB8fCBbXSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaW52YWxpZGF0aW9uUGF0aHMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgICAvLyBCdWlsZCBidWlsZCBJRFxuICAgICAgICAgIGxldCBpbnZhbGlkYXRpb25CdWlsZElkOiBzdHJpbmc7XG4gICAgICAgICAgaWYgKHBsYW4uYnVpbGRJZCkge1xuICAgICAgICAgICAgaW52YWxpZGF0aW9uQnVpbGRJZCA9IHBsYW4uYnVpbGRJZDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaGFzaCA9IGNyeXB0by5jcmVhdGVIYXNoKFwibWQ1XCIpO1xuXG4gICAgICAgICAgICBjYWNoZWRTM0ZpbGVzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgLy8gVGhlIGJlbG93IG9wdGlvbnMgYXJlIG5lZWRlZCB0byBzdXBwb3J0IGZvbGxvd2luZyBzeW1saW5rcyB3aGVuIGJ1aWxkaW5nIHppcCBmaWxlczpcbiAgICAgICAgICAgICAgLy8gLSBub2RpcjogVGhpcyB3aWxsIHByZXZlbnQgc3ltbGlua3MgdGhlbXNlbHZlcyBmcm9tIGJlaW5nIGNvcGllZCBpbnRvIHRoZSB6aXAuXG4gICAgICAgICAgICAgIC8vIC0gZm9sbG93OiBUaGlzIHdpbGwgZm9sbG93IHN5bWxpbmtzIGFuZCBjb3B5IHRoZSBmaWxlcyB3aXRoaW4uXG5cbiAgICAgICAgICAgICAgLy8gRm9yIHZlcnNpb25lZCBmaWxlcywgdXNlIGZpbGUgcGF0aCBmb3IgZGlnZXN0IHNpbmNlIGZpbGUgdmVyc2lvbiBpbiBuYW1lIHNob3VsZCBjaGFuZ2Ugb24gY29udGVudCBjaGFuZ2VcbiAgICAgICAgICAgICAgaWYgKGl0ZW0udmVyc2lvbmVkU3ViRGlyKSB7XG4gICAgICAgICAgICAgICAgZ2xvYlN5bmMoXCIqKlwiLCB7XG4gICAgICAgICAgICAgICAgICBkb3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICBub2RpcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGZvbGxvdzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIGN3ZDogcGF0aC5yZXNvbHZlKFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRQYXRoLFxuICAgICAgICAgICAgICAgICAgICBpdGVtLmZyb20sXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udmVyc2lvbmVkU3ViRGlyLFxuICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB9KS5mb3JFYWNoKChmaWxlUGF0aCkgPT4gaGFzaC51cGRhdGUoZmlsZVBhdGgpKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIEZvciBub24tdmVyc2lvbmVkIGZpbGVzLCB1c2UgZmlsZSBjb250ZW50IGZvciBkaWdlc3RcbiAgICAgICAgICAgICAgaWYgKGludmFsaWRhdGlvbi5wYXRocyAhPT0gXCJ2ZXJzaW9uZWRcIikge1xuICAgICAgICAgICAgICAgIGdsb2JTeW5jKFwiKipcIiwge1xuICAgICAgICAgICAgICAgICAgaWdub3JlOiBpdGVtLnZlcnNpb25lZFN1YkRpclxuICAgICAgICAgICAgICAgICAgICA/IFtwYXRoLnBvc2l4LmpvaW4oaXRlbS52ZXJzaW9uZWRTdWJEaXIsIFwiKipcIildXG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgZG90OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgbm9kaXI6IHRydWUsXG4gICAgICAgICAgICAgICAgICBmb2xsb3c6IHRydWUsXG4gICAgICAgICAgICAgICAgICBjd2Q6IHBhdGgucmVzb2x2ZShvdXRwdXRQYXRoLCBpdGVtLmZyb20pLFxuICAgICAgICAgICAgICAgIH0pLmZvckVhY2goKGZpbGVQYXRoKSA9PlxuICAgICAgICAgICAgICAgICAgaGFzaC51cGRhdGUoXG4gICAgICAgICAgICAgICAgICAgIGZzLnJlYWRGaWxlU3luYyhcbiAgICAgICAgICAgICAgICAgICAgICBwYXRoLnJlc29sdmUob3V0cHV0UGF0aCwgaXRlbS5mcm9tLCBmaWxlUGF0aCksXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW52YWxpZGF0aW9uQnVpbGRJZCA9IGhhc2guZGlnZXN0KFwiaGV4XCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG5ldyBEaXN0cmlidXRpb25JbnZhbGlkYXRpb24oXG4gICAgICAgICAgICBgJHtuYW1lfUludmFsaWRhdGlvbmAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGRpc3RyaWJ1dGlvbklkOiBkaXN0cmlidXRpb24ubm9kZXMuZGlzdHJpYnV0aW9uLmlkLFxuICAgICAgICAgICAgICBwYXRoczogaW52YWxpZGF0aW9uUGF0aHMsXG4gICAgICAgICAgICAgIHZlcnNpb246IGludmFsaWRhdGlvbkJ1aWxkSWQsXG4gICAgICAgICAgICAgIHdhaXQ6IGludmFsaWRhdGlvbi53YWl0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgcGFyZW50LFxuICAgICAgICAgICAgICBpZ25vcmVDaGFuZ2VzOiAkZGV2ID8gW1wiKlwiXSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUNsb3VkRnJvbnRGdW5jdGlvbkhvc3RIZWFkZXJJbmplY3Rpb24oKSB7XG4gIHJldHVybiBgcmVxdWVzdC5oZWFkZXJzW1wieC1mb3J3YXJkZWQtaG9zdFwiXSA9IHJlcXVlc3QuaGVhZGVycy5ob3N0O2A7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVBsYW48XG4gIENsb3VkRnJvbnRGdW5jdGlvbnMgZXh0ZW5kcyBSZWNvcmQ8XG4gICAgc3RyaW5nLFxuICAgIFByZXR0aWZ5PENsb3VkRnJvbnRGdW5jdGlvbkNvbmZpZz5cbiAgPixcbiAgRWRnZUZ1bmN0aW9ucyBleHRlbmRzIFJlY29yZDxzdHJpbmcsIFByZXR0aWZ5PEVkZ2VGdW5jdGlvbkNvbmZpZz4+LFxuICBPcmlnaW5zIGV4dGVuZHMgUmVjb3JkPFxuICAgIHN0cmluZyxcbiAgICB7XG4gICAgICBzZXJ2ZXI/OiBQcmV0dGlmeTxTZXJ2ZXJPcmlnaW5Db25maWc+O1xuICAgICAgaW1hZ2VPcHRpbWl6YXRpb24/OiBQcmV0dGlmeTxJbWFnZU9wdGltaXphdGlvbk9yaWdpbkNvbmZpZz47XG4gICAgICBzMz86IFByZXR0aWZ5PFMzT3JpZ2luQ29uZmlnPjtcbiAgICAgIGdyb3VwPzogUHJldHRpZnk8T3JpZ2luR3JvdXBDb25maWc+O1xuICAgIH1cbiAgPixcbj4oaW5wdXQ6IHtcbiAgY2xvdWRGcm9udEZ1bmN0aW9ucz86IENsb3VkRnJvbnRGdW5jdGlvbnM7XG4gIGVkZ2VGdW5jdGlvbnM/OiBFZGdlRnVuY3Rpb25zO1xuICAvKipcbiAgICogRWFjaCBvcmlnaW4gY2FuIGJlIGVpdGhlciBhbiBTMywgc2VydmVyLCBpbWFnZSBvcHRpbWl6YXRpb24sIG9yIGdyb3VwIG9yaWdpbi5cbiAgICovXG4gIG9yaWdpbnM6IE9yaWdpbnM7XG4gIGVkZ2U6IGJvb2xlYW47XG4gIGJlaGF2aW9yczoge1xuICAgIGNhY2hlVHlwZTogXCJzZXJ2ZXJcIiB8IFwic3RhdGljXCI7XG4gICAgcGF0dGVybj86IHN0cmluZztcbiAgICBvcmlnaW46IGtleW9mIE9yaWdpbnM7XG4gICAgYWxsb3dlZE1ldGhvZHM/OiAoXG4gICAgICB8IFwiREVMRVRFXCJcbiAgICAgIHwgXCJHRVRcIlxuICAgICAgfCBcIkhFQURcIlxuICAgICAgfCBcIk9QVElPTlNcIlxuICAgICAgfCBcIlBBVENIXCJcbiAgICAgIHwgXCJQT1NUXCJcbiAgICAgIHwgXCJQVVRcIlxuICAgIClbXTtcbiAgICBjZkZ1bmN0aW9uPzoga2V5b2YgQ2xvdWRGcm9udEZ1bmN0aW9ucztcbiAgICBlZGdlRnVuY3Rpb24/OiBrZXlvZiBFZGdlRnVuY3Rpb25zO1xuICB9W107XG4gIGVycm9yUmVzcG9uc2VzPzogYXdzLnR5cGVzLmlucHV0LmNsb3VkZnJvbnQuRGlzdHJpYnV0aW9uQ3VzdG9tRXJyb3JSZXNwb25zZVtdO1xuICBzZXJ2ZXJDYWNoZVBvbGljeT86IHtcbiAgICBhbGxvd2VkSGVhZGVycz86IHN0cmluZ1tdO1xuICB9O1xuICBidWlsZElkPzogc3RyaW5nO1xufSkge1xuICBPYmplY3QuZW50cmllcyhpbnB1dC5vcmlnaW5zKS5mb3JFYWNoKChbb3JpZ2luTmFtZSwgb3JpZ2luXSkgPT4ge1xuICAgIGlmIChcbiAgICAgICFvcmlnaW4uczMgJiZcbiAgICAgICFvcmlnaW4uc2VydmVyICYmXG4gICAgICAhb3JpZ2luLmltYWdlT3B0aW1pemF0aW9uICYmXG4gICAgICAhb3JpZ2luLmdyb3VwXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKFxuICAgICAgICBgSW52YWxpZCBvcmlnaW4gXCIke29yaWdpbk5hbWV9XCIgZGVmaW5pdGlvbi4gRWFjaCBvcmlnaW4gbXVzdCBiZSBhbiBTMywgc2VydmVyLCBpbWFnZSBvcHRpbWl6YXRpb24sIG9yIGdyb3VwIG9yaWdpbi5gLFxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gaW5wdXQ7XG59XG4iLCAiaW1wb3J0IHsgQ3VzdG9tUmVzb3VyY2VPcHRpb25zLCBJbnB1dCwgT3V0cHV0LCBkeW5hbWljIH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVJbnB1dHMge1xuICBkYXRhOiBJbnB1dDxJbnB1dHNbXCJkYXRhXCJdPjtcbn1cblxuaW50ZXJmYWNlIElucHV0cyB7XG4gIGRhdGE6IGFueTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYWNoZSB7XG4gIGRhdGE6IE91dHB1dDxJbnB1dHNbXCJkYXRhXCJdPjtcbn1cblxuY2xhc3MgUHJvdmlkZXIgaW1wbGVtZW50cyBkeW5hbWljLlJlc291cmNlUHJvdmlkZXIge1xuICBhc3luYyBjcmVhdGUoaW5wdXRzOiBJbnB1dHMpOiBQcm9taXNlPGR5bmFtaWMuQ3JlYXRlUmVzdWx0PElucHV0cz4+IHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IFwiY2FjaGVcIixcbiAgICAgIG91dHM6IHtcbiAgICAgICAgZGF0YTogaW5wdXRzLmRhdGEsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBhc3luYyB1cGRhdGUoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBvbGRzOiBJbnB1dHMsXG4gICAgbmV3czogSW5wdXRzLFxuICApOiBQcm9taXNlPGR5bmFtaWMuVXBkYXRlUmVzdWx0PElucHV0cz4+IHtcbiAgICByZXR1cm4ge1xuICAgICAgb3V0czoge1xuICAgICAgICBkYXRhOiBuZXdzLmRhdGEsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENhY2hlIGV4dGVuZHMgZHluYW1pYy5SZXNvdXJjZSB7XG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgYXJnczogQ2FjaGVJbnB1dHMsIG9wdHM/OiBDdXN0b21SZXNvdXJjZU9wdGlvbnMpIHtcbiAgICBzdXBlcihuZXcgUHJvdmlkZXIoKSwgYCR7bmFtZX0uc3N0LmF3cy5DYWNoZWAsIGFyZ3MsIG9wdHMpO1xuICB9XG59XG4iLCAiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcbmltcG9ydCB7IE91dHB1dCwgYWxsLCBvdXRwdXQgfSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCB7IFByZXR0aWZ5IH0gZnJvbSBcIi4uL2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXRcIjtcbmltcG9ydCB7IExpbmsgfSBmcm9tIFwiLi4vbGluay5qc1wiO1xuaW1wb3J0IHsgVmlzaWJsZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLmpzXCI7XG5pbXBvcnQgeyBCYXNlU2l0ZUZpbGVPcHRpb25zIH0gZnJvbSBcIi4vYmFzZS1zaXRlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVNzclNpdGVBcmdzIHtcbiAgYXNzZXRzPzogSW5wdXQ8e1xuICAgIC8qKlxuICAgICAqIENoYXJhY3RlciBlbmNvZGluZyBmb3IgdGV4dCBiYXNlZCBhc3NldHMsIGxpa2UgSFRNTCwgQ1NTLCBKUy4gVGhpcyBpc1xuICAgICAqIHVzZWQgdG8gc2V0IHRoZSBgQ29udGVudC1UeXBlYCBoZWFkZXIgd2hlbiB0aGVzZSBmaWxlcyBhcmUgc2VydmVkIG91dC5cbiAgICAgKlxuICAgICAqIElmIHNldCB0byBgXCJub25lXCJgLCB0aGVuIG5vIGNoYXJzZXQgd2lsbCBiZSByZXR1cm5lZCBpbiBoZWFkZXIuXG4gICAgICogQGRlZmF1bHQgYFwidXRmLThcImBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgYXNzZXRzOiB7XG4gICAgICogICAgIHRleHRFbmNvZGluZzogXCJpc28tODg1OS0xXCJcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgdGV4dEVuY29kaW5nPzogSW5wdXQ8XG4gICAgICBcInV0Zi04XCIgfCBcImlzby04ODU5LTFcIiB8IFwid2luZG93cy0xMjUyXCIgfCBcImFzY2lpXCIgfCBcIm5vbmVcIlxuICAgID47XG4gICAgLyoqXG4gICAgICogVGhlIGBDYWNoZS1Db250cm9sYCBoZWFkZXIgdXNlZCBmb3IgdmVyc2lvbmVkIGZpbGVzLCBsaWtlIGBtYWluLTEyMzQuY3NzYC4gVGhpcyBpc1xuICAgICAqIHVzZWQgYnkgYm90aCBDbG91ZEZyb250IGFuZCB0aGUgYnJvd3NlciBjYWNoZS5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGBtYXgtYWdlYCBpcyBzZXQgdG8gMSB5ZWFyLlxuICAgICAqIEBkZWZhdWx0IGBcInB1YmxpYyxtYXgtYWdlPTMxNTM2MDAwLGltbXV0YWJsZVwiYFxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBganNcbiAgICAgKiB7XG4gICAgICogICBhc3NldHM6IHtcbiAgICAgKiAgICAgdmVyc2lvbmVkRmlsZXNDYWNoZUhlYWRlcjogXCJwdWJsaWMsbWF4LWFnZT0zMTUzNjAwMCxpbW11dGFibGVcIlxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICB2ZXJzaW9uZWRGaWxlc0NhY2hlSGVhZGVyPzogSW5wdXQ8c3RyaW5nPjtcbiAgICAvKipcbiAgICAgKiBUaGUgYENhY2hlLUNvbnRyb2xgIGhlYWRlciB1c2VkIGZvciBub24tdmVyc2lvbmVkIGZpbGVzLCBsaWtlIGBpbmRleC5odG1sYC4gVGhpcyBpcyB1c2VkIGJ5IGJvdGggQ2xvdWRGcm9udCBhbmQgdGhlIGJyb3dzZXIgY2FjaGUuXG4gICAgICpcbiAgICAgKiBUaGUgZGVmYXVsdCBpcyBzZXQgdG8gbm90IGNhY2hlIG9uIGJyb3dzZXJzLCBhbmQgY2FjaGUgZm9yIDEgZGF5IG9uIENsb3VkRnJvbnQuXG4gICAgICogQGRlZmF1bHQgYFwicHVibGljLG1heC1hZ2U9MCxzLW1heGFnZT04NjQwMCxzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTg2NDBcImBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgYXNzZXRzOiB7XG4gICAgICogICAgIG5vblZlcnNpb25lZEZpbGVzQ2FjaGVIZWFkZXI6IFwicHVibGljLG1heC1hZ2U9MCxuby1jYWNoZVwiXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIG5vblZlcnNpb25lZEZpbGVzQ2FjaGVIZWFkZXI/OiBJbnB1dDxzdHJpbmc+O1xuICAgIC8qKlxuICAgICAqIFNwZWNpZnkgdGhlIGBDb250ZW50LVR5cGVgIGFuZCBgQ2FjaGUtQ29udHJvbGAgaGVhZGVycyBmb3Igc3BlY2lmaWMgZmlsZXMuIFRoaXMgYWxsb3dzXG4gICAgICogeW91IHRvIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGZvciBzcGVjaWZpYyBmaWxlcyB1c2luZyBnbG9iIHBhdHRlcm5zLlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBBcHBseSBgQ2FjaGUtQ29udHJvbGAgYW5kIGBDb250ZW50LVR5cGVgIHRvIGFsbCB6aXAgZmlsZXMuXG4gICAgICogYGBganNcbiAgICAgKiB7XG4gICAgICogICBhc3NldHM6IHtcbiAgICAgKiAgICAgZmlsZU9wdGlvbnM6IFtcbiAgICAgKiAgICAgICB7XG4gICAgICogICAgICAgICBmaWxlczogXCIqKlxcLyouemlwXCIsXG4gICAgICogICAgICAgICBjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi96aXBcIixcbiAgICAgKiAgICAgICAgIGNhY2hlQ29udHJvbDogXCJwcml2YXRlLG5vLWNhY2hlLG5vLXN0b3JlLG11c3QtcmV2YWxpZGF0ZVwiXG4gICAgICogICAgICAgfVxuICAgICAqICAgICBdXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqIEFwcGx5IGBDYWNoZS1Db250cm9sYCB0byBhbGwgQ1NTIGFuZCBKUyBmaWxlcyBleGNlcHQgZm9yIENTUyBmaWxlcyB3aXRoIGBpbmRleC1gXG4gICAgICogcHJlZml4IGluIHRoZSBgbWFpbi9gIGRpcmVjdG9yeS5cbiAgICAgKiBgYGBqc1xuICAgICAqIHtcbiAgICAgKiAgIGFzc2V0czoge1xuICAgICAqICAgICBmaWxlT3B0aW9uczogW1xuICAgICAqICAgICAgIHtcbiAgICAgKiAgICAgICAgIGZpbGVzOiBbXCIqKlxcLyouY3NzXCIsIFwiKipcXC8qLmpzXCJdLFxuICAgICAqICAgICAgICAgaWdub3JlOiBcIm1haW5cXC9pbmRleC0qLmNzc1wiLFxuICAgICAqICAgICAgICAgY2FjaGVDb250cm9sOiBcInByaXZhdGUsbm8tY2FjaGUsbm8tc3RvcmUsbXVzdC1yZXZhbGlkYXRlXCJcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgIF1cbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZmlsZU9wdGlvbnM/OiBJbnB1dDxQcmV0dGlmeTxCYXNlU2l0ZUZpbGVPcHRpb25zPltdPjtcbiAgfT47XG4gIGJ1aWxkQ29tbWFuZD86IElucHV0PHN0cmluZz47XG4gIGVudmlyb25tZW50PzogSW5wdXQ8UmVjb3JkPHN0cmluZywgSW5wdXQ8c3RyaW5nPj4+O1xuICBsaW5rPzogSW5wdXQ8YW55W10+O1xuICBwYXRoPzogSW5wdXQ8c3RyaW5nPjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQXBwKFxuICBuYW1lOiBzdHJpbmcsXG4gIGFyZ3M6IEJhc2VTc3JTaXRlQXJncyxcbiAgc2l0ZVBhdGg6IE91dHB1dDxzdHJpbmc+LFxuICBidWlsZENvbW1hbmQ/OiBPdXRwdXQ8c3RyaW5nPixcbikge1xuICByZXR1cm4gYWxsKFtcbiAgICBzaXRlUGF0aCxcbiAgICBidWlsZENvbW1hbmQgPz8gYXJncy5idWlsZENvbW1hbmQsXG4gICAgYXJncy5saW5rLFxuICAgIGFyZ3MuZW52aXJvbm1lbnQsXG4gIF0pLmFwcGx5KChbc2l0ZVBhdGgsIHVzZXJDb21tYW5kLCBsaW5rcywgZW52aXJvbm1lbnRdKSA9PiB7XG4gICAgaWYgKHByb2Nlc3MuZW52LlNLSVApIHJldHVybiBvdXRwdXQoc2l0ZVBhdGgpO1xuICAgIGlmICgkZGV2KSByZXR1cm4gb3V0cHV0KHNpdGVQYXRoKTtcblxuICAgIGNvbnN0IGNtZCA9IHJlc29sdmVCdWlsZENvbW1hbmQoKTtcbiAgICByZXR1cm4gcnVuQnVpbGQoKTtcblxuICAgIGZ1bmN0aW9uIHJlc29sdmVCdWlsZENvbW1hbmQoKSB7XG4gICAgICBpZiAodXNlckNvbW1hbmQpIHJldHVybiB1c2VyQ29tbWFuZDtcblxuICAgICAgLy8gRW5zdXJlIHRoYXQgdGhlIHNpdGUgaGFzIGEgYnVpbGQgc2NyaXB0IGRlZmluZWRcbiAgICAgIGlmICghdXNlckNvbW1hbmQpIHtcbiAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGguam9pbihzaXRlUGF0aCwgXCJwYWNrYWdlLmpzb25cIikpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFZpc2libGVFcnJvcihgTm8gcGFja2FnZS5qc29uIGZvdW5kIGF0IFwiJHtzaXRlUGF0aH1cIi5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWNrYWdlSnNvbiA9IEpTT04ucGFyc2UoXG4gICAgICAgICAgZnMucmVhZEZpbGVTeW5jKHBhdGguam9pbihzaXRlUGF0aCwgXCJwYWNrYWdlLmpzb25cIikpLnRvU3RyaW5nKCksXG4gICAgICAgICk7XG4gICAgICAgIGlmICghcGFja2FnZUpzb24uc2NyaXB0cyB8fCAhcGFja2FnZUpzb24uc2NyaXB0cy5idWlsZCkge1xuICAgICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoXG4gICAgICAgICAgICBgTm8gXCJidWlsZFwiIHNjcmlwdCBmb3VuZCB3aXRoaW4gcGFja2FnZS5qc29uIGluIFwiJHtzaXRlUGF0aH1cIi5gLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihzaXRlUGF0aCwgXCJ5YXJuLmxvY2tcIikpIHx8XG4gICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKCRjbGkucGF0aHMucm9vdCwgXCJ5YXJuLmxvY2tcIikpXG4gICAgICApXG4gICAgICAgIHJldHVybiBcInlhcm4gcnVuIGJ1aWxkXCI7XG4gICAgICBpZiAoXG4gICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKHNpdGVQYXRoLCBcInBucG0tbG9jay55YW1sXCIpKSB8fFxuICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbigkY2xpLnBhdGhzLnJvb3QsIFwicG5wbS1sb2NrLnlhbWxcIikpXG4gICAgICApXG4gICAgICAgIHJldHVybiBcInBucG0gcnVuIGJ1aWxkXCI7XG4gICAgICBpZiAoXG4gICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKHNpdGVQYXRoLCBcImJ1bi5sb2NrYlwiKSkgfHxcbiAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oJGNsaS5wYXRocy5yb290LCBcImJ1bi5sb2NrYlwiKSlcbiAgICAgIClcbiAgICAgICAgcmV0dXJuIFwiYnVuIHJ1biBidWlsZFwiO1xuXG4gICAgICByZXR1cm4gXCJucG0gcnVuIGJ1aWxkXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuQnVpbGQoKSB7XG4gICAgICAvLyBCdWlsZCBsaW5rIGVudmlyb25tZW50IHZhcmlhYmxlcyB0byBpbmplY3RcbiAgICAgIGNvbnN0IGxpbmtEYXRhID0gTGluay5idWlsZChsaW5rcyB8fCBbXSk7XG4gICAgICBjb25zdCBsaW5rRW52cyA9IG91dHB1dChsaW5rRGF0YSkuYXBwbHkoKGxpbmtEYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IGVudnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBkYXR1bSBvZiBsaW5rRGF0YSkge1xuICAgICAgICAgIGVudnNbYFNTVF9SRVNPVVJDRV8ke2RhdHVtLm5hbWV9YF0gPSBKU09OLnN0cmluZ2lmeShkYXR1bS5wcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW52cztcbiAgICAgIH0pO1xuXG4gICAgICAvLyBSdW4gYnVpbGRcbiAgICAgIHJldHVybiBsaW5rRW52cy5hcHBseSgobGlua0VudnMpID0+IHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgUnVubmluZyBcIiR7Y21kfVwiIHNjcmlwdGApO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGV4ZWNTeW5jKGNtZCwge1xuICAgICAgICAgICAgY3dkOiBzaXRlUGF0aCxcbiAgICAgICAgICAgIHN0ZGlvOiBcImluaGVyaXRcIixcbiAgICAgICAgICAgIGVudjoge1xuICAgICAgICAgICAgICAuLi5wcm9jZXNzLmVudixcbiAgICAgICAgICAgICAgLi4uZW52aXJvbm1lbnQsXG4gICAgICAgICAgICAgIC4uLmxpbmtFbnZzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoYFRoZXJlIHdhcyBhIHByb2JsZW0gYnVpbGRpbmcgXCIke25hbWV9XCIuYCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2l0ZVBhdGg7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuIiwgImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsIE91dHB1dCwgYWxsIH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgeyBGdW5jdGlvbiB9IGZyb20gXCIuL2Z1bmN0aW9uLmpzXCI7XG5pbXBvcnQge1xuICBTc3JTaXRlQXJncyxcbiAgY3JlYXRlQnVja2V0LFxuICBjcmVhdGVTZXJ2ZXJzQW5kRGlzdHJpYnV0aW9uLFxuICBwcmVwYXJlLFxuICB1c2VDbG91ZEZyb250RnVuY3Rpb25Ib3N0SGVhZGVySW5qZWN0aW9uLFxuICB2YWxpZGF0ZVBsYW4sXG59IGZyb20gXCIuL3Nzci1zaXRlLmpzXCI7XG5pbXBvcnQgeyBDZG4gfSBmcm9tIFwiLi9jZG4uanNcIjtcbmltcG9ydCB7IEJ1Y2tldCB9IGZyb20gXCIuL2J1Y2tldC5qc1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudC5qc1wiO1xuaW1wb3J0IHsgSGludCB9IGZyb20gXCIuLi9oaW50LmpzXCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmsuanNcIjtcbmltcG9ydCB7IENhY2hlIH0gZnJvbSBcIi4vcHJvdmlkZXJzL2NhY2hlLmpzXCI7XG5pbXBvcnQgeyBidWlsZEFwcCB9IGZyb20gXCIuLi9iYXNlL2Jhc2Utc3NyLXNpdGUuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTb2xpZFN0YXJ0QXJncyBleHRlbmRzIFNzclNpdGVBcmdzIHtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5zdGFuY2VzIG9mIHRoZSBbc2VydmVyIGZ1bmN0aW9uXSgjbm9kZXMtc2VydmVyKSB0byBrZWVwIHdhcm0uIFRoaXMgaXMgdXNlZnVsIGZvciBjYXNlcyB3aGVyZSB5b3UgYXJlIGV4cGVyaWVuY2luZyBsb25nIGNvbGQgc3RhcnRzLiBUaGUgZGVmYXVsdCBpcyB0byBub3Qga2VlcCBhbnkgaW5zdGFuY2VzIHdhcm0uXG4gICAqXG4gICAqIFRoaXMgd29ya3MgYnkgc3RhcnRpbmcgYSBzZXJ2ZXJsZXNzIGNyb24gam9iIHRvIG1ha2UgX25fIGNvbmN1cnJlbnQgcmVxdWVzdHMgdG8gdGhlIHNlcnZlciBmdW5jdGlvbiBldmVyeSBmZXcgbWludXRlcy4gV2hlcmUgX25fIGlzIHRoZSBudW1iZXIgb2YgaW5zdGFuY2VzIHRvIGtlZXAgd2FybS5cbiAgICpcbiAgICogQGRlZmF1bHQgYDBgXG4gICAqL1xuICB3YXJtPzogU3NyU2l0ZUFyZ3NbXCJ3YXJtXCJdO1xuICAvKipcbiAgICogUGVybWlzc2lvbnMgYW5kIHRoZSByZXNvdXJjZXMgdGhhdCB0aGUgW3NlcnZlciBmdW5jdGlvbl0oI25vZGVzLXNlcnZlcikgaW4geW91ciBTb2xpZFN0YXJ0IGFwcCBuZWVkcyB0byBhY2Nlc3MuIFRoZXNlIHBlcm1pc3Npb25zIGFyZSB1c2VkIHRvIGNyZWF0ZSB0aGUgZnVuY3Rpb24ncyBJQU0gcm9sZS5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIElmIHlvdSBgbGlua2AgdGhlIGZ1bmN0aW9uIHRvIGEgcmVzb3VyY2UsIHRoZSBwZXJtaXNzaW9ucyB0byBhY2Nlc3MgaXQgYXJlXG4gICAqIGF1dG9tYXRpY2FsbHkgYWRkZWQuXG4gICAqIDo6OlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBBbGxvdyByZWFkaW5nIGFuZCB3cml0aW5nIHRvIGFuIFMzIGJ1Y2tldCBjYWxsZWQgYG15LWJ1Y2tldGAuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBwZXJtaXNzaW9uczogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBhY3Rpb25zOiBbXCJzMzpHZXRPYmplY3RcIiwgXCJzMzpQdXRPYmplY3RcIl0sXG4gICAqICAgICAgIHJlc291cmNlczogW1wiYXJuOmF3czpzMzo6Om15LWJ1Y2tldC8qXCJdXG4gICAqICAgICB9LFxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogUGVyZm9ybSBhbGwgYWN0aW9ucyBvbiBhbiBTMyBidWNrZXQgY2FsbGVkIGBteS1idWNrZXRgLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgcGVybWlzc2lvbnM6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgYWN0aW9uczogW1wiczM6KlwiXSxcbiAgICogICAgICAgcmVzb3VyY2VzOiBbXCJhcm46YXdzOnMzOjo6bXktYnVja2V0LypcIl1cbiAgICogICAgIH0sXG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBHcmFudCBwZXJtaXNzaW9ucyB0byBhY2Nlc3MgYWxsIHJlc291cmNlcy5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHBlcm1pc3Npb25zOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIGFjdGlvbnM6IFtcIipcIl0sXG4gICAqICAgICAgIHJlc291cmNlczogW1wiKlwiXVxuICAgKiAgICAgfSxcbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBwZXJtaXNzaW9ucz86IFNzclNpdGVBcmdzW1wicGVybWlzc2lvbnNcIl07XG4gIC8qKlxuICAgKiBQYXRoIHRvIHRoZSBkaXJlY3Rvcnkgd2hlcmUgeW91ciBTb2xpZFN0YXJ0IGFwcCBpcyBsb2NhdGVkLiAgVGhpcyBwYXRoIGlzIHJlbGF0aXZlIHRvIHlvdXIgYHNzdC5jb25maWcudHNgLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0IGl0IGFzc3VtZXMgeW91ciBTb2xpZFN0YXJ0IGFwcCBpcyBpbiB0aGUgcm9vdCBvZiB5b3VyIFNTVCBhcHAuXG4gICAqIEBkZWZhdWx0IGBcIi5cImBcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogSWYgeW91ciBTb2xpZFN0YXJ0IGFwcCBpcyBpbiBhIHBhY2thZ2UgaW4geW91ciBtb25vcmVwby5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHBhdGg6IFwicGFja2FnZXMvd2ViXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHBhdGg/OiBTc3JTaXRlQXJnc1tcInBhdGhcIl07XG4gIC8qKlxuICAgKiBbTGluayByZXNvdXJjZXNdKC9kb2NzL2xpbmtpbmcvKSB0byB5b3VyIFNvbGlkU3RhcnQgYXBwLiBUaGlzIHdpbGw6XG4gICAqXG4gICAqIDEuIEdyYW50IHRoZSBwZXJtaXNzaW9ucyBuZWVkZWQgdG8gYWNjZXNzIHRoZSByZXNvdXJjZXMuXG4gICAqIDIuIEFsbG93IHlvdSB0byBhY2Nlc3MgaXQgaW4geW91ciBzaXRlIHVzaW5nIHRoZSBbU0RLXSgvZG9jcy9yZWZlcmVuY2Uvc2RrLykuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIFRha2VzIGEgbGlzdCBvZiByZXNvdXJjZXMgdG8gbGluayB0byB0aGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBsaW5rOiBbYnVja2V0LCBzdHJpcGVLZXldXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBsaW5rPzogU3NyU2l0ZUFyZ3NbXCJsaW5rXCJdO1xuICAvKipcbiAgICogQ29uZmlndXJlIGhvdyB0aGUgQ2xvdWRGcm9udCBjYWNoZSBpbnZhbGlkYXRpb25zIGFyZSBoYW5kbGVkLiBUaGlzIGlzIHJ1biBhZnRlciB5b3VyIFNvbGlkU3RhcnQgYXBwIGhhcyBiZWVuIGRlcGxveWVkLlxuICAgKiA6Ojp0aXBcbiAgICogWW91IGdldCAxMDAwIGZyZWUgaW52YWxpZGF0aW9ucyBwZXIgbW9udGguIEFmdGVyIHRoYXQgeW91IHBheSAkMC4wMDUgcGVyIGludmFsaWRhdGlvbiBwYXRoLiBbUmVhZCBtb3JlIGhlcmVdKGh0dHBzOi8vYXdzLmFtYXpvbi5jb20vY2xvdWRmcm9udC9wcmljaW5nLykuXG4gICAqIDo6OlxuICAgKiBAZGVmYXVsdCBgJmxjdWI7cGF0aHM6IFwiYWxsXCIsIHdhaXQ6IGZhbHNlJnJjdWI7YFxuICAgKiBAZXhhbXBsZVxuICAgKiBXYWl0IGZvciBhbGwgcGF0aHMgdG8gYmUgaW52YWxpZGF0ZWQuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBpbnZhbGlkYXRpb246IHtcbiAgICogICAgIHBhdGhzOiBcImFsbFwiLFxuICAgKiAgICAgd2FpdDogdHJ1ZVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGludmFsaWRhdGlvbj86IFNzclNpdGVBcmdzW1wiaW52YWxpZGF0aW9uXCJdO1xuICAvKipcbiAgICogU2V0IGluIHlvdXIgU29saWRTdGFydCBhcHAuIFRoZXNlIGFyZSBtYWRlIGF2YWlsYWJsZTpcbiAgICpcbiAgICogMS4gSW4gYHZpbnhpIGJ1aWxkYCwgdGhleSBhcmUgbG9hZGVkIGludG8gYHByb2Nlc3MuZW52YC5cbiAgICogMi4gTG9jYWxseSB3aGlsZSBydW5uaW5nIGBzc3QgZGV2IHZpbnhpIGRldmAuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIGFsc28gYGxpbmtgIHJlc291cmNlcyB0byB5b3VyIFNvbGlkU3RhcnQgYXBwIGFuZCBhY2Nlc3MgdGhlbSBpbiBhIHR5cGUtc2FmZSB3YXkgd2l0aCB0aGUgW1NES10oL2RvY3MvcmVmZXJlbmNlL3Nkay8pLiBXZSByZWNvbW1lbmQgbGlua2luZyBzaW5jZSBpdCdzIG1vcmUgc2VjdXJlLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGVudmlyb25tZW50OiB7XG4gICAqICAgICBBUElfVVJMOiBhcGkudXJsLFxuICAgKiAgICAgU1RSSVBFX1BVQkxJU0hBQkxFX0tFWTogXCJwa190ZXN0XzEyM1wiXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZW52aXJvbm1lbnQ/OiBTc3JTaXRlQXJnc1tcImVudmlyb25tZW50XCJdO1xuICAvKipcbiAgICogU2V0IGEgY3VzdG9tIGRvbWFpbiBmb3IgeW91ciBTb2xpZFN0YXJ0IGFwcC4gU3VwcG9ydHMgZG9tYWlucyBob3N0ZWQgZWl0aGVyIG9uXG4gICAqIFtSb3V0ZSA1M10oaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9yb3V0ZTUzLykgb3Igb3V0c2lkZSBBV1MuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIGFsc28gbWlncmF0ZSBhbiBleHRlcm5hbGx5IGhvc3RlZCBkb21haW4gdG8gQW1hem9uIFJvdXRlIDUzIGJ5XG4gICAqIFtmb2xsb3dpbmcgdGhpcyBndWlkZV0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL1JvdXRlNTMvbGF0ZXN0L0RldmVsb3Blckd1aWRlL01pZ3JhdGluZ0ROUy5odG1sKS5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBkb21haW46IFwiZG9tYWluLmNvbVwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFNwZWNpZnkgdGhlIFJvdXRlIDUzIGhvc3RlZCB6b25lIGFuZCBhIGB3d3cuYCB2ZXJzaW9uIG9mIHRoZSBjdXN0b20gZG9tYWluLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZG9tYWluOiB7XG4gICAqICAgICBkb21haW5OYW1lOiBcImRvbWFpbi5jb21cIixcbiAgICogICAgIGhvc3RlZFpvbmU6IFwiZG9tYWluLmNvbVwiLFxuICAgKiAgICAgcmVkaXJlY3RzOiBbXCJ3d3cuZG9tYWluLmNvbVwiXVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGRvbWFpbj86IFNzclNpdGVBcmdzW1wiZG9tYWluXCJdO1xuICAvKipcbiAgICogVGhlIGNvbW1hbmQgdXNlZCBpbnRlcm5hbGx5IHRvIGJ1aWxkIHlvdXIgU29saWRTdGFydCBhcHAuXG4gICAqXG4gICAqIEBkZWZhdWx0IGBcIm5wbSBydW4gYnVpbGRcImBcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogSWYgeW91IHdhbnQgdG8gdXNlIGEgZGlmZmVyZW50IGJ1aWxkIGNvbW1hbmQuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBidWlsZENvbW1hbmQ6IFwieWFybiBidWlsZFwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBidWlsZENvbW1hbmQ/OiBTc3JTaXRlQXJnc1tcImJ1aWxkQ29tbWFuZFwiXTtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZSBob3cgdGhlIFNvbGlkU3RhcnQgYXBwIGFzc2V0cyBhcmUgdXBsb2FkZWQgdG8gUzMuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHRoaXMgaXMgc2V0IHRvIHRoZSBmb2xsb3dpbmcuIFJlYWQgbW9yZSBhYm91dCB0aGVzZSBvcHRpb25zIGJlbG93LlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgYXNzZXRzOiB7XG4gICAqICAgICB0ZXh0RW5jb2Rpbmc6IFwidXRmLThcIixcbiAgICogICAgIHZlcnNpb25lZEZpbGVzQ2FjaGVIZWFkZXI6IFwicHVibGljLG1heC1hZ2U9MzE1MzYwMDAsaW1tdXRhYmxlXCIsXG4gICAqICAgICBub25WZXJzaW9uZWRGaWxlc0NhY2hlSGVhZGVyOiBcInB1YmxpYyxtYXgtYWdlPTAscy1tYXhhZ2U9ODY0MDAsc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT04NjQwXCJcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBhc3NldHM/OiBTc3JTaXRlQXJnc1tcImFzc2V0c1wiXTtcbn1cblxuLyoqXG4gKiBUaGUgYFNvbGlkU3RhcnRgIGNvbXBvbmVudCBsZXRzIHlvdSBkZXBsb3kgYSBbU29saWRTdGFydF0oaHR0cHM6Ly9zdGFydC5zb2xpZGpzLmNvbSkgYXBwIHRvIEFXUy5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICMjIyMgTWluaW1hbCBleGFtcGxlXG4gKlxuICogRGVwbG95IGEgU29saWRTdGFydCBhcHAgdGhhdCdzIGluIHRoZSBwcm9qZWN0IHJvb3QuXG4gKlxuICogYGBganNcbiAqIG5ldyBzc3QuYXdzLlNvbGlkU3RhcnQoXCJNeVdlYlwiKTtcbiAqIGBgYFxuICpcbiAqICMjIyMgQ2hhbmdlIHRoZSBwYXRoXG4gKlxuICogRGVwbG95cyB0aGUgU29saWRTdGFydCBhcHAgaW4gdGhlIGBteS1zb2xpZC1hcHAvYCBkaXJlY3RvcnkuXG4gKlxuICogYGBganMgezJ9XG4gKiBuZXcgc3N0LmF3cy5Tb2xpZFN0YXJ0KFwiTXlXZWJcIiwge1xuICogICBwYXRoOiBcIm15LXNvbGlkLWFwcC9cIlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEFkZCBhIGN1c3RvbSBkb21haW5cbiAqXG4gKiBTZXQgYSBjdXN0b20gZG9tYWluIGZvciB5b3VyIFNvbGlkU3RhcnQgYXBwLlxuICpcbiAqIGBgYGpzIHsyfVxuICogbmV3IHNzdC5hd3MuU29saWRTdGFydChcIk15V2ViXCIsIHtcbiAqICAgZG9tYWluOiBcIm15LWFwcC5jb21cIlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFJlZGlyZWN0IHd3dyB0byBhcGV4IGRvbWFpblxuICpcbiAqIFJlZGlyZWN0IGB3d3cubXktYXBwLmNvbWAgdG8gYG15LWFwcC5jb21gLlxuICpcbiAqIGBgYGpzIHs0fVxuICogbmV3IHNzdC5hd3MuU29saWRTdGFydChcIk15V2ViXCIsIHtcbiAqICAgZG9tYWluOiB7XG4gKiAgICAgZG9tYWluTmFtZTogXCJteS1hcHAuY29tXCIsXG4gKiAgICAgcmVkaXJlY3RzOiBbXCJ3d3cubXktYXBwLmNvbVwiXVxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgTGluayByZXNvdXJjZXNcbiAqXG4gKiBbTGluayByZXNvdXJjZXNdKC9kb2NzL2xpbmtpbmcvKSB0byB5b3VyIFNvbGlkU3RhcnQgYXBwLiBUaGlzIHdpbGwgZ3JhbnQgcGVybWlzc2lvbnNcbiAqIHRvIHRoZSByZXNvdXJjZXMgYW5kIGFsbG93IHlvdSB0byBhY2Nlc3MgaXQgaW4geW91ciBhcHAuXG4gKlxuICogYGBgdHMgezR9XG4gKiBjb25zdCBidWNrZXQgPSBuZXcgc3N0LmF3cy5CdWNrZXQoXCJNeUJ1Y2tldFwiKTtcbiAqXG4gKiBuZXcgc3N0LmF3cy5Tb2xpZFN0YXJ0KFwiTXlXZWJcIiwge1xuICogICBsaW5rOiBbYnVja2V0XVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIHVzZSB0aGUgW1NES10oL2RvY3MvcmVmZXJlbmNlL3Nkay8pIHRvIGFjY2VzcyB0aGUgbGlua2VkIHJlc291cmNlc1xuICogaW4geW91ciBTb2xpZFN0YXJ0IGFwcC5cbiAqXG4gKiBgYGB0cyB0aXRsZT1cInNyYy9hcHAudHN4XCJcbiAqIGltcG9ydCB7IFJlc291cmNlIH0gZnJvbSBcInNzdFwiO1xuICpcbiAqIGNvbnNvbGUubG9nKFJlc291cmNlLk15QnVja2V0Lm5hbWUpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBTb2xpZFN0YXJ0IGV4dGVuZHMgQ29tcG9uZW50IGltcGxlbWVudHMgTGluay5MaW5rYWJsZSB7XG4gIHByaXZhdGUgY2RuOiBPdXRwdXQ8Q2RuPjtcbiAgcHJpdmF0ZSBhc3NldHM6IEJ1Y2tldDtcbiAgcHJpdmF0ZSBzZXJ2ZXI6IE91dHB1dDxGdW5jdGlvbj47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M6IFNvbGlkU3RhcnRBcmdzID0ge30sXG4gICAgb3B0czogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zID0ge30sXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmF3czpTb2xpZFN0YXJ0XCIsIG5hbWUsIGFyZ3MsIG9wdHMpO1xuXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcztcbiAgICBjb25zdCB7IHNpdGVQYXRoLCBwYXJ0aXRpb24gfSA9IHByZXBhcmUoYXJncywgb3B0cyk7XG4gICAgY29uc3QgeyBhY2Nlc3MsIGJ1Y2tldCB9ID0gY3JlYXRlQnVja2V0KHBhcmVudCwgbmFtZSwgcGFydGl0aW9uLCBhcmdzKTtcbiAgICBjb25zdCBvdXRwdXRQYXRoID0gYnVpbGRBcHAobmFtZSwgYXJncywgc2l0ZVBhdGgpO1xuICAgIGNvbnN0IHsgYnVpbGRNZXRhIH0gPSBsb2FkQnVpbGRPdXRwdXQoKTtcbiAgICBjb25zdCBwbGFuID0gYnVpbGRQbGFuKCk7XG4gICAgY29uc3QgeyBkaXN0cmlidXRpb24sIHNzckZ1bmN0aW9ucywgZWRnZUZ1bmN0aW9ucyB9ID1cbiAgICAgIGNyZWF0ZVNlcnZlcnNBbmREaXN0cmlidXRpb24oXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYXJncyxcbiAgICAgICAgb3V0cHV0UGF0aCxcbiAgICAgICAgYWNjZXNzLFxuICAgICAgICBidWNrZXQsXG4gICAgICAgIHBsYW4sXG4gICAgICApO1xuICAgIGNvbnN0IHNlcnZlckZ1bmN0aW9uID0gc3NyRnVuY3Rpb25zWzBdID8/IE9iamVjdC52YWx1ZXMoZWRnZUZ1bmN0aW9ucylbMF07XG5cbiAgICB0aGlzLmFzc2V0cyA9IGJ1Y2tldDtcbiAgICB0aGlzLmNkbiA9IGRpc3RyaWJ1dGlvbjtcbiAgICB0aGlzLnNlcnZlciA9IHNlcnZlckZ1bmN0aW9uO1xuICAgIGlmICghJGRldikge1xuICAgICAgSGludC5yZWdpc3RlcihcbiAgICAgICAgdGhpcy51cm4sXG4gICAgICAgIGFsbChbdGhpcy5jZG4uZG9tYWluVXJsLCB0aGlzLmNkbi51cmxdKS5hcHBseShcbiAgICAgICAgICAoW2RvbWFpblVybCwgdXJsXSkgPT4gZG9tYWluVXJsID8/IHVybCxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMucmVnaXN0ZXJPdXRwdXRzKHtcbiAgICAgIF9tZXRhZGF0YToge1xuICAgICAgICBtb2RlOiAkZGV2ID8gXCJwbGFjZWhvbGRlclwiIDogXCJkZXBsb3llZFwiLFxuICAgICAgICBwYXRoOiBzaXRlUGF0aCxcbiAgICAgICAgdXJsOiBkaXN0cmlidXRpb24uYXBwbHkoKGQpID0+IGQuZG9tYWluVXJsID8/IGQudXJsKSxcbiAgICAgICAgc2VydmVyOiBzZXJ2ZXJGdW5jdGlvbi5hcm4sXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gbG9hZEJ1aWxkT3V0cHV0KCkge1xuICAgICAgY29uc3QgY2FjaGUgPSBuZXcgQ2FjaGUoXG4gICAgICAgIGAke25hbWV9QnVpbGRPdXRwdXRgLFxuICAgICAgICB7XG4gICAgICAgICAgZGF0YTogJGRldiA/IGxvYWRCdWlsZE1ldGFkYXRhUGxhY2Vob2xkZXIoKSA6IGxvYWRCdWlsZE1ldGFkYXRhKCksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwYXJlbnQsXG4gICAgICAgICAgaWdub3JlQ2hhbmdlczogJGRldiA/IFtcIipcIl0gOiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBidWlsZE1ldGE6IGNhY2hlLmRhdGEgYXMgUmV0dXJuVHlwZTx0eXBlb2YgbG9hZEJ1aWxkTWV0YWRhdGE+LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkQnVpbGRNZXRhZGF0YSgpIHtcbiAgICAgIHJldHVybiBvdXRwdXRQYXRoLmFwcGx5KChvdXRwdXRQYXRoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFzc2V0c1BhdGggPSBwYXRoLmpvaW4oXCIub3V0cHV0XCIsIFwicHVibGljXCIpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYXNzZXRzUGF0aCxcbiAgICAgICAgICAvLyBjcmVhdGUgMSBiZWhhdmlvdXIgZm9yIGVhY2ggdG9wIGxldmVsIGFzc2V0IGZpbGUvZm9sZGVyXG4gICAgICAgICAgc3RhdGljUm91dGVzOiBmc1xuICAgICAgICAgICAgLnJlYWRkaXJTeW5jKHBhdGguam9pbihvdXRwdXRQYXRoLCBhc3NldHNQYXRoKSlcbiAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+XG4gICAgICAgICAgICAgIGZzLnN0YXRTeW5jKHBhdGguam9pbihvdXRwdXRQYXRoLCBhc3NldHNQYXRoLCBpdGVtKSkuaXNEaXJlY3RvcnkoKVxuICAgICAgICAgICAgICAgID8gYCR7aXRlbX0vKmBcbiAgICAgICAgICAgICAgICA6IGl0ZW0sXG4gICAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZEJ1aWxkTWV0YWRhdGFQbGFjZWhvbGRlcigpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFzc2V0c1BhdGg6IFwicGxhY2Vob2xkZXJcIixcbiAgICAgICAgc3RhdGljUm91dGVzOiBbXCJfYnVpbGQvKlwiLCBcIl9zZXJ2ZXIvKlwiLCBcImFzc2V0cy8qXCIsIFwiZmF2aWNvbi5pY29cIl0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkUGxhbigpIHtcbiAgICAgIHJldHVybiBhbGwoW291dHB1dFBhdGgsIGJ1aWxkTWV0YV0pLmFwcGx5KChbb3V0cHV0UGF0aCwgYnVpbGRNZXRhXSkgPT4ge1xuICAgICAgICBjb25zdCBzZXJ2ZXJDb25maWcgPSB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiU2VydmVyIGhhbmRsZXIgZm9yIFNvbGlkXCIsXG4gICAgICAgICAgaGFuZGxlcjogcGF0aC5qb2luKG91dHB1dFBhdGgsIFwiLm91dHB1dFwiLCBcInNlcnZlclwiLCBcImluZGV4LmhhbmRsZXJcIiksXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlUGxhbih7XG4gICAgICAgICAgZWRnZTogZmFsc2UsXG4gICAgICAgICAgY2xvdWRGcm9udEZ1bmN0aW9uczoge1xuICAgICAgICAgICAgc2VydmVyQ2ZGdW5jdGlvbjoge1xuICAgICAgICAgICAgICBpbmplY3Rpb25zOiBbdXNlQ2xvdWRGcm9udEZ1bmN0aW9uSG9zdEhlYWRlckluamVjdGlvbigpXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcmlnaW5zOiB7XG4gICAgICAgICAgICBzZXJ2ZXI6IHtcbiAgICAgICAgICAgICAgc2VydmVyOiB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb246IHNlcnZlckNvbmZpZyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzMzoge1xuICAgICAgICAgICAgICBzMzoge1xuICAgICAgICAgICAgICAgIGNvcHk6IFtcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogYnVpbGRNZXRhLmFzc2V0c1BhdGgsXG4gICAgICAgICAgICAgICAgICAgIHRvOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYmVoYXZpb3JzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNhY2hlVHlwZTogXCJzZXJ2ZXJcIixcbiAgICAgICAgICAgICAgY2ZGdW5jdGlvbjogXCJzZXJ2ZXJDZkZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgIG9yaWdpbjogXCJzZXJ2ZXJcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHBhdHRlcm46IFwiX3NlcnZlci9cIixcbiAgICAgICAgICAgICAgY2FjaGVUeXBlOiBcInNlcnZlclwiLFxuICAgICAgICAgICAgICBjZkZ1bmN0aW9uOiBcInNlcnZlckNmRnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgb3JpZ2luOiBcInNlcnZlclwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC4uLmJ1aWxkTWV0YS5zdGF0aWNSb3V0ZXMubWFwKFxuICAgICAgICAgICAgICAocm91dGUpID0+XG4gICAgICAgICAgICAgICAgKHtcbiAgICAgICAgICAgICAgICAgIGNhY2hlVHlwZTogXCJzdGF0aWNcIixcbiAgICAgICAgICAgICAgICAgIHBhdHRlcm46IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgb3JpZ2luOiBcInMzXCIsXG4gICAgICAgICAgICAgICAgfSkgYXMgY29uc3QsXG4gICAgICAgICAgICApLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBVUkwgb2YgdGhlIFNvbGlkU3RhcnQgYXBwLlxuICAgKlxuICAgKiBJZiB0aGUgYGRvbWFpbmAgaXMgc2V0LCB0aGlzIGlzIHRoZSBVUkwgd2l0aCB0aGUgY3VzdG9tIGRvbWFpbi5cbiAgICogT3RoZXJ3aXNlLCBpdCdzIHRoZSBhdXRvZ2VuZXJhdGVkIENsb3VkRnJvbnQgVVJMLlxuICAgKi9cbiAgcHVibGljIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIGFsbChbdGhpcy5jZG4uZG9tYWluVXJsLCB0aGlzLmNkbi51cmxdKS5hcHBseShcbiAgICAgIChbZG9tYWluVXJsLCB1cmxdKSA9PiBkb21haW5VcmwgPz8gdXJsLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHVuZGVybHlpbmcgW3Jlc291cmNlc10oL2RvY3MvY29tcG9uZW50cy8jbm9kZXMpIHRoaXMgY29tcG9uZW50IGNyZWF0ZXMuXG4gICAqL1xuICBwdWJsaWMgZ2V0IG5vZGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBV1MgTGFtYmRhIHNlcnZlciBmdW5jdGlvbiB0aGF0IHJlbmRlcnMgdGhlIHNpdGUuXG4gICAgICAgKi9cbiAgICAgIHNlcnZlcjogdGhpcy5zZXJ2ZXIgYXMgdW5rbm93biBhcyBGdW5jdGlvbixcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFtYXpvbiBTMyBCdWNrZXQgdGhhdCBzdG9yZXMgdGhlIGFzc2V0cy5cbiAgICAgICAqL1xuICAgICAgYXNzZXRzOiB0aGlzLmFzc2V0cyxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgZ2V0U1NUTGluaygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG4iLCAiaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB0eXBlIHsgQnVpbGRNZXRhQ29uZmlnLCBCdWlsZE1ldGFGaWxlTmFtZSB9IGZyb20gXCJhc3Ryby1zc3QvYnVpbGQtbWV0YVwiO1xuaW1wb3J0IHsgQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLCBPdXRwdXQsIGFsbCwgb3V0cHV0IH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgeyBGdW5jdGlvbiB9IGZyb20gXCIuL2Z1bmN0aW9uLmpzXCI7XG5pbXBvcnQge1xuICBQbGFuLFxuICBTc3JTaXRlQXJncyxcbiAgY3JlYXRlQnVja2V0LFxuICBjcmVhdGVTZXJ2ZXJzQW5kRGlzdHJpYnV0aW9uLFxuICBwcmVwYXJlLFxuICB1c2VDbG91ZEZyb250RnVuY3Rpb25Ib3N0SGVhZGVySW5qZWN0aW9uLFxuICB2YWxpZGF0ZVBsYW4sXG59IGZyb20gXCIuL3Nzci1zaXRlLmpzXCI7XG5pbXBvcnQgeyBDZG4gfSBmcm9tIFwiLi9jZG4uanNcIjtcbmltcG9ydCB7IEJ1Y2tldCB9IGZyb20gXCIuL2J1Y2tldC5qc1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50LCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi8uLi9jb21wb25lbnQuanNcIjtcbmltcG9ydCB7IEhpbnQgfSBmcm9tIFwiLi8uLi9oaW50LmpzXCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmsuanNcIjtcbmltcG9ydCB7IENhY2hlIH0gZnJvbSBcIi4vcHJvdmlkZXJzL2NhY2hlLmpzXCI7XG5pbXBvcnQgeyBidWlsZEFwcCB9IGZyb20gXCIuLi9iYXNlL2Jhc2Utc3NyLXNpdGUuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBBc3Ryb0FyZ3MgZXh0ZW5kcyBTc3JTaXRlQXJncyB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGluc3RhbmNlcyBvZiB0aGUgW3NlcnZlciBmdW5jdGlvbl0oI25vZGVzLXNlcnZlcikgdG8ga2VlcCB3YXJtLiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2FzZXMgd2hlcmUgeW91IGFyZSBleHBlcmllbmNpbmcgbG9uZyBjb2xkIHN0YXJ0cy4gVGhlIGRlZmF1bHQgaXMgdG8gbm90IGtlZXAgYW55IGluc3RhbmNlcyB3YXJtLlxuICAgKlxuICAgKiBUaGlzIHdvcmtzIGJ5IHN0YXJ0aW5nIGEgc2VydmVybGVzcyBjcm9uIGpvYiB0byBtYWtlIF9uXyBjb25jdXJyZW50IHJlcXVlc3RzIHRvIHRoZSBzZXJ2ZXIgZnVuY3Rpb24gZXZlcnkgZmV3IG1pbnV0ZXMuIFdoZXJlIF9uXyBpcyB0aGUgbnVtYmVyIG9mIGluc3RhbmNlcyB0byBrZWVwIHdhcm0uXG4gICAqXG4gICAqIEBkZWZhdWx0IGAwYFxuICAgKi9cbiAgd2FybT86IFNzclNpdGVBcmdzW1wid2FybVwiXTtcbiAgLyoqXG4gICAqIFBlcm1pc3Npb25zIGFuZCB0aGUgcmVzb3VyY2VzIHRoYXQgdGhlIFtzZXJ2ZXIgZnVuY3Rpb25dKCNub2Rlcy1zZXJ2ZXIpIGluIHlvdXIgQXN0cm8gc2l0ZSBuZWVkcyB0byBhY2Nlc3MuIFRoZXNlIHBlcm1pc3Npb25zIGFyZSB1c2VkIHRvIGNyZWF0ZSB0aGUgZnVuY3Rpb24ncyBJQU0gcm9sZS5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIElmIHlvdSBgbGlua2AgdGhlIGZ1bmN0aW9uIHRvIGEgcmVzb3VyY2UsIHRoZSBwZXJtaXNzaW9ucyB0byBhY2Nlc3MgaXQgYXJlXG4gICAqIGF1dG9tYXRpY2FsbHkgYWRkZWQuXG4gICAqIDo6OlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBBbGxvdyByZWFkaW5nIGFuZCB3cml0aW5nIHRvIGFuIFMzIGJ1Y2tldCBjYWxsZWQgYG15LWJ1Y2tldGAuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBwZXJtaXNzaW9uczogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBhY3Rpb25zOiBbXCJzMzpHZXRPYmplY3RcIiwgXCJzMzpQdXRPYmplY3RcIl0sXG4gICAqICAgICAgIHJlc291cmNlczogW1wiYXJuOmF3czpzMzo6Om15LWJ1Y2tldC8qXCJdXG4gICAqICAgICB9LFxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogUGVyZm9ybSBhbGwgYWN0aW9ucyBvbiBhbiBTMyBidWNrZXQgY2FsbGVkIGBteS1idWNrZXRgLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgcGVybWlzc2lvbnM6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgYWN0aW9uczogW1wiczM6KlwiXSxcbiAgICogICAgICAgcmVzb3VyY2VzOiBbXCJhcm46YXdzOnMzOjo6bXktYnVja2V0LypcIl1cbiAgICogICAgIH0sXG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBHcmFudCBwZXJtaXNzaW9ucyB0byBhY2Nlc3MgYWxsIHJlc291cmNlcy5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHBlcm1pc3Npb25zOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIGFjdGlvbnM6IFtcIipcIl0sXG4gICAqICAgICAgIHJlc291cmNlczogW1wiKlwiXVxuICAgKiAgICAgfSxcbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBwZXJtaXNzaW9ucz86IFNzclNpdGVBcmdzW1wicGVybWlzc2lvbnNcIl07XG4gIC8qKlxuICAgKiBQYXRoIHRvIHRoZSBkaXJlY3Rvcnkgd2hlcmUgeW91ciBBc3RybyBzaXRlIGlzIGxvY2F0ZWQuICBUaGlzIHBhdGggaXMgcmVsYXRpdmUgdG8geW91ciBgc3N0LmNvbmZpZy50c2AuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgaXQgYXNzdW1lcyB5b3VyIEFzdHJvIHNpdGUgaXMgaW4gdGhlIHJvb3Qgb2YgeW91ciBTU1QgYXBwLlxuICAgKiBAZGVmYXVsdCBgXCIuXCJgXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIElmIHlvdXIgQXN0cm8gc2l0ZSBpcyBpbiBhIHBhY2thZ2UgaW4geW91ciBtb25vcmVwby5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHBhdGg6IFwicGFja2FnZXMvd2ViXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHBhdGg/OiBTc3JTaXRlQXJnc1tcInBhdGhcIl07XG4gIC8qKlxuICAgKiBbTGluayByZXNvdXJjZXNdKC9kb2NzL2xpbmtpbmcvKSB0byB5b3VyIEFzdHJvIHNpdGUuIFRoaXMgd2lsbDpcbiAgICpcbiAgICogMS4gR3JhbnQgdGhlIHBlcm1pc3Npb25zIG5lZWRlZCB0byBhY2Nlc3MgdGhlIHJlc291cmNlcy5cbiAgICogMi4gQWxsb3cgeW91IHRvIGFjY2VzcyBpdCBpbiB5b3VyIHNpdGUgdXNpbmcgdGhlIFtTREtdKC9kb2NzL3JlZmVyZW5jZS9zZGsvKS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogVGFrZXMgYSBsaXN0IG9mIHJlc291cmNlcyB0byBsaW5rIHRvIHRoZSBmdW5jdGlvbi5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGxpbms6IFtidWNrZXQsIHN0cmlwZUtleV1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGxpbms/OiBTc3JTaXRlQXJnc1tcImxpbmtcIl07XG4gIC8qKlxuICAgKiBDb25maWd1cmUgaG93IHRoZSBDbG91ZEZyb250IGNhY2hlIGludmFsaWRhdGlvbnMgYXJlIGhhbmRsZWQuIFRoaXMgaXMgcnVuIGFmdGVyIHlvdXIgQXN0cm8gc2l0ZSBoYXMgYmVlbiBkZXBsb3llZC5cbiAgICogOjo6dGlwXG4gICAqIFlvdSBnZXQgMTAwMCBmcmVlIGludmFsaWRhdGlvbnMgcGVyIG1vbnRoLiBBZnRlciB0aGF0IHlvdSBwYXkgJDAuMDA1IHBlciBpbnZhbGlkYXRpb24gcGF0aC4gW1JlYWQgbW9yZSBoZXJlXShodHRwczovL2F3cy5hbWF6b24uY29tL2Nsb3VkZnJvbnQvcHJpY2luZy8pLlxuICAgKiA6OjpcbiAgICogQGRlZmF1bHQgYCZsY3ViO3BhdGhzOiBcImFsbFwiLCB3YWl0OiBmYWxzZSZyY3ViO2BcbiAgICogQGV4YW1wbGVcbiAgICogV2FpdCBmb3IgYWxsIHBhdGhzIHRvIGJlIGludmFsaWRhdGVkLlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgaW52YWxpZGF0aW9uOiB7XG4gICAqICAgICBwYXRoczogXCJhbGxcIixcbiAgICogICAgIHdhaXQ6IHRydWVcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBpbnZhbGlkYXRpb24/OiBTc3JTaXRlQXJnc1tcImludmFsaWRhdGlvblwiXTtcbiAgLyoqXG4gICAqIFNldCBbZW52aXJvbm1lbnQgdmFyaWFibGVzXShodHRwczovL2RvY3MuYXN0cm8uYnVpbGQvZW4vZ3VpZGVzL2Vudmlyb25tZW50LXZhcmlhYmxlcy8pIGluIHlvdXIgQXN0cm8gc2l0ZS4gVGhlc2UgYXJlIG1hZGUgYXZhaWxhYmxlOlxuICAgKlxuICAgKiAxLiBJbiBgYXN0cm8gYnVpbGRgLCB0aGV5IGFyZSBsb2FkZWQgaW50byBgaW1wb3J0Lm1ldGEuZW52YC5cbiAgICogMi4gTG9jYWxseSB3aGlsZSBydW5uaW5nIGBzc3QgZGV2IGFzdHJvIGRldmAuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIGFsc28gYGxpbmtgIHJlc291cmNlcyB0byB5b3VyIEFzdHJvIHNpdGUgYW5kIGFjY2VzcyB0aGVtIGluIGEgdHlwZS1zYWZlIHdheSB3aXRoIHRoZSBbU0RLXSgvZG9jcy9yZWZlcmVuY2Uvc2RrLykuIFdlIHJlY29tbWVuZCBsaW5raW5nIHNpbmNlIGl0J3MgbW9yZSBzZWN1cmUuXG4gICAqIDo6OlxuICAgKlxuICAgKiBSZWNhbGwgdGhhdCBpbiBBc3RybywgeW91IG5lZWQgdG8gcHJlZml4IHlvdXIgZW52aXJvbm1lbnQgdmFyaWFibGVzIHdpdGggYFBVQkxJQ19gIHRvIGFjY2VzcyB0aGVtIG9uIHRoZSBjbGllbnQtc2lkZS4gW1JlYWQgbW9yZSBoZXJlXShodHRwczovL2RvY3MuYXN0cm8uYnVpbGQvZW4vZ3VpZGVzL2Vudmlyb25tZW50LXZhcmlhYmxlcy8pLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZW52aXJvbm1lbnQ6IHtcbiAgICogICAgIEFQSV9VUkw6IGFwaS51cmwsXG4gICAqICAgICAvLyBBY2Nlc3NpYmxlIG9uIHRoZSBjbGllbnQtc2lkZVxuICAgKiAgICAgUFVCTElDX1NUUklQRV9QVUJMSVNIQUJMRV9LRVk6IFwicGtfdGVzdF8xMjNcIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGVudmlyb25tZW50PzogU3NyU2l0ZUFyZ3NbXCJlbnZpcm9ubWVudFwiXTtcbiAgLyoqXG4gICAqIFNldCBhIGN1c3RvbSBkb21haW4gZm9yIHlvdXIgQXN0cm8gc2l0ZS4gU3VwcG9ydHMgZG9tYWlucyBob3N0ZWQgZWl0aGVyIG9uXG4gICAqIFtSb3V0ZSA1M10oaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9yb3V0ZTUzLykgb3Igb3V0c2lkZSBBV1MuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIGFsc28gbWlncmF0ZSBhbiBleHRlcm5hbGx5IGhvc3RlZCBkb21haW4gdG8gQW1hem9uIFJvdXRlIDUzIGJ5XG4gICAqIFtmb2xsb3dpbmcgdGhpcyBndWlkZV0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL1JvdXRlNTMvbGF0ZXN0L0RldmVsb3Blckd1aWRlL01pZ3JhdGluZ0ROUy5odG1sKS5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBkb21haW46IFwiZG9tYWluLmNvbVwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFNwZWNpZnkgdGhlIFJvdXRlIDUzIGhvc3RlZCB6b25lIGFuZCBhIGB3d3cuYCB2ZXJzaW9uIG9mIHRoZSBjdXN0b20gZG9tYWluLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZG9tYWluOiB7XG4gICAqICAgICBkb21haW5OYW1lOiBcImRvbWFpbi5jb21cIixcbiAgICogICAgIGhvc3RlZFpvbmU6IFwiZG9tYWluLmNvbVwiLFxuICAgKiAgICAgcmVkaXJlY3RzOiBbXCJ3d3cuZG9tYWluLmNvbVwiXVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGRvbWFpbj86IFNzclNpdGVBcmdzW1wiZG9tYWluXCJdO1xuICAvKipcbiAgICogVGhlIGNvbW1hbmQgdXNlZCBpbnRlcm5hbGx5IHRvIGJ1aWxkIHlvdXIgQXN0cm8gc2l0ZS5cbiAgICpcbiAgICogQGRlZmF1bHQgYFwibnBtIHJ1biBidWlsZFwiYFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byB1c2UgYSBkaWZmZXJlbnQgYnVpbGQgY29tbWFuZC5cbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGJ1aWxkQ29tbWFuZDogXCJ5YXJuIGJ1aWxkXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGJ1aWxkQ29tbWFuZD86IFNzclNpdGVBcmdzW1wiYnVpbGRDb21tYW5kXCJdO1xuICAvKipcbiAgICogQ29uZmlndXJlIGhvdyB0aGUgQXN0cm8gc2l0ZSBhc3NldHMgYXJlIHVwbG9hZGVkIHRvIFMzLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGlzIGlzIHNldCB0byB0aGUgZm9sbG93aW5nLiBSZWFkIG1vcmUgYWJvdXQgdGhlc2Ugb3B0aW9ucyBiZWxvdy5cbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGFzc2V0czoge1xuICAgKiAgICAgdGV4dEVuY29kaW5nOiBcInV0Zi04XCIsXG4gICAqICAgICB2ZXJzaW9uZWRGaWxlc0NhY2hlSGVhZGVyOiBcInB1YmxpYyxtYXgtYWdlPTMxNTM2MDAwLGltbXV0YWJsZVwiLFxuICAgKiAgICAgbm9uVmVyc2lvbmVkRmlsZXNDYWNoZUhlYWRlcjogXCJwdWJsaWMsbWF4LWFnZT0wLHMtbWF4YWdlPTg2NDAwLHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9ODY0MFwiXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYXNzZXRzPzogU3NyU2l0ZUFyZ3NbXCJhc3NldHNcIl07XG59XG5cbmNvbnN0IEJVSUxEX01FVEFfRklMRV9OQU1FOiBCdWlsZE1ldGFGaWxlTmFtZSA9IFwic3N0LmJ1aWxkTWV0YS5qc29uXCI7XG5cbi8qKlxuICogVGhlIGBBc3Ryb2AgY29tcG9uZW50IGxldHMgeW91IGRlcGxveSBhbiBbQXN0cm9dKGh0dHBzOi8vYXN0cm8uYnVpbGQpIHNpdGUgdG8gQVdTLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogIyMjIyBNaW5pbWFsIGV4YW1wbGVcbiAqXG4gKiBEZXBsb3kgdGhlIEFzdHJvIHNpdGUgdGhhdCdzIGluIHRoZSBwcm9qZWN0IHJvb3QuXG4gKlxuICogYGBganNcbiAqIG5ldyBzc3QuYXdzLkFzdHJvKFwiTXlXZWJcIik7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIENoYW5nZSB0aGUgcGF0aFxuICpcbiAqIERlcGxveXMgdGhlIEFzdHJvIHNpdGUgaW4gdGhlIGBteS1hc3Ryby1hcHAvYCBkaXJlY3RvcnkuXG4gKlxuICogYGBganMgezJ9XG4gKiBuZXcgc3N0LmF3cy5Bc3RybyhcIk15V2ViXCIsIHtcbiAqICAgcGF0aDogXCJteS1hc3Ryby1hcHAvXCJcbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBBZGQgYSBjdXN0b20gZG9tYWluXG4gKlxuICogU2V0IGEgY3VzdG9tIGRvbWFpbiBmb3IgeW91ciBBc3RybyBzaXRlLlxuICpcbiAqIGBgYGpzIHsyfVxuICogbmV3IHNzdC5hd3MuQXN0cm8oXCJNeVdlYlwiLCB7XG4gKiAgIGRvbWFpbjogXCJteS1hcHAuY29tXCJcbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBSZWRpcmVjdCB3d3cgdG8gYXBleCBkb21haW5cbiAqXG4gKiBSZWRpcmVjdCBgd3d3Lm15LWFwcC5jb21gIHRvIGBteS1hcHAuY29tYC5cbiAqXG4gKiBgYGBqcyB7NH1cbiAqIG5ldyBzc3QuYXdzLkFzdHJvKFwiTXlXZWJcIiwge1xuICogICBkb21haW46IHtcbiAqICAgICBkb21haW5OYW1lOiBcIm15LWFwcC5jb21cIixcbiAqICAgICByZWRpcmVjdHM6IFtcInd3dy5teS1hcHAuY29tXCJdXG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBMaW5rIHJlc291cmNlc1xuICpcbiAqIFtMaW5rIHJlc291cmNlc10oL2RvY3MvbGlua2luZy8pIHRvIHlvdXIgQXN0cm8gc2l0ZS4gVGhpcyB3aWxsIGdyYW50IHBlcm1pc3Npb25zXG4gKiB0byB0aGUgcmVzb3VyY2VzIGFuZCBhbGxvdyB5b3UgdG8gYWNjZXNzIGl0IGluIHlvdXIgc2l0ZS5cbiAqXG4gKiBgYGB0cyB7NH1cbiAqIGNvbnN0IGJ1Y2tldCA9IG5ldyBzc3QuYXdzLkJ1Y2tldChcIk15QnVja2V0XCIpO1xuICpcbiAqIG5ldyBzc3QuYXdzLkFzdHJvKFwiTXlXZWJcIiwge1xuICogICBsaW5rOiBbYnVja2V0XVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIHVzZSB0aGUgW1NES10oL2RvY3MvcmVmZXJlbmNlL3Nkay8pIHRvIGFjY2VzcyB0aGUgbGlua2VkIHJlc291cmNlc1xuICogaW4geW91ciBBc3RybyBzaXRlLlxuICpcbiAqIGBgYGFzdHJvIHRpdGxlPVwic3JjL3BhZ2VzL2luZGV4LmFzdHJvXCJcbiAqIC0tLVxuICogaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tIFwic3N0XCI7XG4gKlxuICogY29uc29sZS5sb2coUmVzb3VyY2UuTXlCdWNrZXQubmFtZSk7XG4gKiAtLS1cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQXN0cm8gZXh0ZW5kcyBDb21wb25lbnQgaW1wbGVtZW50cyBMaW5rLkxpbmthYmxlIHtcbiAgcHJpdmF0ZSBjZG46IE91dHB1dDxDZG4+O1xuICBwcml2YXRlIGFzc2V0czogQnVja2V0O1xuICBwcml2YXRlIHNlcnZlcjogT3V0cHV0PEZ1bmN0aW9uPjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogQXN0cm9BcmdzID0ge30sXG4gICAgb3B0czogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zID0ge30sXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmF3czpBc3Ryb1wiLCBuYW1lLCBhcmdzLCBvcHRzKTtcblxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXM7XG4gICAgY29uc3QgeyBzaXRlUGF0aCwgcGFydGl0aW9uLCByZWdpb24gfSA9IHByZXBhcmUoYXJncywgb3B0cyk7XG4gICAgY29uc3QgeyBhY2Nlc3MsIGJ1Y2tldCB9ID0gY3JlYXRlQnVja2V0KHBhcmVudCwgbmFtZSwgcGFydGl0aW9uLCBhcmdzKTtcbiAgICBjb25zdCBvdXRwdXRQYXRoID0gYnVpbGRBcHAobmFtZSwgYXJncywgc2l0ZVBhdGgpO1xuICAgIGNvbnN0IHsgYnVpbGRNZXRhIH0gPSBsb2FkQnVpbGRPdXRwdXQoKTtcbiAgICBjb25zdCBwbGFuID0gYnVpbGRQbGFuKCk7XG4gICAgY29uc3QgeyBkaXN0cmlidXRpb24sIHNzckZ1bmN0aW9ucywgZWRnZUZ1bmN0aW9ucyB9ID1cbiAgICAgIGNyZWF0ZVNlcnZlcnNBbmREaXN0cmlidXRpb24oXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYXJncyxcbiAgICAgICAgb3V0cHV0UGF0aCxcbiAgICAgICAgYWNjZXNzLFxuICAgICAgICBidWNrZXQsXG4gICAgICAgIHBsYW4sXG4gICAgICApO1xuICAgIGNvbnN0IHNlcnZlckZ1bmN0aW9uID0gc3NyRnVuY3Rpb25zWzBdID8/IE9iamVjdC52YWx1ZXMoZWRnZUZ1bmN0aW9ucylbMF07XG5cbiAgICB0aGlzLmFzc2V0cyA9IGJ1Y2tldDtcbiAgICB0aGlzLmNkbiA9IGRpc3RyaWJ1dGlvbjtcbiAgICB0aGlzLnNlcnZlciA9IHNlcnZlckZ1bmN0aW9uO1xuICAgIGlmICghJGRldikge1xuICAgICAgSGludC5yZWdpc3RlcihcbiAgICAgICAgdGhpcy51cm4sXG4gICAgICAgIGFsbChbdGhpcy5jZG4uZG9tYWluVXJsLCB0aGlzLmNkbi51cmxdKS5hcHBseShcbiAgICAgICAgICAoW2RvbWFpblVybCwgdXJsXSkgPT4gZG9tYWluVXJsID8/IHVybCxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMucmVnaXN0ZXJPdXRwdXRzKHtcbiAgICAgIF9tZXRhZGF0YToge1xuICAgICAgICBtb2RlOiAkZGV2ID8gXCJwbGFjZWhvbGRlclwiIDogXCJkZXBsb3llZFwiLFxuICAgICAgICBwYXRoOiBzaXRlUGF0aCxcbiAgICAgICAgdXJsOiBkaXN0cmlidXRpb24uYXBwbHkoKGQpID0+IGQuZG9tYWluVXJsID8/IGQudXJsKSxcbiAgICAgICAgZWRnZTogcGxhbi5lZGdlLFxuICAgICAgICBzZXJ2ZXI6IHNlcnZlckZ1bmN0aW9uLmFybixcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBsb2FkQnVpbGRPdXRwdXQoKSB7XG4gICAgICBjb25zdCBjYWNoZSA9IG5ldyBDYWNoZShcbiAgICAgICAgYCR7bmFtZX1CdWlsZE91dHB1dGAsXG4gICAgICAgIHtcbiAgICAgICAgICBkYXRhOiAkZGV2ID8gbG9hZEJ1aWxkTWV0YWRhdGFQbGFjZWhvbGRlcigpIDogbG9hZEJ1aWxkTWV0YWRhdGEoKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHBhcmVudCxcbiAgICAgICAgICBpZ25vcmVDaGFuZ2VzOiAkZGV2ID8gW1wiKlwiXSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ1aWxkTWV0YTogY2FjaGUuZGF0YSBhcyBSZXR1cm5UeXBlPHR5cGVvZiBsb2FkQnVpbGRNZXRhZGF0YT4sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRCdWlsZE1ldGFkYXRhKCkge1xuICAgICAgcmV0dXJuIG91dHB1dFBhdGguYXBwbHkoKG91dHB1dFBhdGgpID0+IHtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4ob3V0cHV0UGF0aCwgXCJkaXN0XCIsIEJVSUxEX01FVEFfRklMRV9OQU1FKTtcbiAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBDb3VsZCBub3QgZmluZCBidWlsZCBtZXRhIGZpbGUgYXQgJHtmaWxlUGF0aH0uIFVwZGF0ZSB5b3VyICdhc3Ryby1zc3QnIHBhY2thZ2UgdmVyc2lvbiBhbmQgcmVidWlsZCB5b3VyIEFzdHJvIHNpdGUuYCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKFxuICAgICAgICAgIGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgXCJ1dGYtOFwiKSxcbiAgICAgICAgKSBhcyBCdWlsZE1ldGFDb25maWc7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkQnVpbGRNZXRhZGF0YVBsYWNlaG9sZGVyKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGVwbG95bWVudFN0cmF0ZWd5OiBcInJlZ2lvbmFsXCIsXG4gICAgICAgIHJlc3BvbnNlTW9kZTogXCJidWZmZXJcIixcbiAgICAgICAgb3V0cHV0TW9kZTogXCJzZXJ2ZXJcIixcbiAgICAgICAgcGFnZVJlc29sdXRpb246IFwiZGlyZWN0b3J5XCIsXG4gICAgICAgIHRyYWlsaW5nU2xhc2g6IFwiaWdub3JlXCIsXG4gICAgICAgIHNlcnZlckJ1aWxkT3V0cHV0RmlsZTogXCJkaXN0L3NlcnZlci9lbnRyeS5tanNcIixcbiAgICAgICAgY2xpZW50QnVpbGRPdXRwdXREaXI6IFwiZGlzdC9jbGllbnRcIixcbiAgICAgICAgY2xpZW50QnVpbGRWZXJzaW9uZWRTdWJEaXI6IFwiX2FzdHJvXCIsXG4gICAgICAgIHJvdXRlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvdXRlOiBcIi9faW1hZ2VcIixcbiAgICAgICAgICAgIHR5cGU6IFwiZW5kcG9pbnRcIixcbiAgICAgICAgICAgIHBhdHRlcm46IFwiL15cXFxcL19pbWFnZSQvXCIsXG4gICAgICAgICAgICBwcmVyZW5kZXI6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgcm91dGU6IFwiL1wiLFxuICAgICAgICAgICAgdHlwZTogXCJwYWdlXCIsXG4gICAgICAgICAgICBwYXR0ZXJuOiBcIi9eXFxcXC8kL1wiLFxuICAgICAgICAgICAgcHJlcmVuZGVyOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBzZXJ2ZXJSb3V0ZXM6IFtdLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZFBsYW4oKSB7XG4gICAgICByZXR1cm4gYWxsKFtvdXRwdXRQYXRoLCBidWlsZE1ldGFdKS5hcHBseSgoW291dHB1dFBhdGgsIGJ1aWxkTWV0YV0pID0+IHtcbiAgICAgICAgY29uc3QgaXNTdGF0aWMgPSBidWlsZE1ldGEub3V0cHV0TW9kZSA9PT0gXCJzdGF0aWNcIjtcbiAgICAgICAgY29uc3QgZWRnZSA9IGJ1aWxkTWV0YS5kZXBsb3ltZW50U3RyYXRlZ3kgPT09IFwiZWRnZVwiO1xuICAgICAgICBjb25zdCBzZXJ2ZXJDb25maWcgPSB7XG4gICAgICAgICAgaGFuZGxlcjogcGF0aC5qb2luKG91dHB1dFBhdGgsIFwiZGlzdFwiLCBcInNlcnZlclwiLCBcImVudHJ5LmhhbmRsZXJcIiksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHBsYW46IFBsYW4gPSB7XG4gICAgICAgICAgZWRnZSxcbiAgICAgICAgICBjbG91ZEZyb250RnVuY3Rpb25zOiB7XG4gICAgICAgICAgICBzZXJ2ZXJDZkZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgIGluamVjdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB1c2VDbG91ZEZyb250RnVuY3Rpb25Ib3N0SGVhZGVySW5qZWN0aW9uKCksXG4gICAgICAgICAgICAgICAgdXNlQ2xvdWRGcm9udFJvdXRpbmdJbmplY3Rpb24oYnVpbGRNZXRhKSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXJ2ZXJDZkZ1bmN0aW9uSG9zdE9ubHk6IHtcbiAgICAgICAgICAgICAgaW5qZWN0aW9uczogW3VzZUNsb3VkRnJvbnRGdW5jdGlvbkhvc3RIZWFkZXJJbmplY3Rpb24oKV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb3JpZ2luczoge1xuICAgICAgICAgICAgc3RhdGljc1NlcnZlcjoge1xuICAgICAgICAgICAgICBzMzoge1xuICAgICAgICAgICAgICAgIGNvcHk6IFtcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogYnVpbGRNZXRhLmNsaWVudEJ1aWxkT3V0cHV0RGlyLFxuICAgICAgICAgICAgICAgICAgICB0bzogXCJcIixcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uZWRTdWJEaXI6IGJ1aWxkTWV0YS5jbGllbnRCdWlsZFZlcnNpb25lZFN1YkRpcixcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBiZWhhdmlvcnM6IFtdLFxuICAgICAgICAgIGVycm9yUmVzcG9uc2VzOiBbXSxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZWRnZSkge1xuICAgICAgICAgIHBsYW4uZWRnZUZ1bmN0aW9ucyA9IHtcbiAgICAgICAgICAgIGVkZ2VTZXJ2ZXI6IHtcbiAgICAgICAgICAgICAgZnVuY3Rpb246IHNlcnZlckNvbmZpZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfTtcbiAgICAgICAgICBwbGFuLmJlaGF2aW9ycy5wdXNoKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjYWNoZVR5cGU6IFwic2VydmVyXCIsXG4gICAgICAgICAgICAgIGNmRnVuY3Rpb246IFwic2VydmVyQ2ZGdW5jdGlvblwiLFxuICAgICAgICAgICAgICBlZGdlRnVuY3Rpb246IFwiZWRnZVNlcnZlclwiLFxuICAgICAgICAgICAgICBvcmlnaW46IFwic3RhdGljc1NlcnZlclwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC4uLmZzXG4gICAgICAgICAgICAgIC5yZWFkZGlyU3luYyhcbiAgICAgICAgICAgICAgICBwYXRoLmpvaW4ob3V0cHV0UGF0aCwgYnVpbGRNZXRhLmNsaWVudEJ1aWxkT3V0cHV0RGlyKSxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgIChpdGVtKSA9PlxuICAgICAgICAgICAgICAgICAgKHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVUeXBlOiBcInN0YXRpY1wiLFxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiBmc1xuICAgICAgICAgICAgICAgICAgICAgIC5zdGF0U3luYyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGguam9pbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRNZXRhLmNsaWVudEJ1aWxkT3V0cHV0RGlyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgLmlzRGlyZWN0b3J5KClcbiAgICAgICAgICAgICAgICAgICAgICA/IGAke2l0ZW19LypgXG4gICAgICAgICAgICAgICAgICAgICAgOiBpdGVtLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFwic3RhdGljc1NlcnZlclwiLFxuICAgICAgICAgICAgICAgICAgfSkgYXMgY29uc3QsXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoaXNTdGF0aWMpIHtcbiAgICAgICAgICAgIHBsYW4uYmVoYXZpb3JzLnB1c2goe1xuICAgICAgICAgICAgICBjYWNoZVR5cGU6IFwic3RhdGljXCIsXG4gICAgICAgICAgICAgIGNmRnVuY3Rpb246IFwic2VydmVyQ2ZGdW5jdGlvblwiLFxuICAgICAgICAgICAgICBvcmlnaW46IFwic3RhdGljc1NlcnZlclwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBsYW4uY2xvdWRGcm9udEZ1bmN0aW9ucyEuaW1hZ2VTZXJ2aWNlQ2ZGdW5jdGlvbiA9IHtcbiAgICAgICAgICAgICAgaW5qZWN0aW9uczogW3VzZUNsb3VkRnJvbnRGdW5jdGlvbkhvc3RIZWFkZXJJbmplY3Rpb24oKV0sXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBwbGFuLm9yaWdpbnMucmVnaW9uYWxTZXJ2ZXIgPSB7XG4gICAgICAgICAgICAgIHNlcnZlcjoge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiBzZXJ2ZXJDb25maWcsXG4gICAgICAgICAgICAgICAgc3RyZWFtaW5nOiBidWlsZE1ldGEucmVzcG9uc2VNb2RlID09PSBcInN0cmVhbVwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcGxhbi5vcmlnaW5zLmZhbGx0aHJvdWdoU2VydmVyID0ge1xuICAgICAgICAgICAgICBncm91cDoge1xuICAgICAgICAgICAgICAgIHByaW1hcnlPcmlnaW5OYW1lOiBcInN0YXRpY3NTZXJ2ZXJcIixcbiAgICAgICAgICAgICAgICBmYWxsYmFja09yaWdpbk5hbWU6IFwicmVnaW9uYWxTZXJ2ZXJcIixcbiAgICAgICAgICAgICAgICBmYWxsYmFja1N0YXR1c0NvZGVzOiBbNDAzLCA0MDRdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcGxhbi5iZWhhdmlvcnMucHVzaChcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNhY2hlVHlwZTogXCJzZXJ2ZXJcIixcbiAgICAgICAgICAgICAgICBjZkZ1bmN0aW9uOiBcInNlcnZlckNmRnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICBvcmlnaW46IFwiZmFsbHRocm91Z2hTZXJ2ZXJcIixcbiAgICAgICAgICAgICAgICBhbGxvd2VkTWV0aG9kczogW1wiR0VUXCIsIFwiSEVBRFwiLCBcIk9QVElPTlNcIl0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjYWNoZVR5cGU6IFwic3RhdGljXCIsXG4gICAgICAgICAgICAgICAgcGF0dGVybjogYCR7YnVpbGRNZXRhLmNsaWVudEJ1aWxkVmVyc2lvbmVkU3ViRGlyfS8qYCxcbiAgICAgICAgICAgICAgICBvcmlnaW46IFwic3RhdGljc1NlcnZlclwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FjaGVUeXBlOiBcInNlcnZlclwiLFxuICAgICAgICAgICAgICAgIHBhdHRlcm46IFwiX2ltYWdlXCIsXG4gICAgICAgICAgICAgICAgY2ZGdW5jdGlvbjogXCJpbWFnZVNlcnZpY2VDZkZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgb3JpZ2luOiBcInJlZ2lvbmFsU2VydmVyXCIsXG4gICAgICAgICAgICAgICAgYWxsb3dlZE1ldGhvZHM6IFtcIkdFVFwiLCBcIkhFQURcIiwgXCJPUFRJT05TXCJdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAuLi5idWlsZE1ldGEuc2VydmVyUm91dGVzPy5tYXAoXG4gICAgICAgICAgICAgICAgKHJvdXRlKSA9PlxuICAgICAgICAgICAgICAgICAgKHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVUeXBlOiBcInNlcnZlclwiLFxuICAgICAgICAgICAgICAgICAgICBjZkZ1bmN0aW9uOiBcInNlcnZlckNmRnVuY3Rpb25Ib3N0T25seVwiLFxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBcInJlZ2lvbmFsU2VydmVyXCIsXG4gICAgICAgICAgICAgICAgICB9KSBhcyBjb25zdCxcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnVpbGRNZXRhLnJvdXRlc1xuICAgICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgICAgKHsgdHlwZSwgcm91dGUgfSkgPT5cbiAgICAgICAgICAgICAgICB0eXBlID09PSBcInBhZ2VcIiAmJiAvXlxcL1xcZHszfVxcLz8kLy50ZXN0KHJvdXRlKSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5mb3JFYWNoKCh7IHJvdXRlLCBwcmVyZW5kZXIgfSkgPT4ge1xuICAgICAgICAgICAgICBzd2l0Y2ggKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIi80MDRcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiLzQwNC9cIjpcbiAgICAgICAgICAgICAgICAgIHBsYW4uZXJyb3JSZXNwb25zZXM/LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IDQwNCxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VQYWdlUGF0aDogcHJlcmVuZGVyID8gXCIvNDA0Lmh0bWxcIiA6IFwiLzQwNFwiLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUNvZGU6IDQwNCxcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgaWYgKGlzU3RhdGljKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYW4uZXJyb3JSZXNwb25zZXM/LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIGVycm9yQ29kZTogNDAzLFxuICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlUGFnZVBhdGg6IFwiLzQwNC5odG1sXCIsXG4gICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VDb2RlOiA0MDQsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIi81MDBcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiLzUwMC9cIjpcbiAgICAgICAgICAgICAgICAgIHBsYW4uZXJyb3JSZXNwb25zZXM/LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VQYWdlUGF0aDogcHJlcmVuZGVyID8gXCIvNTAwLmh0bWxcIiA6IFwiLzUwMFwiLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlUGxhbihwbGFuKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgVVJMIG9mIHRoZSBBc3RybyBzaXRlLlxuICAgKlxuICAgKiBJZiB0aGUgYGRvbWFpbmAgaXMgc2V0LCB0aGlzIGlzIHRoZSBVUkwgd2l0aCB0aGUgY3VzdG9tIGRvbWFpbi5cbiAgICogT3RoZXJ3aXNlLCBpdCdzIHRoZSBhdXRvZ2VuZXJhdGVkIENsb3VkRnJvbnQgVVJMLlxuICAgKi9cbiAgcHVibGljIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIGFsbChbdGhpcy5jZG4uZG9tYWluVXJsLCB0aGlzLmNkbi51cmxdKS5hcHBseShcbiAgICAgIChbZG9tYWluVXJsLCB1cmxdKSA9PiBkb21haW5VcmwgPz8gdXJsLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHVuZGVybHlpbmcgW3Jlc291cmNlc10oL2RvY3MvY29tcG9uZW50cy8jbm9kZXMpIHRoaXMgY29tcG9uZW50IGNyZWF0ZXMuXG4gICAqL1xuICBwdWJsaWMgZ2V0IG5vZGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBV1MgTGFtYmRhIHNlcnZlciBmdW5jdGlvbiB0aGF0IHJlbmRlcnMgdGhlIHNpdGUuXG4gICAgICAgKi9cbiAgICAgIHNlcnZlcjogdGhpcy5zZXJ2ZXIgYXMgdW5rbm93biBhcyBGdW5jdGlvbixcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFtYXpvbiBTMyBCdWNrZXQgdGhhdCBzdG9yZXMgdGhlIGFzc2V0cy5cbiAgICAgICAqL1xuICAgICAgYXNzZXRzOiB0aGlzLmFzc2V0cyxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgZ2V0U1NUTGluaygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG5cbnR5cGUgVHJlZU5vZGUgPSB7XG4gIGJyYW5jaGVzOiBSZWNvcmQ8c3RyaW5nLCBUcmVlTm9kZT47XG4gIG5vZGVzOiBCdWlsZE1ldGFDb25maWdbXCJyb3V0ZXNcIl1bbnVtYmVyXVtdO1xufTtcblxudHlwZSBGbGF0dGVuZWRSb3V0ZSA9XG4gIHwgW3N0cmluZ10gLy8gUGFnZSB3aXRoIHByZXJlbmRlcmluZ1xuICB8IFtzdHJpbmcsIDFdIC8vIEVuZHBvaW50IHdpdGggcHJlcmVuZGVyaW5nXG4gIHwgW3N0cmluZywgMiwgc3RyaW5nIHwgdW5kZWZpbmVkLCBudW1iZXIgfCB1bmRlZmluZWRdOyAvLyBSZWRpcmVjdFxudHlwZSBGbGF0dGVuZWRSb3V0ZVRyZWUgPSBBcnJheTxGbGF0dGVuZWRSb3V0ZSB8IFtzdHJpbmcsIEZsYXR0ZW5lZFJvdXRlVHJlZV0+O1xuXG5mdW5jdGlvbiB1c2VDbG91ZEZyb250Um91dGluZ0luamVjdGlvbihidWlsZE1ldGFkYXRhOiBCdWlsZE1ldGFDb25maWcpIHtcbiAgY29uc3QgdHJlZSA9IGJ1aWxkUm91dGVUcmVlKGJ1aWxkTWV0YWRhdGEucm91dGVzKTtcbiAgY29uc3QgZmxhdFRyZWUgPSBmbGF0dGVuUm91dGVUcmVlKHRyZWUpO1xuICBjb25zdCBzdHJpbmdpZmllZFRyZWUgPSBzdHJpbmdpZnlGbGF0dGVuZWRSb3V0ZVRyZWUoZmxhdFRyZWUpO1xuICByZXR1cm4gYFxuICAgIHZhciByb3V0ZURhdGEgPSAke3N0cmluZ2lmaWVkVHJlZX07XG4gICAgdmFyIGZpbmRGaXJzdE1hdGNoID0gKG1hdGNoZXMpID0+IEFycmF5LmlzQXJyYXkobWF0Y2hlc1swXSkgPyBmaW5kRmlyc3RNYXRjaChtYXRjaGVzWzBdKSA6IG1hdGNoZXM7XG4gICAgdmFyIGZpbmRNYXRjaGVzID0gKHBhdGgsIHJvdXRlRGF0YSkgPT4gcm91dGVEYXRhLm1hcCgocm91dGUpID0+IHJvdXRlWzBdLnRlc3QocGF0aCkgPyBBcnJheS5pc0FycmF5KHJvdXRlWzFdKSA/IGZpbmRNYXRjaGVzKHBhdGgsIHJvdXRlWzFdKSA6IHJvdXRlIDogbnVsbCkuZmlsdGVyKHJvdXRlID0+IHJvdXRlICE9PSBudWxsICYmIHJvdXRlLmxlbmd0aCA+IDApO1xuICAgIHZhciBtYXRjaGVkUm91dGUgPSBmaW5kRmlyc3RNYXRjaChmaW5kTWF0Y2hlcyhyZXF1ZXN0LnVyaSwgcm91dGVEYXRhKSk7XG4gICAgaWYgKG1hdGNoZWRSb3V0ZVswXSkge1xuICAgICAgaWYgKCFtYXRjaGVkUm91dGVbMV0gJiYgIS9eLipcXFxcLlteXFxcXC9dKyQvLnRlc3QocmVxdWVzdC51cmkpKSB7XG4gICAgICAgICR7XG4gICAgICAgICAgYnVpbGRNZXRhZGF0YS5wYWdlUmVzb2x1dGlvbiA9PT0gXCJmaWxlXCJcbiAgICAgICAgICAgID8gYHJlcXVlc3QudXJpID0gcmVxdWVzdC51cmkgPT09IFwiL1wiID8gXCIvaW5kZXguaHRtbFwiIDogcmVxdWVzdC51cmkucmVwbGFjZSgvXFxcXC8/JC8sIFwiLmh0bWxcIik7YFxuICAgICAgICAgICAgOiBgcmVxdWVzdC51cmkgPSByZXF1ZXN0LnVyaS5yZXBsYWNlKC9cXFxcLz8kLywgXCIvaW5kZXguaHRtbFwiKTtgXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobWF0Y2hlZFJvdXRlWzFdID09PSAyKSB7XG4gICAgICAgIHZhciByZWRpcmVjdFBhdGggPSBtYXRjaGVkUm91dGVbMl07XG4gICAgICAgIG1hdGNoZWRSb3V0ZVswXS5leGVjKHJlcXVlc3QudXJpKS5mb3JFYWNoKChtYXRjaCwgaW5kZXgpID0+IHtcbiAgICAgICAgICByZWRpcmVjdFBhdGggPSByZWRpcmVjdFBhdGgucmVwbGFjZShcXGBcXFxcXFwke1xcJHtpbmRleH19XFxgLCBtYXRjaCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN0YXR1c0NvZGU6IG1hdGNoZWRSb3V0ZVszXSB8fCAzMDgsXG4gICAgICAgICAgaGVhZGVyczogeyBsb2NhdGlvbjogeyB2YWx1ZTogcmVkaXJlY3RQYXRoIH0gfSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9YDtcbn1cblxuZnVuY3Rpb24gYnVpbGRSb3V0ZVRyZWUocm91dGVzOiBCdWlsZE1ldGFDb25maWdbXCJyb3V0ZXNcIl0sIGxldmVsID0gMCkge1xuICBjb25zdCByb3V0ZVRyZWUgPSByb3V0ZXMucmVkdWNlPFRyZWVOb2RlPihcbiAgICAodHJlZSwgcm91dGUpID0+IHtcbiAgICAgIGNvbnN0IHJvdXRlUGF0dGVybldpdGhvdXRDYXB0dXJlR3JvdXBzID0gcm91dGUucGF0dGVyblxuICAgICAgICAucmVwbGFjZSgvXFwoKD86XFw/Oik/KC4qP1teXFxcXF0pXFwpL2csIChfLCBjb250ZW50KSA9PiBjb250ZW50LnRyaW0oKSlcbiAgICAgICAgLnJlcGxhY2UoL1xcL1xcXi9nLCBcIlwiKVxuICAgICAgICAucmVwbGFjZSgvXFwkXFwvL2csIFwiXCIpO1xuICAgICAgY29uc3Qgcm91dGVQYXJ0cyA9IHJvdXRlUGF0dGVybldpdGhvdXRDYXB0dXJlR3JvdXBzXG4gICAgICAgIC5zcGxpdCgvKD89XFxcXFxcLykvZylcbiAgICAgICAgLmZpbHRlcigocGFydCkgPT4gcGFydCAhPT0gXCIvXlwiICYmIHBhcnQgIT09IFwiLyQvXCIpO1xuXG4gICAgICB0cmVlLmJyYW5jaGVzW3JvdXRlUGFydHNbbGV2ZWxdXSA9IHRyZWUuYnJhbmNoZXNbcm91dGVQYXJ0c1tsZXZlbF1dIHx8IHtcbiAgICAgICAgYnJhbmNoZXM6IHt9LFxuICAgICAgICBub2RlczogW10sXG4gICAgICB9O1xuICAgICAgdHJlZS5icmFuY2hlc1tyb3V0ZVBhcnRzW2xldmVsXV0ubm9kZXMucHVzaChyb3V0ZSk7XG4gICAgICByZXR1cm4gdHJlZTtcbiAgICB9LFxuICAgIHsgYnJhbmNoZXM6IHt9LCBub2RlczogW10gfSxcbiAgKTtcblxuICBmb3IgKGNvbnN0IFtrZXksIGJyYW5jaF0gb2YgT2JqZWN0LmVudHJpZXMocm91dGVUcmVlLmJyYW5jaGVzKSkge1xuICAgIGlmIChcbiAgICAgICFicmFuY2gubm9kZXMuc29tZSgobm9kZSkgPT4gbm9kZS5wcmVyZW5kZXIgfHwgbm9kZS50eXBlID09PSBcInJlZGlyZWN0XCIpXG4gICAgKSB7XG4gICAgICBkZWxldGUgcm91dGVUcmVlLmJyYW5jaGVzW2tleV07XG4gICAgfSBlbHNlIGlmIChicmFuY2gubm9kZXMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgZGVkdXBsaWNhdGVkTm9kZXMgPSBicmFuY2gubm9kZXMuZmlsdGVyKFxuICAgICAgICAobm9kZSwgaW5kZXgsIGFycikgPT5cbiAgICAgICAgICBhcnIuZmluZEluZGV4KChuKSA9PiBuLnBhdHRlcm4gPT09IG5vZGUucGF0dGVybikgPT09IGluZGV4LFxuICAgICAgKTtcbiAgICAgIHJvdXRlVHJlZS5icmFuY2hlc1trZXldID0gYnVpbGRSb3V0ZVRyZWUoZGVkdXBsaWNhdGVkTm9kZXMsIGxldmVsICsgMSk7XG4gICAgICBicmFuY2gubm9kZXMgPSBbXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcm91dGVUcmVlO1xufVxuXG5mdW5jdGlvbiBmbGF0dGVuUm91dGVUcmVlKHRyZWU6IFRyZWVOb2RlLCBwYXJlbnRLZXkgPSBcIlwiKSB7XG4gIGNvbnN0IGZsYXRUcmVlOiBGbGF0dGVuZWRSb3V0ZVRyZWUgPSBbXTtcbiAgZm9yIChjb25zdCBba2V5LCBicmFuY2hdIG9mIE9iamVjdC5lbnRyaWVzKHRyZWUuYnJhbmNoZXMpKSB7XG4gICAgaWYgKGJyYW5jaC5ub2Rlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IG5vZGUgPSBicmFuY2gubm9kZXNbMF07XG4gICAgICBpZiAobm9kZS50eXBlID09PSBcInBhZ2VcIikge1xuICAgICAgICBmbGF0VHJlZS5wdXNoKFtub2RlLnBhdHRlcm5dKTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlLnR5cGUgPT09IFwiZW5kcG9pbnRcIikge1xuICAgICAgICBmbGF0VHJlZS5wdXNoKFtub2RlLnBhdHRlcm4sIDFdKTtcbiAgICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSBcInJlZGlyZWN0XCIpIHtcbiAgICAgICAgZmxhdFRyZWUucHVzaChbXG4gICAgICAgICAgbm9kZS5wYXR0ZXJuLFxuICAgICAgICAgIDIsXG4gICAgICAgICAgbm9kZS5yZWRpcmVjdFBhdGgsXG4gICAgICAgICAgbm9kZS5yZWRpcmVjdFN0YXR1cyxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZsYXRLZXkgPSBwYXJlbnRLZXkgKyBrZXk7XG4gICAgICBmbGF0VHJlZS5wdXNoKFtmbGF0S2V5LCBmbGF0dGVuUm91dGVUcmVlKGJyYW5jaCwgZmxhdEtleSldKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZsYXRUcmVlO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlGbGF0dGVuZWRSb3V0ZVRyZWUodHJlZTogRmxhdHRlbmVkUm91dGVUcmVlKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBbJHt0cmVlXG4gICAgLm1hcCgodHVwbGUpID0+IHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHR1cGxlWzFdKSkge1xuICAgICAgICByZXR1cm4gYFsvXiR7dHVwbGVbMF19Lywke3N0cmluZ2lmeUZsYXR0ZW5lZFJvdXRlVHJlZSh0dXBsZVsxXSl9XWA7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHR1cGxlWzFdID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBgWyR7dHVwbGVbMF19XWA7XG4gICAgICB9IGVsc2UgaWYgKHR1cGxlWzFdID09PSAxKSB7XG4gICAgICAgIHJldHVybiBgWyR7dHVwbGVbMF19LDFdYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgWyR7dHVwbGVbMF19LDIsXCIke3R1cGxlWzJdfVwiJHt0dXBsZVszXSA/IGAsJHt0dXBsZVszXX1gIDogXCJcIn1dYDtcbiAgICB9KVxuICAgIC5qb2luKFwiLFwiKX1dYDtcbn1cbiIsICJpbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyBnbG9iU3luYyB9IGZyb20gXCJnbG9iXCI7XG5pbXBvcnQgeyBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsIE91dHB1dCwgYWxsIH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgKiBhcyBhd3MgZnJvbSBcIkBwdWx1bWkvYXdzXCI7XG5pbXBvcnQgeyBTaXplIH0gZnJvbSBcIi4uL3NpemUuanNcIjtcbmltcG9ydCB7IEZ1bmN0aW9uIH0gZnJvbSBcIi4vZnVuY3Rpb24uanNcIjtcbmltcG9ydCB7XG4gIFBsYW4sXG4gIFNzclNpdGVBcmdzLFxuICBjcmVhdGVCdWNrZXQsXG4gIGNyZWF0ZVNlcnZlcnNBbmREaXN0cmlidXRpb24sXG4gIHByZXBhcmUsXG4gIHVzZUNsb3VkRnJvbnRGdW5jdGlvbkhvc3RIZWFkZXJJbmplY3Rpb24sXG4gIHZhbGlkYXRlUGxhbixcbn0gZnJvbSBcIi4vc3NyLXNpdGUuanNcIjtcbmltcG9ydCB7IENkbiB9IGZyb20gXCIuL2Nkbi5qc1wiO1xuaW1wb3J0IHsgQnVja2V0IH0gZnJvbSBcIi4vYnVja2V0LmpzXCI7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi4vY29tcG9uZW50LmpzXCI7XG5pbXBvcnQgeyBIaW50IH0gZnJvbSBcIi4uL2hpbnQuanNcIjtcbmltcG9ydCB7IExpbmsgfSBmcm9tIFwiLi4vbGluay5qc1wiO1xuaW1wb3J0IHsgVmlzaWJsZUVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLmpzXCI7XG5pbXBvcnQgdHlwZSB7IElucHV0IH0gZnJvbSBcIi4uL2lucHV0LmpzXCI7XG5pbXBvcnQgeyBDYWNoZSB9IGZyb20gXCIuL3Byb3ZpZGVycy9jYWNoZS5qc1wiO1xuaW1wb3J0IHsgUXVldWUgfSBmcm9tIFwiLi9xdWV1ZS5qc1wiO1xuaW1wb3J0IHsgYnVpbGRBcHAgfSBmcm9tIFwiLi4vYmFzZS9iYXNlLXNzci1zaXRlLmpzXCI7XG5cbmNvbnN0IERFRkFVTFRfT1BFTl9ORVhUX1ZFUlNJT04gPSBcIjMuMC4wLXJjLjExXCI7XG5jb25zdCBERUZBVUxUX0NBQ0hFX1BPTElDWV9BTExPV0VEX0hFQURFUlMgPSBbXG4gIFwiYWNjZXB0XCIsXG4gIFwieC1wcmVyZW5kZXItcmV2YWxpZGF0ZVwiLFxuICBcIngtcHJlcmVuZGVyLWJ5cGFzc1wiLFxuICBcInJzY1wiLFxuICBcIm5leHQtcm91dGVyLXByZWZldGNoXCIsXG4gIFwibmV4dC1yb3V0ZXItc3RhdGUtdHJlZVwiLFxuICBcIm5leHQtdXJsXCIsXG5dO1xuXG50eXBlIEJhc2VGdW5jdGlvbiA9IHtcbiAgaGFuZGxlcjogc3RyaW5nO1xuICBidW5kbGU6IHN0cmluZztcbn07XG5cbnR5cGUgT3Blbk5leHRGdW5jdGlvbk9yaWdpbiA9IHtcbiAgdHlwZTogXCJmdW5jdGlvblwiO1xuICBzdHJlYW1pbmc/OiBib29sZWFuO1xuICB3cmFwcGVyOiBzdHJpbmc7XG4gIGNvbnZlcnRlcjogc3RyaW5nO1xufSAmIEJhc2VGdW5jdGlvbjtcblxudHlwZSBPcGVuTmV4dFNlcnZlckZ1bmN0aW9uT3JpZ2luID0gT3Blbk5leHRGdW5jdGlvbk9yaWdpbiAmIHtcbiAgcXVldWU6IHN0cmluZztcbiAgaW5jcmVtZW50YWxDYWNoZTogc3RyaW5nO1xuICB0YWdDYWNoZTogc3RyaW5nO1xufTtcblxudHlwZSBPcGVuTmV4dEltYWdlT3B0aW1pemF0aW9uT3JpZ2luID0gT3Blbk5leHRGdW5jdGlvbk9yaWdpbiAmIHtcbiAgaW1hZ2VMb2FkZXI6IHN0cmluZztcbn07XG5cbnR5cGUgT3Blbk5leHRTM09yaWdpbiA9IHtcbiAgdHlwZTogXCJzM1wiO1xuICBvcmlnaW5QYXRoOiBzdHJpbmc7XG4gIGNvcHk6IHtcbiAgICBmcm9tOiBzdHJpbmc7XG4gICAgdG86IHN0cmluZztcbiAgICBjYWNoZWQ6IGJvb2xlYW47XG4gICAgdmVyc2lvbmVkU3ViRGlyPzogc3RyaW5nO1xuICB9W107XG59O1xuXG5pbnRlcmZhY2UgT3Blbk5leHRPdXRwdXQge1xuICBlZGdlRnVuY3Rpb25zOiB7XG4gICAgW2tleTogc3RyaW5nXTogQmFzZUZ1bmN0aW9uO1xuICB9ICYge1xuICAgIG1pZGRsZXdhcmU/OiBCYXNlRnVuY3Rpb24gJiB7IHBhdGhSZXNvbHZlcjogc3RyaW5nIH07XG4gIH07XG4gIG9yaWdpbnM6IHtcbiAgICBzMzogT3Blbk5leHRTM09yaWdpbjtcbiAgICBkZWZhdWx0OiBPcGVuTmV4dFNlcnZlckZ1bmN0aW9uT3JpZ2luO1xuICAgIGltYWdlT3B0aW1pemVyOiBPcGVuTmV4dEltYWdlT3B0aW1pemF0aW9uT3JpZ2luO1xuICB9ICYge1xuICAgIFtrZXk6IHN0cmluZ106IE9wZW5OZXh0U2VydmVyRnVuY3Rpb25PcmlnaW4gfCBPcGVuTmV4dFMzT3JpZ2luO1xuICB9O1xuICBiZWhhdmlvcnM6IHtcbiAgICBwYXR0ZXJuOiBzdHJpbmc7XG4gICAgb3JpZ2luPzogc3RyaW5nO1xuICAgIGVkZ2VGdW5jdGlvbj86IHN0cmluZztcbiAgfVtdO1xuICBhZGRpdGlvbmFsUHJvcHM/OiB7XG4gICAgZGlzYWJsZUluY3JlbWVudGFsQ2FjaGU/OiBib29sZWFuO1xuICAgIGRpc2FibGVUYWdDYWNoZT86IGJvb2xlYW47XG4gICAgaW5pdGlhbGl6YXRpb25GdW5jdGlvbj86IEJhc2VGdW5jdGlvbjtcbiAgICB3YXJtZXI/OiBCYXNlRnVuY3Rpb247XG4gICAgcmV2YWxpZGF0aW9uRnVuY3Rpb24/OiBCYXNlRnVuY3Rpb247XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTmV4dGpzQXJncyBleHRlbmRzIFNzclNpdGVBcmdzIHtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5zdGFuY2VzIG9mIHRoZSBbc2VydmVyIGZ1bmN0aW9uXSgjbm9kZXMtc2VydmVyKSB0byBrZWVwIHdhcm0uIFRoaXMgaXMgdXNlZnVsIGZvciBjYXNlcyB3aGVyZSB5b3UgYXJlIGV4cGVyaWVuY2luZyBsb25nIGNvbGQgc3RhcnRzLiBUaGUgZGVmYXVsdCBpcyB0byBub3Qga2VlcCBhbnkgaW5zdGFuY2VzIHdhcm0uXG4gICAqXG4gICAqIFRoaXMgd29ya3MgYnkgc3RhcnRpbmcgYSBzZXJ2ZXJsZXNzIGNyb24gam9iIHRvIG1ha2UgX25fIGNvbmN1cnJlbnQgcmVxdWVzdHMgdG8gdGhlIHNlcnZlciBmdW5jdGlvbiBldmVyeSBmZXcgbWludXRlcy4gV2hlcmUgX25fIGlzIHRoZSBudW1iZXIgb2YgaW5zdGFuY2VzIHRvIGtlZXAgd2FybS5cbiAgICpcbiAgICogQGRlZmF1bHQgYDBgXG4gICAqL1xuICB3YXJtPzogU3NyU2l0ZUFyZ3NbXCJ3YXJtXCJdO1xuICAvKipcbiAgICogUGVybWlzc2lvbnMgYW5kIHRoZSByZXNvdXJjZXMgdGhhdCB0aGUgW3NlcnZlciBmdW5jdGlvbl0oI25vZGVzLXNlcnZlcikgaW4geW91ciBOZXh0LmpzIGFwcCBuZWVkcyB0byBhY2Nlc3MuIFRoZXNlIHBlcm1pc3Npb25zIGFyZSB1c2VkIHRvIGNyZWF0ZSB0aGUgZnVuY3Rpb24ncyBJQU0gcm9sZS5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIElmIHlvdSBgbGlua2AgdGhlIGZ1bmN0aW9uIHRvIGEgcmVzb3VyY2UsIHRoZSBwZXJtaXNzaW9ucyB0byBhY2Nlc3MgaXQgYXJlXG4gICAqIGF1dG9tYXRpY2FsbHkgYWRkZWQuXG4gICAqIDo6OlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBBbGxvdyByZWFkaW5nIGFuZCB3cml0aW5nIHRvIGFuIFMzIGJ1Y2tldCBjYWxsZWQgYG15LWJ1Y2tldGAuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBwZXJtaXNzaW9uczogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBhY3Rpb25zOiBbXCJzMzpHZXRPYmplY3RcIiwgXCJzMzpQdXRPYmplY3RcIl0sXG4gICAqICAgICAgIHJlc291cmNlczogW1wiYXJuOmF3czpzMzo6Om15LWJ1Y2tldC8qXCJdXG4gICAqICAgICB9LFxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogUGVyZm9ybSBhbGwgYWN0aW9ucyBvbiBhbiBTMyBidWNrZXQgY2FsbGVkIGBteS1idWNrZXRgLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgcGVybWlzc2lvbnM6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgYWN0aW9uczogW1wiczM6KlwiXSxcbiAgICogICAgICAgcmVzb3VyY2VzOiBbXCJhcm46YXdzOnMzOjo6bXktYnVja2V0LypcIl1cbiAgICogICAgIH0sXG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBHcmFudCBwZXJtaXNzaW9ucyB0byBhY2Nlc3MgYWxsIHJlc291cmNlcy5cbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHBlcm1pc3Npb25zOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIGFjdGlvbnM6IFtcIipcIl0sXG4gICAqICAgICAgIHJlc291cmNlczogW1wiKlwiXVxuICAgKiAgICAgfSxcbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBwZXJtaXNzaW9ucz86IFNzclNpdGVBcmdzW1wicGVybWlzc2lvbnNcIl07XG4gIC8qKlxuICAgKiBQYXRoIHRvIHRoZSBkaXJlY3Rvcnkgd2hlcmUgeW91ciBOZXh0LmpzIGFwcCBpcyBsb2NhdGVkLiBUaGlzIHBhdGggaXMgcmVsYXRpdmUgdG8geW91ciBgc3N0LmNvbmZpZy50c2AuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgdGhpcyBhc3N1bWVzIHlvdXIgTmV4dC5qcyBhcHAgaXMgaW4gdGhlIHJvb3Qgb2YgeW91ciBTU1QgYXBwLlxuICAgKiBAZGVmYXVsdCBgXCIuXCJgXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIElmIHlvdXIgTmV4dC5qcyBhcHAgaXMgaW4gYSBwYWNrYWdlIGluIHlvdXIgbW9ub3JlcG8uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBwYXRoOiBcInBhY2thZ2VzL3dlYlwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBwYXRoPzogU3NyU2l0ZUFyZ3NbXCJwYXRoXCJdO1xuICAvKipcbiAgICogW0xpbmsgcmVzb3VyY2VzXSgvZG9jcy9saW5raW5nLykgdG8geW91ciBOZXh0LmpzIGFwcC4gVGhpcyB3aWxsOlxuICAgKlxuICAgKiAxLiBHcmFudCB0aGUgcGVybWlzc2lvbnMgbmVlZGVkIHRvIGFjY2VzcyB0aGUgcmVzb3VyY2VzLlxuICAgKiAyLiBBbGxvdyB5b3UgdG8gYWNjZXNzIGl0IGluIHlvdXIgc2l0ZSB1c2luZyB0aGUgW1NES10oL2RvY3MvcmVmZXJlbmNlL3Nkay8pLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBUYWtlcyBhIGxpc3Qgb2YgcmVzb3VyY2VzIHRvIGxpbmsgdG8gdGhlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgbGluazogW2J1Y2tldCwgc3RyaXBlS2V5XVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgbGluaz86IFNzclNpdGVBcmdzW1wibGlua1wiXTtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZSBob3cgdGhlIENsb3VkRnJvbnQgY2FjaGUgaW52YWxpZGF0aW9ucyBhcmUgaGFuZGxlZC4gVGhpcyBpcyBydW4gYWZ0ZXIgeW91ciBOZXh0LmpzIGFwcCBoYXMgYmVlbiBkZXBsb3llZC5cbiAgICogOjo6dGlwXG4gICAqIFlvdSBnZXQgMTAwMCBmcmVlIGludmFsaWRhdGlvbnMgcGVyIG1vbnRoLiBBZnRlciB0aGF0IHlvdSBwYXkgJDAuMDA1IHBlciBpbnZhbGlkYXRpb24gcGF0aC4gW1JlYWQgbW9yZSBoZXJlXShodHRwczovL2F3cy5hbWF6b24uY29tL2Nsb3VkZnJvbnQvcHJpY2luZy8pLlxuICAgKiA6OjpcbiAgICogQGRlZmF1bHQgYCZsY3ViO3BhdGhzOiBcImFsbFwiLCB3YWl0OiBmYWxzZSZyY3ViO2BcbiAgICogQGV4YW1wbGVcbiAgICogVHVybiBvZmYgaW52YWxpZGF0aW9ucy5cbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGludmFsaWRhdGlvbjogZmFsc2VcbiAgICogfVxuICAgKiBgYGBcbiAgICogV2FpdCBmb3IgYWxsIHBhdGhzIHRvIGJlIGludmFsaWRhdGVkLlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgaW52YWxpZGF0aW9uOiB7XG4gICAqICAgICBwYXRoczogXCJhbGxcIixcbiAgICogICAgIHdhaXQ6IHRydWVcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBpbnZhbGlkYXRpb24/OiBTc3JTaXRlQXJnc1tcImludmFsaWRhdGlvblwiXTtcbiAgLyoqXG4gICAqIFRoZSBjb21tYW5kIHVzZWQgaW50ZXJuYWxseSB0byBidWlsZCB5b3VyIE5leHQuanMgYXBwLiBJdCB1c2VzIE9wZW5OZXh0IHdpdGggdGhlIGBvcGVuTmV4dFZlcnNpb25gLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgXCJucHggLS15ZXMgb3Blbi1uZXh0QE9QRU5fTkVYVF9WRVJTSU9OIGJ1aWxkXCJgXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIElmIHlvdSB3YW50IHRvIHVzZSBhIGN1c3RvbSBgYnVpbGRgIHNjcmlwdCBmcm9tIHlvdXIgYHBhY2thZ2UuanNvbmAuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBidWlsZENvbW1hbmQ6IFwibnBtIHJ1biBidWlsZFwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBidWlsZENvbW1hbmQ/OiBTc3JTaXRlQXJnc1tcImJ1aWxkQ29tbWFuZFwiXTtcbiAgLyoqXG4gICAqIFNldCBbZW52aXJvbm1lbnQgdmFyaWFibGVzXShodHRwczovL25leHRqcy5vcmcvZG9jcy9wYWdlcy9idWlsZGluZy15b3VyLWFwcGxpY2F0aW9uL2NvbmZpZ3VyaW5nL2Vudmlyb25tZW50LXZhcmlhYmxlcykgaW4geW91ciBOZXh0LmpzIGFwcC4gVGhlc2UgYXJlIG1hZGUgYXZhaWxhYmxlOlxuICAgKlxuICAgKiAxLiBJbiBgbmV4dCBidWlsZGAsIHRoZXkgYXJlIGxvYWRlZCBpbnRvIGBwcm9jZXNzLmVudmAuXG4gICAqIDIuIExvY2FsbHkgd2hpbGUgcnVubmluZyBgc3N0IGRldiBuZXh0IGRldmAuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIGFsc28gYGxpbmtgIHJlc291cmNlcyB0byB5b3VyIE5leHQuanMgYXBwIGFuZCBhY2Nlc3MgdGhlbSBpbiBhIHR5cGUtc2FmZSB3YXkgd2l0aCB0aGUgW1NES10oL2RvY3MvcmVmZXJlbmNlL3Nkay8pLiBXZSByZWNvbW1lbmQgbGlua2luZyBzaW5jZSBpdCdzIG1vcmUgc2VjdXJlLlxuICAgKiA6OjpcbiAgICpcbiAgICogUmVjYWxsIHRoYXQgaW4gTmV4dC5qcywgeW91IG5lZWQgdG8gcHJlZml4IHlvdXIgZW52aXJvbm1lbnQgdmFyaWFibGVzIHdpdGggYE5FWFRfUFVCTElDX2AgdG8gYWNjZXNzIHRoZXNlIGluIHRoZSBicm93c2VyLiBbUmVhZCBtb3JlIGhlcmVdKGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL3BhZ2VzL2J1aWxkaW5nLXlvdXItYXBwbGljYXRpb24vY29uZmlndXJpbmcvZW52aXJvbm1lbnQtdmFyaWFibGVzI2J1bmRsaW5nLWVudmlyb25tZW50LXZhcmlhYmxlcy1mb3ItdGhlLWJyb3dzZXIpLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZW52aXJvbm1lbnQ6IHtcbiAgICogICAgIEFQSV9VUkw6IGFwaS51cmwsXG4gICAqICAgICAvLyBBY2Nlc3NpYmxlIGluIHRoZSBicm93c2VyXG4gICAqICAgICBORVhUX1BVQkxJQ19TVFJJUEVfUFVCTElTSEFCTEVfS0VZOiBcInBrX3Rlc3RfMTIzXCJcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBlbnZpcm9ubWVudD86IFNzclNpdGVBcmdzW1wiZW52aXJvbm1lbnRcIl07XG4gIC8qKlxuICAgKiBTZXQgYSBjdXN0b20gZG9tYWluIGZvciB5b3VyIE5leHQuanMgYXBwLiBTdXBwb3J0cyBkb21haW5zIGhvc3RlZCBlaXRoZXIgb25cbiAgICogW1JvdXRlIDUzXShodHRwczovL2F3cy5hbWF6b24uY29tL3JvdXRlNTMvKSBvciBvdXRzaWRlIEFXUy5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIFlvdSBjYW4gYWxzbyBtaWdyYXRlIGFuIGV4dGVybmFsbHkgaG9zdGVkIGRvbWFpbiB0byBBbWF6b24gUm91dGUgNTMgYnlcbiAgICogW2ZvbGxvd2luZyB0aGlzIGd1aWRlXShodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vUm91dGU1My9sYXRlc3QvRGV2ZWxvcGVyR3VpZGUvTWlncmF0aW5nRE5TLmh0bWwpLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGRvbWFpbjogXCJkb21haW4uY29tXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogU3BlY2lmeSB0aGUgUm91dGUgNTMgaG9zdGVkIHpvbmUgYW5kIGEgYHd3dy5gIHZlcnNpb24gb2YgdGhlIGN1c3RvbSBkb21haW4uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBkb21haW46IHtcbiAgICogICAgIGRvbWFpbk5hbWU6IFwiZG9tYWluLmNvbVwiLFxuICAgKiAgICAgaG9zdGVkWm9uZTogXCJkb21haW4uY29tXCIsXG4gICAqICAgICByZWRpcmVjdHM6IFtcInd3dy5kb21haW4uY29tXCJdXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgZG9tYWluPzogU3NyU2l0ZUFyZ3NbXCJkb21haW5cIl07XG4gIC8qKlxuICAgKiBDb25maWd1cmUgaG93IHRoZSBOZXh0LmpzIGFwcCBhc3NldHMgYXJlIHVwbG9hZGVkIHRvIFMzLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGlzIGlzIHNldCB0byB0aGUgZm9sbG93aW5nLiBSZWFkIG1vcmUgYWJvdXQgdGhlc2Ugb3B0aW9ucyBiZWxvdy5cbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGFzc2V0czoge1xuICAgKiAgICAgdGV4dEVuY29kaW5nOiBcInV0Zi04XCIsXG4gICAqICAgICB2ZXJzaW9uZWRGaWxlc0NhY2hlSGVhZGVyOiBcInB1YmxpYyxtYXgtYWdlPTMxNTM2MDAwLGltbXV0YWJsZVwiLFxuICAgKiAgICAgbm9uVmVyc2lvbmVkRmlsZXNDYWNoZUhlYWRlcjogXCJwdWJsaWMsbWF4LWFnZT0wLHMtbWF4YWdlPTg2NDAwLHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9ODY0MFwiXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKiBSZWFkIG1vcmUgYWJvdXQgdGhlc2Ugb3B0aW9ucyBiZWxvdy5cbiAgICogQGRlZmF1bHQgYE9iamVjdGBcbiAgICovXG4gIGFzc2V0cz86IFNzclNpdGVBcmdzW1wiYXNzZXRzXCJdO1xuICAvKipcbiAgICogQ29uZmlndXJlIHRoZSBbT3Blbk5leHRdKGh0dHBzOi8vb3Blbi1uZXh0LmpzLm9yZykgdmVyc2lvbiB1c2VkIHRvIGJ1aWxkIHRoZSBOZXh0LmpzIGFwcC5cbiAgICpcbiAgICogOjo6bm90ZVxuICAgKiBUaGlzIGRvZXMgbm90IGF1dG9tYXRpY2FsbHkgdXBkYXRlIHRvIHRoZSBsYXRlc3QgT3Blbk5leHQgdmVyc2lvbi4gSXQgcmVtYWlucyBwaW5uZWQgdG8gdGhlIHZlcnNpb24gb2YgU1NUIHlvdSBoYXZlLlxuICAgKiA6OjpcbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhpcyBpcyBwaW5uZWQgdG8gdGhlIHZlcnNpb24gb2YgT3Blbk5leHQgdGhhdCB3YXMgcmVsZWFzZWQgd2l0aCB0aGUgU1NUIHZlcnNpb24geW91IGFyZSB1c2luZy4gWW91IGNhbiBbZmluZCB0aGlzIGluIHRoZSBzb3VyY2VdKGh0dHBzOi8vZ2l0aHViLmNvbS9zc3QvaW9uL2Jsb2IvZGV2L3BrZy9wbGF0Zm9ybS9zcmMvY29tcG9uZW50cy9hd3MvbmV4dGpzLnRzKSB1bmRlciBgREVGQVVMVF9PUEVOX05FWFRfVkVSU0lPTmAuXG4gICAqXG4gICAqIEBkZWZhdWx0IFRoZSBsYXRlc3QgdmVyc2lvbiBvZiBPcGVuTmV4dFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgb3Blbk5leHRWZXJzaW9uOiBcIjMuMC4wLXJjLjNcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgb3Blbk5leHRWZXJzaW9uPzogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZSB0aGUgTGFtYmRhIGZ1bmN0aW9uIHVzZWQgZm9yIGltYWdlIG9wdGltaXphdGlvbi5cbiAgICogQGRlZmF1bHQgYCZsY3ViO21lbW9yeTogXCIxMDI0IE1CXCImcmN1YjtgXG4gICAqL1xuICBpbWFnZU9wdGltaXphdGlvbj86IHtcbiAgICAvKipcbiAgICAgKiBUaGUgYW1vdW50IG9mIG1lbW9yeSBhbGxvY2F0ZWQgdG8gdGhlIGltYWdlIG9wdGltaXphdGlvbiBmdW5jdGlvbi5cbiAgICAgKiBUYWtlcyB2YWx1ZXMgYmV0d2VlbiAxMjggTUIgYW5kIDEwMjQwIE1CIGluIDEgTUIgaW5jcmVtZW50cy5cbiAgICAgKlxuICAgICAqIEBkZWZhdWx0IGBcIjEwMjQgTUJcImBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgaW1hZ2VPcHRpbWl6YXRpb246IHtcbiAgICAgKiAgICAgbWVtb3J5OiBcIjUxMiBNQlwiXG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqL1xuICAgIG1lbW9yeT86IFNpemU7XG4gIH07XG59XG5cbi8qKlxuICogVGhlIGBOZXh0anNgIGNvbXBvbmVudCBsZXRzIHlvdSBkZXBsb3kgW05leHQuanNdKGh0dHBzOi8vbmV4dGpzLm9yZykgYXBwcyBvbiBBV1MuIEl0IHVzZXNcbiAqIFtPcGVuTmV4dF0oaHR0cHM6Ly9vcGVuLW5leHQuanMub3JnKSB0byBidWlsZCB5b3VyIE5leHQuanMgYXBwLCBhbmQgdHJhbnNmb3JtcyB0aGUgYnVpbGRcbiAqIG91dHB1dCB0byBhIGZvcm1hdCB0aGF0IGNhbiBiZSBkZXBsb3llZCB0byBBV1MuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAjIyMjIE1pbmltYWwgZXhhbXBsZVxuICpcbiAqIERlcGxveSB0aGUgTmV4dC5qcyBhcHAgdGhhdCdzIGluIHRoZSBwcm9qZWN0IHJvb3QuXG4gKlxuICogYGBganNcbiAqIG5ldyBzc3QuYXdzLk5leHRqcyhcIk15V2ViXCIpO1xuICogYGBgXG4gKlxuICogIyMjIyBDaGFuZ2UgdGhlIHBhdGhcbiAqXG4gKiBEZXBsb3lzIGEgTmV4dC5qcyBhcHAgaW4gdGhlIGBteS1uZXh0LWFwcC9gIGRpcmVjdG9yeS5cbiAqXG4gKiBgYGBqcyB7Mn1cbiAqIG5ldyBzc3QuYXdzLk5leHRqcyhcIk15V2ViXCIsIHtcbiAqICAgcGF0aDogXCJteS1uZXh0LWFwcC9cIlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEFkZCBhIGN1c3RvbSBkb21haW5cbiAqXG4gKiBTZXQgYSBjdXN0b20gZG9tYWluIGZvciB5b3VyIE5leHQuanMgYXBwLlxuICpcbiAqIGBgYGpzIHsyfVxuICogbmV3IHNzdC5hd3MuTmV4dGpzKFwiTXlXZWJcIiwge1xuICogICBkb21haW46IFwibXktYXBwLmNvbVwiXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgUmVkaXJlY3Qgd3d3IHRvIGFwZXggZG9tYWluXG4gKlxuICogUmVkaXJlY3QgYHd3dy5teS1hcHAuY29tYCB0byBgbXktYXBwLmNvbWAuXG4gKlxuICogYGBganMgezR9XG4gKiBuZXcgc3N0LmF3cy5OZXh0anMoXCJNeVdlYlwiLCB7XG4gKiAgIGRvbWFpbjoge1xuICogICAgIGRvbWFpbk5hbWU6IFwibXktYXBwLmNvbVwiLFxuICogICAgIHJlZGlyZWN0czogW1wid3d3Lm15LWFwcC5jb21cIl1cbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIExpbmsgcmVzb3VyY2VzXG4gKlxuICogW0xpbmsgcmVzb3VyY2VzXSgvZG9jcy9saW5raW5nLykgdG8geW91ciBOZXh0LmpzIGFwcC4gVGhpcyB3aWxsIGdyYW50IHBlcm1pc3Npb25zXG4gKiB0byB0aGUgcmVzb3VyY2VzIGFuZCBhbGxvdyB5b3UgdG8gYWNjZXNzIGl0IGluIHlvdXIgYXBwLlxuICpcbiAqIGBgYHRzIHs0fVxuICogY29uc3QgYnVja2V0ID0gbmV3IHNzdC5hd3MuQnVja2V0KFwiTXlCdWNrZXRcIik7XG4gKlxuICogbmV3IHNzdC5hd3MuTmV4dGpzKFwiTXlXZWJcIiwge1xuICogICBsaW5rOiBbYnVja2V0XVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIHVzZSB0aGUgW1NES10oL2RvY3MvcmVmZXJlbmNlL3Nkay8pIHRvIGFjY2VzcyB0aGUgbGlua2VkIHJlc291cmNlc1xuICogaW4geW91ciBOZXh0LmpzIGFwcC5cbiAqXG4gKiBgYGB0cyB0aXRsZT1cImFwcC9wYWdlLnRzeFwiXG4gKiBpbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gXCJzc3RcIjtcbiAqXG4gKiBjb25zb2xlLmxvZyhSZXNvdXJjZS5NeUJ1Y2tldC5uYW1lKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgTmV4dGpzIGV4dGVuZHMgQ29tcG9uZW50IGltcGxlbWVudHMgTGluay5MaW5rYWJsZSB7XG4gIHByaXZhdGUgY2RuOiBPdXRwdXQ8Q2RuPjtcbiAgcHJpdmF0ZSBhc3NldHM6IEJ1Y2tldDtcbiAgcHJpdmF0ZSBzZXJ2ZXI6IE91dHB1dDxGdW5jdGlvbj47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M6IE5leHRqc0FyZ3MgPSB7fSxcbiAgICBvcHRzOiBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMgPSB7fSxcbiAgKSB7XG4gICAgc3VwZXIoXCJzc3Q6YXdzOk5leHRqc1wiLCBuYW1lLCBhcmdzLCBvcHRzKTtcblxuICAgIGxldCBfcm91dGVzOiBPdXRwdXQ8XG4gICAgICAoe1xuICAgICAgICByb3V0ZTogc3RyaW5nO1xuICAgICAgICBsb2dHcm91cFBhdGg6IHN0cmluZztcbiAgICAgICAgc291cmNlbWFwUGF0aD86IHN0cmluZztcbiAgICAgICAgc291cmNlbWFwS2V5Pzogc3RyaW5nO1xuICAgICAgfSAmICh7IHJlZ2V4TWF0Y2g6IHN0cmluZyB9IHwgeyBwcmVmaXhNYXRjaDogc3RyaW5nIH0pKVtdXG4gICAgPjtcblxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXM7XG4gICAgY29uc3QgYnVpbGRDb21tYW5kID0gbm9ybWFsaXplQnVpbGRDb21tYW5kKCk7XG4gICAgY29uc3QgeyBzaXRlUGF0aCwgcGFydGl0aW9uLCByZWdpb24gfSA9IHByZXBhcmUoYXJncywgb3B0cyk7XG4gICAgY29uc3QgeyBhY2Nlc3MsIGJ1Y2tldCB9ID0gY3JlYXRlQnVja2V0KHBhcmVudCwgbmFtZSwgcGFydGl0aW9uLCBhcmdzKTtcbiAgICBjb25zdCBvdXRwdXRQYXRoID0gYnVpbGRBcHAobmFtZSwgYXJncywgc2l0ZVBhdGgsIGJ1aWxkQ29tbWFuZCk7XG4gICAgY29uc3Qge1xuICAgICAgb3Blbk5leHRPdXRwdXQsXG4gICAgICBidWlsZElkLFxuICAgICAgcm91dGVzTWFuaWZlc3QsXG4gICAgICBhcHBQYXRoUm91dGVzTWFuaWZlc3QsXG4gICAgICBhcHBQYXRoc01hbmlmZXN0LFxuICAgICAgcGFnZXNNYW5pZmVzdCxcbiAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgIH0gPSBsb2FkQnVpbGRPdXRwdXQoKTtcbiAgICBjb25zdCByZXZhbGlkYXRpb25RdWV1ZSA9IGNyZWF0ZVJldmFsaWRhdGlvblF1ZXVlKCk7XG4gICAgY29uc3QgcmV2YWxpZGF0aW9uVGFibGUgPSBjcmVhdGVSZXZhbGlkYXRpb25UYWJsZSgpO1xuICAgIGNyZWF0ZVJldmFsaWRhdGlvblRhYmxlU2VlZGVyKCk7XG4gICAgY29uc3QgcGxhbiA9IGJ1aWxkUGxhbigpO1xuICAgIHJlbW92ZVNvdXJjZW1hcHMoKTtcbiAgICBjb25zdCB7IGRpc3RyaWJ1dGlvbiwgc3NyRnVuY3Rpb25zLCBlZGdlRnVuY3Rpb25zIH0gPVxuICAgICAgY3JlYXRlU2VydmVyc0FuZERpc3RyaWJ1dGlvbihcbiAgICAgICAgcGFyZW50LFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmdzLFxuICAgICAgICBvdXRwdXRQYXRoLFxuICAgICAgICBhY2Nlc3MsXG4gICAgICAgIGJ1Y2tldCxcbiAgICAgICAgcGxhbixcbiAgICAgICk7XG4gICAgY29uc3Qgc2VydmVyRnVuY3Rpb24gPSBzc3JGdW5jdGlvbnNbMF0gPz8gT2JqZWN0LnZhbHVlcyhlZGdlRnVuY3Rpb25zKVswXTtcbiAgICBoYW5kbGVNaXNzaW5nU291cmNlbWFwKCk7XG5cbiAgICB0aGlzLmFzc2V0cyA9IGJ1Y2tldDtcbiAgICB0aGlzLmNkbiA9IGRpc3RyaWJ1dGlvbjtcbiAgICB0aGlzLnNlcnZlciA9IHNlcnZlckZ1bmN0aW9uO1xuICAgIGlmICghJGRldikge1xuICAgICAgSGludC5yZWdpc3RlcihcbiAgICAgICAgdGhpcy51cm4sXG4gICAgICAgIGFsbChbdGhpcy5jZG4uZG9tYWluVXJsLCB0aGlzLmNkbi51cmxdKS5hcHBseShcbiAgICAgICAgICAoW2RvbWFpblVybCwgdXJsXSkgPT4gZG9tYWluVXJsID8/IHVybCxcbiAgICAgICAgKSxcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMucmVnaXN0ZXJPdXRwdXRzKHtcbiAgICAgIF9tZXRhZGF0YToge1xuICAgICAgICBtb2RlOiAkZGV2ID8gXCJwbGFjZWhvbGRlclwiIDogXCJkZXBsb3llZFwiLFxuICAgICAgICBwYXRoOiBzaXRlUGF0aCxcbiAgICAgICAgdXJsOiBkaXN0cmlidXRpb24uYXBwbHkoKGQpID0+IGQuZG9tYWluVXJsID8/IGQudXJsKSxcbiAgICAgICAgZWRnZTogcGxhbi5lZGdlLFxuICAgICAgICBzZXJ2ZXI6IHNlcnZlckZ1bmN0aW9uLmFybixcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVCdWlsZENvbW1hbmQoKSB7XG4gICAgICByZXR1cm4gYWxsKFthcmdzPy5idWlsZENvbW1hbmQsIGFyZ3M/Lm9wZW5OZXh0VmVyc2lvbl0pLmFwcGx5KFxuICAgICAgICAoW2J1aWxkQ29tbWFuZCwgb3Blbk5leHRWZXJzaW9uXSkgPT5cbiAgICAgICAgICBidWlsZENvbW1hbmQgPz9cbiAgICAgICAgICBbXG4gICAgICAgICAgICBcIm5weFwiLFxuICAgICAgICAgICAgXCItLXllc1wiLFxuICAgICAgICAgICAgYG9wZW4tbmV4dEAke29wZW5OZXh0VmVyc2lvbiA/PyBERUZBVUxUX09QRU5fTkVYVF9WRVJTSU9OfWAsXG4gICAgICAgICAgICBcImJ1aWxkXCIsXG4gICAgICAgICAgXS5qb2luKFwiIFwiKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZEJ1aWxkT3V0cHV0KCkge1xuICAgICAgY29uc3QgY2FjaGUgPSBuZXcgQ2FjaGUoXG4gICAgICAgIGAke25hbWV9T3Blbk5leHRPdXRwdXRgLFxuICAgICAgICB7XG4gICAgICAgICAgZGF0YTogJGRldiA/IGxvYWRPcGVuTmV4dE91dHB1dFBsYWNlaG9sZGVyKCkgOiBsb2FkT3Blbk5leHRPdXRwdXQoKSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHBhcmVudCxcbiAgICAgICAgICBpZ25vcmVDaGFuZ2VzOiAkZGV2ID8gW1wiKlwiXSA6IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG9wZW5OZXh0T3V0cHV0OiBjYWNoZS5kYXRhIGFzIFJldHVyblR5cGU8dHlwZW9mIGxvYWRPcGVuTmV4dE91dHB1dD4sXG4gICAgICAgIGJ1aWxkSWQ6IGxvYWRCdWlsZElkKCksXG4gICAgICAgIHJvdXRlc01hbmlmZXN0OiBsb2FkUm91dGVzTWFuaWZlc3QoKSxcbiAgICAgICAgYXBwUGF0aFJvdXRlc01hbmlmZXN0OiBsb2FkQXBwUGF0aFJvdXRlc01hbmlmZXN0KCksXG4gICAgICAgIGFwcFBhdGhzTWFuaWZlc3Q6IGxvYWRBcHBQYXRoc01hbmlmZXN0KCksXG4gICAgICAgIHBhZ2VzTWFuaWZlc3Q6IGxvYWRQYWdlc01hbmlmZXN0KCksXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0OiBsb2FkUHJlcmVuZGVyTWFuaWZlc3QoKSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZE9wZW5OZXh0T3V0cHV0KCkge1xuICAgICAgcmV0dXJuIG91dHB1dFBhdGguYXBwbHkoKG91dHB1dFBhdGgpID0+IHtcbiAgICAgICAgY29uc3Qgb3Blbk5leHRPdXRwdXRQYXRoID0gcGF0aC5qb2luKFxuICAgICAgICAgIG91dHB1dFBhdGgsXG4gICAgICAgICAgXCIub3Blbi1uZXh0XCIsXG4gICAgICAgICAgXCJvcGVuLW5leHQub3V0cHV0Lmpzb25cIixcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKG9wZW5OZXh0T3V0cHV0UGF0aCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKFxuICAgICAgICAgICAgYEZhaWxlZCB0byBsb2FkIG9wZW4tbmV4dC5vdXRwdXQuanNvbiBmcm9tIFwiJHtvcGVuTmV4dE91dHB1dFBhdGh9XCIuYCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmcy5yZWFkRmlsZVN5bmMob3Blbk5leHRPdXRwdXRQYXRoKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShjb250ZW50KSBhcyBPcGVuTmV4dE91dHB1dDtcbiAgICAgICAgLy8gQ3VycmVudGx5IG9wZW4tbmV4dC5vdXRwdXQuanNvbidzIGluaXRpYWxpemF0aW9uRnVuY3Rpb24gdmFsdWVcbiAgICAgICAgLy8gaXMgd3JvbmcsIGl0IGlzIHNldCB0byBcIi5vcGVuLW5leHQvaW5pdGlhbGl6YXRpb24tZnVuY3Rpb25cIlxuICAgICAgICBpZiAoanNvbi5hZGRpdGlvbmFsUHJvcHM/LmluaXRpYWxpemF0aW9uRnVuY3Rpb24pIHtcbiAgICAgICAgICBqc29uLmFkZGl0aW9uYWxQcm9wcy5pbml0aWFsaXphdGlvbkZ1bmN0aW9uID0ge1xuICAgICAgICAgICAgaGFuZGxlcjogXCJpbmRleC5oYW5kbGVyXCIsXG4gICAgICAgICAgICBidW5kbGU6IFwiLm9wZW4tbmV4dC9keW5hbW9kYi1wcm92aWRlclwiLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGpzb247XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkT3Blbk5leHRPdXRwdXRQbGFjZWhvbGRlcigpIHtcbiAgICAgIC8vIENvbmZpZ3VyZSBvcmlnaW5zIGFuZCBiZWhhdmlvcnMgYmFzZWQgb24gdGhlIE5leHQuanMgYXBwIGZyb20gcXVpY2sgc3RhcnRcbiAgICAgIHJldHVybiBvdXRwdXRQYXRoLmFwcGx5KChvdXRwdXRQYXRoKSA9PiAoe1xuICAgICAgICBlZGdlRnVuY3Rpb25zOiB7fSxcbiAgICAgICAgb3JpZ2luczoge1xuICAgICAgICAgIHMzOiB7XG4gICAgICAgICAgICB0eXBlOiBcInMzXCIsXG4gICAgICAgICAgICBvcmlnaW5QYXRoOiBcIl9hc3NldHNcIixcbiAgICAgICAgICAgIC8vIGRvIG5vdCB1cGxvYWQgYW55dGhpbmdcbiAgICAgICAgICAgIGNvcHk6IFtdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW1hZ2VPcHRpbWl6ZXI6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICAgIGhhbmRsZXI6IFwiaW5kZXguaGFuZGxlclwiLFxuICAgICAgICAgICAgYnVuZGxlOiBwYXRoLmpvaW4oXG4gICAgICAgICAgICAgIG91dHB1dFBhdGgsXG4gICAgICAgICAgICAgIFwiLm9wZW4tbmV4dC9pbWFnZS1vcHRpbWl6YXRpb24tZnVuY3Rpb25cIixcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBzdHJlYW1pbmc6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgICAgaGFuZGxlcjogXCJpbmRleC5oYW5kbGVyXCIsXG4gICAgICAgICAgICBidW5kbGU6IHBhdGguam9pbihcbiAgICAgICAgICAgICAgb3V0cHV0UGF0aCxcbiAgICAgICAgICAgICAgXCIub3Blbi1uZXh0L3NlcnZlci1mdW5jdGlvbnMvZGVmYXVsdFwiLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHN0cmVhbWluZzogZmFsc2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYmVoYXZpb3JzOiBbXG4gICAgICAgICAgeyBwYXR0ZXJuOiBcIl9uZXh0L2ltYWdlKlwiLCBvcmlnaW46IFwiaW1hZ2VPcHRpbWl6ZXJcIiB9LFxuICAgICAgICAgIHsgcGF0dGVybjogXCJfbmV4dC9kYXRhLypcIiwgb3JpZ2luOiBcImRlZmF1bHRcIiB9LFxuICAgICAgICAgIHsgcGF0dGVybjogXCIqXCIsIG9yaWdpbjogXCJkZWZhdWx0XCIgfSxcbiAgICAgICAgICB7IHBhdHRlcm46IFwiQlVJTERfSURcIiwgb3JpZ2luOiBcInMzXCIgfSxcbiAgICAgICAgICB7IHBhdHRlcm46IFwiX25leHQvKlwiLCBvcmlnaW46IFwiczNcIiB9LFxuICAgICAgICAgIHsgcGF0dGVybjogXCJmYXZpY29uLmljb1wiLCBvcmlnaW46IFwiczNcIiB9LFxuICAgICAgICAgIHsgcGF0dGVybjogXCJuZXh0LnN2Z1wiLCBvcmlnaW46IFwiczNcIiB9LFxuICAgICAgICAgIHsgcGF0dGVybjogXCJ2ZXJjZWwuc3ZnXCIsIG9yaWdpbjogXCJzM1wiIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wczoge1xuICAgICAgICAgIC8vIHNraXAgY3JlYXRpbmcgcmV2YWxpZGF0aW9uIHF1ZXVlXG4gICAgICAgICAgZGlzYWJsZUluY3JlbWVudGFsQ2FjaGU6IHRydWUsXG4gICAgICAgICAgLy8gc2tpcCBjcmVhdGluZyByZXZhbGlkYXRpb24gdGFibGVcbiAgICAgICAgICBkaXNhYmxlVGFnQ2FjaGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZEJ1aWxkSWQoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0UGF0aC5hcHBseSgob3V0cHV0UGF0aCkgPT4ge1xuICAgICAgICBpZiAoJGRldikgcmV0dXJuIFwibW9jay1idWlsZC1pZFwiO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIGZzXG4gICAgICAgICAgICAucmVhZEZpbGVTeW5jKHBhdGguam9pbihvdXRwdXRQYXRoLCBcIi5uZXh0L0JVSUxEX0lEXCIpKVxuICAgICAgICAgICAgLnRvU3RyaW5nKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoXG4gICAgICAgICAgICBgRmFpbGVkIHRvIHJlYWQgYnVpbGQgaWQgZnJvbSBcIi5uZXh0L0JVSUxEX0lEXCIgZm9yIHRoZSBcIiR7bmFtZX1cIiBzaXRlLmAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZFJvdXRlc01hbmlmZXN0KCkge1xuICAgICAgcmV0dXJuIG91dHB1dFBhdGguYXBwbHkoKG91dHB1dFBhdGgpID0+IHtcbiAgICAgICAgaWYgKCRkZXYpIHJldHVybiB7IGR5bmFtaWNSb3V0ZXM6IFtdLCBzdGF0aWNSb3V0ZXM6IFtdIH07XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gZnNcbiAgICAgICAgICAgIC5yZWFkRmlsZVN5bmMocGF0aC5qb2luKG91dHB1dFBhdGgsIFwiLm5leHQvcm91dGVzLW1hbmlmZXN0Lmpzb25cIikpXG4gICAgICAgICAgICAudG9TdHJpbmcoKTtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KSBhcyB7XG4gICAgICAgICAgICBkeW5hbWljUm91dGVzOiB7IHBhZ2U6IHN0cmluZzsgcmVnZXg6IHN0cmluZyB9W107XG4gICAgICAgICAgICBzdGF0aWNSb3V0ZXM6IHsgcGFnZTogc3RyaW5nOyByZWdleDogc3RyaW5nIH1bXTtcbiAgICAgICAgICAgIGRhdGFSb3V0ZXM/OiB7IHBhZ2U6IHN0cmluZzsgZGF0YVJvdXRlUmVnZXg6IHN0cmluZyB9W107XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgdGhyb3cgbmV3IFZpc2libGVFcnJvcihcbiAgICAgICAgICAgIGBGYWlsZWQgdG8gcmVhZCByb3V0ZXMgZGF0YSBmcm9tIFwiLm5leHQvcm91dGVzLW1hbmlmZXN0Lmpzb25cIiBmb3IgdGhlIFwiJHtuYW1lfVwiIHNpdGUuYCxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkQXBwUGF0aFJvdXRlc01hbmlmZXN0KCkge1xuICAgICAgLy8gRXhhbXBsZVxuICAgICAgLy8ge1xuICAgICAgLy8gICBcIi9fbm90LWZvdW5kXCI6IFwiL19ub3QtZm91bmRcIixcbiAgICAgIC8vICAgXCIvcGFnZVwiOiBcIi9cIixcbiAgICAgIC8vICAgXCIvZmF2aWNvbi5pY28vcm91dGVcIjogXCIvZmF2aWNvbi5pY29cIixcbiAgICAgIC8vICAgXCIvYXBpL3JvdXRlXCI6IFwiL2FwaVwiLCAgICAgICAgICAgICAgICAgICAgPC0gYXBwL2FwaS9yb3V0ZS5qc1xuICAgICAgLy8gICBcIi9hcGkvc3ViL3JvdXRlXCI6IFwiL2FwaS9zdWJcIiwgICAgICAgICAgICA8LSBhcHAvYXBpL3N1Yi9yb3V0ZS5qc1xuICAgICAgLy8gICBcIi9pdGVtcy9bc2x1Z10vcm91dGVcIjogXCIvaXRlbXMvW3NsdWddXCIgICA8LSBhcHAvaXRlbXMvW3NsdWddL3JvdXRlLmpzXG4gICAgICAvLyB9XG5cbiAgICAgIHJldHVybiBvdXRwdXRQYXRoLmFwcGx5KChvdXRwdXRQYXRoKSA9PiB7XG4gICAgICAgIGlmICgkZGV2KSByZXR1cm4ge307XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gZnNcbiAgICAgICAgICAgIC5yZWFkRmlsZVN5bmMoXG4gICAgICAgICAgICAgIHBhdGguam9pbihvdXRwdXRQYXRoLCBcIi5uZXh0L2FwcC1wYXRoLXJvdXRlcy1tYW5pZmVzdC5qc29uXCIpLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnRvU3RyaW5nKCk7XG4gICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCkgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZEFwcFBhdGhzTWFuaWZlc3QoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0UGF0aC5hcHBseSgob3V0cHV0UGF0aCkgPT4ge1xuICAgICAgICBpZiAoJGRldikgcmV0dXJuIHt9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGZzXG4gICAgICAgICAgICAucmVhZEZpbGVTeW5jKFxuICAgICAgICAgICAgICBwYXRoLmpvaW4ob3V0cHV0UGF0aCwgXCIubmV4dC9zZXJ2ZXIvYXBwLXBhdGhzLW1hbmlmZXN0Lmpzb25cIiksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAudG9TdHJpbmcoKTtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkUGFnZXNNYW5pZmVzdCgpIHtcbiAgICAgIHJldHVybiBvdXRwdXRQYXRoLmFwcGx5KChvdXRwdXRQYXRoKSA9PiB7XG4gICAgICAgIGlmICgkZGV2KSByZXR1cm4ge307XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gZnNcbiAgICAgICAgICAgIC5yZWFkRmlsZVN5bmMoXG4gICAgICAgICAgICAgIHBhdGguam9pbihvdXRwdXRQYXRoLCBcIi5uZXh0L3NlcnZlci9wYWdlcy1tYW5pZmVzdC5qc29uXCIpLFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLnRvU3RyaW5nKCk7XG4gICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCkgYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZFByZXJlbmRlck1hbmlmZXN0KCkge1xuICAgICAgcmV0dXJuIG91dHB1dFBhdGguYXBwbHkoKG91dHB1dFBhdGgpID0+IHtcbiAgICAgICAgaWYgKCRkZXYpIHJldHVybiB7IHZlcnNpb246IDAsIHJvdXRlczoge30gfTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBmc1xuICAgICAgICAgICAgLnJlYWRGaWxlU3luYyhcbiAgICAgICAgICAgICAgcGF0aC5qb2luKG91dHB1dFBhdGgsIFwiLm5leHQvcHJlcmVuZGVyLW1hbmlmZXN0Lmpzb25cIiksXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAudG9TdHJpbmcoKTtcbiAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KSBhcyB7XG4gICAgICAgICAgICB2ZXJzaW9uOiBudW1iZXI7XG4gICAgICAgICAgICByb3V0ZXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiRmFpbGVkIHRvIGxvYWQgcHJlcmVuZGVyLW1hbmlmZXN0Lmpzb25cIiwgZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkUGxhbigpIHtcbiAgICAgIHJldHVybiBhbGwoW1xuICAgICAgICBbcmVnaW9uLCBvdXRwdXRQYXRoXSxcbiAgICAgICAgYnVpbGRJZCxcbiAgICAgICAgb3Blbk5leHRPdXRwdXQsXG4gICAgICAgIGFyZ3M/LmltYWdlT3B0aW1pemF0aW9uLFxuICAgICAgICBbYnVja2V0LmFybiwgYnVja2V0Lm5hbWVdLFxuICAgICAgICByZXZhbGlkYXRpb25RdWV1ZS5hcHBseSgocSkgPT4gKHsgdXJsOiBxPy51cmwsIGFybjogcT8uYXJuIH0pKSxcbiAgICAgICAgcmV2YWxpZGF0aW9uVGFibGUuYXBwbHkoKHQpID0+ICh7IG5hbWU6IHQ/Lm5hbWUsIGFybjogdD8uYXJuIH0pKSxcbiAgICAgIF0pLmFwcGx5KFxuICAgICAgICAoW1xuICAgICAgICAgIFtyZWdpb24sIG91dHB1dFBhdGhdLFxuICAgICAgICAgIGJ1aWxkSWQsXG4gICAgICAgICAgb3Blbk5leHRPdXRwdXQsXG4gICAgICAgICAgaW1hZ2VPcHRpbWl6YXRpb24sXG4gICAgICAgICAgW2J1Y2tldEFybiwgYnVja2V0TmFtZV0sXG4gICAgICAgICAgeyB1cmw6IHJldmFsaWRhdGlvblF1ZXVlVXJsLCBhcm46IHJldmFsaWRhdGlvblF1ZXVlQXJuIH0sXG4gICAgICAgICAgeyBuYW1lOiByZXZhbGlkYXRpb25UYWJsZU5hbWUsIGFybjogcmV2YWxpZGF0aW9uVGFibGVBcm4gfSxcbiAgICAgICAgXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRlZmF1bHRGdW5jdGlvblByb3BzID0ge1xuICAgICAgICAgICAgcnVudGltZTogXCJub2RlanMyMC54XCIgYXMgY29uc3QsXG4gICAgICAgICAgICBlbnZpcm9ubWVudDoge1xuICAgICAgICAgICAgICBDQUNIRV9CVUNLRVRfTkFNRTogYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgQ0FDSEVfQlVDS0VUX0tFWV9QUkVGSVg6IFwiX2NhY2hlXCIsXG4gICAgICAgICAgICAgIENBQ0hFX0JVQ0tFVF9SRUdJT046IHJlZ2lvbixcbiAgICAgICAgICAgICAgLi4uKHJldmFsaWRhdGlvblF1ZXVlVXJsICYmIHtcbiAgICAgICAgICAgICAgICBSRVZBTElEQVRJT05fUVVFVUVfVVJMOiByZXZhbGlkYXRpb25RdWV1ZVVybCxcbiAgICAgICAgICAgICAgICBSRVZBTElEQVRJT05fUVVFVUVfUkVHSU9OOiByZWdpb24sXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAuLi4ocmV2YWxpZGF0aW9uVGFibGVOYW1lICYmIHtcbiAgICAgICAgICAgICAgICBDQUNIRV9EWU5BTU9fVEFCTEU6IHJldmFsaWRhdGlvblRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGVybWlzc2lvbnM6IFtcbiAgICAgICAgICAgICAgLy8gYWNjZXNzIHRvIHRoZSBjYWNoZSBkYXRhXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zOiBbXCJzMzpHZXRPYmplY3RcIiwgXCJzMzpQdXRPYmplY3RcIl0sXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzOiBbYCR7YnVja2V0QXJufS8qYF0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIC4uLihyZXZhbGlkYXRpb25RdWV1ZUFyblxuICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJzcXM6U2VuZE1lc3NhZ2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3FzOkdldFF1ZXVlQXR0cmlidXRlc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzcXM6R2V0UXVldWVVcmxcIixcbiAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlczogW3JldmFsaWRhdGlvblF1ZXVlQXJuXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICA6IFtdKSxcbiAgICAgICAgICAgICAgLi4uKHJldmFsaWRhdGlvblRhYmxlQXJuXG4gICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBcImR5bmFtb2RiOkJhdGNoR2V0SXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkeW5hbW9kYjpHZXRSZWNvcmRzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImR5bmFtb2RiOkdldFNoYXJkSXRlcmF0b3JcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZHluYW1vZGI6UXVlcnlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZHluYW1vZGI6R2V0SXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkeW5hbW9kYjpTY2FuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImR5bmFtb2RiOkNvbmRpdGlvbkNoZWNrSXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkeW5hbW9kYjpCYXRjaFdyaXRlSXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkeW5hbW9kYjpQdXRJdGVtXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImR5bmFtb2RiOlVwZGF0ZUl0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZHluYW1vZGI6RGVsZXRlSXRlbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkeW5hbW9kYjpEZXNjcmliZVRhYmxlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGlvblRhYmxlQXJuLFxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7cmV2YWxpZGF0aW9uVGFibGVBcm59LypgLFxuICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgOiBbXSksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH07XG5cbiAgICAgICAgICByZXR1cm4gdmFsaWRhdGVQbGFuKHtcbiAgICAgICAgICAgIGVkZ2U6IGZhbHNlLFxuICAgICAgICAgICAgY2xvdWRGcm9udEZ1bmN0aW9uczoge1xuICAgICAgICAgICAgICBzZXJ2ZXJDZkZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgaW5qZWN0aW9uczogW1xuICAgICAgICAgICAgICAgICAgdXNlQ2xvdWRGcm9udEZ1bmN0aW9uSG9zdEhlYWRlckluamVjdGlvbigpLFxuICAgICAgICAgICAgICAgICAgdXNlQ2xvdWRGcm9udEZ1bmN0aW9uUHJlcmVuZGVyQnlwYXNzSGVhZGVySW5qZWN0aW9uKCksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlZGdlRnVuY3Rpb25zOiBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKG9wZW5OZXh0T3V0cHV0LmVkZ2VGdW5jdGlvbnMpLm1hcChcbiAgICAgICAgICAgICAgICAoW2tleSwgdmFsdWVdKSA9PiBbXG4gICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke25hbWV9IHNlcnZlcmAsXG4gICAgICAgICAgICAgICAgICAgICAgYnVuZGxlOiBwYXRoLmpvaW4ob3V0cHV0UGF0aCwgdmFsdWUuYnVuZGxlKSxcbiAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyOiB2YWx1ZS5oYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRGdW5jdGlvblByb3BzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIG9yaWdpbnM6IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMob3Blbk5leHRPdXRwdXQub3JpZ2lucykubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcInMzXCIpIHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgYXMgT3Blbk5leHRTM09yaWdpbjtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHMzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5QYXRoOiB2YWx1ZS5vcmlnaW5QYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29weTogdmFsdWUuY29weSxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJpbWFnZU9wdGltaXplclwiKSB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlIGFzIE9wZW5OZXh0SW1hZ2VPcHRpbWl6YXRpb25PcmlnaW47XG4gICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBpbWFnZU9wdGltaXphdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke25hbWV9IGltYWdlIG9wdGltaXplcmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IHZhbHVlLmhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bmRsZTogcGF0aC5qb2luKG91dHB1dFBhdGgsIHZhbHVlLmJ1bmRsZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWU6IFwibm9kZWpzMjAueFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBhcmNoaXRlY3R1cmU6IFwiYXJtNjRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVUNLRVRfTkFNRTogYnVja2V0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBCVUNLRVRfS0VZX1BSRUZJWDogXCJfYXNzZXRzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW9yeTogaW1hZ2VPcHRpbWl6YXRpb24/Lm1lbW9yeSA/PyBcIjE1MzYgTUJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgYXMgT3Blbk5leHRTZXJ2ZXJGdW5jdGlvbk9yaWdpbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGAke25hbWV9IHNlcnZlcmAsXG4gICAgICAgICAgICAgICAgICAgICAgICBidW5kbGU6IHBhdGguam9pbihvdXRwdXRQYXRoLCB2YWx1ZS5idW5kbGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcjogdmFsdWUuaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmF1bHRGdW5jdGlvblByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgc3RyZWFtaW5nOiB2YWx1ZS5zdHJlYW1pbmcsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGJlaGF2aW9yczogb3Blbk5leHRPdXRwdXQuYmVoYXZpb3JzLm1hcCgoYmVoYXZpb3IpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOlxuICAgICAgICAgICAgICAgICAgYmVoYXZpb3IucGF0dGVybiA9PT0gXCIqXCIgPyB1bmRlZmluZWQgOiBiZWhhdmlvci5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIG9yaWdpbjogYmVoYXZpb3Iub3JpZ2luID8/IFwiXCIsXG4gICAgICAgICAgICAgICAgY2FjaGVUeXBlOlxuICAgICAgICAgICAgICAgICAgYmVoYXZpb3Iub3JpZ2luID09PSBcInMzXCIgPyBcInN0YXRpY1wiIDogKFwic2VydmVyXCIgYXMgY29uc3QpLFxuICAgICAgICAgICAgICAgIGNmRnVuY3Rpb246IFwic2VydmVyQ2ZGdW5jdGlvblwiIGFzIGNvbnN0LFxuICAgICAgICAgICAgICAgIGVkZ2VGdW5jdGlvbjogYmVoYXZpb3IuZWRnZUZ1bmN0aW9uID8/IFwiXCIsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHNlcnZlckNhY2hlUG9saWN5OiB7XG4gICAgICAgICAgICAgIGFsbG93ZWRIZWFkZXJzOiBERUZBVUxUX0NBQ0hFX1BPTElDWV9BTExPV0VEX0hFQURFUlMsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnVpbGRJZCxcbiAgICAgICAgICB9KSBhcyBQbGFuO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVSZXZhbGlkYXRpb25RdWV1ZSgpIHtcbiAgICAgIHJldHVybiBhbGwoW291dHB1dFBhdGgsIG9wZW5OZXh0T3V0cHV0XSkuYXBwbHkoXG4gICAgICAgIChbb3V0cHV0UGF0aCwgb3Blbk5leHRPdXRwdXRdKSA9PiB7XG4gICAgICAgICAgaWYgKG9wZW5OZXh0T3V0cHV0LmFkZGl0aW9uYWxQcm9wcz8uZGlzYWJsZUluY3JlbWVudGFsQ2FjaGUpIHJldHVybjtcblxuICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGlvbkZ1bmN0aW9uID1cbiAgICAgICAgICAgIG9wZW5OZXh0T3V0cHV0LmFkZGl0aW9uYWxQcm9wcz8ucmV2YWxpZGF0aW9uRnVuY3Rpb247XG4gICAgICAgICAgaWYgKCFyZXZhbGlkYXRpb25GdW5jdGlvbikgcmV0dXJuO1xuXG4gICAgICAgICAgY29uc3QgcXVldWUgPSBuZXcgUXVldWUoXG4gICAgICAgICAgICBgJHtuYW1lfVJldmFsaWRhdGlvblF1ZXVlYCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZmlmbzogdHJ1ZSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtOiB7XG4gICAgICAgICAgICAgICAgcXVldWU6IChhcmdzKSA9PiB7XG4gICAgICAgICAgICAgICAgICBhcmdzLnJlY2VpdmVXYWl0VGltZVNlY29uZHMgPSAyMDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgcGFyZW50IH0sXG4gICAgICAgICAgKTtcbiAgICAgICAgICBxdWV1ZS5zdWJzY3JpYmUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJHtuYW1lfSBJU1IgcmV2YWxpZGF0b3JgLFxuICAgICAgICAgICAgICBoYW5kbGVyOiByZXZhbGlkYXRpb25GdW5jdGlvbi5oYW5kbGVyLFxuICAgICAgICAgICAgICBidW5kbGU6IHBhdGguam9pbihvdXRwdXRQYXRoLCByZXZhbGlkYXRpb25GdW5jdGlvbi5idW5kbGUpLFxuICAgICAgICAgICAgICBydW50aW1lOiBcIm5vZGVqczIwLnhcIixcbiAgICAgICAgICAgICAgdGltZW91dDogXCIzMCBzZWNvbmRzXCIsXG4gICAgICAgICAgICAgIHBlcm1pc3Npb25zOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICBcInNxczpDaGFuZ2VNZXNzYWdlVmlzaWJpbGl0eVwiLFxuICAgICAgICAgICAgICAgICAgICBcInNxczpEZWxldGVNZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgIFwic3FzOkdldFF1ZXVlQXR0cmlidXRlc1wiLFxuICAgICAgICAgICAgICAgICAgICBcInNxczpHZXRRdWV1ZVVybFwiLFxuICAgICAgICAgICAgICAgICAgICBcInNxczpSZWNlaXZlTWVzc2FnZVwiLFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgIHJlc291cmNlczogW3F1ZXVlLmFybl0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgbGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgIF9pZ25vcmVDb2RlQ2hhbmdlczogJGRldixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRyYW5zZm9ybToge1xuICAgICAgICAgICAgICAgIGV2ZW50U291cmNlTWFwcGluZzogKGFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICAgIGFyZ3MuYmF0Y2hTaXplID0gNTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBxdWV1ZTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlUmV2YWxpZGF0aW9uVGFibGUoKSB7XG4gICAgICByZXR1cm4gb3Blbk5leHRPdXRwdXQuYXBwbHkoKG9wZW5OZXh0T3V0cHV0KSA9PiB7XG4gICAgICAgIGlmIChvcGVuTmV4dE91dHB1dC5hZGRpdGlvbmFsUHJvcHM/LmRpc2FibGVUYWdDYWNoZSkgcmV0dXJuO1xuXG4gICAgICAgIHJldHVybiBuZXcgYXdzLmR5bmFtb2RiLlRhYmxlKFxuICAgICAgICAgIGAke25hbWV9UmV2YWxpZGF0aW9uVGFibGVgLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICAgICAgeyBuYW1lOiBcInRhZ1wiLCB0eXBlOiBcIlNcIiB9LFxuICAgICAgICAgICAgICB7IG5hbWU6IFwicGF0aFwiLCB0eXBlOiBcIlNcIiB9LFxuICAgICAgICAgICAgICB7IG5hbWU6IFwicmV2YWxpZGF0ZWRBdFwiLCB0eXBlOiBcIk5cIiB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGhhc2hLZXk6IFwidGFnXCIsXG4gICAgICAgICAgICByYW5nZUtleTogXCJwYXRoXCIsXG4gICAgICAgICAgICBwb2ludEluVGltZVJlY292ZXJ5OiB7XG4gICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmlsbGluZ01vZGU6IFwiUEFZX1BFUl9SRVFVRVNUXCIsXG4gICAgICAgICAgICBnbG9iYWxTZWNvbmRhcnlJbmRleGVzOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInJldmFsaWRhdGVcIixcbiAgICAgICAgICAgICAgICBoYXNoS2V5OiBcInBhdGhcIixcbiAgICAgICAgICAgICAgICByYW5nZUtleTogXCJyZXZhbGlkYXRlZEF0XCIsXG4gICAgICAgICAgICAgICAgcHJvamVjdGlvblR5cGU6IFwiQUxMXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVJldmFsaWRhdGlvblRhYmxlU2VlZGVyKCkge1xuICAgICAgcmV0dXJuIGFsbChbXG4gICAgICAgIHJldmFsaWRhdGlvblRhYmxlLFxuICAgICAgICBvdXRwdXRQYXRoLFxuICAgICAgICBvcGVuTmV4dE91dHB1dCxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICBdKS5hcHBseShcbiAgICAgICAgKFtcbiAgICAgICAgICByZXZhbGlkYXRpb25UYWJsZSxcbiAgICAgICAgICBvdXRwdXRQYXRoLFxuICAgICAgICAgIG9wZW5OZXh0T3V0cHV0LFxuICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICBdKSA9PiB7XG4gICAgICAgICAgaWYgKG9wZW5OZXh0T3V0cHV0LmFkZGl0aW9uYWxQcm9wcz8uZGlzYWJsZVRhZ0NhY2hlKSByZXR1cm47XG4gICAgICAgICAgaWYgKCFvcGVuTmV4dE91dHB1dC5hZGRpdGlvbmFsUHJvcHM/LmluaXRpYWxpemF0aW9uRnVuY3Rpb24pIHJldHVybjtcblxuICAgICAgICAgIC8vIFByb3Zpc2lvbiAxMjhNQiBvZiBtZW1vcnkgZm9yIGV2ZXJ5IDQsMDAwIHByZXJlbmRlcmVkIHJvdXRlcyxcbiAgICAgICAgICAvLyAxR0IgcGVyIDQwLDAwMCwgdXAgdG8gMTBHQi4gVGhpcyB0ZW5kcyB0byB1c2UgfjcwJSBvZiB0aGUgbWVtb3J5XG4gICAgICAgICAgLy8gcHJvdmlzaW9uZWQgd2hlbiB0ZXN0aW5nLlxuICAgICAgICAgIGNvbnN0IHByZXJlbmRlcmVkUm91dGVDb3VudCA9IE9iamVjdC5rZXlzKFxuICAgICAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3Q/LnJvdXRlcyA/PyB7fSxcbiAgICAgICAgICApLmxlbmd0aDtcbiAgICAgICAgICBjb25zdCBzZWVkRm4gPSBuZXcgRnVuY3Rpb24oXG4gICAgICAgICAgICBgJHtuYW1lfVJldmFsaWRhdGlvblNlZWRlcmAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBgJHtuYW1lfSBJU1IgcmV2YWxpZGF0aW9uIGRhdGEgc2VlZGVyYCxcbiAgICAgICAgICAgICAgaGFuZGxlcjpcbiAgICAgICAgICAgICAgICBvcGVuTmV4dE91dHB1dC5hZGRpdGlvbmFsUHJvcHMuaW5pdGlhbGl6YXRpb25GdW5jdGlvbi5oYW5kbGVyLFxuICAgICAgICAgICAgICBidW5kbGU6IHBhdGguam9pbihcbiAgICAgICAgICAgICAgICBvdXRwdXRQYXRoLFxuICAgICAgICAgICAgICAgIG9wZW5OZXh0T3V0cHV0LmFkZGl0aW9uYWxQcm9wcy5pbml0aWFsaXphdGlvbkZ1bmN0aW9uLmJ1bmRsZSxcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgcnVudGltZTogXCJub2RlanMyMC54XCIsXG4gICAgICAgICAgICAgIHRpbWVvdXQ6IFwiOTAwIHNlY29uZHNcIixcbiAgICAgICAgICAgICAgbWVtb3J5OiBgJHtNYXRoLm1pbihcbiAgICAgICAgICAgICAgICAxMDI0MCxcbiAgICAgICAgICAgICAgICBNYXRoLm1heCgxMjgsIE1hdGguY2VpbChwcmVyZW5kZXJlZFJvdXRlQ291bnQgLyA0MDAwKSAqIDEyOCksXG4gICAgICAgICAgICAgICl9IE1CYCxcbiAgICAgICAgICAgICAgcGVybWlzc2lvbnM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIFwiZHluYW1vZGI6QmF0Y2hXcml0ZUl0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgXCJkeW5hbW9kYjpQdXRJdGVtXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZHluYW1vZGI6RGVzY3JpYmVUYWJsZVwiLFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgIHJlc291cmNlczogW3JldmFsaWRhdGlvblRhYmxlIS5hcm5dLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgIGVudmlyb25tZW50OiB7XG4gICAgICAgICAgICAgICAgQ0FDSEVfRFlOQU1PX1RBQkxFOiByZXZhbGlkYXRpb25UYWJsZSEubmFtZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgIF9pZ25vcmVDb2RlQ2hhbmdlczogJGRldixcbiAgICAgICAgICAgICAgX3NraXBNZXRhZGF0YTogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgICAgICk7XG4gICAgICAgICAgbmV3IGF3cy5sYW1iZGEuSW52b2NhdGlvbihcbiAgICAgICAgICAgIGAke25hbWV9UmV2YWxpZGF0aW9uU2VlZGAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGZ1bmN0aW9uTmFtZTogc2VlZEZuLm5vZGVzLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgICAgICAgIHRyaWdnZXJzOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogRGF0ZS5ub3coKS50b1N0cmluZygpLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBpbnB1dDogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIFJlcXVlc3RUeXBlOiBcIkNyZWF0ZVwiLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IHBhcmVudCwgaWdub3JlQ2hhbmdlczogJGRldiA/IFtcIipcIl0gOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVTb3VyY2VtYXBzKCkge1xuICAgICAgLy8gVE9ETyBzZXQgZGVwZW5kZW5jeVxuICAgICAgLy8gVE9ETyBlbnN1cmUgc291cmNlbWFwcyBhcmUgcmVtb3ZlZCBpbiBmdW5jdGlvbiBjb2RlXG4gICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIHJlbW92ZSBzb3VyY2UgbWFwcyBpbiBWM1xuICAgICAgcmV0dXJuO1xuICAgICAgcmV0dXJuIG91dHB1dFBhdGguYXBwbHkoKG91dHB1dFBhdGgpID0+IHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSBnbG9iU3luYyhcIioqLyouanMubWFwXCIsIHtcbiAgICAgICAgICBjd2Q6IHBhdGguam9pbihvdXRwdXRQYXRoLCBcIi5vcGVuLW5leHRcIiwgXCJzZXJ2ZXItZnVuY3Rpb25cIiksXG4gICAgICAgICAgbm9kaXI6IHRydWUsXG4gICAgICAgICAgZG90OiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgZnMucm1TeW5jKFxuICAgICAgICAgICAgcGF0aC5qb2luKG91dHB1dFBhdGgsIFwiLm9wZW4tbmV4dFwiLCBcInNlcnZlci1mdW5jdGlvblwiLCBmaWxlKSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1c2VSb3V0ZXMoKSB7XG4gICAgICBpZiAoX3JvdXRlcykgcmV0dXJuIF9yb3V0ZXM7XG5cbiAgICAgIF9yb3V0ZXMgPSBhbGwoW1xuICAgICAgICBvdXRwdXRQYXRoLFxuICAgICAgICByb3V0ZXNNYW5pZmVzdCxcbiAgICAgICAgYXBwUGF0aFJvdXRlc01hbmlmZXN0LFxuICAgICAgICBhcHBQYXRoc01hbmlmZXN0LFxuICAgICAgICBwYWdlc01hbmlmZXN0LFxuICAgICAgXSkuYXBwbHkoXG4gICAgICAgIChbXG4gICAgICAgICAgb3V0cHV0UGF0aCxcbiAgICAgICAgICByb3V0ZXNNYW5pZmVzdCxcbiAgICAgICAgICBhcHBQYXRoUm91dGVzTWFuaWZlc3QsXG4gICAgICAgICAgYXBwUGF0aHNNYW5pZmVzdCxcbiAgICAgICAgICBwYWdlc01hbmlmZXN0LFxuICAgICAgICBdKSA9PiB7XG4gICAgICAgICAgY29uc3QgZHluYW1pY0FuZFN0YXRpY1JvdXRlcyA9IFtcbiAgICAgICAgICAgIC4uLnJvdXRlc01hbmlmZXN0LmR5bmFtaWNSb3V0ZXMsXG4gICAgICAgICAgICAuLi5yb3V0ZXNNYW5pZmVzdC5zdGF0aWNSb3V0ZXMsXG4gICAgICAgICAgXS5tYXAoKHsgcGFnZSwgcmVnZXggfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3dSb3V0ZSA9IGJ1aWxkQ2xvdWRXYXRjaFJvdXRlTmFtZShwYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IGN3SGFzaCA9IGJ1aWxkQ2xvdWRXYXRjaFJvdXRlSGFzaChwYWdlKTtcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZW1hcFBhdGggPVxuICAgICAgICAgICAgICBnZXRTb3VyY2VtYXBGb3JBcHBSb3V0ZShwYWdlKSB8fCBnZXRTb3VyY2VtYXBGb3JQYWdlc1JvdXRlKHBhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcm91dGU6IHBhZ2UsXG4gICAgICAgICAgICAgIHJlZ2V4TWF0Y2g6IHJlZ2V4LFxuICAgICAgICAgICAgICBsb2dHcm91cFBhdGg6IGAvJHtjd0hhc2h9JHtjd1JvdXRlfWAsXG4gICAgICAgICAgICAgIHNvdXJjZW1hcFBhdGg6IHNvdXJjZW1hcFBhdGgsXG4gICAgICAgICAgICAgIHNvdXJjZW1hcEtleTogY3dIYXNoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFNvbWUgYXBwIHJvdXRlcyBhcmUgbm90IGluIHRoZSByb3V0ZXMgbWFuaWZlc3QsIHNvIHdlIG5lZWQgdG8gYWRkIHRoZW1cbiAgICAgICAgICAvLyBpZS4gYXBwL2FwaS9yb3V0ZS50cyA9PiBJUyBOT1QgaW4gdGhlIHJvdXRlcyBtYW5pZmVzdFxuICAgICAgICAgIC8vICAgICBhcHAvaXRlbXMvW3NsdWddL3JvdXRlLnRzID0+IElTIGluIHRoZSByb3V0ZXMgbWFuaWZlc3QgKGR5bmFtaWNSb3V0ZXMpXG4gICAgICAgICAgY29uc3QgYXBwUm91dGVzID0gT2JqZWN0LnZhbHVlcyhhcHBQYXRoUm91dGVzTWFuaWZlc3QpXG4gICAgICAgICAgICAuZmlsdGVyKFxuICAgICAgICAgICAgICAocGFnZSkgPT5cbiAgICAgICAgICAgICAgICByb3V0ZXNNYW5pZmVzdC5keW5hbWljUm91dGVzLmV2ZXJ5KFxuICAgICAgICAgICAgICAgICAgKHJvdXRlKSA9PiByb3V0ZS5wYWdlICE9PSBwYWdlLFxuICAgICAgICAgICAgICAgICkgJiZcbiAgICAgICAgICAgICAgICByb3V0ZXNNYW5pZmVzdC5zdGF0aWNSb3V0ZXMuZXZlcnkoXG4gICAgICAgICAgICAgICAgICAocm91dGUpID0+IHJvdXRlLnBhZ2UgIT09IHBhZ2UsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5tYXAoKHBhZ2UpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY3dSb3V0ZSA9IGJ1aWxkQ2xvdWRXYXRjaFJvdXRlTmFtZShwYWdlKTtcbiAgICAgICAgICAgICAgY29uc3QgY3dIYXNoID0gYnVpbGRDbG91ZFdhdGNoUm91dGVIYXNoKHBhZ2UpO1xuICAgICAgICAgICAgICBjb25zdCBzb3VyY2VtYXBQYXRoID0gZ2V0U291cmNlbWFwRm9yQXBwUm91dGUocGFnZSk7XG4gICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcm91dGU6IHBhZ2UsXG4gICAgICAgICAgICAgICAgcHJlZml4TWF0Y2g6IHBhZ2UsXG4gICAgICAgICAgICAgICAgbG9nR3JvdXBQYXRoOiBgLyR7Y3dIYXNofSR7Y3dSb3V0ZX1gLFxuICAgICAgICAgICAgICAgIHNvdXJjZW1hcFBhdGg6IHNvdXJjZW1hcFBhdGgsXG4gICAgICAgICAgICAgICAgc291cmNlbWFwS2V5OiBjd0hhc2gsXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IGRhdGFSb3V0ZXMgPSAocm91dGVzTWFuaWZlc3QuZGF0YVJvdXRlcyB8fCBbXSkubWFwKFxuICAgICAgICAgICAgKHsgcGFnZSwgZGF0YVJvdXRlUmVnZXggfSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCByb3V0ZURpc3BsYXlOYW1lID0gcGFnZS5lbmRzV2l0aChcIi9cIilcbiAgICAgICAgICAgICAgICA/IGAvX25leHQvZGF0YS9CVUlMRF9JRCR7cGFnZX1pbmRleC5qc29uYFxuICAgICAgICAgICAgICAgIDogYC9fbmV4dC9kYXRhL0JVSUxEX0lEJHtwYWdlfS5qc29uYDtcbiAgICAgICAgICAgICAgY29uc3QgY3dSb3V0ZSA9IGJ1aWxkQ2xvdWRXYXRjaFJvdXRlTmFtZShyb3V0ZURpc3BsYXlOYW1lKTtcbiAgICAgICAgICAgICAgY29uc3QgY3dIYXNoID0gYnVpbGRDbG91ZFdhdGNoUm91dGVIYXNoKHBhZ2UpO1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJvdXRlOiByb3V0ZURpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgIHJlZ2V4TWF0Y2g6IGRhdGFSb3V0ZVJlZ2V4LFxuICAgICAgICAgICAgICAgIGxvZ0dyb3VwUGF0aDogYC8ke2N3SGFzaH0ke2N3Um91dGV9YCxcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAuLi5bLi4uZHluYW1pY0FuZFN0YXRpY1JvdXRlcywgLi4uYXBwUm91dGVzXS5zb3J0KChhLCBiKSA9PlxuICAgICAgICAgICAgICBhLnJvdXRlLmxvY2FsZUNvbXBhcmUoYi5yb3V0ZSksXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgLi4uZGF0YVJvdXRlcy5zb3J0KChhLCBiKSA9PiBhLnJvdXRlLmxvY2FsZUNvbXBhcmUoYi5yb3V0ZSkpLFxuICAgICAgICAgIF07XG5cbiAgICAgICAgICBmdW5jdGlvbiBnZXRTb3VyY2VtYXBGb3JBcHBSb3V0ZShwYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgICAgIC8vIFN0ZXAgMTogbG9vayB1cCBpbiBcImFwcFBhdGhSb3V0ZXNNYW5pZmVzdFwiIHRvIGZpbmQgdGhlIGtleSB3aXRoXG4gICAgICAgICAgICAvLyAgICAgICAgIHZhbHVlIGVxdWFsIHRvIHRoZSBwYWdlXG4gICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAvLyAgIFwiL19ub3QtZm91bmRcIjogXCIvX25vdC1mb3VuZFwiLFxuICAgICAgICAgICAgLy8gICBcIi9hYm91dC9wYWdlXCI6IFwiL2Fib3V0XCIsXG4gICAgICAgICAgICAvLyAgIFwiL2Fib3V0L3Byb2ZpbGUvcGFnZVwiOiBcIi9hYm91dC9wcm9maWxlXCIsXG4gICAgICAgICAgICAvLyAgIFwiL3BhZ2VcIjogXCIvXCIsXG4gICAgICAgICAgICAvLyAgIFwiL2Zhdmljb24uaWNvL3JvdXRlXCI6IFwiL2Zhdmljb24uaWNvXCJcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIGNvbnN0IGFwcFBhdGhSb3V0ZSA9IE9iamVjdC5rZXlzKGFwcFBhdGhSb3V0ZXNNYW5pZmVzdCkuZmluZChcbiAgICAgICAgICAgICAgKGtleSkgPT4gYXBwUGF0aFJvdXRlc01hbmlmZXN0W2tleV0gPT09IHBhZ2UsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKCFhcHBQYXRoUm91dGUpIHJldHVybjtcblxuICAgICAgICAgICAgLy8gU3RlcCAyOiBsb29rIHVwIGluIFwiYXBwUGF0aHNNYW5pZmVzdFwiIHRvIGZpbmQgdGhlIGZpbGUgd2l0aCBrZXkgZXF1YWxcbiAgICAgICAgICAgIC8vICAgICAgICAgdG8gdGhlIHBhZ2VcbiAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgIC8vICAgXCIvX25vdC1mb3VuZFwiOiBcImFwcC9fbm90LWZvdW5kLmpzXCIsXG4gICAgICAgICAgICAvLyAgIFwiL2Fib3V0L3BhZ2VcIjogXCJhcHAvYWJvdXQvcGFnZS5qc1wiLFxuICAgICAgICAgICAgLy8gICBcIi9hYm91dC9wcm9maWxlL3BhZ2VcIjogXCJhcHAvYWJvdXQvcHJvZmlsZS9wYWdlLmpzXCIsXG4gICAgICAgICAgICAvLyAgIFwiL3BhZ2VcIjogXCJhcHAvcGFnZS5qc1wiLFxuICAgICAgICAgICAgLy8gICBcIi9mYXZpY29uLmljby9yb3V0ZVwiOiBcImFwcC9mYXZpY29uLmljby9yb3V0ZS5qc1wiXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGFwcFBhdGhzTWFuaWZlc3RbYXBwUGF0aFJvdXRlXTtcbiAgICAgICAgICAgIGlmICghZmlsZVBhdGgpIHJldHVybjtcblxuICAgICAgICAgICAgLy8gU3RlcCAzOiBjaGVjayB0aGUgLm1hcCBmaWxlIGV4aXN0c1xuICAgICAgICAgICAgY29uc3Qgc291cmNlbWFwUGF0aCA9IHBhdGguam9pbihcbiAgICAgICAgICAgICAgb3V0cHV0UGF0aCxcbiAgICAgICAgICAgICAgXCIubmV4dFwiLFxuICAgICAgICAgICAgICBcInNlcnZlclwiLFxuICAgICAgICAgICAgICBgJHtmaWxlUGF0aH0ubWFwYCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoc291cmNlbWFwUGF0aCkpIHJldHVybjtcblxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZW1hcFBhdGg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gZ2V0U291cmNlbWFwRm9yUGFnZXNSb3V0ZShwYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgICAgIC8vIFN0ZXAgMTogbG9vayB1cCBpbiBcInBhdGhzTWFuaWZlc3RcIiB0byBmaW5kIHRoZSBmaWxlIHdpdGgga2V5IGVxdWFsXG4gICAgICAgICAgICAvLyAgICAgICAgIHRvIHRoZSBwYWdlXG4gICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAvLyAgIFwiL19hcHBcIjogXCJwYWdlcy9fYXBwLmpzXCIsXG4gICAgICAgICAgICAvLyAgIFwiL19lcnJvclwiOiBcInBhZ2VzL19lcnJvci5qc1wiLFxuICAgICAgICAgICAgLy8gICBcIi80MDRcIjogXCJwYWdlcy80MDQuaHRtbFwiLFxuICAgICAgICAgICAgLy8gICBcIi9hcGkvaGVsbG9cIjogXCJwYWdlcy9hcGkvaGVsbG8uanNcIixcbiAgICAgICAgICAgIC8vICAgXCIvYXBpL2F1dGgvWy4uLm5leHRhdXRoXVwiOiBcInBhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0uanNcIixcbiAgICAgICAgICAgIC8vICAgXCIvYXBpL25leHQtYXV0aC1yZXN0cmljdGVkXCI6IFwicGFnZXMvYXBpL25leHQtYXV0aC1yZXN0cmljdGVkLmpzXCIsXG4gICAgICAgICAgICAvLyAgIFwiL1wiOiBcInBhZ2VzL2luZGV4LmpzXCIsXG4gICAgICAgICAgICAvLyAgIFwiL3NzclwiOiBcInBhZ2VzL3Nzci5qc1wiXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhZ2VzTWFuaWZlc3RbcGFnZV07XG4gICAgICAgICAgICBpZiAoIWZpbGVQYXRoKSByZXR1cm47XG5cbiAgICAgICAgICAgIC8vIFN0ZXAgMjogY2hlY2sgdGhlIC5tYXAgZmlsZSBleGlzdHNcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZW1hcFBhdGggPSBwYXRoLmpvaW4oXG4gICAgICAgICAgICAgIG91dHB1dFBhdGgsXG4gICAgICAgICAgICAgIFwiLm5leHRcIixcbiAgICAgICAgICAgICAgXCJzZXJ2ZXJcIixcbiAgICAgICAgICAgICAgYCR7ZmlsZVBhdGh9Lm1hcGAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKHNvdXJjZW1hcFBhdGgpKSByZXR1cm47XG5cbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VtYXBQYXRoO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBfcm91dGVzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVzZUNsb3VkRnJvbnRGdW5jdGlvblByZXJlbmRlckJ5cGFzc0hlYWRlckluamVjdGlvbigpIHtcbiAgICAgIC8vIEluIE5leHQuanMgcGFnZSByb3V0ZXIgcHJldmlldyBtb2RlIChkZXBlbmRzIG9uIHRoZSBjb29raWUgX19wcmVyZW5kZXJfYnlwYXNzKSxcbiAgICAgIC8vIHRvIGVuc3VyZSB3ZSByZWNlaXZlIHRoZSBjYWNoZWQgcGFnZSBpbnN0ZWFkIG9mIHRoZSBwcmV2aWV3IHZlcnNpb24sIHdlIHNldCB0aGVcbiAgICAgIC8vIGhlYWRlciBcIngtcHJlcmVuZGVyLWJ5cGFzc1wiLCBhbmQgYWRkIGl0IHRvIGNhY2hlIHBvbGljeSdzIGFsbG93ZWQgaGVhZGVycy5cbiAgICAgIHJldHVybiBgXG4gIGlmIChyZXF1ZXN0LmNvb2tpZXNbXCJfX3ByZXJlbmRlcl9ieXBhc3NcIl0pIHsgXG4gICAgcmVxdWVzdC5oZWFkZXJzW1wieC1wcmVyZW5kZXItYnlwYXNzXCJdID0geyB2YWx1ZTogXCJ0cnVlXCIgfTsgXG4gIH1gO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZU1pc3NpbmdTb3VyY2VtYXAoKSB7XG4gICAgICAvLyBUT0RPIGltcGxlbWVudFxuICAgICAgcmV0dXJuO1xuICAgICAgLy9pZiAoZG9Ob3REZXBsb3kgfHwgdGhpcy5hcmdzLmVkZ2UpIHJldHVybjtcbiAgICAgIC8vY29uc3QgaGFzTWlzc2luZ1NvdXJjZW1hcCA9IHVzZVJvdXRlcygpLmV2ZXJ5KFxuICAgICAgLy8gICh7IHNvdXJjZW1hcFBhdGgsIHNvdXJjZW1hcEtleSB9KSA9PiAhc291cmNlbWFwUGF0aCB8fCAhc291cmNlbWFwS2V5XG4gICAgICAvLyk7XG4gICAgICAvL2lmICghaGFzTWlzc2luZ1NvdXJjZW1hcCkgcmV0dXJuO1xuICAgICAgLy8vLyBUT0RPIHNldCBjb3JyZWN0IG1pc3Npbmcgc291cmNlbWFwIHZhbHVlXG4gICAgICAvLy8vKHRoaXMuc2VydmVyRnVuY3Rpb24gYXMgU3NyRnVuY3Rpb24pLl9vdmVycmlkZU1pc3NpbmdTb3VyY2VtYXAoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZENsb3VkV2F0Y2hSb3V0ZU5hbWUocm91dGU6IHN0cmluZykge1xuICAgICAgcmV0dXJuIHJvdXRlLnJlcGxhY2UoL1teYS16QS1aMC05X1xcLS8uI10vZywgXCJcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRDbG91ZFdhdGNoUm91dGVIYXNoKHJvdXRlOiBzdHJpbmcpIHtcbiAgICAgIGNvbnN0IGhhc2ggPSBjcnlwdG8uY3JlYXRlSGFzaChcInNoYTI1NlwiKTtcbiAgICAgIGhhc2gudXBkYXRlKHJvdXRlKTtcbiAgICAgIHJldHVybiBoYXNoLmRpZ2VzdChcImhleFwiKS5zdWJzdHJpbmcoMCwgOCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBVUkwgb2YgdGhlIE5leHQuanMgYXBwLlxuICAgKlxuICAgKiBJZiB0aGUgYGRvbWFpbmAgaXMgc2V0LCB0aGlzIGlzIHRoZSBVUkwgd2l0aCB0aGUgY3VzdG9tIGRvbWFpbi5cbiAgICogT3RoZXJ3aXNlLCBpdCdzIHRoZSBhdXRvZ2VuZXJhdGVkIENsb3VkRnJvbnQgVVJMLlxuICAgKi9cbiAgcHVibGljIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIGFsbChbdGhpcy5jZG4uZG9tYWluVXJsLCB0aGlzLmNkbi51cmxdKS5hcHBseShcbiAgICAgIChbZG9tYWluVXJsLCB1cmxdKSA9PiBkb21haW5VcmwgPz8gdXJsLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHVuZGVybHlpbmcgW3Jlc291cmNlc10oL2RvY3MvY29tcG9uZW50cy8jbm9kZXMpIHRoaXMgY29tcG9uZW50IGNyZWF0ZXMuXG4gICAqL1xuICBwdWJsaWMgZ2V0IG5vZGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBV1MgTGFtYmRhIHNlcnZlciBmdW5jdGlvbiB0aGF0IHJlbmRlcnMgdGhlIGFwcC5cbiAgICAgICAqL1xuICAgICAgc2VydmVyOiB0aGlzLnNlcnZlciBhcyB1bmtub3duIGFzIEZ1bmN0aW9uLFxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgQW1hem9uIFMzIEJ1Y2tldCB0aGF0IHN0b3JlcyB0aGUgYXNzZXRzLlxuICAgICAgICovXG4gICAgICBhc3NldHM6IHRoaXMuYXNzZXRzLFxuICAgIH07XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIHB1YmxpYyBnZXRTU1RMaW5rKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cbiIsICJpbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLCBPdXRwdXQsIGFsbCwgb3V0cHV0IH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgeyBGdW5jdGlvbiB9IGZyb20gXCIuL2Z1bmN0aW9uLmpzXCI7XG5pbXBvcnQge1xuICBTc3JTaXRlQXJncyxcbiAgY3JlYXRlQnVja2V0LFxuICBjcmVhdGVTZXJ2ZXJzQW5kRGlzdHJpYnV0aW9uLFxuICBwcmVwYXJlLFxuICB1c2VDbG91ZEZyb250RnVuY3Rpb25Ib3N0SGVhZGVySW5qZWN0aW9uLFxuICB2YWxpZGF0ZVBsYW4sXG59IGZyb20gXCIuL3Nzci1zaXRlLmpzXCI7XG5pbXBvcnQgeyBDZG4gfSBmcm9tIFwiLi9jZG4uanNcIjtcbmltcG9ydCB7IEJ1Y2tldCB9IGZyb20gXCIuL2J1Y2tldC5qc1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudC5qc1wiO1xuaW1wb3J0IHsgSGludCB9IGZyb20gXCIuLi9oaW50LmpzXCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmsuanNcIjtcbmltcG9ydCB0eXBlIHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXQuanNcIjtcbmltcG9ydCB7IENhY2hlIH0gZnJvbSBcIi4vcHJvdmlkZXJzL2NhY2hlLmpzXCI7XG5pbXBvcnQgeyBidWlsZEFwcCB9IGZyb20gXCIuLi9iYXNlL2Jhc2Utc3NyLXNpdGUuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBSZW1peEFyZ3MgZXh0ZW5kcyBTc3JTaXRlQXJncyB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGluc3RhbmNlcyBvZiB0aGUgW3NlcnZlciBmdW5jdGlvbl0oI25vZGVzLXNlcnZlcikgdG8ga2VlcCB3YXJtLiBUaGlzIGlzIHVzZWZ1bCBmb3IgY2FzZXMgd2hlcmUgeW91IGFyZSBleHBlcmllbmNpbmcgbG9uZyBjb2xkIHN0YXJ0cy4gVGhlIGRlZmF1bHQgaXMgdG8gbm90IGtlZXAgYW55IGluc3RhbmNlcyB3YXJtLlxuICAgKlxuICAgKiBUaGlzIHdvcmtzIGJ5IHN0YXJ0aW5nIGEgc2VydmVybGVzcyBjcm9uIGpvYiB0byBtYWtlIF9uXyBjb25jdXJyZW50IHJlcXVlc3RzIHRvIHRoZSBzZXJ2ZXIgZnVuY3Rpb24gZXZlcnkgZmV3IG1pbnV0ZXMuIFdoZXJlIF9uXyBpcyB0aGUgbnVtYmVyIG9mIGluc3RhbmNlcyB0byBrZWVwIHdhcm0uXG4gICAqXG4gICAqIEBkZWZhdWx0IGAwYFxuICAgKi9cbiAgd2FybT86IFNzclNpdGVBcmdzW1wid2FybVwiXTtcbiAgLyoqXG4gICAqIFBlcm1pc3Npb25zIGFuZCB0aGUgcmVzb3VyY2VzIHRoYXQgdGhlIFtzZXJ2ZXIgZnVuY3Rpb25dKCNub2Rlcy1zZXJ2ZXIpIGluIHlvdXIgUmVtaXggYXBwIG5lZWRzIHRvIGFjY2Vzcy4gVGhlc2UgcGVybWlzc2lvbnMgYXJlIHVzZWQgdG8gY3JlYXRlIHRoZSBmdW5jdGlvbidzIElBTSByb2xlLlxuICAgKlxuICAgKiA6Ojp0aXBcbiAgICogSWYgeW91IGBsaW5rYCB0aGUgZnVuY3Rpb24gdG8gYSByZXNvdXJjZSwgdGhlIHBlcm1pc3Npb25zIHRvIGFjY2VzcyBpdCBhcmVcbiAgICogYXV0b21hdGljYWxseSBhZGRlZC5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIEFsbG93IHJlYWRpbmcgYW5kIHdyaXRpbmcgdG8gYW4gUzMgYnVja2V0IGNhbGxlZCBgbXktYnVja2V0YC5cbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIHBlcm1pc3Npb25zOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIGFjdGlvbnM6IFtcInMzOkdldE9iamVjdFwiLCBcInMzOlB1dE9iamVjdFwiXSxcbiAgICogICAgICAgcmVzb3VyY2VzOiBbXCJhcm46YXdzOnMzOjo6bXktYnVja2V0LypcIl1cbiAgICogICAgIH0sXG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBQZXJmb3JtIGFsbCBhY3Rpb25zIG9uIGFuIFMzIGJ1Y2tldCBjYWxsZWQgYG15LWJ1Y2tldGAuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBwZXJtaXNzaW9uczogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBhY3Rpb25zOiBbXCJzMzoqXCJdLFxuICAgKiAgICAgICByZXNvdXJjZXM6IFtcImFybjphd3M6czM6OjpteS1idWNrZXQvKlwiXVxuICAgKiAgICAgfSxcbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEdyYW50IHBlcm1pc3Npb25zIHRvIGFjY2VzcyBhbGwgcmVzb3VyY2VzLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgcGVybWlzc2lvbnM6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgYWN0aW9uczogW1wiKlwiXSxcbiAgICogICAgICAgcmVzb3VyY2VzOiBbXCIqXCJdXG4gICAqICAgICB9LFxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHBlcm1pc3Npb25zPzogU3NyU2l0ZUFyZ3NbXCJwZXJtaXNzaW9uc1wiXTtcbiAgLyoqXG4gICAqIFBhdGggdG8gdGhlIGRpcmVjdG9yeSB3aGVyZSB5b3VyIFJlbWl4IGFwcCBpcyBsb2NhdGVkLiAgVGhpcyBwYXRoIGlzIHJlbGF0aXZlIHRvIHlvdXIgYHNzdC5jb25maWcudHNgLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0IGl0IGFzc3VtZXMgeW91ciBSZW1peCBhcHAgaXMgaW4gdGhlIHJvb3Qgb2YgeW91ciBTU1QgYXBwLlxuICAgKiBAZGVmYXVsdCBgXCIuXCJgXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIElmIHlvdXIgUmVtaXggYXBwIGlzIGluIGEgcGFja2FnZSBpbiB5b3VyIG1vbm9yZXBvLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgcGF0aDogXCJwYWNrYWdlcy93ZWJcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgcGF0aD86IFNzclNpdGVBcmdzW1wicGF0aFwiXTtcbiAgLyoqXG4gICAqIFtMaW5rIHJlc291cmNlc10oL2RvY3MvbGlua2luZy8pIHRvIHlvdXIgUmVtaXggYXBwLiBUaGlzIHdpbGw6XG4gICAqXG4gICAqIDEuIEdyYW50IHRoZSBwZXJtaXNzaW9ucyBuZWVkZWQgdG8gYWNjZXNzIHRoZSByZXNvdXJjZXMuXG4gICAqIDIuIEFsbG93IHlvdSB0byBhY2Nlc3MgaXQgaW4geW91ciBzaXRlIHVzaW5nIHRoZSBbU0RLXSgvZG9jcy9yZWZlcmVuY2Uvc2RrLykuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIFRha2VzIGEgbGlzdCBvZiByZXNvdXJjZXMgdG8gbGluayB0byB0aGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBsaW5rOiBbYnVja2V0LCBzdHJpcGVLZXldXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBsaW5rPzogU3NyU2l0ZUFyZ3NbXCJsaW5rXCJdO1xuICAvKipcbiAgICogQ29uZmlndXJlIGhvdyB0aGUgQ2xvdWRGcm9udCBjYWNoZSBpbnZhbGlkYXRpb25zIGFyZSBoYW5kbGVkLiBUaGlzIGlzIHJ1biBhZnRlciB5b3VyIFJlbWl4IGFwcCBoYXMgYmVlbiBkZXBsb3llZC5cbiAgICogOjo6dGlwXG4gICAqIFlvdSBnZXQgMTAwMCBmcmVlIGludmFsaWRhdGlvbnMgcGVyIG1vbnRoLiBBZnRlciB0aGF0IHlvdSBwYXkgJDAuMDA1IHBlciBpbnZhbGlkYXRpb24gcGF0aC4gW1JlYWQgbW9yZSBoZXJlXShodHRwczovL2F3cy5hbWF6b24uY29tL2Nsb3VkZnJvbnQvcHJpY2luZy8pLlxuICAgKiA6OjpcbiAgICogQGRlZmF1bHQgYCZsY3ViO3BhdGhzOiBcImFsbFwiLCB3YWl0OiBmYWxzZSZyY3ViO2BcbiAgICogQGV4YW1wbGVcbiAgICogV2FpdCBmb3IgYWxsIHBhdGhzIHRvIGJlIGludmFsaWRhdGVkLlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgaW52YWxpZGF0aW9uOiB7XG4gICAqICAgICBwYXRoczogXCJhbGxcIixcbiAgICogICAgIHdhaXQ6IHRydWVcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBpbnZhbGlkYXRpb24/OiBTc3JTaXRlQXJnc1tcImludmFsaWRhdGlvblwiXTtcbiAgLyoqXG4gICAqIFNldCBbZW52aXJvbm1lbnQgdmFyaWFibGVzXShodHRwczovL3JlbWl4LnJ1bi9kb2NzL2VuL21haW4vZ3VpZGVzL2VudnZhcnMpIGluIHlvdXIgUmVtaXggYXBwLiBUaGVzZSBhcmUgbWFkZSBhdmFpbGFibGU6XG4gICAqXG4gICAqIDEuIEluIGByZW1peCBidWlsZGAsIHRoZXkgYXJlIGxvYWRlZCBpbnRvIGBwcm9jZXNzLmVudmAuXG4gICAqIDIuIExvY2FsbHkgd2hpbGUgcnVubmluZyBgc3N0IGRldiByZW1peCBkZXZgLlxuICAgKlxuICAgKiA6Ojp0aXBcbiAgICogWW91IGNhbiBhbHNvIGBsaW5rYCByZXNvdXJjZXMgdG8geW91ciBSZW1peCBhcHAgYW5kIGFjY2VzcyB0aGVtIGluIGEgdHlwZS1zYWZlIHdheSB3aXRoIHRoZSBbU0RLXSgvZG9jcy9yZWZlcmVuY2Uvc2RrLykuIFdlIHJlY29tbWVuZCBsaW5raW5nIHNpbmNlIGl0J3MgbW9yZSBzZWN1cmUuXG4gICAqIDo6OlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZW52aXJvbm1lbnQ6IHtcbiAgICogICAgIEFQSV9VUkw6IGFwaS51cmwsXG4gICAqICAgICBTVFJJUEVfUFVCTElTSEFCTEVfS0VZOiBcInBrX3Rlc3RfMTIzXCJcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBlbnZpcm9ubWVudD86IFNzclNpdGVBcmdzW1wiZW52aXJvbm1lbnRcIl07XG4gIC8qKlxuICAgKiBTZXQgYSBjdXN0b20gZG9tYWluIGZvciB5b3VyIFJlbWl4IGFwcC4gU3VwcG9ydHMgZG9tYWlucyBob3N0ZWQgZWl0aGVyIG9uXG4gICAqIFtSb3V0ZSA1M10oaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9yb3V0ZTUzLykgb3Igb3V0c2lkZSBBV1MuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIGFsc28gbWlncmF0ZSBhbiBleHRlcm5hbGx5IGhvc3RlZCBkb21haW4gdG8gQW1hem9uIFJvdXRlIDUzIGJ5XG4gICAqIFtmb2xsb3dpbmcgdGhpcyBndWlkZV0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL1JvdXRlNTMvbGF0ZXN0L0RldmVsb3Blckd1aWRlL01pZ3JhdGluZ0ROUy5odG1sKS5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBkb21haW46IFwiZG9tYWluLmNvbVwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFNwZWNpZnkgdGhlIFJvdXRlIDUzIGhvc3RlZCB6b25lIGFuZCBhIGB3d3cuYCB2ZXJzaW9uIG9mIHRoZSBjdXN0b20gZG9tYWluLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZG9tYWluOiB7XG4gICAqICAgICBkb21haW5OYW1lOiBcImRvbWFpbi5jb21cIixcbiAgICogICAgIGhvc3RlZFpvbmU6IFwiZG9tYWluLmNvbVwiLFxuICAgKiAgICAgcmVkaXJlY3RzOiBbXCJ3d3cuZG9tYWluLmNvbVwiXVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGRvbWFpbj86IFNzclNpdGVBcmdzW1wiZG9tYWluXCJdO1xuICAvKipcbiAgICogVGhlIGNvbW1hbmQgdXNlZCBpbnRlcm5hbGx5IHRvIGJ1aWxkIHlvdXIgUmVtaXggYXBwLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgXCJucG0gcnVuIGJ1aWxkXCJgXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIElmIHlvdSB3YW50IHRvIHVzZSBhIGRpZmZlcmVudCBidWlsZCBjb21tYW5kLlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgYnVpbGRDb21tYW5kOiBcInlhcm4gYnVpbGRcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYnVpbGRDb21tYW5kPzogU3NyU2l0ZUFyZ3NbXCJidWlsZENvbW1hbmRcIl07XG4gIC8qKlxuICAgKiBDb25maWd1cmUgaG93IHRoZSBSZW1peCBhcHAgYXNzZXRzIGFyZSB1cGxvYWRlZCB0byBTMy5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhpcyBpcyBzZXQgdG8gdGhlIGZvbGxvd2luZy4gUmVhZCBtb3JlIGFib3V0IHRoZXNlIG9wdGlvbnMgYmVsb3cuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBhc3NldHM6IHtcbiAgICogICAgIHRleHRFbmNvZGluZzogXCJ1dGYtOFwiLFxuICAgKiAgICAgdmVyc2lvbmVkRmlsZXNDYWNoZUhlYWRlcjogXCJwdWJsaWMsbWF4LWFnZT0zMTUzNjAwMCxpbW11dGFibGVcIixcbiAgICogICAgIG5vblZlcnNpb25lZEZpbGVzQ2FjaGVIZWFkZXI6IFwicHVibGljLG1heC1hZ2U9MCxzLW1heGFnZT04NjQwMCxzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTg2NDBcIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGFzc2V0cz86IFNzclNpdGVBcmdzW1wiYXNzZXRzXCJdO1xuICAvKipcbiAgICogQ29uZmlndXJlIHdoZXJlIHRoZSBbc2VydmVyIGZ1bmN0aW9uXSgjbm9kZXMtc2VydmVyKSBpcyBkZXBsb3llZC5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgaXQncyBkZXBsb3llZCB0byBBV1MgTGFtYmRhIGluIGEgc2luZ2xlIHJlZ2lvbi4gRW5hYmxlIHRoaXMgb3B0aW9uIGlmIHlvdSB3YW50IHRvIGluc3RlYWQgZGVwbG95IGl0IHRvIExhbWJkYUBFZGdlLlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZWRnZT86IElucHV0PGJvb2xlYW4+O1xufVxuXG4vKipcbiAqIFRoZSBgUmVtaXhgIGNvbXBvbmVudCBsZXRzIHlvdSBkZXBsb3kgYSBbUmVtaXhdKGh0dHBzOi8vcmVtaXgucnVuKSBhcHAgdG8gQVdTLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogIyMjIyBNaW5pbWFsIGV4YW1wbGVcbiAqXG4gKiBEZXBsb3kgYSBSZW1peCBhcHAgdGhhdCdzIGluIHRoZSBwcm9qZWN0IHJvb3QuXG4gKlxuICogYGBganNcbiAqIG5ldyBzc3QuYXdzLlJlbWl4KFwiTXlXZWJcIik7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIENoYW5nZSB0aGUgcGF0aFxuICpcbiAqIERlcGxveXMgdGhlIFJlbWl4IGFwcCBpbiB0aGUgYG15LXJlbWl4LWFwcC9gIGRpcmVjdG9yeS5cbiAqXG4gKiBgYGBqcyB7Mn1cbiAqIG5ldyBzc3QuYXdzLlJlbWl4KFwiTXlXZWJcIiwge1xuICogICBwYXRoOiBcIm15LXJlbWl4LWFwcC9cIlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEFkZCBhIGN1c3RvbSBkb21haW5cbiAqXG4gKiBTZXQgYSBjdXN0b20gZG9tYWluIGZvciB5b3VyIFJlbWl4IGFwcC5cbiAqXG4gKiBgYGBqcyB7Mn1cbiAqIG5ldyBzc3QuYXdzLlJlbWl4KFwiTXlXZWJcIiwge1xuICogICBkb21haW46IFwibXktYXBwLmNvbVwiXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgUmVkaXJlY3Qgd3d3IHRvIGFwZXggZG9tYWluXG4gKlxuICogUmVkaXJlY3QgYHd3dy5teS1hcHAuY29tYCB0byBgbXktYXBwLmNvbWAuXG4gKlxuICogYGBganMgezR9XG4gKiBuZXcgc3N0LmF3cy5SZW1peChcIk15V2ViXCIsIHtcbiAqICAgZG9tYWluOiB7XG4gKiAgICAgZG9tYWluTmFtZTogXCJteS1hcHAuY29tXCIsXG4gKiAgICAgcmVkaXJlY3RzOiBbXCJ3d3cubXktYXBwLmNvbVwiXVxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgTGluayByZXNvdXJjZXNcbiAqXG4gKiBbTGluayByZXNvdXJjZXNdKC9kb2NzL2xpbmtpbmcvKSB0byB5b3VyIFJlbWl4IGFwcC4gVGhpcyB3aWxsIGdyYW50IHBlcm1pc3Npb25zXG4gKiB0byB0aGUgcmVzb3VyY2VzIGFuZCBhbGxvdyB5b3UgdG8gYWNjZXNzIGl0IGluIHlvdXIgYXBwLlxuICpcbiAqIGBgYHRzIHs0fVxuICogY29uc3QgYnVja2V0ID0gbmV3IHNzdC5hd3MuQnVja2V0KFwiTXlCdWNrZXRcIik7XG4gKlxuICogbmV3IHNzdC5hd3MuUmVtaXgoXCJNeVdlYlwiLCB7XG4gKiAgIGxpbms6IFtidWNrZXRdXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gdXNlIHRoZSBbU0RLXSgvZG9jcy9yZWZlcmVuY2Uvc2RrLykgdG8gYWNjZXNzIHRoZSBsaW5rZWQgcmVzb3VyY2VzXG4gKiBpbiB5b3VyIFJlbWl4IGFwcC5cbiAqXG4gKiBgYGB0cyB0aXRsZT1cImFwcC9yb290LnRzeFwiXG4gKiBpbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gXCJzc3RcIjtcbiAqXG4gKiBjb25zb2xlLmxvZyhSZXNvdXJjZS5NeUJ1Y2tldC5uYW1lKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUmVtaXggZXh0ZW5kcyBDb21wb25lbnQgaW1wbGVtZW50cyBMaW5rLkxpbmthYmxlIHtcbiAgcHJpdmF0ZSBjZG46IE91dHB1dDxDZG4+O1xuICBwcml2YXRlIGFzc2V0czogQnVja2V0O1xuICBwcml2YXRlIHNlcnZlcjogT3V0cHV0PEZ1bmN0aW9uPjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogUmVtaXhBcmdzID0ge30sXG4gICAgb3B0czogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zID0ge30sXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmF3czpSZW1peFwiLCBuYW1lLCBhcmdzLCBvcHRzKTtcblxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXM7XG4gICAgY29uc3QgZWRnZSA9IG5vcm1hbGl6ZUVkZ2UoKTtcbiAgICBjb25zdCB7IHNpdGVQYXRoLCBwYXJ0aXRpb24sIHJlZ2lvbiB9ID0gcHJlcGFyZShhcmdzLCBvcHRzKTtcbiAgICBjb25zdCBpc1VzaW5nVml0ZSA9IGNoZWNrSXNVc2luZ1ZpdGUoKTtcbiAgICBjb25zdCB7IGFjY2VzcywgYnVja2V0IH0gPSBjcmVhdGVCdWNrZXQocGFyZW50LCBuYW1lLCBwYXJ0aXRpb24sIGFyZ3MpO1xuICAgIGNvbnN0IG91dHB1dFBhdGggPSBidWlsZEFwcChuYW1lLCBhcmdzLCBzaXRlUGF0aCk7XG4gICAgY29uc3QgeyBidWlsZE1ldGEgfSA9IGxvYWRCdWlsZE91dHB1dCgpO1xuICAgIGNvbnN0IHBsYW4gPSBidWlsZFBsYW4oKTtcbiAgICBjb25zdCB7IGRpc3RyaWJ1dGlvbiwgc3NyRnVuY3Rpb25zLCBlZGdlRnVuY3Rpb25zIH0gPVxuICAgICAgY3JlYXRlU2VydmVyc0FuZERpc3RyaWJ1dGlvbihcbiAgICAgICAgcGFyZW50LFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmdzLFxuICAgICAgICBvdXRwdXRQYXRoLFxuICAgICAgICBhY2Nlc3MsXG4gICAgICAgIGJ1Y2tldCxcbiAgICAgICAgcGxhbixcbiAgICAgICk7XG4gICAgY29uc3Qgc2VydmVyRnVuY3Rpb24gPSBzc3JGdW5jdGlvbnNbMF0gPz8gT2JqZWN0LnZhbHVlcyhlZGdlRnVuY3Rpb25zKVswXTtcblxuICAgIHRoaXMuYXNzZXRzID0gYnVja2V0O1xuICAgIHRoaXMuY2RuID0gZGlzdHJpYnV0aW9uO1xuICAgIHRoaXMuc2VydmVyID0gc2VydmVyRnVuY3Rpb247XG4gICAgaWYgKCEkZGV2KSB7XG4gICAgICBIaW50LnJlZ2lzdGVyKFxuICAgICAgICB0aGlzLnVybixcbiAgICAgICAgYWxsKFt0aGlzLmNkbi5kb21haW5VcmwsIHRoaXMuY2RuLnVybF0pLmFwcGx5KFxuICAgICAgICAgIChbZG9tYWluVXJsLCB1cmxdKSA9PiBkb21haW5VcmwgPz8gdXJsLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5yZWdpc3Rlck91dHB1dHMoe1xuICAgICAgX21ldGFkYXRhOiB7XG4gICAgICAgIG1vZGU6ICRkZXYgPyBcInBsYWNlaG9sZGVyXCIgOiBcImRlcGxveWVkXCIsXG4gICAgICAgIHBhdGg6IHNpdGVQYXRoLFxuICAgICAgICB1cmw6IGRpc3RyaWJ1dGlvbi5hcHBseSgoZCkgPT4gZC5kb21haW5VcmwgPz8gZC51cmwpLFxuICAgICAgICBlZGdlLFxuICAgICAgICBzZXJ2ZXI6IHNlcnZlckZ1bmN0aW9uLmFybixcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVFZGdlKCkge1xuICAgICAgcmV0dXJuIG91dHB1dChhcmdzPy5lZGdlKS5hcHBseSgoZWRnZSkgPT4gZWRnZSA/PyBmYWxzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2hlY2tJc1VzaW5nVml0ZSgpIHtcbiAgICAgIHJldHVybiBzaXRlUGF0aC5hcHBseShcbiAgICAgICAgKHNpdGVQYXRoKSA9PlxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKHNpdGVQYXRoLCBcInZpdGUuY29uZmlnLnRzXCIpKSB8fFxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKHNpdGVQYXRoLCBcInZpdGUuY29uZmlnLmpzXCIpKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZEJ1aWxkT3V0cHV0KCkge1xuICAgICAgY29uc3QgY2FjaGUgPSBuZXcgQ2FjaGUoXG4gICAgICAgIGAke25hbWV9QnVpbGRPdXRwdXRgLFxuICAgICAgICB7XG4gICAgICAgICAgZGF0YTogJGRldiA/IGxvYWRCdWlsZE1ldGFkYXRhUGxhY2Vob2xkZXIoKSA6IGxvYWRCdWlsZE1ldGFkYXRhKCksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwYXJlbnQsXG4gICAgICAgICAgaWdub3JlQ2hhbmdlczogJGRldiA/IFtcIipcIl0gOiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBidWlsZE1ldGE6IGNhY2hlLmRhdGEgYXMgUmV0dXJuVHlwZTx0eXBlb2YgbG9hZEJ1aWxkTWV0YWRhdGE+LFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkQnVpbGRNZXRhZGF0YSgpIHtcbiAgICAgIHJldHVybiBhbGwoW291dHB1dFBhdGgsIGlzVXNpbmdWaXRlXSkuYXBwbHkoXG4gICAgICAgIChbb3V0cHV0UGF0aCwgaXNVc2luZ1ZpdGVdKSA9PiB7XG4gICAgICAgICAgLy8gVGhlIHBhdGggZm9yIGFsbCBmaWxlcyB0aGF0IG5lZWQgdG8gYmUgaW4gdGhlIFwiL1wiIGRpcmVjdG9yeSAoc3RhdGljIGFzc2V0cylcbiAgICAgICAgICAvLyBpcyBkaWZmZXJlbnQgd2hlbiB1c2luZyBWaXRlLiBUaGVzZSB3aWxsIGJlIGxvY2F0ZWQgaW4gdGhlIFwiYnVpbGQvY2xpZW50XCJcbiAgICAgICAgICAvLyBwYXRoIG9mIHRoZSBvdXRwdXQuIEl0IHdpbGwgYmUgdGhlIFwicHVibGljXCIgZm9sZGVyIHdoZW4gdXNpbmcgcmVtaXggY29uZmlnLlxuICAgICAgICAgIGNvbnN0IGFzc2V0c1BhdGggPSBpc1VzaW5nVml0ZVxuICAgICAgICAgICAgPyBwYXRoLmpvaW4oXCJidWlsZFwiLCBcImNsaWVudFwiKVxuICAgICAgICAgICAgOiBcInB1YmxpY1wiO1xuICAgICAgICAgIGNvbnN0IGFzc2V0c1ZlcnNpb25lZFN1YkRpciA9IGlzVXNpbmdWaXRlID8gdW5kZWZpbmVkIDogXCJidWlsZFwiO1xuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFzc2V0c1BhdGgsXG4gICAgICAgICAgICBhc3NldHNWZXJzaW9uZWRTdWJEaXIsXG4gICAgICAgICAgICAvLyBjcmVhdGUgMSBiZWhhdmlvdXIgZm9yIGVhY2ggdG9wIGxldmVsIGFzc2V0IGZpbGUvZm9sZGVyXG4gICAgICAgICAgICBzdGF0aWNSb3V0ZXM6IGZzXG4gICAgICAgICAgICAgIC5yZWFkZGlyU3luYyhwYXRoLmpvaW4ob3V0cHV0UGF0aCwgYXNzZXRzUGF0aCkpXG4gICAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+XG4gICAgICAgICAgICAgICAgZnNcbiAgICAgICAgICAgICAgICAgIC5zdGF0U3luYyhwYXRoLmpvaW4ob3V0cHV0UGF0aCwgYXNzZXRzUGF0aCwgaXRlbSkpXG4gICAgICAgICAgICAgICAgICAuaXNEaXJlY3RvcnkoKVxuICAgICAgICAgICAgICAgICAgPyBgJHtpdGVtfS8qYFxuICAgICAgICAgICAgICAgICAgOiBpdGVtLFxuICAgICAgICAgICAgICApLFxuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvYWRCdWlsZE1ldGFkYXRhUGxhY2Vob2xkZXIoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhc3NldHNQYXRoOiBcInBsYWNlaG9sZGVyXCIsXG4gICAgICAgIGFzc2V0c1ZlcnNpb25lZFN1YkRpcjogdW5kZWZpbmVkLFxuICAgICAgICBzdGF0aWNSb3V0ZXM6IFtcImFzc2V0cy8qXCIsIFwiZmF2aWNvbi5pY29cIl0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkUGxhbigpIHtcbiAgICAgIHJldHVybiBhbGwoW2lzVXNpbmdWaXRlLCBvdXRwdXRQYXRoLCBlZGdlLCBidWlsZE1ldGFdKS5hcHBseShcbiAgICAgICAgKFtpc1VzaW5nVml0ZSwgb3V0cHV0UGF0aCwgZWRnZSwgYnVpbGRNZXRhXSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHNlcnZlckNvbmZpZyA9IGNyZWF0ZVNlcnZlckxhbWJkYUJ1bmRsZShcbiAgICAgICAgICAgIGlzVXNpbmdWaXRlLFxuICAgICAgICAgICAgb3V0cHV0UGF0aCxcbiAgICAgICAgICAgIGVkZ2UgPyBcImVkZ2Utc2VydmVyLm1qc1wiIDogXCJyZWdpb25hbC1zZXJ2ZXIubWpzXCIsXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHJldHVybiB2YWxpZGF0ZVBsYW4oe1xuICAgICAgICAgICAgZWRnZSxcbiAgICAgICAgICAgIGNsb3VkRnJvbnRGdW5jdGlvbnM6IHtcbiAgICAgICAgICAgICAgc2VydmVyQ2ZGdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgIGluamVjdGlvbnM6IFt1c2VDbG91ZEZyb250RnVuY3Rpb25Ib3N0SGVhZGVySW5qZWN0aW9uKCldLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBzdGF0aWNDZkZ1bmN0aW9uOiB7XG4gICAgICAgICAgICAgICAgaW5qZWN0aW9uczogW1xuICAgICAgICAgICAgICAgICAgLy8gTm90ZTogV2hlbiB1c2luZyBsaWJyYXJpZXMgbGlrZSByZW1peC1mbGF0LXJvdXRlcyB0aGUgZmlsZSBjYW5cbiAgICAgICAgICAgICAgICAgIC8vIGNvbnRhaW5zIHNwZWNpYWwgY2hhcmFjdGVycyBsaWtlIFwiK1wiLiBJdCBuZWVkcyB0byBiZSBlbmNvZGVkLlxuICAgICAgICAgICAgICAgICAgYHJlcXVlc3QudXJpID0gcmVxdWVzdC51cmkuc3BsaXQoJy8nKS5tYXAoZW5jb2RlVVJJQ29tcG9uZW50KS5qb2luKCcvJyk7YCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVkZ2VGdW5jdGlvbnM6IGVkZ2VcbiAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICBzZXJ2ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb246IHNlcnZlckNvbmZpZyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG9yaWdpbnM6IHtcbiAgICAgICAgICAgICAgLi4uKGVkZ2VcbiAgICAgICAgICAgICAgICA/IHt9XG4gICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlcjoge1xuICAgICAgICAgICAgICAgICAgICAgIHNlcnZlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb246IHNlcnZlckNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIHMzOiB7XG4gICAgICAgICAgICAgICAgczM6IHtcbiAgICAgICAgICAgICAgICAgIGNvcHk6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGZyb206IGJ1aWxkTWV0YS5hc3NldHNQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgIHRvOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgIGNhY2hlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uZWRTdWJEaXI6IGJ1aWxkTWV0YS5hc3NldHNWZXJzaW9uZWRTdWJEaXIsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmVoYXZpb3JzOiBbXG4gICAgICAgICAgICAgIGVkZ2VcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVUeXBlOiBcInNlcnZlclwiLFxuICAgICAgICAgICAgICAgICAgICBjZkZ1bmN0aW9uOiBcInNlcnZlckNmRnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgZWRnZUZ1bmN0aW9uOiBcInNlcnZlclwiLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW46IFwiczNcIixcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVUeXBlOiBcInNlcnZlclwiLFxuICAgICAgICAgICAgICAgICAgICBjZkZ1bmN0aW9uOiBcInNlcnZlckNmRnVuY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBcInNlcnZlclwiLFxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgLi4uYnVpbGRNZXRhLnN0YXRpY1JvdXRlcy5tYXAoXG4gICAgICAgICAgICAgICAgKHJvdXRlKSA9PlxuICAgICAgICAgICAgICAgICAgKHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVUeXBlOiBcInN0YXRpY1wiLFxuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgY2ZGdW5jdGlvbjogXCJzdGF0aWNDZkZ1bmN0aW9uXCIsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogXCJzM1wiLFxuICAgICAgICAgICAgICAgICAgfSkgYXMgY29uc3QsXG4gICAgICAgICAgICAgICksXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTZXJ2ZXJMYW1iZGFCdW5kbGUoXG4gICAgICBpc1VzaW5nVml0ZTogYm9vbGVhbixcbiAgICAgIG91dHB1dFBhdGg6IHN0cmluZyxcbiAgICAgIHdyYXBwZXJGaWxlOiBzdHJpbmcsXG4gICAgKSB7XG4gICAgICAvLyBDcmVhdGUgYSBMYW1iZGFARWRnZSBoYW5kbGVyIGZvciB0aGUgUmVtaXggc2VydmVyIGJ1bmRsZS5cbiAgICAgIC8vXG4gICAgICAvLyBOb3RlOiBSZW1peCBkb2VzIHBlcmZvcm0gdGhlaXIgb3duIGludGVybmFsIEVTQnVpbGQgcHJvY2VzcywgYnV0IGl0XG4gICAgICAvLyBkb2Vzbid0IGJ1bmRsZSAzcmQgcGFydHkgZGVwZW5kZW5jaWVzIGJ5IGRlZmF1bHQuIEluIHRoZSBpbnRlcmVzdCBvZlxuICAgICAgLy8ga2VlcGluZyBkZXBsb3ltZW50cyBzZWFtbGVzcyBmb3IgdXNlcnMgd2Ugd2lsbCBjcmVhdGUgYSBzZXJ2ZXIgYnVuZGxlXG4gICAgICAvLyB3aXRoIGFsbCBkZXBlbmRlbmNpZXMgaW5jbHVkZWQuIFdlIHdpbGwgc3RpbGwgbmVlZCB0byBjb25zaWRlciBob3cgdG9cbiAgICAgIC8vIGFkZHJlc3MgYW55IG5lZWQgZm9yIGV4dGVybmFsIGRlcGVuZGVuY2llcywgYWx0aG91Z2ggSSB0aGluayB3ZSBzaG91bGRcbiAgICAgIC8vIHBvc3NpYmx5IGNvbnNpZGVyIHRoaXMgYXQgYSBsYXRlciBkYXRlLlxuXG4gICAgICAvLyBJbiB0aGlzIHBhdGggd2UgYXJlIGFzc3VtaW5nIHRoYXQgdGhlIFJlbWl4IGJ1aWxkIG9ubHkgb3V0cHV0cyB0aGVcbiAgICAgIC8vIFwiY29yZSBzZXJ2ZXIgYnVpbGRcIi4gV2UgY2FuIHNhZmVseSBhc3N1bWUgdGhpcyBhcyB3ZSBoYXZlIGd1YXJkZWQgdGhlXG4gICAgICAvLyByZW1peC5jb25maWcuanMgdG8gZW5zdXJlIGl0IG1hdGNoZXMgb3VyIGV4cGVjdGF0aW9ucyBmb3IgdGhlIGJ1aWxkXG4gICAgICAvLyBjb25maWd1cmF0aW9uLlxuICAgICAgLy8gV2UgbmVlZCB0byBlbnN1cmUgdGhhdCB0aGUgXCJjb3JlIHNlcnZlciBidWlsZFwiIGlzIHdyYXBwZWQgd2l0aCBhblxuICAgICAgLy8gYXBwcm9wcmlhdGUgTGFtYmRhQEVkZ2UgaGFuZGxlci4gV2Ugd2lsbCB1dGlsaXNlIGFuIGludGVybmFsIGFzc2V0XG4gICAgICAvLyB0ZW1wbGF0ZSB0byBjcmVhdGUgdGhpcyB3cmFwcGVyIHdpdGhpbiB0aGUgXCJjb3JlIHNlcnZlciBidWlsZFwiIG91dHB1dFxuICAgICAgLy8gZGlyZWN0b3J5LlxuXG4gICAgICAvLyBFbnN1cmUgYnVpbGQgZGlyZWN0b3J5IGV4aXN0c1xuICAgICAgY29uc3QgYnVpbGRQYXRoID0gcGF0aC5qb2luKG91dHB1dFBhdGgsIFwiYnVpbGRcIik7XG4gICAgICBmcy5ta2RpclN5bmMoYnVpbGRQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcblxuICAgICAgLy8gQ29weSB0aGUgc2VydmVyIGxhbWJkYSBoYW5kbGVyIGFuZCBwcmUtYXBwZW5kIHRoZSBidWlsZCBpbmplY3Rpb24gYmFzZWRcbiAgICAgIC8vIG9uIHRoZSBjb25maWcgZmlsZSB1c2VkLlxuICAgICAgY29uc3QgY29udGVudCA9IFtcbiAgICAgICAgLy8gV2hlbiB1c2luZyBWaXRlIGNvbmZpZywgdGhlIG91dHB1dCBidWlsZCB3aWxsIGJlIFwic2VydmVyL2luZGV4LmpzXCJcbiAgICAgICAgLy8gYW5kIHdoZW4gdXNpbmcgUmVtaXggY29uZmlnIGl0IHdpbGwgYmUgYHNlcnZlci5qc2AuXG4gICAgICAgIGAvLyBJbXBvcnQgdGhlIHNlcnZlciBidWlsZCB0aGF0IHdhcyBwcm9kdWNlZCBieSAncmVtaXggYnVpbGQnYCxcbiAgICAgICAgaXNVc2luZ1ZpdGVcbiAgICAgICAgICA/IGBpbXBvcnQgKiBhcyByZW1peFNlcnZlckJ1aWxkIGZyb20gXCIuL3NlcnZlci9pbmRleC5qc1wiO2BcbiAgICAgICAgICA6IGBpbXBvcnQgKiBhcyByZW1peFNlcnZlckJ1aWxkIGZyb20gXCIuL2luZGV4LmpzXCI7YCxcbiAgICAgICAgYGAsXG4gICAgICAgIGZzLnJlYWRGaWxlU3luYyhcbiAgICAgICAgICBwYXRoLmpvaW4oXG4gICAgICAgICAgICAkY2xpLnBhdGhzLnBsYXRmb3JtLFxuICAgICAgICAgICAgXCJmdW5jdGlvbnNcIixcbiAgICAgICAgICAgIFwicmVtaXgtc2VydmVyXCIsXG4gICAgICAgICAgICB3cmFwcGVyRmlsZSxcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICAgXS5qb2luKFwiXFxuXCIpO1xuICAgICAgZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4oYnVpbGRQYXRoLCBcInNlcnZlci5tanNcIiksIGNvbnRlbnQpO1xuXG4gICAgICAvLyBDb3B5IHRoZSBSZW1peCBwb2x5ZmlsIHRvIHRoZSBzZXJ2ZXIgYnVpbGQgZGlyZWN0b3J5XG4gICAgICAvL1xuICAgICAgLy8gTm90ZTogV2UgbmVlZCB0byBlbnN1cmUgdGhhdCB0aGUgcG9seWZpbGxzIGFyZSBpbmplY3RlZCBhYm92ZSBvdGhlciBjb2RlIHRoYXRcbiAgICAgIC8vIHdpbGwgZGVwZW5kIG9uIHRoZW0gd2hlbiBub3QgdXNpbmcgVml0ZS4gSW1wb3J0aW5nIHRoZW0gd2l0aGluIHRoZSB0b3Agb2YgdGhlXG4gICAgICAvLyBsYW1iZGEgY29kZSBkb2Vzbid0IGFwcGVhciB0byBndWFyYW50ZWUgdGhpcywgd2UgdGhlcmVmb3JlIGxldmVyYWdlIEVTQlVpbGQnc1xuICAgICAgLy8gYGluamVjdGAgb3B0aW9uIHRvIGVuc3VyZSB0aGF0IHRoZSBwb2x5ZmlsbHMgYXJlIGluamVjdGVkIGF0IHRoZSB0b3Agb2ZcbiAgICAgIC8vIHRoZSBidW5kbGUuXG4gICAgICBjb25zdCBwb2x5ZmlsbERlc3QgPSBwYXRoLmpvaW4oYnVpbGRQYXRoLCBcInBvbHlmaWxsLm1qc1wiKTtcbiAgICAgIGZzLmNvcHlGaWxlU3luYyhcbiAgICAgICAgcGF0aC5qb2luKFxuICAgICAgICAgICRjbGkucGF0aHMucGxhdGZvcm0sXG4gICAgICAgICAgXCJmdW5jdGlvbnNcIixcbiAgICAgICAgICBcInJlbWl4LXNlcnZlclwiLFxuICAgICAgICAgIFwicG9seWZpbGwubWpzXCIsXG4gICAgICAgICksXG4gICAgICAgIHBvbHlmaWxsRGVzdCxcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGhhbmRsZXI6IHBhdGguam9pbihidWlsZFBhdGgsIFwic2VydmVyLmhhbmRsZXJcIiksXG4gICAgICAgIG5vZGVqczoge1xuICAgICAgICAgIGVzYnVpbGQ6IHtcbiAgICAgICAgICAgIGluamVjdDogW3BhdGgucmVzb2x2ZShwb2x5ZmlsbERlc3QpXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIFVSTCBvZiB0aGUgUmVtaXggYXBwLlxuICAgKlxuICAgKiBJZiB0aGUgYGRvbWFpbmAgaXMgc2V0LCB0aGlzIGlzIHRoZSBVUkwgd2l0aCB0aGUgY3VzdG9tIGRvbWFpbi5cbiAgICogT3RoZXJ3aXNlLCBpdCdzIHRoZSBhdXRvZ2VuZXJhdGVkIENsb3VkRnJvbnQgVVJMLlxuICAgKi9cbiAgcHVibGljIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIGFsbChbdGhpcy5jZG4uZG9tYWluVXJsLCB0aGlzLmNkbi51cmxdKS5hcHBseShcbiAgICAgIChbZG9tYWluVXJsLCB1cmxdKSA9PiBkb21haW5VcmwgPz8gdXJsLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHVuZGVybHlpbmcgW3Jlc291cmNlc10oL2RvY3MvY29tcG9uZW50cy8jbm9kZXMpIHRoaXMgY29tcG9uZW50IGNyZWF0ZXMuXG4gICAqL1xuICBwdWJsaWMgZ2V0IG5vZGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBV1MgTGFtYmRhIHNlcnZlciBmdW5jdGlvbiB0aGF0IHJlbmRlcnMgdGhlIHNpdGUuXG4gICAgICAgKi9cbiAgICAgIHNlcnZlcjogdGhpcy5zZXJ2ZXIgYXMgdW5rbm93biBhcyBGdW5jdGlvbixcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFtYXpvbiBTMyBCdWNrZXQgdGhhdCBzdG9yZXMgdGhlIGFzc2V0cy5cbiAgICAgICAqL1xuICAgICAgYXNzZXRzOiB0aGlzLmFzc2V0cyxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgZ2V0U1NUTGluaygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG4iLCAiZXhwb3J0ICogZnJvbSBcIi4vYXBpZ2F0ZXdheXYyLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9hdXRoLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9idWNrZXQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2Nyb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2R5bmFtby5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZnVuY3Rpb24uanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3Bvc3RncmVzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9xdWV1ZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcm91dGVyLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zbnMtdG9waWMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3N0YXRpYy1zaXRlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi92ZWN0b3IuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NvbGlkLXN0YXJ0LmpzXCI7XG5cbmV4cG9ydCAqIGZyb20gXCIuL2FzdHJvLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9uZXh0anMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3JlbWl4LmpzXCI7XG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zIH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgKiBhcyBjbG91ZGZsYXJlIGZyb20gXCJAcHVsdW1pL2Nsb3VkZmxhcmVcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgVHJhbnNmb3JtLCB0cmFuc2Zvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnVja2V0QXJncyB7XG4gIC8qKlxuICAgKiBbVHJhbnNmb3JtXSgvZG9jcy9jb21wb25lbnRzI3RyYW5zZm9ybS8pIGhvdyB0aGlzIGNvbXBvbmVudCBjcmVhdGVzIGl0cyB1bmRlcmx5aW5nXG4gICAqIHJlc291cmNlcy5cbiAgICovXG4gIHRyYW5zZm9ybT86IHtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gdGhlIFIyIEJ1Y2tldCByZXNvdXJjZS5cbiAgICAgKi9cbiAgICBidWNrZXQ/OiBUcmFuc2Zvcm08Y2xvdWRmbGFyZS5SMkJ1Y2tldEFyZ3M+O1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBgQnVja2V0YCBjb21wb25lbnQgbGV0cyB5b3UgYWRkIGFuIFtDbG91ZGZsYXJlIFIyIEJ1Y2tldF0oaHR0cHM6Ly9kZXZlbG9wZXJzLmNsb3VkZmxhcmUuY29tL3IyLykgdG9cbiAqIHlvdXIgYXBwLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogIyMjIyBNaW5pbWFsIGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogY29uc3QgYnVja2V0ID0gbmV3IHNzdC5jbG91ZGZsYXJlLkJ1Y2tldChcIk15QnVja2V0XCIpO1xuICogYGBgXG4gKlxuICogIyMjIyBQdWJsaWMgcmVhZCBhY2Nlc3NcbiAqXG4gKiBFbmFibGUgYHB1YmxpY2AgcmVhZCBhY2Nlc3MgZm9yIGFsbCB0aGUgZmlsZXMgaW4gdGhlIGJ1Y2tldC4gVXNlZnVsIGZvciBob3N0aW5nIHB1YmxpYyBmaWxlcy5cbiAqXG4gKiBgYGB0c1xuICogbmV3IHNzdC5hd3MuQnVja2V0KFwiTXlCdWNrZXRcIiwge1xuICogICBwdWJsaWM6IHRydWVcbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBBZGQgYSBzdWJzY3JpYmVyXG4gKlxuICogYGBgdHNcbiAqIGJ1Y2tldC5zdWJzY3JpYmUoXCJzcmMvc3Vic2NyaWJlci5oYW5kbGVyXCIpO1xuICogYGBgXG4gKlxuICogIyMjIyBMaW5rIHRoZSBidWNrZXQgdG8gYSByZXNvdXJjZVxuICpcbiAqIFlvdSBjYW4gbGluayB0aGUgYnVja2V0IHRvIG90aGVyIHJlc291cmNlcywgbGlrZSBhIGZ1bmN0aW9uIG9yIHlvdXIgTmV4dC5qcyBhcHAuXG4gKlxuICogYGBgdHNcbiAqIG5ldyBzc3QuYXdzLk5leHRqcyhcIk15V2ViXCIsIHtcbiAqICAgbGluazogW2J1Y2tldF1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogT25jZSBsaW5rZWQsIHlvdSBjYW4gZ2VuZXJhdGUgYSBwcmUtc2lnbmVkIFVSTCB0byB1cGxvYWQgZmlsZXMgaW4geW91ciBhcHAuXG4gKlxuICogYGBgdHMgdGl0bGU9XCJhcHAvcGFnZS50c3hcIiB7MSw3fVxuICogaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tIFwic3N0XCI7XG4gKiBpbXBvcnQgeyBnZXRTaWduZWRVcmwgfSBmcm9tIFwiQGF3cy1zZGsvczMtcmVxdWVzdC1wcmVzaWduZXJcIjtcbiAqIGltcG9ydCB7IFMzQ2xpZW50LCBQdXRPYmplY3RDb21tYW5kIH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1zM1wiO1xuICpcbiAqIGNvbnN0IGNvbW1hbmQgPSBuZXcgUHV0T2JqZWN0Q29tbWFuZCh7XG4gKiAgICBLZXk6IFwiZmlsZS50eHRcIixcbiAqICAgIEJ1Y2tldDogUmVzb3VyY2UuTXlCdWNrZXQubmFtZVxuICogIH0pO1xuICogIGF3YWl0IGdldFNpZ25lZFVybChuZXcgUzNDbGllbnQoe30pLCBjb21tYW5kKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgQnVja2V0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgcHJpdmF0ZSBidWNrZXQ6IGNsb3VkZmxhcmUuUjJCdWNrZXQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M/OiBCdWNrZXRBcmdzLFxuICAgIG9wdHM/OiBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmNsb3VkZmxhcmU6QnVja2V0XCIsIG5hbWUsIGFyZ3MsIG9wdHMpO1xuXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcztcblxuICAgIGNvbnN0IGJ1Y2tldCA9IGNyZWF0ZUJ1Y2tldCgpO1xuXG4gICAgdGhpcy5idWNrZXQgPSBidWNrZXQ7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVCdWNrZXQoKSB7XG4gICAgICByZXR1cm4gbmV3IGNsb3VkZmxhcmUuUjJCdWNrZXQoXG4gICAgICAgIGAke25hbWV9QnVja2V0YCxcbiAgICAgICAgdHJhbnNmb3JtKGFyZ3M/LnRyYW5zZm9ybT8uYnVja2V0LCB7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBhY2NvdW50SWQ6IHNzdC5jbG91ZGZsYXJlLkRFRkFVTFRfQUNDT1VOVF9JRCxcbiAgICAgICAgfSksXG4gICAgICAgIHsgcGFyZW50IH0sXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZ2VuZXJhdGVkIG5hbWUgb2YgdGhlIFIyIEJ1Y2tldC5cbiAgICovXG4gIHB1YmxpYyBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5idWNrZXQubmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdW5kZXJseWluZyBbcmVzb3VyY2VzXSgvZG9jcy9jb21wb25lbnRzLyNub2RlcykgdGhpcyBjb21wb25lbnQgY3JlYXRlcy5cbiAgICovXG4gIHB1YmxpYyBnZXQgbm9kZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIENsb3VkZmxhcmUgUjIgQnVja2V0LlxuICAgICAgICovXG4gICAgICBidWNrZXQ6IHRoaXMuYnVja2V0LFxuICAgIH07XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMgfSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCAqIGFzIGNsb3VkZmxhcmUgZnJvbSBcIkBwdWx1bWkvY2xvdWRmbGFyZVwiO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBUcmFuc2Zvcm0sIHRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBLdkFyZ3Mge1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0vKSBob3cgdGhpcyBjb21wb25lbnQgY3JlYXRlcyBpdHMgdW5kZXJseWluZ1xuICAgKiByZXNvdXJjZXMuXG4gICAqL1xuICB0cmFuc2Zvcm0/OiB7XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoZSBSMiBLViBuYW1lc3BhY2UgcmVzb3VyY2UuXG4gICAgICovXG4gICAgbmFtZXNwYWNlPzogVHJhbnNmb3JtPGNsb3VkZmxhcmUuV29ya2Vyc0t2TmFtZXNwYWNlQXJncz47XG4gIH07XG59XG5cbi8qKlxuICogVGhlIGBLdmAgY29tcG9uZW50IGxldHMgeW91IGFkZCBhIFtDbG91ZGZsYXJlIEtWIHN0b3JhZ2UgbmFtZXNwYWNlXShodHRwczovL2RldmVsb3BlcnMuY2xvdWRmbGFyZS5jb20va3YvKSB0b1xuICogeW91ciBhcHAuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAjIyMjIE1pbmltYWwgZXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBzdG9yYWdlID0gbmV3IHNzdC5jbG91ZGZsYXJlLkt2KFwiTXlTdG9yYWdlXCIpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBLdiBleHRlbmRzIENvbXBvbmVudCB7XG4gIHByaXZhdGUgbmFtZXNwYWNlOiBjbG91ZGZsYXJlLldvcmtlcnNLdk5hbWVzcGFjZTtcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGFyZ3M/OiBLdkFyZ3MsIG9wdHM/OiBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMpIHtcbiAgICBzdXBlcihcInNzdDpjbG91ZGZsYXJlOkt2XCIsIG5hbWUsIGFyZ3MsIG9wdHMpO1xuXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcztcblxuICAgIGNvbnN0IG5hbWVzcGFjZSA9IGNyZWF0ZU5hbWVzcGFjZSgpO1xuXG4gICAgdGhpcy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVOYW1lc3BhY2UoKSB7XG4gICAgICByZXR1cm4gbmV3IGNsb3VkZmxhcmUuV29ya2Vyc0t2TmFtZXNwYWNlKFxuICAgICAgICBgJHtuYW1lfU5hbWVzcGFjZWAsXG4gICAgICAgIHRyYW5zZm9ybShhcmdzPy50cmFuc2Zvcm0/Lm5hbWVzcGFjZSwge1xuICAgICAgICAgIHRpdGxlOiBuYW1lLFxuICAgICAgICAgIGFjY291bnRJZDogc3N0LmNsb3VkZmxhcmUuREVGQVVMVF9BQ0NPVU5UX0lELFxuICAgICAgICB9KSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBnZW5lcmF0ZWQgaWQgb2YgdGhlIEtWIG5hbWVzcGFjZS5cbiAgICovXG4gIHB1YmxpYyBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZXNwYWNlLmlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB1bmRlcmx5aW5nIFtyZXNvdXJjZXNdKC9kb2NzL2NvbXBvbmVudHMvI25vZGVzKSB0aGlzIGNvbXBvbmVudCBjcmVhdGVzLlxuICAgKi9cbiAgcHVibGljIGdldCBub2RlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgQ2xvdWRmbGFyZSBLViBuYW1lc3BhY2UuXG4gICAgICAgKi9cbiAgICAgIG5hbWVzcGFjZTogdGhpcy5uYW1lc3BhY2UsXG4gICAgfTtcbiAgfVxufVxuIiwgIi8vIE1vcmUgZXhhbXBsZXMgaGVyZSBvbiBob3cgdG8gcGFyc2UgcmVzcG9uc2VzIGZyb20gQ2xvdWRmbGFyZSBBUElcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9jbG91ZGZsYXJlL3dvcmtlcnMtc2RrL2Jsb2IvbWFpbi9wYWNrYWdlcy93cmFuZ2xlci9zcmMvcm91dGVzLnRzXG5cbmNvbnN0IENMT1VERkxBUkVfQVBJX0JBU0VfVVJMID1cbiAgcHJvY2Vzcy5lbnYuQ0xPVURGTEFSRV9BUElfQkFTRV9VUkwgPz8gXCJodHRwczovL2FwaS5jbG91ZGZsYXJlLmNvbS9jbGllbnQvdjRcIjtcbmNvbnN0IENMT1VERkxBUkVfQVBJX1RPS0VOID0gcHJvY2Vzcy5lbnYuQ0xPVURGTEFSRV9BUElfVE9LRU47XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmV0Y2hFcnJvciB7XG4gIGNvZGU6IG51bWJlcjtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBlcnJvcl9jaGFpbj86IEZldGNoRXJyb3JbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGZXRjaFJlc3VsdDxSZXN1bHRUeXBlPiB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIHJlc3VsdDogUmVzdWx0VHlwZTtcbiAgZXJyb3JzOiBGZXRjaEVycm9yW107XG4gIG1lc3NhZ2VzPzogc3RyaW5nW107XG4gIHJlc3VsdF9pbmZvPzoge1xuICAgIHBhZ2U6IG51bWJlcjtcbiAgICBwZXJfcGFnZTogbnVtYmVyO1xuICAgIGNvdW50OiBudW1iZXI7XG4gICAgdG90YWxfY291bnQ6IG51bWJlcjtcbiAgfTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNmRmV0Y2g8UmVzdWx0VHlwZT4oXG4gIHJlc291cmNlOiBzdHJpbmcsXG4gIGluaXQ6IFJlcXVlc3RJbml0ID0ge30sXG4pIHtcbiAgY29uc3QgcmV0ID0gYXdhaXQgZmV0Y2goYCR7Q0xPVURGTEFSRV9BUElfQkFTRV9VUkx9JHtyZXNvdXJjZX1gLCB7XG4gICAgLi4uaW5pdCxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Q0xPVURGTEFSRV9BUElfVE9LRU59YCxcbiAgICAgIC4uLmluaXQuaGVhZGVycyxcbiAgICB9LFxuICB9KTtcbiAgY29uc3QganNvbiA9IChhd2FpdCByZXQuanNvbigpKSBhcyBGZXRjaFJlc3VsdDxSZXN1bHRUeXBlPjtcbiAgLy8gaWUuXG4gIC8vIHtcbiAgLy8gICBcInJlc3VsdFwiOiB7XG4gIC8vICAgICBcInN1YmRvbWFpblwiOiBcIndhbmdmYW5qaWVcIlxuICAvLyAgIH0sXG4gIC8vICAgXCJzdWNjZXNzXCI6IHRydWUsXG4gIC8vICAgXCJlcnJvcnNcIjogW10sXG4gIC8vICAgXCJtZXNzYWdlc1wiOiBbXVxuICAvLyB9XG4gIGlmIChqc29uLnN1Y2Nlc3MpIHtcbiAgICByZXR1cm4ganNvbjtcbiAgfVxuXG4gIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKFxuICAgIGBBIHJlcXVlc3QgdG8gdGhlIENsb3VkZmxhcmUgQVBJICgke3Jlc291cmNlfSkgZmFpbGVkLmAsXG4gICk7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgYXR0YWNoIHRoZSBlcnJvcnMgdG8gdGhlIGVycm9yIG9iamVjdFxuICBlcnJvci5lcnJvcnMgPSBqc29uLmVycm9ycztcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBhdHRhY2ggdGhlIG1lc3NhZ2VzIHRvIHRoZSBlcnJvciBvYmplY3RcbiAgZXJyb3IubWVzc2FnZXMgPSBqc29uLm1lc3NhZ2VzO1xuICB0aHJvdyBlcnJvcjtcbn1cbiIsICJpbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgeyBDdXN0b21SZXNvdXJjZU9wdGlvbnMsIElucHV0LCBkeW5hbWljIH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgeyBjZkZldGNoIH0gZnJvbSBcIi4uL2hlbHBlcnMvZmV0Y2guanNcIjtcblxuaW50ZXJmYWNlIEt2RGF0YUVudHJ5IHtcbiAgc291cmNlOiBzdHJpbmc7XG4gIGtleTogc3RyaW5nO1xuICBoYXNoOiBzdHJpbmc7XG4gIGNvbnRlbnRUeXBlOiBzdHJpbmc7XG4gIGNhY2hlQ29udHJvbD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBLdkRhdGFJbnB1dHMge1xuICBhY2NvdW50SWQ6IElucHV0PElucHV0c1tcImFjY291bnRJZFwiXT47XG4gIG5hbWVzcGFjZUlkOiBJbnB1dDxJbnB1dHNbXCJuYW1lc3BhY2VJZFwiXT47XG4gIGVudHJpZXM6IElucHV0PElucHV0c1tcImVudHJpZXNcIl0+O1xufVxuXG5pbnRlcmZhY2UgSW5wdXRzIHtcbiAgYWNjb3VudElkOiBzdHJpbmc7XG4gIG5hbWVzcGFjZUlkOiBzdHJpbmc7XG4gIGVudHJpZXM6IEt2RGF0YUVudHJ5W107XG59XG5cbmNsYXNzIFByb3ZpZGVyIGltcGxlbWVudHMgZHluYW1pYy5SZXNvdXJjZVByb3ZpZGVyIHtcbiAgYXN5bmMgY3JlYXRlKGlucHV0czogSW5wdXRzKTogUHJvbWlzZTxkeW5hbWljLkNyZWF0ZVJlc3VsdD4ge1xuICAgIGF3YWl0IHRoaXMudXBsb2FkKGlucHV0cy5hY2NvdW50SWQsIGlucHV0cy5uYW1lc3BhY2VJZCwgaW5wdXRzLmVudHJpZXMsIFtdKTtcbiAgICByZXR1cm4geyBpZDogXCJkYXRhXCIgfTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZShcbiAgICBpZDogc3RyaW5nLFxuICAgIG9sZHM6IElucHV0cyxcbiAgICBuZXdzOiBJbnB1dHMsXG4gICk6IFByb21pc2U8ZHluYW1pYy5VcGRhdGVSZXN1bHQ+IHtcbiAgICBhd2FpdCB0aGlzLnVwbG9hZChcbiAgICAgIG5ld3MuYWNjb3VudElkLFxuICAgICAgbmV3cy5uYW1lc3BhY2VJZCxcbiAgICAgIG5ld3MuZW50cmllcyxcbiAgICAgIG5ld3MubmFtZXNwYWNlSWQgPT09IG9sZHMubmFtZXNwYWNlSWQgPyBvbGRzLmVudHJpZXMgOiBbXSxcbiAgICApO1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIGFzeW5jIHVwbG9hZChcbiAgICBhY2NvdW50SWQ6IHN0cmluZyxcbiAgICBuYW1lc3BhY2VJZDogc3RyaW5nLFxuICAgIGVudHJpZXM6IEt2RGF0YUVudHJ5W10sXG4gICAgb2xkRW50cmllczogS3ZEYXRhRW50cnlbXSxcbiAgKSB7XG4gICAgY29uc3Qgb2xkRmlsZXNNYXAgPSBuZXcgTWFwKG9sZEVudHJpZXMubWFwKChmKSA9PiBbZi5rZXksIGZdKSk7XG5cbiAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIGVudHJpZXNcbiAgICAgICAgLmZpbHRlcigoZW50cnkpID0+IHtcbiAgICAgICAgICBjb25zdCBvbGQgPSBvbGRGaWxlc01hcC5nZXQoZW50cnkua2V5KTtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgb2xkPy5oYXNoICE9PSBlbnRyeS5oYXNoIHx8XG4gICAgICAgICAgICBvbGQ/LmNvbnRlbnRUeXBlICE9PSBlbnRyeS5jb250ZW50VHlwZSB8fFxuICAgICAgICAgICAgb2xkPy5jYWNoZUNvbnRyb2wgIT09IGVudHJ5LmNhY2hlQ29udHJvbFxuICAgICAgICAgICk7XG4gICAgICAgIH0pXG4gICAgICAgIC5tYXAoYXN5bmMgKGVudHJ5KSA9PiB7XG4gICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXG4gICAgICAgICAgICBcIm1ldGFkYXRhXCIsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBlbnRyeS5jb250ZW50VHlwZSxcbiAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiBlbnRyeS5jYWNoZUNvbnRyb2wsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vZm9ybURhdGEuYXBwZW5kKFwidmFsdWVcIiwgZnMuY3JlYXRlUmVhZFN0cmVhbShlbnRyeS5zb3VyY2UpKTtcbiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJ2YWx1ZVwiLCBhd2FpdCBmcy5wcm9taXNlcy5yZWFkRmlsZShlbnRyeS5zb3VyY2UpKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgY2ZGZXRjaChcbiAgICAgICAgICAgICAgYC9hY2NvdW50cy8ke2FjY291bnRJZH0vc3RvcmFnZS9rdi9uYW1lc3BhY2VzLyR7bmFtZXNwYWNlSWR9L3ZhbHVlcy8ke2VudHJ5LmtleX1gLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEt2RGF0YSBleHRlbmRzIGR5bmFtaWMuUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGFyZ3M6IEt2RGF0YUlucHV0cywgb3B0cz86IEN1c3RvbVJlc291cmNlT3B0aW9ucykge1xuICAgIHN1cGVyKG5ldyBQcm92aWRlcigpLCBgJHtuYW1lfS5zc3QuY2xvdWRmbGFyZS5LdlBhaXJzYCwgYXJncywgb3B0cyk7XG4gIH1cbn1cbiIsICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGZzIGZyb20gXCJmcy9wcm9taXNlc1wiO1xuaW1wb3J0IGVzYnVpbGQsIHsgQnVpbGRPcHRpb25zLCBCdWlsZFJlc3VsdCB9IGZyb20gXCJlc2J1aWxkXCI7XG5pbXBvcnQgcHVsdW1pIGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0IHsgV29ya2VyQXJncyB9IGZyb20gXCIuLi9jb21wb25lbnRzL2Nsb3VkZmxhcmUvL3dvcmtlci5qc1wiO1xuaW1wb3J0IHsgZXhpc3RzQXN5bmMgfSBmcm9tIFwiLi4vdXRpbC9mcy5qc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVpbGQoXG4gIG5hbWU6IHN0cmluZyxcbiAgaW5wdXQ6IHB1bHVtaS5VbndyYXA8V29ya2VyQXJncz4gJiB7XG4gICAgbGlua3M/OiB7XG4gICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICBwcm9wZXJ0aWVzOiBhbnk7XG4gICAgfVtdO1xuICB9LFxuKSB7XG4gIGNvbnN0IG91dCA9IHBhdGguam9pbigkY2xpLnBhdGhzLndvcmssIFwiYXJ0aWZhY3RzXCIsIGAke25hbWV9LXNyY2ApO1xuICBhd2FpdCBmcy5ybShvdXQsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgYXdhaXQgZnMubWtkaXIob3V0LCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcblxuICBpZiAoIShhd2FpdCBleGlzdHNBc3luYyhpbnB1dC5oYW5kbGVyKSkpXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiZXJyb3JcIiBhcyBjb25zdCxcbiAgICAgIGVycm9yczogW2BDb3VsZCBub3QgZmluZCBmaWxlIGZvciBoYW5kbGVyIFwiJHtpbnB1dC5oYW5kbGVyfVwiYF0sXG4gICAgfTtcblxuICBjb25zdCBidWlsZCA9IGlucHV0LmJ1aWxkIHx8IHt9O1xuICBjb25zdCByZWxhdGl2ZSA9IHBhdGgucmVsYXRpdmUoJGNsaS5wYXRocy5yb290LCBwYXRoLnJlc29sdmUoaW5wdXQuaGFuZGxlcikpO1xuICBjb25zdCB0YXJnZXQgPSBwYXRoLmpvaW4oXG4gICAgb3V0LFxuICAgICFyZWxhdGl2ZS5zdGFydHNXaXRoKFwiLi5cIikgJiYgIXBhdGguaXNBYnNvbHV0ZShpbnB1dC5oYW5kbGVyISlcbiAgICAgID8gcmVsYXRpdmVcbiAgICAgIDogXCJcIixcbiAgICBcImluZGV4Lm1qc1wiLFxuICApO1xuXG4gIC8vIFJlYnVpbHQgdXNpbmcgZXhpc3RpbmcgZXNidWlsZCBjb250ZXh0XG4gIGNvbnN0IGxpbmtzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgIGlucHV0LmxpbmtzPy5tYXAoKGl0ZW0pID0+IFtpdGVtLm5hbWUsIGl0ZW0ucHJvcGVydGllc10pIHx8IFtdLFxuICApO1xuICBjb25zdCBvcHRpb25zOiBCdWlsZE9wdGlvbnMgPSB7XG4gICAgZW50cnlQb2ludHM6IFtwYXRoLnJlc29sdmUoaW5wdXQuaGFuZGxlcildLFxuICAgIHBsYXRmb3JtOiBcIm5vZGVcIixcbiAgICBsb2FkZXI6IGJ1aWxkLmxvYWRlcixcbiAgICBrZWVwTmFtZXM6IHRydWUsXG4gICAgYnVuZGxlOiB0cnVlLFxuICAgIGxvZ0xldmVsOiBcInNpbGVudFwiLFxuICAgIG1ldGFmaWxlOiB0cnVlLFxuICAgIGZvcm1hdDogXCJlc21cIixcbiAgICB0YXJnZXQ6IFwiZXNuZXh0XCIsXG4gICAgbWFpbkZpZWxkczogW1wibW9kdWxlXCIsIFwibWFpblwiXSxcbiAgICBvdXRmaWxlOiB0YXJnZXQsXG4gICAgc291cmNlbWFwOiBmYWxzZSxcbiAgICBtaW5pZnk6IGJ1aWxkLm1pbmlmeSxcbiAgICAuLi5idWlsZC5lc2J1aWxkLFxuICAgIGRlZmluZToge1xuICAgICAgJFNTVF9MSU5LUzogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgLi4uYnVpbGQuZXNidWlsZD8uZGVmaW5lLFxuICAgIH0sXG4gICAgYmFubmVyOiB7XG4gICAgICBqczogW1xuICAgICAgICBgZ2xvYmFsVGhpcy4kU1NUX0xJTktTID0gJHtKU09OLnN0cmluZ2lmeShsaW5rcyl9O2AsXG4gICAgICAgIGJ1aWxkLmJhbm5lciB8fCBcIlwiLFxuICAgICAgICBidWlsZC5lc2J1aWxkPy5iYW5uZXIgfHwgXCJcIixcbiAgICAgIF0uam9pbihcIlxcblwiKSxcbiAgICB9LFxuICB9O1xuICBjb25zdCBjdHggPSBhd2FpdCBlc2J1aWxkLmNvbnRleHQob3B0aW9ucyk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjdHgucmVidWlsZCgpO1xuXG4gICAgY3R4LmRpc3Bvc2UoKTtcblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcInN1Y2Nlc3NcIiBhcyBjb25zdCxcbiAgICAgIGhhbmRsZXI6IHRhcmdldCxcbiAgICB9O1xuICB9IGNhdGNoIChleDogYW55KSB7XG4gICAgY29uc3QgcmVzdWx0ID0gZXggYXMgQnVpbGRSZXN1bHQ7XG4gICAgaWYgKFwiZXJyb3JzXCIgaW4gcmVzdWx0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImVycm9yXCIgYXMgY29uc3QsXG4gICAgICAgIGVycm9yczogcmVzdWx0LmVycm9ycy5mbGF0TWFwKCh4KSA9PiBbXG4gICAgICAgICAgY29uc29sZS5sb2coeC50ZXh0KSxcbiAgICAgICAgICB4LmxvY2F0aW9uPy5maWxlIHx8IFwiXCIsXG4gICAgICAgICAgY29uc29sZS5sb2coeC5sb2NhdGlvbj8ubGluZSwgXCJcdTI1MDJcIiwgeC5sb2NhdGlvbj8ubGluZVRleHQpLFxuICAgICAgICBdKSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiZXJyb3JcIiBhcyBjb25zdCxcbiAgICAgIGVycm9yczogW2V4LnRvU3RyaW5nKCldLFxuICAgIH07XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBDdXN0b21SZXNvdXJjZU9wdGlvbnMsIElucHV0LCBPdXRwdXQsIGR5bmFtaWMgfSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCB7IGNmRmV0Y2ggfSBmcm9tIFwiLi4vaGVscGVycy9mZXRjaC5qc1wiO1xuXG5pbnRlcmZhY2UgSW5wdXRzIHtcbiAgYWNjb3VudElkOiBzdHJpbmc7XG4gIHNjcmlwdE5hbWU6IHN0cmluZztcbiAgZW5hYmxlZDogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIE91dHB1dHMge1xuICB1cmw6IHN0cmluZyB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXb3JrZXJVcmxJbnB1dHMge1xuICBhY2NvdW50SWQ6IElucHV0PElucHV0c1tcImFjY291bnRJZFwiXT47XG4gIHNjcmlwdE5hbWU6IElucHV0PElucHV0c1tcInNjcmlwdE5hbWVcIl0+O1xuICBlbmFibGVkOiBJbnB1dDxJbnB1dHNbXCJlbmFibGVkXCJdPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXb3JrZXJVcmwge1xuICB1cmw6IE91dHB1dDxPdXRwdXRzW1widXJsXCJdPjtcbn1cblxuY2xhc3MgUHJvdmlkZXIgaW1wbGVtZW50cyBkeW5hbWljLlJlc291cmNlUHJvdmlkZXIge1xuICBhc3luYyBjcmVhdGUoaW5wdXRzOiBJbnB1dHMpOiBQcm9taXNlPGR5bmFtaWMuQ3JlYXRlUmVzdWx0PiB7XG4gICAgY29uc3QgdXJsID0gYXdhaXQgdGhpcy5wcm9jZXNzKGlucHV0cyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBpbnB1dHMuc2NyaXB0TmFtZSxcbiAgICAgIG91dHM6IHVybCA/IHsgdXJsIH0gOiB7fSxcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgb2xkczogSW5wdXRzLFxuICAgIG5ld3M6IElucHV0cyxcbiAgKTogUHJvbWlzZTxkeW5hbWljLlVwZGF0ZVJlc3VsdD4ge1xuICAgIGNvbnN0IHVybCA9IGF3YWl0IHRoaXMucHJvY2VzcyhuZXdzKTtcbiAgICByZXR1cm4ge1xuICAgICAgb3V0czogdXJsID8geyB1cmwgfSA6IHt9LFxuICAgIH07XG4gIH1cblxuICBhc3luYyBwcm9jZXNzKGlucHV0czogSW5wdXRzKSB7XG4gICAgaWYgKGlucHV0cy5lbmFibGVkID09PSBmYWxzZSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRFbmFibGVkRmxhZyhpbnB1dHMpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBbdXNlclN1YmRvbWFpbl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLmdldFdvcmtlckRldlN1YmRvbWFpbihpbnB1dHMpLFxuICAgICAgdGhpcy5zZXRFbmFibGVkRmxhZyhpbnB1dHMpLFxuICAgIF0pO1xuICAgIHJldHVybiBgJHtpbnB1dHMuc2NyaXB0TmFtZX0uJHt1c2VyU3ViZG9tYWlufS53b3JrZXJzLmRldmA7XG4gIH1cblxuICBhc3luYyBnZXRXb3JrZXJEZXZTdWJkb21haW4oaW5wdXRzOiBJbnB1dHMpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmV0ID0gYXdhaXQgY2ZGZXRjaDx7IHN1YmRvbWFpbjogc3RyaW5nIH0+KFxuICAgICAgICBgL2FjY291bnRzLyR7aW5wdXRzLmFjY291bnRJZH0vd29ya2Vycy9zdWJkb21haW5gLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICAgIHJldHVybiByZXQucmVzdWx0LnN1YmRvbWFpbjtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRFbmFibGVkRmxhZyhpbnB1dHM6IElucHV0cykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjZkZldGNoKFxuICAgICAgICBgL2FjY291bnRzLyR7aW5wdXRzLmFjY291bnRJZH0vd29ya2Vycy9zY3JpcHRzLyR7aW5wdXRzLnNjcmlwdE5hbWV9L3N1YmRvbWFpbmAsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGVuYWJsZWQ6IGlucHV0cy5lbmFibGVkIH0pLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICAgIC8vIEFkZCBhIGRlbGF5IHdoZW4gdGhlIHN1YmRvbWFpbiBpcyBmaXJzdCBjcmVhdGVkLlxuICAgICAgLy8gVGhpcyBpcyB0byBwcmV2ZW50IGFuIGlzc3VlIHdoZXJlIGEgbmVnYXRpdmUgY2FjaGUtaGl0XG4gICAgICAvLyBjYXVzZXMgdGhlIHN1YmRvbWFpbiB0byBiZSB1bmF2YWlsYWJsZSBmb3IgMzAgc2Vjb25kcy5cbiAgICAgIC8vIFRoaXMgaXMgYSB0ZW1wb3JhcnkgbWVhc3VyZSB1bnRpbCB3ZSBmaXggdGhpcyBvbiB0aGUgZWRnZS5cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDMwMDApKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFdvcmtlclVybCBleHRlbmRzIGR5bmFtaWMuUmVzb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogV29ya2VyVXJsSW5wdXRzLFxuICAgIG9wdHM/OiBDdXN0b21SZXNvdXJjZU9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKFxuICAgICAgbmV3IFByb3ZpZGVyKCksXG4gICAgICBgJHtuYW1lfS5zc3QuY2xvdWRmbGFyZS5Xb3JrZXJVcmxgLFxuICAgICAgeyAuLi5hcmdzLCB1cmw6IHVuZGVmaW5lZCB9LFxuICAgICAgb3B0cyxcbiAgICApO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgQ3VzdG9tUmVzb3VyY2VPcHRpb25zLCBJbnB1dCwgT3V0cHV0LCBkeW5hbWljIH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgeyBjZkZldGNoIH0gZnJvbSBcIi4uL2hlbHBlcnMvZmV0Y2guanNcIjtcblxuaW50ZXJmYWNlIElucHV0cyB7XG4gIGFjY291bnRJZDogc3RyaW5nO1xuICBkb21haW46IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIE91dHB1dHMge1xuICB6b25lSWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBab25lTG9va3VwSW5wdXRzIHtcbiAgYWNjb3VudElkOiBJbnB1dDxJbnB1dHNbXCJhY2NvdW50SWRcIl0+O1xuICBkb21haW46IElucHV0PElucHV0c1tcImRvbWFpblwiXT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgWm9uZUxvb2t1cCB7XG4gIHpvbmVJZDogT3V0cHV0PE91dHB1dHNbXCJ6b25lSWRcIl0+O1xufVxuXG5jbGFzcyBQcm92aWRlciBpbXBsZW1lbnRzIGR5bmFtaWMuUmVzb3VyY2VQcm92aWRlciB7XG4gIGFzeW5jIGNyZWF0ZShpbnB1dHM6IElucHV0cyk6IFByb21pc2U8ZHluYW1pYy5DcmVhdGVSZXN1bHQ8T3V0cHV0cz4+IHtcbiAgICBjb25zdCB6b25lSWQgPSBhd2FpdCB0aGlzLmxvb2t1cChpbnB1dHMpO1xuICAgIHJldHVybiB7IGlkOiB6b25lSWQsIG91dHM6IHsgem9uZUlkIH0gfTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZShcbiAgICBpZDogc3RyaW5nLFxuICAgIG9sZHM6IElucHV0cyxcbiAgICBuZXdzOiBJbnB1dHMsXG4gICk6IFByb21pc2U8ZHluYW1pYy5VcGRhdGVSZXN1bHQ8T3V0cHV0cz4+IHtcbiAgICBjb25zdCB6b25lSWQgPSBhd2FpdCB0aGlzLmxvb2t1cChuZXdzKTtcbiAgICByZXR1cm4geyBvdXRzOiB7IHpvbmVJZCB9IH07XG4gIH1cblxuICBhc3luYyBsb29rdXAoaW5wdXRzOiBJbnB1dHMsIHBhZ2UgPSAxKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgcGVyX3BhZ2U6IFwiNTBcIixcbiAgICAgICAgXCJhY2NvdW50LmlkXCI6IGlucHV0cy5hY2NvdW50SWQsXG4gICAgICB9KS50b1N0cmluZygpO1xuICAgICAgY29uc3QgcmV0ID0gYXdhaXQgY2ZGZXRjaDx7IG5hbWU6IHN0cmluZzsgaWQ6IHN0cmluZyB9W10+KFxuICAgICAgICBgL3pvbmVzPyR7cXN9YCxcbiAgICAgICAgeyBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0gfSxcbiAgICAgICk7XG4gICAgICBjb25zdCB6b25lID0gcmV0LnJlc3VsdC5maW5kKCh6KSA9PiBpbnB1dHMuZG9tYWluLmVuZHNXaXRoKHoubmFtZSkpO1xuICAgICAgaWYgKHpvbmUpIHJldHVybiB6b25lLmlkO1xuXG4gICAgICBpZiAocmV0LnJlc3VsdC5sZW5ndGggPCByZXQucmVzdWx0X2luZm8hLnBlcl9wYWdlKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENvdWxkIG5vdCBmaW5kIGhvc3RlZCB6b25lIGZvciBkb21haW4gJHtpbnB1dHMuZG9tYWlufWAsXG4gICAgICAgICk7XG5cbiAgICAgIHJldHVybiB0aGlzLmxvb2t1cChpbnB1dHMsIHBhZ2UgKyAxKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFpvbmVMb29rdXAgZXh0ZW5kcyBkeW5hbWljLlJlc291cmNlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGFyZ3M6IFpvbmVMb29rdXBJbnB1dHMsXG4gICAgb3B0cz86IEN1c3RvbVJlc291cmNlT3B0aW9ucyxcbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICBuZXcgUHJvdmlkZXIoKSxcbiAgICAgIGAke25hbWV9LnNzdC5jbG91ZGZsYXJlLlpvbmVMb29rdXBgLFxuICAgICAgeyAuLi5hcmdzLCB6b25lSWQ6IHVuZGVmaW5lZCB9LFxuICAgICAgb3B0cyxcbiAgICApO1xuICB9XG59XG4iLCAiaW1wb3J0IGZzIGZyb20gXCJmcy9wcm9taXNlc1wiO1xuaW1wb3J0IHtcbiAgQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLFxuICBvdXRwdXQsXG4gIE91dHB1dCxcbiAgYWxsLFxuICBqc29uU3RyaW5naWZ5LFxuICBpbnRlcnBvbGF0ZSxcbn0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgKiBhcyBhd3MgZnJvbSBcIkBwdWx1bWkvYXdzXCI7XG5pbXBvcnQgKiBhcyBjZiBmcm9tIFwiQHB1bHVtaS9jbG91ZGZsYXJlXCI7XG5pbXBvcnQgdHlwZSB7IExvYWRlciwgQnVpbGRPcHRpb25zIH0gZnJvbSBcImVzYnVpbGRcIjtcbmltcG9ydCB7IGJ1aWxkIH0gZnJvbSBcIi4uLy4uL3J1bnRpbWUvY2xvdWRmbGFyZS5qc1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBUcmFuc2Zvcm0sIHRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRcIjtcbmltcG9ydCB7IFdvcmtlclVybCB9IGZyb20gXCIuL3Byb3ZpZGVycy93b3JrZXItdXJsLmpzXCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmsuanNcIjtcbmltcG9ydCB0eXBlIHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXQuanNcIjtcbmltcG9ydCB7IFpvbmVMb29rdXAgfSBmcm9tIFwiLi9wcm92aWRlcnMvem9uZS1sb29rdXAuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBXb3JrZXJBcmdzIHtcbiAgLyoqXG4gICAqIFBhdGggdG8gdGhlIGhhbmRsZXIgZmlsZSBmb3IgdGhlIHdvcmtlci5cbiAgICpcbiAgICogVGhlIGhhbmRsZXIgcGF0aCBpcyByZWxhdGl2ZSB0byB0aGUgcm9vdCB5b3VyIHJlcG8gb3IgdGhlIGBzc3QuY29uZmlnLnRzYC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGhhbmRsZXI6IFwicGFja2FnZXMvZnVuY3Rpb25zL3NyYy93b3JrZXIudHNcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgaGFuZGxlcjogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIEVuYWJsZSBhIGRlZGljYXRlZCBlbmRwb2ludCBmb3IgeW91ciBXb3JrZXIuXG4gICAqIEBkZWZhdWx0IGBmYWxzZWBcbiAgICovXG4gIHVybD86IElucHV0PGJvb2xlYW4+O1xuICAvKipcbiAgICogU2V0IGEgY3VzdG9tIGRvbWFpbiBmb3IgeW91ciBXb3JrZXIuIFN1cHBvcnRzIGRvbWFpbnMgaG9zdGVkIG9uIENsb3VkZmxhcmUuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIG1pZ3JhdGUgYW4gZXh0ZXJuYWxseSBob3N0ZWQgZG9tYWluIHRvIENsb3VkZmxhcmUgYnlcbiAgICogW2ZvbGxvd2luZyB0aGlzIGd1aWRlXShodHRwczovL2RldmVsb3BlcnMuY2xvdWRmbGFyZS5jb20vZG5zL3pvbmUtc2V0dXBzL2Z1bGwtc2V0dXAvc2V0dXAvKS5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBkb21haW46IFwiZG9tYWluLmNvbVwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBkb21haW4/OiBJbnB1dDxzdHJpbmc+O1xuICAvKipcbiAgICogQ29uZmlndXJlIGhvdyB5b3VyIGZ1bmN0aW9uIGlzIGJ1bmRsZWQuXG4gICAqXG4gICAqIFNTVCBidW5kbGVzIHlvdXIgd29ya2VyIGNvZGUgdXNpbmcgW2VzYnVpbGRdKGh0dHBzOi8vZXNidWlsZC5naXRodWIuaW8vKS4gVGhpcyB0cmVlIHNoYWtlcyB5b3VyIGNvZGUgdG8gb25seSBpbmNsdWRlIHdoYXQncyB1c2VkLlxuICAgKi9cbiAgYnVpbGQ/OiBJbnB1dDx7XG4gICAgLyoqXG4gICAgICogQ29uZmlndXJlIGFkZGl0aW9uYWwgZXNidWlsZCBsb2FkZXJzIGZvciBvdGhlciBmaWxlIGV4dGVuc2lvbnMuIFRoaXMgaXMgdXNlZnVsXG4gICAgICogd2hlbiB5b3VyIGNvZGUgaXMgaW1wb3J0aW5nIG5vbi1KUyBmaWxlcyBsaWtlIGAucG5nYCwgYC5jc3NgLCBldGMuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgYnVpbGQ6IHtcbiAgICAgKiAgICAgbG9hZGVyOiB7XG4gICAgICogICAgICBcIi5wbmdcIjogXCJmaWxlXCJcbiAgICAgKiAgICAgfVxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBsb2FkZXI/OiBJbnB1dDxSZWNvcmQ8c3RyaW5nLCBMb2FkZXI+PjtcbiAgICAvKipcbiAgICAgKiBVc2UgdGhpcyB0byBpbnNlcnQgYSBzdHJpbmcgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgZ2VuZXJhdGVkIEpTIGZpbGUuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgYnVpbGQ6IHtcbiAgICAgKiAgICAgYmFubmVyOiBcImNvbnNvbGUubG9nKCdGdW5jdGlvbiBzdGFydGluZycpXCJcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgYmFubmVyPzogSW5wdXQ8c3RyaW5nPjtcbiAgICAvKipcbiAgICAgKiBUaGlzIGFsbG93cyB5b3UgdG8gY3VzdG9taXplIGVzYnVpbGQgY29uZmlnIHRoYXQgaXMgdXNlZC5cbiAgICAgKlxuICAgICAqIDo6OnRpcFxuICAgICAqIENoZWNrIG91dCB0aGUgX0pTIHRhYl8gaW4gdGhlIGNvZGUgc25pcHBldHMgaW4gdGhlIGVzYnVpbGQgZG9jcyBmb3IgdGhlXG4gICAgICogW2J1aWxkIG9wdGlvbnNdKGh0dHBzOi8vZXNidWlsZC5naXRodWIuaW8vYXBpLyNidWlsZCkuXG4gICAgICogOjo6XG4gICAgICpcbiAgICAgKi9cbiAgICBlc2J1aWxkPzogSW5wdXQ8QnVpbGRPcHRpb25zPjtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSBpZiB0aGUgd29ya2VyIGNvZGUgaXMgbWluaWZpZWQgd2hlbiBidW5kbGVkLlxuICAgICAqXG4gICAgICogQGRlZmF1bHQgYHRydWVgXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYGpzXG4gICAgICoge1xuICAgICAqICAgYnVpbGQ6IHtcbiAgICAgKiAgICAgbWluaWZ5OiBmYWxzZVxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBtaW5pZnk/OiBJbnB1dDxib29sZWFuPjtcbiAgfT47XG4gIC8qKlxuICAgKiBbTGluayByZXNvdXJjZXNdKC9kb2NzL2xpbmtpbmcvKSB0byB5b3VyIHdvcmtlci4gVGhpcyB3aWxsOlxuICAgKlxuICAgKiAxLiBIYW5kbGUgdGhlIGNyZWRlbnRpYWxzIG5lZWRlZCB0byBhY2Nlc3MgdGhlIHJlc291cmNlcy5cbiAgICogMi4gQWxsb3cgeW91IHRvIGFjY2VzcyBpdCBpbiB5b3VyIHNpdGUgdXNpbmcgdGhlIFtTREtdKC9kb2NzL3JlZmVyZW5jZS9zZGsvKS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogVGFrZXMgYSBsaXN0IG9mIGNvbXBvbmVudHMgdG8gbGluayB0byB0aGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBsaW5rOiBbYnVja2V0LCBzdHJpcGVLZXldXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBsaW5rPzogSW5wdXQ8YW55W10+O1xuICAvKipcbiAgICogS2V5LXZhbHVlIHBhaXJzIHRoYXQgYXJlIHNldCBhcyBbV29ya2VyIGVudmlyb25tZW50IHZhcmlhYmxlc10oaHR0cHM6Ly9kZXZlbG9wZXJzLmNsb3VkZmxhcmUuY29tL3dvcmtlcnMvY29uZmlndXJhdGlvbi9lbnZpcm9ubWVudC12YXJpYWJsZXMvKS5cbiAgICpcbiAgICogVGhleSBjYW4gYmUgYWNjZXNzZWQgaW4geW91ciBmdW5jdGlvbiB0aHJvdWdoIGBlbnYuPGtleT5gLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZW52aXJvbm1lbnQ6IHtcbiAgICogICAgIERFQlVHOiBcInRydWVcIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGVudmlyb25tZW50PzogSW5wdXQ8UmVjb3JkPHN0cmluZywgSW5wdXQ8c3RyaW5nPj4+O1xuICAvKipcbiAgICogW1RyYW5zZm9ybV0oL2RvY3MvY29tcG9uZW50cyN0cmFuc2Zvcm0vKSBob3cgdGhpcyBjb21wb25lbnQgY3JlYXRlcyBpdHMgdW5kZXJseWluZ1xuICAgKiByZXNvdXJjZXMuXG4gICAqL1xuICB0cmFuc2Zvcm0/OiB7XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoZSBXb3JrZXIgcmVzb3VyY2UuXG4gICAgICovXG4gICAgd29ya2VyPzogVHJhbnNmb3JtPGNmLldvcmtlclNjcmlwdEFyZ3M+O1xuICB9O1xuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfaWdub3JlQ29kZUNoYW5nZXM/OiBib29sZWFuO1xuICAvKipcbiAgICogQGludGVybmFsXG4gICAqIFBsYWNlaG9kbGVyIGZvciBmdXR1cmUgZmVhdHVyZS5cbiAgICovXG4gIGxpdmU/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoZSBgV29ya2VyYCBjb21wb25lbnQgbGV0cyB5b3UgY3JlYXRlIGEgQ2xvdWRmbGFyZSBXb3JrZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAjIyMjIE1pbmltYWwgZXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiBuZXcgc3N0LmNsb3VkZmxhcmUuV29ya2VyKFwiTXlXb3JrZXJcIiwge1xuICogICBoYW5kbGVyOiBcInNyYy93b3JrZXIuaGFuZGxlclwiXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgTGluayByZXNvdXJjZXNcbiAqXG4gKiBbTGluayByZXNvdXJjZXNdKC9kb2NzL2xpbmtpbmcvKSB0byB0aGUgV29ya2VyLiBUaGlzIHdpbGwgaGFuZGxlIHRoZSBjcmVkZW50aWFsc1xuICogYW5kIGFsbG93IHlvdSB0byBhY2Nlc3MgaXQgaW4geW91ciBoYW5kbGVyLlxuICpcbiAqIGBgYHRzIHs1fVxuICogY29uc3QgYnVja2V0ID0gbmV3IHNzdC5hd3MuQnVja2V0KFwiTXlCdWNrZXRcIik7XG4gKlxuICogbmV3IHNzdC5jbG91ZGZsYXJlLldvcmtlcihcIk15V29ya2VyXCIsIHtcbiAqICAgaGFuZGxlcjogXCJzcmMvd29ya2VyLmhhbmRsZXJcIixcbiAqICAgbGluazogW2J1Y2tldF1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogWW91IGNhbiB1c2UgdGhlIFtTREtdKC9kb2NzL3JlZmVyZW5jZS9zZGsvKSB0byBhY2Nlc3MgdGhlIGxpbmtlZCByZXNvdXJjZXNcbiAqIGluIHlvdXIgaGFuZGxlci5cbiAqXG4gKiBgYGB0cyB0aXRsZT1cInNyYy93b3JrZXIudHNcIlxuICogaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tIFwic3N0XCI7XG4gKlxuICogY29uc29sZS5sb2coUmVzb3VyY2UuTXlCdWNrZXQubmFtZSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEVuYWJsZSBVUkxzXG4gKlxuICogRW5hYmxlIHdvcmtlciBVUkxzIHRvIGludm9rZSB0aGUgd29ya2VyIG92ZXIgSFRUUC5cbiAqXG4gKiBgYGB0cyB7M31cbiAqIG5ldyBzc3QuY2xvdWRmbGFyZS5Xb3JrZXIoXCJNeVdvcmtlclwiLCB7XG4gKiAgIGhhbmRsZXI6IFwic3JjL3dvcmtlci5oYW5kbGVyXCIsXG4gKiAgIHVybDogdHJ1ZVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEJ1bmRsaW5nXG4gKlxuICogQ3VzdG9taXplIGhvdyBTU1QgdXNlcyBbZXNidWlsZF0oaHR0cHM6Ly9lc2J1aWxkLmdpdGh1Yi5pby8pIHRvIGJ1bmRsZSB5b3VyIHdvcmtlciBjb2RlIHdpdGggdGhlIGBidWlsZGAgcHJvcGVydHkuXG4gKlxuICogYGBgdHNcbiAqIG5ldyBzc3QuY2xvdWRmbGFyZS5Xb3JrZXIoXCJNeVdvcmtlclwiLCB7XG4gKiAgIGhhbmRsZXI6IFwic3JjL3dvcmtlci5oYW5kbGVyXCIsXG4gKiAgIGJ1aWxkOiB7XG4gKiAgICAgaW5zdGFsbDogW1wicGdcIl1cbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFdvcmtlciBleHRlbmRzIENvbXBvbmVudCB7XG4gIHByaXZhdGUgc2NyaXB0OiBPdXRwdXQ8Y2YuV29ya2VyU2NyaXB0PjtcbiAgcHJpdmF0ZSB3b3JrZXJVcmw6IFdvcmtlclVybDtcbiAgcHJpdmF0ZSB3b3JrZXJEb21haW4/OiBjZi5Xb3JrZXJEb21haW47XG5cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBhcmdzOiBXb3JrZXJBcmdzLCBvcHRzPzogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zKSB7XG4gICAgc3VwZXIoXCJzc3Q6Y2xvdWRmbGFyZTpXb3JrZXJcIiwgbmFtZSwgYXJncywgb3B0cyk7XG5cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xuXG4gICAgY29uc3QgdXJsRW5hYmxlZCA9IG5vcm1hbGl6ZVVybCgpO1xuXG4gICAgY29uc3QgbGlua0RhdGEgPSBidWlsZExpbmtEYXRhKCk7XG4gICAgY29uc3QgaWFtQ3JlZGVudGlhbHMgPSBjcmVhdGVBd3NDcmVkZW50aWFscygpO1xuICAgIGNvbnN0IGhhbmRsZXIgPSBidWlsZEhhbmRsZXIoKTtcbiAgICBjb25zdCBzY3JpcHQgPSBjcmVhdGVTY3JpcHQoKTtcbiAgICBjb25zdCB3b3JrZXJVcmwgPSBjcmVhdGVXb3JrZXJzVXJsKCk7XG4gICAgY29uc3Qgd29ya2VyRG9tYWluID0gY3JlYXRlV29ya2Vyc0RvbWFpbigpO1xuXG4gICAgdGhpcy5zY3JpcHQgPSBzY3JpcHQ7XG4gICAgdGhpcy53b3JrZXJVcmwgPSB3b3JrZXJVcmw7XG4gICAgdGhpcy53b3JrZXJEb21haW4gPSB3b3JrZXJEb21haW47XG5cbiAgICBmdW5jdGlvbiBub3JtYWxpemVVcmwoKSB7XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3MudXJsKS5hcHBseSgodikgPT4gdiA/PyBmYWxzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRMaW5rRGF0YSgpIHtcbiAgICAgIGlmICghYXJncy5saW5rKSByZXR1cm4gW107XG4gICAgICByZXR1cm4gb3V0cHV0KGFyZ3MubGluaykuYXBwbHkoKGxpbmtzKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpbmtEYXRhID0gTGluay5idWlsZChsaW5rcyk7XG4gICAgICAgIHJldHVybiBsaW5rRGF0YTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUF3c0NyZWRlbnRpYWxzKCkge1xuICAgICAgcmV0dXJuIG91dHB1dChhcmdzLmxpbmsgPz8gW10pLmFwcGx5KChsaW5rcykgPT4ge1xuICAgICAgICBjb25zdCBwZXJtaXNzaW9ucyA9IGxpbmtzLmZsYXRNYXAoKGwpID0+IHtcbiAgICAgICAgICBpZiAoIUxpbmsuQVdTLmlzTGlua2FibGUobCkpIHJldHVybiBbXTtcbiAgICAgICAgICByZXR1cm4gbC5nZXRTU1RBV1NQZXJtaXNzaW9ucygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAocGVybWlzc2lvbnMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBhd3MuaWFtLlVzZXIoXG4gICAgICAgICAgYCR7bmFtZX1Bd3NVc2VyYCxcbiAgICAgICAgICB7IGZvcmNlRGVzdHJveTogdHJ1ZSB9LFxuICAgICAgICAgIHsgcGFyZW50IH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgbmV3IGF3cy5pYW0uVXNlclBvbGljeShcbiAgICAgICAgICBgJHtuYW1lfUF3c1BvbGljeWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgdXNlcjogdXNlci5uYW1lLFxuICAgICAgICAgICAgcG9saWN5OiBqc29uU3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgU3RhdGVtZW50OiBwZXJtaXNzaW9ucy5tYXAoKHApID0+ICh7XG4gICAgICAgICAgICAgICAgRWZmZWN0OiBcIkFsbG93XCIsXG4gICAgICAgICAgICAgICAgQWN0aW9uOiBwLmFjdGlvbnMsXG4gICAgICAgICAgICAgICAgUmVzb3VyY2U6IHAucmVzb3VyY2VzLFxuICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgcGFyZW50IH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3Qga2V5cyA9IG5ldyBhd3MuaWFtLkFjY2Vzc0tleShcbiAgICAgICAgICBgJHtuYW1lfUF3c0NyZWRlbnRpYWxzYCxcbiAgICAgICAgICB7IHVzZXI6IHVzZXIubmFtZSB9LFxuICAgICAgICAgIHsgcGFyZW50IH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZEhhbmRsZXIoKSB7XG4gICAgICBjb25zdCBidWlsZFJlc3VsdCA9IGFsbChbYXJncywgbGlua0RhdGFdKS5hcHBseShcbiAgICAgICAgYXN5bmMgKFthcmdzLCBsaW5rRGF0YV0pID0+IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBidWlsZChuYW1lLCB7IC4uLmFyZ3MsIGxpbmtzOiBsaW5rRGF0YSB9KTtcbiAgICAgICAgICBpZiAocmVzdWx0LnR5cGUgPT09IFwiZXJyb3JcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvcnMuam9pbihcIlxcblwiKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0sXG4gICAgICApO1xuICAgICAgcmV0dXJuIGJ1aWxkUmVzdWx0LmhhbmRsZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlU2NyaXB0KCkge1xuICAgICAgcmV0dXJuIGFsbChbaGFuZGxlciwgYXJncy5lbnZpcm9ubWVudCwgaWFtQ3JlZGVudGlhbHNdKS5hcHBseShcbiAgICAgICAgYXN5bmMgKFtoYW5kbGVyLCBlbnZpcm9ubWVudCwgaWFtQ3JlZGVudGlhbHNdKSA9PlxuICAgICAgICAgIG5ldyBjZi5Xb3JrZXJTY3JpcHQoXG4gICAgICAgICAgICBgJHtuYW1lfVNjcmlwdGAsXG4gICAgICAgICAgICB0cmFuc2Zvcm0oYXJncy50cmFuc2Zvcm0/Lndvcmtlciwge1xuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBhY2NvdW50SWQ6IHNzdC5jbG91ZGZsYXJlLkRFRkFVTFRfQUNDT1VOVF9JRCxcbiAgICAgICAgICAgICAgY29udGVudDogKGF3YWl0IGZzLnJlYWRGaWxlKGhhbmRsZXIpKS50b1N0cmluZygpLFxuICAgICAgICAgICAgICBtb2R1bGU6IHRydWUsXG4gICAgICAgICAgICAgIGNvbXBhdGliaWxpdHlEYXRlOiBcIjIwMjQtMDEtMDFcIixcbiAgICAgICAgICAgICAgY29tcGF0aWJpbGl0eUZsYWdzOiBbXCJub2RlanNfY29tcGF0XCJdLFxuICAgICAgICAgICAgICBwbGFpblRleHRCaW5kaW5nczogW1xuICAgICAgICAgICAgICAgIC4uLihpYW1DcmVkZW50aWFsc1xuICAgICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJBV1NfQUNDRVNTX0tFWV9JRFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogaWFtQ3JlZGVudGlhbHMuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgOiBbXSksXG4gICAgICAgICAgICAgICAgLi4uT2JqZWN0LmVudHJpZXMoZW52aXJvbm1lbnQgPz8ge30pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgbmFtZToga2V5LFxuICAgICAgICAgICAgICAgICAgdGV4dDogdmFsdWUsXG4gICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBzZWNyZXRUZXh0QmluZGluZ3M6IGlhbUNyZWRlbnRpYWxzXG4gICAgICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkFXU19TRUNSRVRfQUNDRVNTX0tFWVwiLFxuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGlhbUNyZWRlbnRpYWxzLnNlY3JldCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICA6IFtdLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgICAgICksXG4gICAgICApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVdvcmtlcnNVcmwoKSB7XG4gICAgICByZXR1cm4gbmV3IFdvcmtlclVybChcbiAgICAgICAgYCR7bmFtZX1VcmxgLFxuICAgICAgICB7XG4gICAgICAgICAgYWNjb3VudElkOiBzc3QuY2xvdWRmbGFyZS5ERUZBVUxUX0FDQ09VTlRfSUQsXG4gICAgICAgICAgc2NyaXB0TmFtZTogc2NyaXB0Lm5hbWUsXG4gICAgICAgICAgZW5hYmxlZDogdXJsRW5hYmxlZCxcbiAgICAgICAgfSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlV29ya2Vyc0RvbWFpbigpIHtcbiAgICAgIGlmICghYXJncy5kb21haW4pIHJldHVybjtcblxuICAgICAgY29uc3Qgem9uZSA9IG5ldyBab25lTG9va3VwKFxuICAgICAgICBgJHtuYW1lfVpvbmVMb29rdXBgLFxuICAgICAgICB7XG4gICAgICAgICAgYWNjb3VudElkOiBzc3QuY2xvdWRmbGFyZS5ERUZBVUxUX0FDQ09VTlRfSUQsXG4gICAgICAgICAgZG9tYWluOiBhcmdzLmRvbWFpbixcbiAgICAgICAgfSxcbiAgICAgICAgeyBwYXJlbnQgfSxcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiBuZXcgY2YuV29ya2VyRG9tYWluKFxuICAgICAgICBgJHtuYW1lfURvbWFpbmAsXG4gICAgICAgIHtcbiAgICAgICAgICBhY2NvdW50SWQ6IHNzdC5jbG91ZGZsYXJlLkRFRkFVTFRfQUNDT1VOVF9JRCxcbiAgICAgICAgICBzZXJ2aWNlOiBzY3JpcHQubmFtZSxcbiAgICAgICAgICBob3N0bmFtZTogYXJncy5kb21haW4sXG4gICAgICAgICAgem9uZUlkOiB6b25lLmlkLFxuICAgICAgICB9LFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIFdvcmtlciBVUkwgaWYgYHVybGAgaXMgZW5hYmxlZC5cbiAgICovXG4gIHB1YmxpYyBnZXQgdXJsKCkge1xuICAgIHJldHVybiB0aGlzLndvcmtlckRvbWFpblxuICAgICAgPyBpbnRlcnBvbGF0ZWBodHRwczovLyR7dGhpcy53b3JrZXJEb21haW4uaG9zdG5hbWV9YFxuICAgICAgOiB0aGlzLndvcmtlclVybC51cmwuYXBwbHkoKHVybCkgPT4gKHVybCA/IGBodHRwczovLyR7dXJsfWAgOiB1cmwpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdW5kZXJseWluZyBbcmVzb3VyY2VzXSgvZG9jcy9jb21wb25lbnRzLyNub2RlcykgdGhpcyBjb21wb25lbnQgY3JlYXRlcy5cbiAgICovXG4gIHB1YmxpYyBnZXQgbm9kZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIENsb3VkZmxhcmUgV29ya2VyIHNjcmlwdC5cbiAgICAgICAqL1xuICAgICAgd29ya2VyOiB0aGlzLnNjcmlwdCxcbiAgICB9O1xuICB9XG59XG4iLCAiaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBjcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zLCBPdXRwdXQsIGFsbCB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0IHsgS3YsIEt2QXJncyB9IGZyb20gXCIuL2t2LmpzXCI7XG5pbXBvcnQgeyBDb21wb25lbnQsIFByZXR0aWZ5LCBUcmFuc2Zvcm0sIHRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnQuanNcIjtcbmltcG9ydCB7IExpbmsgfSBmcm9tIFwiLi4vbGluay5qc1wiO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tIFwiLi4vaW5wdXQuanNcIjtcbmltcG9ydCB7IGdsb2JTeW5jIH0gZnJvbSBcImdsb2JcIjtcbmltcG9ydCB7IEt2RGF0YSB9IGZyb20gXCIuL3Byb3ZpZGVycy9rdi1kYXRhLmpzXCI7XG5pbXBvcnQgeyBXb3JrZXIgfSBmcm9tIFwiLi93b3JrZXIuanNcIjtcbmltcG9ydCB7XG4gIEJhc2VTdGF0aWNTaXRlQXJncyxcbiAgYnVpbGRBcHAsXG4gIGNsZWFudXAsXG4gIHByZXBhcmUsXG59IGZyb20gXCIuLi9iYXNlL2Jhc2Utc3RhdGljLXNpdGUuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTdGF0aWNTaXRlQXJncyBleHRlbmRzIEJhc2VTdGF0aWNTaXRlQXJncyB7XG4gIC8qKlxuICAgKiBQYXRoIHRvIHRoZSBkaXJlY3Rvcnkgd2hlcmUgeW91ciBzdGF0aWMgc2l0ZSBpcyBsb2NhdGVkLiBCeSBkZWZhdWx0IHRoaXMgYXNzdW1lcyB5b3VyIHN0YXRpYyBzaXRlIGlzIGluIHRoZSByb290IG9mIHlvdXIgU1NUIGFwcC5cbiAgICpcbiAgICogVGhpcyBkaXJlY3Rvcnkgd2lsbCBiZSB1cGxvYWRlZCB0byBLVi4gVGhlIHBhdGggaXMgcmVsYXRpdmUgdG8geW91ciBgc3N0LmNvbmZpZy50c2AuXG4gICAqXG4gICAqIDo6Om5vdGVcbiAgICogSWYgdGhlIGBidWlsZGAgb3B0aW9ucyBhcmUgc3BlY2lmaWVkLCBgYnVpbGQub3V0cHV0YCB3aWxsIGJlIHVwbG9hZGVkIHRvIEtWIGluc3RlYWQuXG4gICAqIDo6OlxuICAgKlxuICAgKiBJZiB5b3UgYXJlIHVzaW5nIGEgc3RhdGljIHNpdGUgZ2VuZXJhdG9yLCBsaWtlIFZpdGUsIHlvdSdsbCBuZWVkIHRvIGNvbmZpZ3VyZSB0aGUgYGJ1aWxkYCBvcHRpb25zLiBXaGVuIHRoZXNlIGFyZSBzZXQsIHRoZSBgYnVpbGQub3V0cHV0YCBkaXJlY3Rvcnkgd2lsbCBiZSB1cGxvYWRlZCB0byBLViBpbnN0ZWFkLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgXCIuXCJgXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIENoYW5nZSB3aGVyZSB5b3VyIHN0YXRpYyBzaXRlIGlzIGxvY2F0ZWQuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBwYXRoOiBcInBhY2thZ2VzL3dlYlwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBwYXRoPzogQmFzZVN0YXRpY1NpdGVBcmdzW1wicGF0aFwiXTtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZSBpZiB5b3VyIHN0YXRpYyBzaXRlIG5lZWRzIHRvIGJlIGJ1aWx0LiBUaGlzIGlzIHVzZWZ1bCBpZiB5b3UgYXJlIHVzaW5nIGEgc3RhdGljIHNpdGUgZ2VuZXJhdG9yLlxuICAgKlxuICAgKiBUaGUgYGJ1aWxkLm91dHB1dGAgZGlyZWN0b3J5IHdpbGwgYmUgdXBsb2FkZWQgdG8gS1YgaW5zdGVhZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogRm9yIGEgVml0ZSBwcm9qZWN0IHVzaW5nIG5wbSB0aGlzIG1pZ2h0IGxvb2sgbGlrZSB0aGlzLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgYnVpbGQ6IHtcbiAgICogICAgIGNvbW1hbmQ6IFwibnBtIHJ1biBidWlsZFwiLFxuICAgKiAgICAgb3V0cHV0OiBcImRpc3RcIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGJ1aWxkPzogQmFzZVN0YXRpY1NpdGVBcmdzW1wiYnVpbGRcIl07XG4gIC8qKlxuICAgKiBDb25maWd1cmUgaG93IHRoZSBzdGF0aWMgc2l0ZSdzIGFzc2V0cyBhcmUgdXBsb2FkZWQgdG8gS1YuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHRoaXMgaXMgc2V0IHRvIHRoZSBmb2xsb3dpbmcuIFJlYWQgbW9yZSBhYm91dCB0aGVzZSBvcHRpb25zIGJlbG93LlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgYXNzZXRzOiB7XG4gICAqICAgICB0ZXh0RW5jb2Rpbmc6IFwidXRmLThcIixcbiAgICogICAgIGZpbGVPcHRpb25zOiBbXG4gICAqICAgICAgIHtcbiAgICogICAgICAgICBmaWxlczogW1wiKipcXC8qLmNzc1wiLCBcIioqXFwvKi5qc1wiXSxcbiAgICogICAgICAgICBjYWNoZUNvbnRyb2w6IFwibWF4LWFnZT0zMTUzNjAwMCxwdWJsaWMsaW1tdXRhYmxlXCJcbiAgICogICAgICAgfSxcbiAgICogICAgICAge1xuICAgKiAgICAgICAgIGZpbGVzOiBcIioqXFwvKi5odG1sXCIsXG4gICAqICAgICAgICAgY2FjaGVDb250cm9sOiBcIm1heC1hZ2U9MCxuby1jYWNoZSxuby1zdG9yZSxtdXN0LXJldmFsaWRhdGVcIlxuICAgKiAgICAgICB9XG4gICAqICAgICBdXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKiBAZGVmYXVsdCBgT2JqZWN0YFxuICAgKi9cbiAgYXNzZXRzPzogQmFzZVN0YXRpY1NpdGVBcmdzW1wiYXNzZXRzXCJdO1xuICAvKipcbiAgICogU2V0IGEgY3VzdG9tIGRvbWFpbiBmb3IgeW91ciBzdGF0aWMgc2l0ZS4gU3VwcG9ydHMgZG9tYWlucyBob3N0ZWQgb24gQ2xvdWRmbGFyZS5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIFlvdSBjYW4gbWlncmF0ZSBhbiBleHRlcm5hbGx5IGhvc3RlZCBkb21haW4gdG8gQ2xvdWRmbGFyZSBieVxuICAgKiBbZm9sbG93aW5nIHRoaXMgZ3VpZGVdKGh0dHBzOi8vZGV2ZWxvcGVycy5jbG91ZGZsYXJlLmNvbS9kbnMvem9uZS1zZXR1cHMvZnVsbC1zZXR1cC9zZXR1cC8pLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGRvbWFpbjogXCJkb21haW4uY29tXCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGRvbWFpbj86IElucHV0PHN0cmluZz47XG4gIC8qKlxuICAgKiBbVHJhbnNmb3JtXSgvZG9jcy9jb21wb25lbnRzI3RyYW5zZm9ybSkgaG93IHRoaXMgY29tcG9uZW50IGNyZWF0ZXMgaXRzIHVuZGVybHlpbmdcbiAgICogcmVzb3VyY2VzLlxuICAgKi9cbiAgdHJhbnNmb3JtPzoge1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSB0aGUgS3YgcmVzb3VyY2UgdXNlZCBmb3IgdXBsb2FkaW5nIHRoZSBhc3NldHMuXG4gICAgICovXG4gICAgYXNzZXRzPzogVHJhbnNmb3JtPEt2QXJncz47XG4gIH07XG59XG5cbi8qKlxuICogVGhlIGBTdGF0aWNTaXRlYCBjb21wb25lbnQgbGV0cyB5b3UgZGVwbG95IGEgc3RhdGljIHdlYnNpdGUgdG8gQVdTLiBJdCB1c2VzIFtBbWF6b24gUzNdKGh0dHBzOi8vYXdzLmFtYXpvbi5jb20vczMvKSB0byBzdG9yZSB5b3VyIGZpbGVzIGFuZCBbQW1hem9uIENsb3VkRnJvbnRdKGh0dHBzOi8vYXdzLmFtYXpvbi5jb20vY2xvdWRmcm9udC8pIHRvIHNlcnZlIHRoZW0uXG4gKlxuICogSXQgY2FuIGFsc28gYGJ1aWxkYCB5b3VyIHNpdGUgYnkgcnVubmluZyB5b3VyIHN0YXRpYyBzaXRlIGdlbmVyYXRvciwgbGlrZSBbVml0ZV0oaHR0cHM6Ly92aXRlanMuZGV2KSBhbmQgdXBsb2FkaW5nIHRoZSBidWlsZCBvdXRwdXQgdG8gUzMuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiAjIyMjIE1pbmltYWwgZXhhbXBsZVxuICpcbiAqIFNpbXBseSB1cGxvYWRzIHRoZSBjdXJyZW50IGRpcmVjdG9yeSBhcyBhIHN0YXRpYyBzaXRlLlxuICpcbiAqIGBgYGpzXG4gKiBuZXcgc3N0LmF3cy5TdGF0aWNTaXRlKFwiTXlXZWJcIik7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIENoYW5nZSB0aGUgcGF0aFxuICpcbiAqIENoYW5nZSB0aGUgYHBhdGhgIHRoYXQgc2hvdWxkIGJlIHVwbG9hZGVkLlxuICpcbiAqIGBgYGpzXG4gKiBuZXcgc3N0LmF3cy5TdGF0aWNTaXRlKFwiTXlXZWJcIiwge1xuICogICBwYXRoOiBcInBhdGgvdG8vc2l0ZVwiXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgRGVwbG95IGEgVml0ZSBTUEFcbiAqXG4gKiBVc2UgW1ZpdGVdKGh0dHBzOi8vdml0ZWpzLmRldikgdG8gZGVwbG95IGEgUmVhY3QvVnVlL1N2ZWx0ZS9ldGMuIFNQQSBieSBzcGVjaWZ5aW5nIHRoZSBgYnVpbGRgIGNvbmZpZy5cbiAqXG4gKiBgYGBqc1xuICogbmV3IHNzdC5hd3MuU3RhdGljU2l0ZShcIk15V2ViXCIsIHtcbiAqICAgYnVpbGQ6IHtcbiAqICAgICBjb21tYW5kOiBcIm5wbSBydW4gYnVpbGRcIixcbiAqICAgICBvdXRwdXQ6IFwiZGlzdFwiXG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBEZXBsb3kgYSBKZWt5bGwgc2l0ZVxuICpcbiAqIFVzZSBbSmVreWxsXShodHRwczovL2pla3lsbHJiLmNvbSkgdG8gZGVwbG95IGEgc3RhdGljIHNpdGUuXG4gKlxuICogYGBganNcbiAqIG5ldyBzc3QuYXdzLlN0YXRpY1NpdGUoXCJNeVdlYlwiLCB7XG4gKiAgIGVycm9yUGFnZTogXCI0MDQuaHRtbFwiLFxuICogICBidWlsZDoge1xuICogICAgIGNvbW1hbmQ6IFwiYnVuZGxlIGV4ZWMgamVreWxsIGJ1aWxkXCIsXG4gKiAgICAgb3V0cHV0OiBcIl9zaXRlXCJcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIERlcGxveSBhIEdhdHNieSBzaXRlXG4gKlxuICogVXNlIFtHYXRzYnldKGh0dHBzOi8vd3d3LmdhdHNieWpzLmNvbSkgdG8gZGVwbG95IGEgc3RhdGljIHNpdGUuXG4gKlxuICogYGBganNcbiAqIG5ldyBzc3QuYXdzLlN0YXRpY1NpdGUoXCJNeVdlYlwiLCB7XG4gKiAgIGVycm9yUGFnZTogXCI0MDQuaHRtbFwiLFxuICogICBidWlsZDoge1xuICogICAgIGNvbW1hbmQ6IFwibnBtIHJ1biBidWlsZFwiLFxuICogICAgIG91dHB1dDogXCJwdWJsaWNcIlxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgRGVwbG95IGFuIEFuZ3VsYXIgU1BBXG4gKlxuICogVXNlIFtBbmd1bGFyXShodHRwczovL2FuZ3VsYXIuZGV2KSB0byBkZXBsb3kgYSBTUEEuXG4gKlxuICogYGBganNcbiAqIG5ldyBzc3QuYXdzLlN0YXRpY1NpdGUoXCJNeVdlYlwiLCB7XG4gKiAgIGJ1aWxkOiB7XG4gKiAgICAgY29tbWFuZDogXCJuZyBidWlsZCAtLW91dHB1dC1wYXRoIGRpc3RcIixcbiAqICAgICBvdXRwdXQ6IFwiZGlzdFwiXG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogIyMjIyBBZGQgYSBjdXN0b20gZG9tYWluXG4gKlxuICogU2V0IGEgY3VzdG9tIGRvbWFpbiBmb3IgeW91ciBzaXRlLlxuICpcbiAqIGBgYGpzIHsyfVxuICogbmV3IHNzdC5hd3MuU3RhdGljU2l0ZShcIk15V2ViXCIsIHtcbiAqICAgZG9tYWluOiBcIm15LWFwcC5jb21cIlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIFJlZGlyZWN0IHd3dyB0byBhcGV4IGRvbWFpblxuICpcbiAqIFJlZGlyZWN0IGB3d3cubXktYXBwLmNvbWAgdG8gYG15LWFwcC5jb21gLlxuICpcbiAqIGBgYGpzIHs0fVxuICogbmV3IHNzdC5hd3MuU3RhdGljU2l0ZShcIk15V2ViXCIsIHtcbiAqICAgZG9tYWluOiB7XG4gKiAgICAgZG9tYWluTmFtZTogXCJteS1hcHAuY29tXCIsXG4gKiAgICAgcmVkaXJlY3RzOiBbXCJ3d3cubXktYXBwLmNvbVwiXVxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgU2V0IGVudmlyb25tZW50IHZhcmlhYmxlc1xuICpcbiAqIFNldCBgZW52aXJvbm1lbnRgIHZhcmlhYmxlcyBmb3IgdGhlIGJ1aWxkIHByb2Nlc3Mgb2YgeW91ciBzdGF0aWMgc2l0ZS4gVGhlc2Ugd2lsbCBiZSB1c2VkIGxvY2FsbHkgYW5kIG9uIGRlcGxveS5cbiAqXG4gKiA6Ojp0aXBcbiAqIEZvciBWaXRlLCB0aGUgdHlwZXMgZm9yIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIGFsc28gZ2VuZXJhdGVkLiBUaGlzIGNhbiBiZSBjb25maWd1cmVkIHRocm91Z2ggdGhlIGB2aXRlYCBwcm9wLlxuICogOjo6XG4gKlxuICogRm9yIHNvbWUgc3RhdGljIHNpdGUgZ2VuZXJhdG9ycyBsaWtlIFZpdGUsIFtlbnZpcm9ubWVudCB2YXJpYWJsZXNdKGh0dHBzOi8vdml0ZWpzLmRldi9ndWlkZS9lbnYtYW5kLW1vZGUpIHByZWZpeGVkIHdpdGggYFZJVEVfYCBjYW4gYmUgYWNjZXNzZWQgaW4gdGhlIGJyb3dzZXIuXG4gKlxuICogYGBgdHMgezUtN31cbiAqIGNvbnN0IGJ1Y2tldCA9IG5ldyBzc3QuYXdzLkJ1Y2tldChcIk15QnVja2V0XCIpO1xuICpcbiAqIG5ldyBzc3QuYXdzLlN0YXRpY1NpdGUoXCJNeVdlYlwiLCB7XG4gKiAgIGVudmlyb25tZW50OiB7XG4gKiAgICAgQlVDS0VUX05BTUU6IGJ1Y2tldC5uYW1lLFxuICogICAgIC8vIEFjY2Vzc2libGUgaW4gdGhlIGJyb3dzZXJcbiAqICAgICBWSVRFX1NUUklQRV9QVUJMSVNIQUJMRV9LRVk6IFwicGtfdGVzdF8xMjNcIlxuICogICB9LFxuICogICBidWlsZDoge1xuICogICAgIGNvbW1hbmQ6IFwibnBtIHJ1biBidWlsZFwiLFxuICogICAgIG91dHB1dDogXCJkaXN0XCJcbiAqICAgfVxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFN0YXRpY1NpdGUgZXh0ZW5kcyBDb21wb25lbnQgaW1wbGVtZW50cyBMaW5rLkxpbmthYmxlIHtcbiAgcHJpdmF0ZSBhc3NldHM6IEt2O1xuICBwcml2YXRlIHJvdXRlcjogV29ya2VyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhcmdzOiBTdGF0aWNTaXRlQXJncyA9IHt9LFxuICAgIG9wdHM6IENvbXBvbmVudFJlc291cmNlT3B0aW9ucyA9IHt9LFxuICApIHtcbiAgICBzdXBlcihcInNzdDpjbG91ZGZsYXJlOlN0YXRpY1NpdGVcIiwgbmFtZSwgYXJncywgb3B0cyk7XG5cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xuICAgIGNvbnN0IHsgc2l0ZVBhdGgsIGVudmlyb25tZW50LCBpbmRleFBhZ2UgfSA9IHByZXBhcmUoYXJncyk7XG4gICAgY29uc3Qgb3V0cHV0UGF0aCA9IGJ1aWxkQXBwKG5hbWUsIGFyZ3MuYnVpbGQsIHNpdGVQYXRoLCBlbnZpcm9ubWVudCk7XG4gICAgY29uc3Qgc3RvcmFnZSA9IGNyZWF0ZUt2U3RvcmFnZSgpO1xuICAgIGNvbnN0IGFzc2V0TWFuaWZlc3QgPSBnZW5lcmF0ZUFzc2V0TWFuaWZlc3QoKTtcbiAgICBjb25zdCBrdkRhdGEgPSB1cGxvYWRBc3NldHMoKTtcbiAgICBjb25zdCB3b3JrZXIgPSBjcmVhdGVSb3V0ZXIoKTtcbiAgICB0aGlzLmFzc2V0cyA9IHN0b3JhZ2U7XG4gICAgdGhpcy5yb3V0ZXIgPSB3b3JrZXI7XG5cbiAgICBjbGVhbnVwKHRoaXMudXJuLCB0aGlzLnVybCBhcyBPdXRwdXQ8c3RyaW5nPiwgc2l0ZVBhdGgsIGVudmlyb25tZW50KTtcblxuICAgIHRoaXMucmVnaXN0ZXJPdXRwdXRzKHtcbiAgICAgIF9tZXRhZGF0YToge1xuICAgICAgICBwYXRoOiBzaXRlUGF0aCxcbiAgICAgICAgZW52aXJvbm1lbnQsXG4gICAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlS3ZTdG9yYWdlKCkge1xuICAgICAgcmV0dXJuIG5ldyBLdihgJHtuYW1lfUFzc2V0c2AsIHRyYW5zZm9ybShhcmdzLnRyYW5zZm9ybT8uYXNzZXRzLCB7fSksIHtcbiAgICAgICAgcGFyZW50LFxuICAgICAgICByZXRhaW5PbkRlbGV0ZTogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUFzc2V0TWFuaWZlc3QoKSB7XG4gICAgICByZXR1cm4gYWxsKFtvdXRwdXRQYXRoLCBhcmdzLmFzc2V0c10pLmFwcGx5KFxuICAgICAgICBhc3luYyAoW291dHB1dFBhdGgsIGFzc2V0c10pID0+IHtcbiAgICAgICAgICAvLyBCdWlsZCBmaWxlT3B0aW9uc1xuICAgICAgICAgIGNvbnN0IGZpbGVPcHRpb25zID0gYXNzZXRzPy5maWxlT3B0aW9ucyA/PyBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGZpbGVzOiBcIioqXCIsXG4gICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogXCJtYXgtYWdlPTAsbm8tY2FjaGUsbm8tc3RvcmUsbXVzdC1yZXZhbGlkYXRlXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBmaWxlczogW1wiKiovKi5qc1wiLCBcIioqLyouY3NzXCJdLFxuICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IFwibWF4LWFnZT0zMTUzNjAwMCxwdWJsaWMsaW1tdXRhYmxlXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF07XG5cbiAgICAgICAgICAvLyBVcGxvYWQgZmlsZXMgYmFzZWQgb24gZmlsZU9wdGlvbnNcbiAgICAgICAgICBjb25zdCBtYW5pZmVzdCA9IFtdO1xuICAgICAgICAgIGNvbnN0IGZpbGVzUHJvY2Vzc2VkOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgIGZvciAoY29uc3QgZmlsZU9wdGlvbiBvZiBmaWxlT3B0aW9ucy5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZ2xvYlN5bmMoZmlsZU9wdGlvbi5maWxlcywge1xuICAgICAgICAgICAgICBjd2Q6IHBhdGgucmVzb2x2ZShvdXRwdXRQYXRoKSxcbiAgICAgICAgICAgICAgbm9kaXI6IHRydWUsXG4gICAgICAgICAgICAgIGRvdDogdHJ1ZSxcbiAgICAgICAgICAgICAgaWdub3JlOiBbXG4gICAgICAgICAgICAgICAgXCIuc3N0LyoqXCIsXG4gICAgICAgICAgICAgICAgLi4uKHR5cGVvZiBmaWxlT3B0aW9uLmlnbm9yZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgPyBbZmlsZU9wdGlvbi5pZ25vcmVdXG4gICAgICAgICAgICAgICAgICA6IGZpbGVPcHRpb24uaWdub3JlID8/IFtdKSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pLmZpbHRlcigoZmlsZSkgPT4gIWZpbGVzUHJvY2Vzc2VkLmluY2x1ZGVzKGZpbGUpKTtcbiAgICAgICAgICAgIGZpbGVzUHJvY2Vzc2VkLnB1c2goLi4uZmlsZXMpO1xuXG4gICAgICAgICAgICBtYW5pZmVzdC5wdXNoKFxuICAgICAgICAgICAgICAuLi4oYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgICAgICAgZmlsZXMubWFwKGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBzb3VyY2UgPSBwYXRoLnJlc29sdmUob3V0cHV0UGF0aCwgZmlsZSk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZnMucHJvbWlzZXMucmVhZEZpbGUoc291cmNlKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBjcnlwdG9cbiAgICAgICAgICAgICAgICAgICAgLmNyZWF0ZUhhc2goXCJzaGEyNTZcIilcbiAgICAgICAgICAgICAgICAgICAgLnVwZGF0ZShjb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuZGlnZXN0KFwiaGV4XCIpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBrZXk6IGZpbGUsXG4gICAgICAgICAgICAgICAgICAgIGhhc2gsXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogZmlsZU9wdGlvbi5jYWNoZUNvbnRyb2wsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBnZXRDb250ZW50VHlwZShmaWxlLCBcIlVURi04XCIpLFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKSksXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBtYW5pZmVzdDtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBsb2FkQXNzZXRzKCkge1xuICAgICAgcmV0dXJuIG5ldyBLdkRhdGEoXG4gICAgICAgIGAke25hbWV9QXNzZXRGaWxlc2AsXG4gICAgICAgIHtcbiAgICAgICAgICBhY2NvdW50SWQ6IHNzdC5jbG91ZGZsYXJlLkRFRkFVTFRfQUNDT1VOVF9JRCxcbiAgICAgICAgICBuYW1lc3BhY2VJZDogc3RvcmFnZS5pZCxcbiAgICAgICAgICBlbnRyaWVzOiBhc3NldE1hbmlmZXN0LmFwcGx5KChtYW5pZmVzdCkgPT5cbiAgICAgICAgICAgIG1hbmlmZXN0Lm1hcCgobSkgPT4gKHtcbiAgICAgICAgICAgICAgc291cmNlOiBtLnNvdXJjZSxcbiAgICAgICAgICAgICAga2V5OiBtLmtleSxcbiAgICAgICAgICAgICAgaGFzaDogbS5oYXNoLFxuICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IG0uY2FjaGVDb250cm9sLFxuICAgICAgICAgICAgICBjb250ZW50VHlwZTogbS5jb250ZW50VHlwZSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICApLFxuICAgICAgICB9LFxuICAgICAgICB7IHBhcmVudCwgaWdub3JlQ2hhbmdlczogJGRldiA/IFtcIipcIl0gOiB1bmRlZmluZWQgfSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29udGVudFR5cGUoZmlsZW5hbWU6IHN0cmluZywgdGV4dEVuY29kaW5nOiBzdHJpbmcpIHtcbiAgICAgIGNvbnN0IGV4dCA9IGZpbGVuYW1lLmVuZHNXaXRoKFwiLndlbGwta25vd24vc2l0ZS1hc3NvY2lhdGlvbi1qc29uXCIpXG4gICAgICAgID8gXCIuanNvblwiXG4gICAgICAgIDogcGF0aC5leHRuYW1lKGZpbGVuYW1lKTtcbiAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSB7XG4gICAgICAgIFtcIi50eHRcIl06IHsgbWltZTogXCJ0ZXh0L3BsYWluXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuaHRtXCJdOiB7IG1pbWU6IFwidGV4dC9odG1sXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuaHRtbFwiXTogeyBtaW1lOiBcInRleHQvaHRtbFwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLnhodG1sXCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24veGh0bWwreG1sXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuY3NzXCJdOiB7IG1pbWU6IFwidGV4dC9jc3NcIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5qc1wiXTogeyBtaW1lOiBcInRleHQvamF2YXNjcmlwdFwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLm1qc1wiXTogeyBtaW1lOiBcInRleHQvamF2YXNjcmlwdFwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLmFwbmdcIl06IHsgbWltZTogXCJpbWFnZS9hcG5nXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLmF2aWZcIl06IHsgbWltZTogXCJpbWFnZS9hdmlmXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLmdpZlwiXTogeyBtaW1lOiBcImltYWdlL2dpZlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5qcGVnXCJdOiB7IG1pbWU6IFwiaW1hZ2UvanBlZ1wiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5qcGdcIl06IHsgbWltZTogXCJpbWFnZS9qcGVnXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLnBuZ1wiXTogeyBtaW1lOiBcImltYWdlL3BuZ1wiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5zdmdcIl06IHsgbWltZTogXCJpbWFnZS9zdmcreG1sXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuYm1wXCJdOiB7IG1pbWU6IFwiaW1hZ2UvYm1wXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLnRpZmZcIl06IHsgbWltZTogXCJpbWFnZS90aWZmXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLndlYnBcIl06IHsgbWltZTogXCJpbWFnZS93ZWJwXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLmljb1wiXTogeyBtaW1lOiBcImltYWdlL3ZuZC5taWNyb3NvZnQuaWNvblwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5lb3RcIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi92bmQubXMtZm9udG9iamVjdFwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi50dGZcIl06IHsgbWltZTogXCJmb250L3R0ZlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5vdGZcIl06IHsgbWltZTogXCJmb250L290ZlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi53b2ZmXCJdOiB7IG1pbWU6IFwiZm9udC93b2ZmXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLndvZmYyXCJdOiB7IG1pbWU6IFwiZm9udC93b2ZmMlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi5qc29uXCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24vanNvblwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLmpzb25sZFwiXTogeyBtaW1lOiBcImFwcGxpY2F0aW9uL2xkK2pzb25cIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi54bWxcIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi94bWxcIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5wZGZcIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi9wZGZcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIuemlwXCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24vemlwXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLndhc21cIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi93YXNtXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgIH07XG4gICAgICBjb25zdCBleHRlbnNpb25EYXRhID0gZXh0ZW5zaW9uc1tleHQgYXMga2V5b2YgdHlwZW9mIGV4dGVuc2lvbnNdO1xuICAgICAgY29uc3QgbWltZSA9IGV4dGVuc2lvbkRhdGE/Lm1pbWUgPz8gXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIjtcbiAgICAgIGNvbnN0IGNoYXJzZXQgPVxuICAgICAgICBleHRlbnNpb25EYXRhPy5pc1RleHQgJiYgdGV4dEVuY29kaW5nICE9PSBcIm5vbmVcIlxuICAgICAgICAgID8gYDtjaGFyc2V0PSR7dGV4dEVuY29kaW5nfWBcbiAgICAgICAgICA6IFwiXCI7XG4gICAgICByZXR1cm4gYCR7bWltZX0ke2NoYXJzZXR9YDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVSb3V0ZXIoKSB7XG4gICAgICByZXR1cm4gbmV3IFdvcmtlcihcbiAgICAgICAgYCR7bmFtZX1Sb3V0ZXJgLFxuICAgICAgICB7XG4gICAgICAgICAgaGFuZGxlcjogcGF0aC5qb2luKFxuICAgICAgICAgICAgJGNsaS5wYXRocy5wbGF0Zm9ybSxcbiAgICAgICAgICAgIFwiZnVuY3Rpb25zXCIsXG4gICAgICAgICAgICBcImNmLXN0YXRpYy1zaXRlLXJvdXRlci13b3JrZXJcIixcbiAgICAgICAgICApLFxuICAgICAgICAgIHVybDogdHJ1ZSxcbiAgICAgICAgICBkb21haW46IGFyZ3MuZG9tYWluLFxuICAgICAgICAgIGVudmlyb25tZW50OiB7XG4gICAgICAgICAgICBJTkRFWF9QQUdFOiBpbmRleFBhZ2UsXG4gICAgICAgICAgICAuLi4oYXJncy5lcnJvclBhZ2UgPyB7IEVSUk9SX1BBR0U6IGFyZ3MuZXJyb3JQYWdlIH0gOiB7fSksXG4gICAgICAgICAgfSxcbiAgICAgICAgICBidWlsZDoge1xuICAgICAgICAgICAgZXNidWlsZDogYXNzZXRNYW5pZmVzdC5hcHBseSgoYXNzZXRNYW5pZmVzdCkgPT4gKHtcbiAgICAgICAgICAgICAgZGVmaW5lOiB7XG4gICAgICAgICAgICAgICAgU1NUX0FTU0VUX01BTklGRVNUOiBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgICAgICAgIE9iamVjdC5mcm9tRW50cmllcyhhc3NldE1hbmlmZXN0Lm1hcCgoZSkgPT4gW2Uua2V5LCBlLmhhc2hdKSksXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRyYW5zZm9ybToge1xuICAgICAgICAgICAgd29ya2VyOiAod29ya2VyQXJncykgPT4ge1xuICAgICAgICAgICAgICB3b3JrZXJBcmdzLmt2TmFtZXNwYWNlQmluZGluZ3MgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbmFtZTogXCJBU1NFVFNcIixcbiAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZUlkOiBzdG9yYWdlLmlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIC8vIGNyZWF0ZSBkaXN0cmlidXRpb24gYWZ0ZXIgczMgdXBsb2FkIGZpbmlzaGVzXG4gICAgICAgIHsgZGVwZW5kc09uOiBrdkRhdGEsIHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIFVSTCBvZiB0aGUgd2Vic2l0ZS5cbiAgICpcbiAgICogSWYgdGhlIGBkb21haW5gIGlzIHNldCwgdGhpcyBpcyB0aGUgVVJMIHdpdGggdGhlIGN1c3RvbSBkb21haW4uXG4gICAqIE90aGVyd2lzZSwgaXQncyB0aGUgYXV0b2dlbmVyYXRlZCBDbG91ZEZyb250IFVSTC5cbiAgICovXG4gIHB1YmxpYyBnZXQgdXJsKCkge1xuICAgIHJldHVybiB0aGlzLnJvdXRlci51cmw7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHVuZGVybHlpbmcgW3Jlc291cmNlc10oL2RvY3MvY29tcG9uZW50cy8jbm9kZXMpIHRoaXMgY29tcG9uZW50IGNyZWF0ZXMuXG4gICAqL1xuICBwdWJsaWMgZ2V0IG5vZGVzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBbWF6b24gUzMgQnVja2V0IHRoYXQgc3RvcmVzIHRoZSBhc3NldHMuXG4gICAgICAgKi9cbiAgICAgIGFzc2V0czogdGhpcy5hc3NldHMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHVibGljIGdldFNTVExpbmsoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgdXJsOiB0aGlzLnVybCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxufVxuIiwgIi8qKlxuICogVG9rZW5pemVyIHJlc3VsdHMuXG4gKi9cbmludGVyZmFjZSBMZXhUb2tlbiB7XG4gIHR5cGU6XG4gICAgfCBcIk9QRU5cIlxuICAgIHwgXCJDTE9TRVwiXG4gICAgfCBcIlBBVFRFUk5cIlxuICAgIHwgXCJOQU1FXCJcbiAgICB8IFwiQ0hBUlwiXG4gICAgfCBcIkVTQ0FQRURfQ0hBUlwiXG4gICAgfCBcIk1PRElGSUVSXCJcbiAgICB8IFwiRU5EXCI7XG4gIGluZGV4OiBudW1iZXI7XG4gIHZhbHVlOiBzdHJpbmc7XG59XG5cbi8qKlxuICogVG9rZW5pemUgaW5wdXQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBsZXhlcihzdHI6IHN0cmluZyk6IExleFRva2VuW10ge1xuICBjb25zdCB0b2tlbnM6IExleFRva2VuW10gPSBbXTtcbiAgbGV0IGkgPSAwO1xuXG4gIHdoaWxlIChpIDwgc3RyLmxlbmd0aCkge1xuICAgIGNvbnN0IGNoYXIgPSBzdHJbaV07XG5cbiAgICBpZiAoY2hhciA9PT0gXCIqXCIgfHwgY2hhciA9PT0gXCIrXCIgfHwgY2hhciA9PT0gXCI/XCIpIHtcbiAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogXCJNT0RJRklFUlwiLCBpbmRleDogaSwgdmFsdWU6IHN0cltpKytdIH0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGNoYXIgPT09IFwiXFxcXFwiKSB7XG4gICAgICB0b2tlbnMucHVzaCh7IHR5cGU6IFwiRVNDQVBFRF9DSEFSXCIsIGluZGV4OiBpKyssIHZhbHVlOiBzdHJbaSsrXSB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChjaGFyID09PSBcIntcIikge1xuICAgICAgdG9rZW5zLnB1c2goeyB0eXBlOiBcIk9QRU5cIiwgaW5kZXg6IGksIHZhbHVlOiBzdHJbaSsrXSB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChjaGFyID09PSBcIn1cIikge1xuICAgICAgdG9rZW5zLnB1c2goeyB0eXBlOiBcIkNMT1NFXCIsIGluZGV4OiBpLCB2YWx1ZTogc3RyW2krK10gfSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoY2hhciA9PT0gXCI6XCIpIHtcbiAgICAgIGxldCBuYW1lID0gXCJcIjtcbiAgICAgIGxldCBqID0gaSArIDE7XG5cbiAgICAgIHdoaWxlIChqIDwgc3RyLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaik7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIC8vIGAwLTlgXG4gICAgICAgICAgKGNvZGUgPj0gNDggJiYgY29kZSA8PSA1NykgfHxcbiAgICAgICAgICAvLyBgQS1aYFxuICAgICAgICAgIChjb2RlID49IDY1ICYmIGNvZGUgPD0gOTApIHx8XG4gICAgICAgICAgLy8gYGEtemBcbiAgICAgICAgICAoY29kZSA+PSA5NyAmJiBjb2RlIDw9IDEyMikgfHxcbiAgICAgICAgICAvLyBgX2BcbiAgICAgICAgICBjb2RlID09PSA5NVxuICAgICAgICApIHtcbiAgICAgICAgICBuYW1lICs9IHN0cltqKytdO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmICghbmFtZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgTWlzc2luZyBwYXJhbWV0ZXIgbmFtZSBhdCAke2l9YCk7XG5cbiAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogXCJOQU1FXCIsIGluZGV4OiBpLCB2YWx1ZTogbmFtZSB9KTtcbiAgICAgIGkgPSBqO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGNoYXIgPT09IFwiKFwiKSB7XG4gICAgICBsZXQgY291bnQgPSAxO1xuICAgICAgbGV0IHBhdHRlcm4gPSBcIlwiO1xuICAgICAgbGV0IGogPSBpICsgMTtcblxuICAgICAgaWYgKHN0cltqXSA9PT0gXCI/XCIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgUGF0dGVybiBjYW5ub3Qgc3RhcnQgd2l0aCBcIj9cIiBhdCAke2p9YCk7XG4gICAgICB9XG5cbiAgICAgIHdoaWxlIChqIDwgc3RyLmxlbmd0aCkge1xuICAgICAgICBpZiAoc3RyW2pdID09PSBcIlxcXFxcIikge1xuICAgICAgICAgIHBhdHRlcm4gKz0gc3RyW2orK10gKyBzdHJbaisrXTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdHJbal0gPT09IFwiKVwiKSB7XG4gICAgICAgICAgY291bnQtLTtcbiAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChzdHJbal0gPT09IFwiKFwiKSB7XG4gICAgICAgICAgY291bnQrKztcbiAgICAgICAgICBpZiAoc3RyW2ogKyAxXSAhPT0gXCI/XCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYENhcHR1cmluZyBncm91cHMgYXJlIG5vdCBhbGxvd2VkIGF0ICR7an1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwYXR0ZXJuICs9IHN0cltqKytdO1xuICAgICAgfVxuXG4gICAgICBpZiAoY291bnQpIHRocm93IG5ldyBUeXBlRXJyb3IoYFVuYmFsYW5jZWQgcGF0dGVybiBhdCAke2l9YCk7XG4gICAgICBpZiAoIXBhdHRlcm4pIHRocm93IG5ldyBUeXBlRXJyb3IoYE1pc3NpbmcgcGF0dGVybiBhdCAke2l9YCk7XG5cbiAgICAgIHRva2Vucy5wdXNoKHsgdHlwZTogXCJQQVRURVJOXCIsIGluZGV4OiBpLCB2YWx1ZTogcGF0dGVybiB9KTtcbiAgICAgIGkgPSBqO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdG9rZW5zLnB1c2goeyB0eXBlOiBcIkNIQVJcIiwgaW5kZXg6IGksIHZhbHVlOiBzdHJbaSsrXSB9KTtcbiAgfVxuXG4gIHRva2Vucy5wdXNoKHsgdHlwZTogXCJFTkRcIiwgaW5kZXg6IGksIHZhbHVlOiBcIlwiIH0pO1xuXG4gIHJldHVybiB0b2tlbnM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFyc2VPcHRpb25zIHtcbiAgLyoqXG4gICAqIFNldCB0aGUgZGVmYXVsdCBkZWxpbWl0ZXIgZm9yIHJlcGVhdCBwYXJhbWV0ZXJzLiAoZGVmYXVsdDogYCcvJ2ApXG4gICAqL1xuICBkZWxpbWl0ZXI/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBMaXN0IG9mIGNoYXJhY3RlcnMgdG8gYXV0b21hdGljYWxseSBjb25zaWRlciBwcmVmaXhlcyB3aGVuIHBhcnNpbmcuXG4gICAqL1xuICBwcmVmaXhlcz86IHN0cmluZztcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHN0cmluZyBmb3IgdGhlIHJhdyB0b2tlbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZShzdHI6IHN0cmluZywgb3B0aW9uczogUGFyc2VPcHRpb25zID0ge30pOiBUb2tlbltdIHtcbiAgY29uc3QgdG9rZW5zID0gbGV4ZXIoc3RyKTtcbiAgY29uc3QgeyBwcmVmaXhlcyA9IFwiLi9cIiB9ID0gb3B0aW9ucztcbiAgY29uc3QgZGVmYXVsdFBhdHRlcm4gPSBgW14ke2VzY2FwZVN0cmluZyhvcHRpb25zLmRlbGltaXRlciB8fCBcIi8jP1wiKX1dKz9gO1xuICBjb25zdCByZXN1bHQ6IFRva2VuW10gPSBbXTtcbiAgbGV0IGtleSA9IDA7XG4gIGxldCBpID0gMDtcbiAgbGV0IHBhdGggPSBcIlwiO1xuXG4gIGNvbnN0IHRyeUNvbnN1bWUgPSAodHlwZTogTGV4VG9rZW5bXCJ0eXBlXCJdKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgICBpZiAoaSA8IHRva2Vucy5sZW5ndGggJiYgdG9rZW5zW2ldLnR5cGUgPT09IHR5cGUpIHJldHVybiB0b2tlbnNbaSsrXS52YWx1ZTtcbiAgfTtcblxuICBjb25zdCBtdXN0Q29uc3VtZSA9ICh0eXBlOiBMZXhUb2tlbltcInR5cGVcIl0pOiBzdHJpbmcgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gdHJ5Q29uc3VtZSh0eXBlKTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkgcmV0dXJuIHZhbHVlO1xuICAgIGNvbnN0IHsgdHlwZTogbmV4dFR5cGUsIGluZGV4IH0gPSB0b2tlbnNbaV07XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgVW5leHBlY3RlZCAke25leHRUeXBlfSBhdCAke2luZGV4fSwgZXhwZWN0ZWQgJHt0eXBlfWApO1xuICB9O1xuXG4gIGNvbnN0IGNvbnN1bWVUZXh0ID0gKCk6IHN0cmluZyA9PiB7XG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgbGV0IHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgd2hpbGUgKCh2YWx1ZSA9IHRyeUNvbnN1bWUoXCJDSEFSXCIpIHx8IHRyeUNvbnN1bWUoXCJFU0NBUEVEX0NIQVJcIikpKSB7XG4gICAgICByZXN1bHQgKz0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgd2hpbGUgKGkgPCB0b2tlbnMubGVuZ3RoKSB7XG4gICAgY29uc3QgY2hhciA9IHRyeUNvbnN1bWUoXCJDSEFSXCIpO1xuICAgIGNvbnN0IG5hbWUgPSB0cnlDb25zdW1lKFwiTkFNRVwiKTtcbiAgICBjb25zdCBwYXR0ZXJuID0gdHJ5Q29uc3VtZShcIlBBVFRFUk5cIik7XG5cbiAgICBpZiAobmFtZSB8fCBwYXR0ZXJuKSB7XG4gICAgICBsZXQgcHJlZml4ID0gY2hhciB8fCBcIlwiO1xuXG4gICAgICBpZiAocHJlZml4ZXMuaW5kZXhPZihwcmVmaXgpID09PSAtMSkge1xuICAgICAgICBwYXRoICs9IHByZWZpeDtcbiAgICAgICAgcHJlZml4ID0gXCJcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgcmVzdWx0LnB1c2gocGF0aCk7XG4gICAgICAgIHBhdGggPSBcIlwiO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIG5hbWU6IG5hbWUgfHwga2V5KyssXG4gICAgICAgIHByZWZpeCxcbiAgICAgICAgc3VmZml4OiBcIlwiLFxuICAgICAgICBwYXR0ZXJuOiBwYXR0ZXJuIHx8IGRlZmF1bHRQYXR0ZXJuLFxuICAgICAgICBtb2RpZmllcjogdHJ5Q29uc3VtZShcIk1PRElGSUVSXCIpIHx8IFwiXCIsXG4gICAgICB9KTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHZhbHVlID0gY2hhciB8fCB0cnlDb25zdW1lKFwiRVNDQVBFRF9DSEFSXCIpO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcGF0aCArPSB2YWx1ZTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChwYXRoKSB7XG4gICAgICByZXN1bHQucHVzaChwYXRoKTtcbiAgICAgIHBhdGggPSBcIlwiO1xuICAgIH1cblxuICAgIGNvbnN0IG9wZW4gPSB0cnlDb25zdW1lKFwiT1BFTlwiKTtcbiAgICBpZiAob3Blbikge1xuICAgICAgY29uc3QgcHJlZml4ID0gY29uc3VtZVRleHQoKTtcbiAgICAgIGNvbnN0IG5hbWUgPSB0cnlDb25zdW1lKFwiTkFNRVwiKSB8fCBcIlwiO1xuICAgICAgY29uc3QgcGF0dGVybiA9IHRyeUNvbnN1bWUoXCJQQVRURVJOXCIpIHx8IFwiXCI7XG4gICAgICBjb25zdCBzdWZmaXggPSBjb25zdW1lVGV4dCgpO1xuXG4gICAgICBtdXN0Q29uc3VtZShcIkNMT1NFXCIpO1xuXG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIG5hbWU6IG5hbWUgfHwgKHBhdHRlcm4gPyBrZXkrKyA6IFwiXCIpLFxuICAgICAgICBwYXR0ZXJuOiBuYW1lICYmICFwYXR0ZXJuID8gZGVmYXVsdFBhdHRlcm4gOiBwYXR0ZXJuLFxuICAgICAgICBwcmVmaXgsXG4gICAgICAgIHN1ZmZpeCxcbiAgICAgICAgbW9kaWZpZXI6IHRyeUNvbnN1bWUoXCJNT0RJRklFUlwiKSB8fCBcIlwiLFxuICAgICAgfSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBtdXN0Q29uc3VtZShcIkVORFwiKTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9rZW5zVG9GdW5jdGlvbk9wdGlvbnMge1xuICAvKipcbiAgICogV2hlbiBgdHJ1ZWAgdGhlIHJlZ2V4cCB3aWxsIGJlIGNhc2Ugc2Vuc2l0aXZlLiAoZGVmYXVsdDogYGZhbHNlYClcbiAgICovXG4gIHNlbnNpdGl2ZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBGdW5jdGlvbiBmb3IgZW5jb2RpbmcgaW5wdXQgc3RyaW5ncyBmb3Igb3V0cHV0LlxuICAgKi9cbiAgZW5jb2RlPzogKHZhbHVlOiBzdHJpbmcsIHRva2VuOiBLZXkpID0+IHN0cmluZztcbiAgLyoqXG4gICAqIFdoZW4gYGZhbHNlYCB0aGUgZnVuY3Rpb24gY2FuIHByb2R1Y2UgYW4gaW52YWxpZCAodW5tYXRjaGVkKSBwYXRoLiAoZGVmYXVsdDogYHRydWVgKVxuICAgKi9cbiAgdmFsaWRhdGU/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBzdHJpbmcgdG8gYSB0ZW1wbGF0ZSBmdW5jdGlvbiBmb3IgdGhlIHBhdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21waWxlPFAgZXh0ZW5kcyBvYmplY3QgPSBvYmplY3Q+KFxuICBzdHI6IHN0cmluZyxcbiAgb3B0aW9ucz86IFBhcnNlT3B0aW9ucyAmIFRva2Vuc1RvRnVuY3Rpb25PcHRpb25zXG4pIHtcbiAgcmV0dXJuIHRva2Vuc1RvRnVuY3Rpb248UD4ocGFyc2Uoc3RyLCBvcHRpb25zKSwgb3B0aW9ucyk7XG59XG5cbmV4cG9ydCB0eXBlIFBhdGhGdW5jdGlvbjxQIGV4dGVuZHMgb2JqZWN0ID0gb2JqZWN0PiA9IChkYXRhPzogUCkgPT4gc3RyaW5nO1xuXG4vKipcbiAqIEV4cG9zZSBhIG1ldGhvZCBmb3IgdHJhbnNmb3JtaW5nIHRva2VucyBpbnRvIHRoZSBwYXRoIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9rZW5zVG9GdW5jdGlvbjxQIGV4dGVuZHMgb2JqZWN0ID0gb2JqZWN0PihcbiAgdG9rZW5zOiBUb2tlbltdLFxuICBvcHRpb25zOiBUb2tlbnNUb0Z1bmN0aW9uT3B0aW9ucyA9IHt9XG4pOiBQYXRoRnVuY3Rpb248UD4ge1xuICBjb25zdCByZUZsYWdzID0gZmxhZ3Mob3B0aW9ucyk7XG4gIGNvbnN0IHsgZW5jb2RlID0gKHg6IHN0cmluZykgPT4geCwgdmFsaWRhdGUgPSB0cnVlIH0gPSBvcHRpb25zO1xuXG4gIC8vIENvbXBpbGUgYWxsIHRoZSB0b2tlbnMgaW50byByZWdleHBzLlxuICBjb25zdCBtYXRjaGVzID0gdG9rZW5zLm1hcCgodG9rZW4pID0+IHtcbiAgICBpZiAodHlwZW9mIHRva2VuID09PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cChgXig/OiR7dG9rZW4ucGF0dGVybn0pJGAsIHJlRmxhZ3MpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIChkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCB8IHVuZGVmaW5lZCkgPT4ge1xuICAgIGxldCBwYXRoID0gXCJcIjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IHRva2Vuc1tpXTtcblxuICAgICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBwYXRoICs9IHRva2VuO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdmFsdWUgPSBkYXRhID8gZGF0YVt0b2tlbi5uYW1lXSA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IG9wdGlvbmFsID0gdG9rZW4ubW9kaWZpZXIgPT09IFwiP1wiIHx8IHRva2VuLm1vZGlmaWVyID09PSBcIipcIjtcbiAgICAgIGNvbnN0IHJlcGVhdCA9IHRva2VuLm1vZGlmaWVyID09PSBcIipcIiB8fCB0b2tlbi5tb2RpZmllciA9PT0gXCIrXCI7XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBpZiAoIXJlcGVhdCkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgICBgRXhwZWN0ZWQgXCIke3Rva2VuLm5hbWV9XCIgdG8gbm90IHJlcGVhdCwgYnV0IGdvdCBhbiBhcnJheWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGlmIChvcHRpb25hbCkgY29udGludWU7XG5cbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBcIiR7dG9rZW4ubmFtZX1cIiB0byBub3QgYmUgZW1wdHlgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBjb25zdCBzZWdtZW50ID0gZW5jb2RlKHZhbHVlW2pdLCB0b2tlbik7XG5cbiAgICAgICAgICBpZiAodmFsaWRhdGUgJiYgIShtYXRjaGVzW2ldIGFzIFJlZ0V4cCkudGVzdChzZWdtZW50KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgICAgYEV4cGVjdGVkIGFsbCBcIiR7dG9rZW4ubmFtZX1cIiB0byBtYXRjaCBcIiR7dG9rZW4ucGF0dGVybn1cIiwgYnV0IGdvdCBcIiR7c2VnbWVudH1cImBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcGF0aCArPSB0b2tlbi5wcmVmaXggKyBzZWdtZW50ICsgdG9rZW4uc3VmZml4O1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnQgPSBlbmNvZGUoU3RyaW5nKHZhbHVlKSwgdG9rZW4pO1xuXG4gICAgICAgIGlmICh2YWxpZGF0ZSAmJiAhKG1hdGNoZXNbaV0gYXMgUmVnRXhwKS50ZXN0KHNlZ21lbnQpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAgIGBFeHBlY3RlZCBcIiR7dG9rZW4ubmFtZX1cIiB0byBtYXRjaCBcIiR7dG9rZW4ucGF0dGVybn1cIiwgYnV0IGdvdCBcIiR7c2VnbWVudH1cImBcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcGF0aCArPSB0b2tlbi5wcmVmaXggKyBzZWdtZW50ICsgdG9rZW4uc3VmZml4O1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbmFsKSBjb250aW51ZTtcblxuICAgICAgY29uc3QgdHlwZU9mTWVzc2FnZSA9IHJlcGVhdCA/IFwiYW4gYXJyYXlcIiA6IFwiYSBzdHJpbmdcIjtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIFwiJHt0b2tlbi5uYW1lfVwiIHRvIGJlICR7dHlwZU9mTWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGF0aDtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWdleHBUb0Z1bmN0aW9uT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBGdW5jdGlvbiBmb3IgZGVjb2Rpbmcgc3RyaW5ncyBmb3IgcGFyYW1zLlxuICAgKi9cbiAgZGVjb2RlPzogKHZhbHVlOiBzdHJpbmcsIHRva2VuOiBLZXkpID0+IHN0cmluZztcbn1cblxuLyoqXG4gKiBBIG1hdGNoIHJlc3VsdCBjb250YWlucyBkYXRhIGFib3V0IHRoZSBwYXRoIG1hdGNoLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1hdGNoUmVzdWx0PFAgZXh0ZW5kcyBvYmplY3QgPSBvYmplY3Q+IHtcbiAgcGF0aDogc3RyaW5nO1xuICBpbmRleDogbnVtYmVyO1xuICBwYXJhbXM6IFA7XG59XG5cbi8qKlxuICogQSBtYXRjaCBpcyBlaXRoZXIgYGZhbHNlYCAobm8gbWF0Y2gpIG9yIGEgbWF0Y2ggcmVzdWx0LlxuICovXG5leHBvcnQgdHlwZSBNYXRjaDxQIGV4dGVuZHMgb2JqZWN0ID0gb2JqZWN0PiA9IGZhbHNlIHwgTWF0Y2hSZXN1bHQ8UD47XG5cbi8qKlxuICogVGhlIG1hdGNoIGZ1bmN0aW9uIHRha2VzIGEgc3RyaW5nIGFuZCByZXR1cm5zIHdoZXRoZXIgaXQgbWF0Y2hlZCB0aGUgcGF0aC5cbiAqL1xuZXhwb3J0IHR5cGUgTWF0Y2hGdW5jdGlvbjxQIGV4dGVuZHMgb2JqZWN0ID0gb2JqZWN0PiA9IChcbiAgcGF0aDogc3RyaW5nXG4pID0+IE1hdGNoPFA+O1xuXG4vKipcbiAqIENyZWF0ZSBwYXRoIG1hdGNoIGZ1bmN0aW9uIGZyb20gYHBhdGgtdG8tcmVnZXhwYCBzcGVjLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2g8UCBleHRlbmRzIG9iamVjdCA9IG9iamVjdD4oXG4gIHN0cjogUGF0aCxcbiAgb3B0aW9ucz86IFBhcnNlT3B0aW9ucyAmIFRva2Vuc1RvUmVnZXhwT3B0aW9ucyAmIFJlZ2V4cFRvRnVuY3Rpb25PcHRpb25zXG4pIHtcbiAgY29uc3Qga2V5czogS2V5W10gPSBbXTtcbiAgY29uc3QgcmUgPSBwYXRoVG9SZWdleHAoc3RyLCBrZXlzLCBvcHRpb25zKTtcbiAgcmV0dXJuIHJlZ2V4cFRvRnVuY3Rpb248UD4ocmUsIGtleXMsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHBhdGggbWF0Y2ggZnVuY3Rpb24gZnJvbSBgcGF0aC10by1yZWdleHBgIG91dHB1dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2V4cFRvRnVuY3Rpb248UCBleHRlbmRzIG9iamVjdCA9IG9iamVjdD4oXG4gIHJlOiBSZWdFeHAsXG4gIGtleXM6IEtleVtdLFxuICBvcHRpb25zOiBSZWdleHBUb0Z1bmN0aW9uT3B0aW9ucyA9IHt9XG4pOiBNYXRjaEZ1bmN0aW9uPFA+IHtcbiAgY29uc3QgeyBkZWNvZGUgPSAoeDogc3RyaW5nKSA9PiB4IH0gPSBvcHRpb25zO1xuXG4gIHJldHVybiBmdW5jdGlvbiAocGF0aG5hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IG0gPSByZS5leGVjKHBhdGhuYW1lKTtcbiAgICBpZiAoIW0pIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IHsgMDogcGF0aCwgaW5kZXggfSA9IG07XG4gICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKG1baV0gPT09IHVuZGVmaW5lZCkgY29udGludWU7XG5cbiAgICAgIGNvbnN0IGtleSA9IGtleXNbaSAtIDFdO1xuXG4gICAgICBpZiAoa2V5Lm1vZGlmaWVyID09PSBcIipcIiB8fCBrZXkubW9kaWZpZXIgPT09IFwiK1wiKSB7XG4gICAgICAgIHBhcmFtc1trZXkubmFtZV0gPSBtW2ldLnNwbGl0KGtleS5wcmVmaXggKyBrZXkuc3VmZml4KS5tYXAoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRlY29kZSh2YWx1ZSwga2V5KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhbXNba2V5Lm5hbWVdID0gZGVjb2RlKG1baV0sIGtleSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcGF0aCwgaW5kZXgsIHBhcmFtcyB9O1xuICB9O1xufVxuXG4vKipcbiAqIEVzY2FwZSBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZVN0cmluZyhzdHI6IHN0cmluZykge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbLisqPz1eIToke30oKVtcXF18L1xcXFxdKS9nLCBcIlxcXFwkMVwiKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGZsYWdzIGZvciBhIHJlZ2V4cCBmcm9tIHRoZSBvcHRpb25zLlxuICovXG5mdW5jdGlvbiBmbGFncyhvcHRpb25zPzogeyBzZW5zaXRpdmU/OiBib29sZWFuIH0pIHtcbiAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5zZW5zaXRpdmUgPyBcIlwiIDogXCJpXCI7XG59XG5cbi8qKlxuICogTWV0YWRhdGEgYWJvdXQgYSBrZXkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgS2V5IHtcbiAgbmFtZTogc3RyaW5nIHwgbnVtYmVyO1xuICBwcmVmaXg6IHN0cmluZztcbiAgc3VmZml4OiBzdHJpbmc7XG4gIHBhdHRlcm46IHN0cmluZztcbiAgbW9kaWZpZXI6IHN0cmluZztcbn1cblxuLyoqXG4gKiBBIHRva2VuIGlzIGEgc3RyaW5nIChub3RoaW5nIHNwZWNpYWwpIG9yIGtleSBtZXRhZGF0YSAoY2FwdHVyZSBncm91cCkuXG4gKi9cbmV4cG9ydCB0eXBlIFRva2VuID0gc3RyaW5nIHwgS2V5O1xuXG4vKipcbiAqIFB1bGwgb3V0IGtleXMgZnJvbSBhIHJlZ2V4cC5cbiAqL1xuZnVuY3Rpb24gcmVnZXhwVG9SZWdleHAocGF0aDogUmVnRXhwLCBrZXlzPzogS2V5W10pOiBSZWdFeHAge1xuICBpZiAoIWtleXMpIHJldHVybiBwYXRoO1xuXG4gIGNvbnN0IGdyb3Vwc1JlZ2V4ID0gL1xcKCg/OlxcPzwoLio/KT4pPyg/IVxcPykvZztcblxuICBsZXQgaW5kZXggPSAwO1xuICBsZXQgZXhlY1Jlc3VsdCA9IGdyb3Vwc1JlZ2V4LmV4ZWMocGF0aC5zb3VyY2UpO1xuICB3aGlsZSAoZXhlY1Jlc3VsdCkge1xuICAgIGtleXMucHVzaCh7XG4gICAgICAvLyBVc2UgcGFyZW50aGVzaXplZCBzdWJzdHJpbmcgbWF0Y2ggaWYgYXZhaWxhYmxlLCBpbmRleCBvdGhlcndpc2VcbiAgICAgIG5hbWU6IGV4ZWNSZXN1bHRbMV0gfHwgaW5kZXgrKyxcbiAgICAgIHByZWZpeDogXCJcIixcbiAgICAgIHN1ZmZpeDogXCJcIixcbiAgICAgIG1vZGlmaWVyOiBcIlwiLFxuICAgICAgcGF0dGVybjogXCJcIixcbiAgICB9KTtcbiAgICBleGVjUmVzdWx0ID0gZ3JvdXBzUmVnZXguZXhlYyhwYXRoLnNvdXJjZSk7XG4gIH1cblxuICByZXR1cm4gcGF0aDtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm0gYW4gYXJyYXkgaW50byBhIHJlZ2V4cC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlUb1JlZ2V4cChcbiAgcGF0aHM6IEFycmF5PHN0cmluZyB8IFJlZ0V4cD4sXG4gIGtleXM/OiBLZXlbXSxcbiAgb3B0aW9ucz86IFRva2Vuc1RvUmVnZXhwT3B0aW9ucyAmIFBhcnNlT3B0aW9uc1xuKTogUmVnRXhwIHtcbiAgY29uc3QgcGFydHMgPSBwYXRocy5tYXAoKHBhdGgpID0+IHBhdGhUb1JlZ2V4cChwYXRoLCBrZXlzLCBvcHRpb25zKS5zb3VyY2UpO1xuICByZXR1cm4gbmV3IFJlZ0V4cChgKD86JHtwYXJ0cy5qb2luKFwifFwiKX0pYCwgZmxhZ3Mob3B0aW9ucykpO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHBhdGggcmVnZXhwIGZyb20gc3RyaW5nIGlucHV0LlxuICovXG5mdW5jdGlvbiBzdHJpbmdUb1JlZ2V4cChcbiAgcGF0aDogc3RyaW5nLFxuICBrZXlzPzogS2V5W10sXG4gIG9wdGlvbnM/OiBUb2tlbnNUb1JlZ2V4cE9wdGlvbnMgJiBQYXJzZU9wdGlvbnNcbikge1xuICByZXR1cm4gdG9rZW5zVG9SZWdleHAocGFyc2UocGF0aCwgb3B0aW9ucyksIGtleXMsIG9wdGlvbnMpO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRva2Vuc1RvUmVnZXhwT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBXaGVuIGB0cnVlYCB0aGUgcmVnZXhwIHdpbGwgYmUgY2FzZSBzZW5zaXRpdmUuIChkZWZhdWx0OiBgZmFsc2VgKVxuICAgKi9cbiAgc2Vuc2l0aXZlPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFdoZW4gYHRydWVgIHRoZSByZWdleHAgd29uJ3QgYWxsb3cgYW4gb3B0aW9uYWwgdHJhaWxpbmcgZGVsaW1pdGVyIHRvIG1hdGNoLiAoZGVmYXVsdDogYGZhbHNlYClcbiAgICovXG4gIHN0cmljdD86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBXaGVuIGB0cnVlYCB0aGUgcmVnZXhwIHdpbGwgbWF0Y2ggdG8gdGhlIGVuZCBvZiB0aGUgc3RyaW5nLiAoZGVmYXVsdDogYHRydWVgKVxuICAgKi9cbiAgZW5kPzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFdoZW4gYHRydWVgIHRoZSByZWdleHAgd2lsbCBtYXRjaCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZy4gKGRlZmF1bHQ6IGB0cnVlYClcbiAgICovXG4gIHN0YXJ0PzogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFNldHMgdGhlIGZpbmFsIGNoYXJhY3RlciBmb3Igbm9uLWVuZGluZyBvcHRpbWlzdGljIG1hdGNoZXMuIChkZWZhdWx0OiBgL2ApXG4gICAqL1xuICBkZWxpbWl0ZXI/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBMaXN0IG9mIGNoYXJhY3RlcnMgdGhhdCBjYW4gYWxzbyBiZSBcImVuZFwiIGNoYXJhY3RlcnMuXG4gICAqL1xuICBlbmRzV2l0aD86IHN0cmluZztcbiAgLyoqXG4gICAqIEVuY29kZSBwYXRoIHRva2VucyBmb3IgdXNlIGluIHRoZSBgUmVnRXhwYC5cbiAgICovXG4gIGVuY29kZT86ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmc7XG59XG5cbi8qKlxuICogRXhwb3NlIGEgZnVuY3Rpb24gZm9yIHRha2luZyB0b2tlbnMgYW5kIHJldHVybmluZyBhIFJlZ0V4cC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRva2Vuc1RvUmVnZXhwKFxuICB0b2tlbnM6IFRva2VuW10sXG4gIGtleXM/OiBLZXlbXSxcbiAgb3B0aW9uczogVG9rZW5zVG9SZWdleHBPcHRpb25zID0ge31cbikge1xuICBjb25zdCB7XG4gICAgc3RyaWN0ID0gZmFsc2UsXG4gICAgc3RhcnQgPSB0cnVlLFxuICAgIGVuZCA9IHRydWUsXG4gICAgZW5jb2RlID0gKHg6IHN0cmluZykgPT4geCxcbiAgICBkZWxpbWl0ZXIgPSBcIi8jP1wiLFxuICAgIGVuZHNXaXRoID0gXCJcIixcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IGVuZHNXaXRoUmUgPSBgWyR7ZXNjYXBlU3RyaW5nKGVuZHNXaXRoKX1dfCRgO1xuICBjb25zdCBkZWxpbWl0ZXJSZSA9IGBbJHtlc2NhcGVTdHJpbmcoZGVsaW1pdGVyKX1dYDtcbiAgbGV0IHJvdXRlID0gc3RhcnQgPyBcIl5cIiA6IFwiXCI7XG5cbiAgLy8gSXRlcmF0ZSBvdmVyIHRoZSB0b2tlbnMgYW5kIGNyZWF0ZSBvdXIgcmVnZXhwIHN0cmluZy5cbiAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcbiAgICBpZiAodHlwZW9mIHRva2VuID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByb3V0ZSArPSBlc2NhcGVTdHJpbmcoZW5jb2RlKHRva2VuKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByZWZpeCA9IGVzY2FwZVN0cmluZyhlbmNvZGUodG9rZW4ucHJlZml4KSk7XG4gICAgICBjb25zdCBzdWZmaXggPSBlc2NhcGVTdHJpbmcoZW5jb2RlKHRva2VuLnN1ZmZpeCkpO1xuXG4gICAgICBpZiAodG9rZW4ucGF0dGVybikge1xuICAgICAgICBpZiAoa2V5cykga2V5cy5wdXNoKHRva2VuKTtcblxuICAgICAgICBpZiAocHJlZml4IHx8IHN1ZmZpeCkge1xuICAgICAgICAgIGlmICh0b2tlbi5tb2RpZmllciA9PT0gXCIrXCIgfHwgdG9rZW4ubW9kaWZpZXIgPT09IFwiKlwiKSB7XG4gICAgICAgICAgICBjb25zdCBtb2QgPSB0b2tlbi5tb2RpZmllciA9PT0gXCIqXCIgPyBcIj9cIiA6IFwiXCI7XG4gICAgICAgICAgICByb3V0ZSArPSBgKD86JHtwcmVmaXh9KCg/OiR7dG9rZW4ucGF0dGVybn0pKD86JHtzdWZmaXh9JHtwcmVmaXh9KD86JHt0b2tlbi5wYXR0ZXJufSkpKikke3N1ZmZpeH0pJHttb2R9YDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcm91dGUgKz0gYCg/OiR7cHJlZml4fSgke3Rva2VuLnBhdHRlcm59KSR7c3VmZml4fSkke3Rva2VuLm1vZGlmaWVyfWA7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0b2tlbi5tb2RpZmllciA9PT0gXCIrXCIgfHwgdG9rZW4ubW9kaWZpZXIgPT09IFwiKlwiKSB7XG4gICAgICAgICAgICByb3V0ZSArPSBgKCg/OiR7dG9rZW4ucGF0dGVybn0pJHt0b2tlbi5tb2RpZmllcn0pYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcm91dGUgKz0gYCgke3Rva2VuLnBhdHRlcm59KSR7dG9rZW4ubW9kaWZpZXJ9YDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvdXRlICs9IGAoPzoke3ByZWZpeH0ke3N1ZmZpeH0pJHt0b2tlbi5tb2RpZmllcn1gO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChlbmQpIHtcbiAgICBpZiAoIXN0cmljdCkgcm91dGUgKz0gYCR7ZGVsaW1pdGVyUmV9P2A7XG5cbiAgICByb3V0ZSArPSAhb3B0aW9ucy5lbmRzV2l0aCA/IFwiJFwiIDogYCg/PSR7ZW5kc1dpdGhSZX0pYDtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBlbmRUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgaXNFbmREZWxpbWl0ZWQgPVxuICAgICAgdHlwZW9mIGVuZFRva2VuID09PSBcInN0cmluZ1wiXG4gICAgICAgID8gZGVsaW1pdGVyUmUuaW5kZXhPZihlbmRUb2tlbltlbmRUb2tlbi5sZW5ndGggLSAxXSkgPiAtMVxuICAgICAgICA6IGVuZFRva2VuID09PSB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIXN0cmljdCkge1xuICAgICAgcm91dGUgKz0gYCg/OiR7ZGVsaW1pdGVyUmV9KD89JHtlbmRzV2l0aFJlfSkpP2A7XG4gICAgfVxuXG4gICAgaWYgKCFpc0VuZERlbGltaXRlZCkge1xuICAgICAgcm91dGUgKz0gYCg/PSR7ZGVsaW1pdGVyUmV9fCR7ZW5kc1dpdGhSZX0pYDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmV3IFJlZ0V4cChyb3V0ZSwgZmxhZ3Mob3B0aW9ucykpO1xufVxuXG4vKipcbiAqIFN1cHBvcnRlZCBgcGF0aC10by1yZWdleHBgIGlucHV0IHR5cGVzLlxuICovXG5leHBvcnQgdHlwZSBQYXRoID0gc3RyaW5nIHwgUmVnRXhwIHwgQXJyYXk8c3RyaW5nIHwgUmVnRXhwPjtcblxuLyoqXG4gKiBOb3JtYWxpemUgdGhlIGdpdmVuIHBhdGggc3RyaW5nLCByZXR1cm5pbmcgYSByZWd1bGFyIGV4cHJlc3Npb24uXG4gKlxuICogQW4gZW1wdHkgYXJyYXkgY2FuIGJlIHBhc3NlZCBpbiBmb3IgdGhlIGtleXMsIHdoaWNoIHdpbGwgaG9sZCB0aGVcbiAqIHBsYWNlaG9sZGVyIGtleSBkZXNjcmlwdGlvbnMuIEZvciBleGFtcGxlLCB1c2luZyBgL3VzZXIvOmlkYCwgYGtleXNgIHdpbGxcbiAqIGNvbnRhaW4gYFt7IG5hbWU6ICdpZCcsIGRlbGltaXRlcjogJy8nLCBvcHRpb25hbDogZmFsc2UsIHJlcGVhdDogZmFsc2UgfV1gLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGF0aFRvUmVnZXhwKFxuICBwYXRoOiBQYXRoLFxuICBrZXlzPzogS2V5W10sXG4gIG9wdGlvbnM/OiBUb2tlbnNUb1JlZ2V4cE9wdGlvbnMgJiBQYXJzZU9wdGlvbnNcbikge1xuICBpZiAocGF0aCBpbnN0YW5jZW9mIFJlZ0V4cCkgcmV0dXJuIHJlZ2V4cFRvUmVnZXhwKHBhdGgsIGtleXMpO1xuICBpZiAoQXJyYXkuaXNBcnJheShwYXRoKSkgcmV0dXJuIGFycmF5VG9SZWdleHAocGF0aCwga2V5cywgb3B0aW9ucyk7XG4gIHJldHVybiBzdHJpbmdUb1JlZ2V4cChwYXRoLCBrZXlzLCBvcHRpb25zKTtcbn1cbiIsICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHsgZ2xvYlN5bmMgfSBmcm9tIFwiZ2xvYlwiO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyBPdXRwdXQsIFVud3JhcCwgb3V0cHV0LCBhbGwsIENvbXBvbmVudFJlc291cmNlIH0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5pbXBvcnQgeyBJbnB1dCB9IGZyb20gXCIuLi9pbnB1dC5qc1wiO1xuaW1wb3J0IHsgdHJhbnNmb3JtLCB0eXBlIFRyYW5zZm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnQuanNcIjtcbmltcG9ydCB7IFZpc2libGVFcnJvciB9IGZyb20gXCIuLi9lcnJvci5qc1wiO1xuaW1wb3J0IHsgQmFzZVNpdGVGaWxlT3B0aW9ucyB9IGZyb20gXCIuLi9iYXNlL2Jhc2Utc2l0ZS5qc1wiO1xuaW1wb3J0IHsgQmFzZVNzclNpdGVBcmdzIH0gZnJvbSBcIi4uL2Jhc2UvYmFzZS1zc3Itc2l0ZS5qc1wiO1xuaW1wb3J0IHsgS3YsIEt2QXJncyB9IGZyb20gXCIuL2t2LmpzXCI7XG5pbXBvcnQgeyBXb3JrZXIsIFdvcmtlckFyZ3MgfSBmcm9tIFwiLi93b3JrZXIuanNcIjtcbmltcG9ydCB7IEt2RGF0YSB9IGZyb20gXCIuL3Byb3ZpZGVycy9rdi1kYXRhLmpzXCI7XG5cbnR5cGUgUGxhbiA9IFJldHVyblR5cGU8dHlwZW9mIHZhbGlkYXRlUGxhbj47XG5leHBvcnQgaW50ZXJmYWNlIFNzclNpdGVBcmdzIGV4dGVuZHMgQmFzZVNzclNpdGVBcmdzIHtcbiAgZG9tYWluPzogSW5wdXQ8c3RyaW5nPjtcbiAgLyoqXG4gICAqIFtUcmFuc2Zvcm1dKC9kb2NzL2NvbXBvbmVudHMjdHJhbnNmb3JtKSBob3cgdGhpcyBjb21wb25lbnQgY3JlYXRlcyBpdHMgdW5kZXJseWluZ1xuICAgKiByZXNvdXJjZXMuXG4gICAqL1xuICB0cmFuc2Zvcm0/OiB7XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoZSBLdiByZXNvdXJjZSB1c2VkIGZvciB1cGxvYWRpbmcgdGhlIGFzc2V0cy5cbiAgICAgKi9cbiAgICBhc3NldHM/OiBUcmFuc2Zvcm08S3ZBcmdzPjtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmUoYXJnczogU3NyU2l0ZUFyZ3MpIHtcbiAgY29uc3Qgc2l0ZVBhdGggPSBub3JtYWxpemVTaXRlUGF0aCgpO1xuXG4gIHJldHVybiB7XG4gICAgc2l0ZVBhdGgsXG4gIH07XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplU2l0ZVBhdGgoKSB7XG4gICAgcmV0dXJuIG91dHB1dChhcmdzLnBhdGgpLmFwcGx5KChzaXRlUGF0aCkgPT4ge1xuICAgICAgaWYgKCFzaXRlUGF0aCkgcmV0dXJuIFwiLlwiO1xuXG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoc2l0ZVBhdGgpKSB7XG4gICAgICAgIHRocm93IG5ldyBWaXNpYmxlRXJyb3IoYE5vIHNpdGUgZm91bmQgYXQgXCIke3BhdGgucmVzb2x2ZShzaXRlUGF0aCl9XCJgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzaXRlUGF0aDtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlS3ZTdG9yYWdlKFxuICBwYXJlbnQ6IENvbXBvbmVudFJlc291cmNlLFxuICBuYW1lOiBzdHJpbmcsXG4gIGFyZ3M6IFNzclNpdGVBcmdzLFxuKSB7XG4gIHJldHVybiBuZXcgS3YoYCR7bmFtZX1Bc3NldHNgLCB0cmFuc2Zvcm0oYXJncy50cmFuc2Zvcm0/LmFzc2V0cywge30pLCB7XG4gICAgcGFyZW50LFxuICAgIHJldGFpbk9uRGVsZXRlOiBmYWxzZSxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSb3V0ZXIoXG4gIHBhcmVudDogQ29tcG9uZW50UmVzb3VyY2UsXG4gIG5hbWU6IHN0cmluZyxcbiAgYXJnczogU3NyU2l0ZUFyZ3MsXG4gIG91dHB1dFBhdGg6IE91dHB1dDxzdHJpbmc+LFxuICBzdG9yYWdlOiBLdixcbiAgcGxhbjogSW5wdXQ8UGxhbj4sXG4pIHtcbiAgcmV0dXJuIGFsbChbb3V0cHV0UGF0aCwgcGxhbl0pLmFwcGx5KChbb3V0cHV0UGF0aCwgcGxhbl0pID0+IHtcbiAgICBjb25zdCBhc3NldE1hbmlmZXN0ID0gZ2VuZXJhdGVBc3NldE1hbmlmZXN0KCk7XG4gICAgY29uc3Qga3ZEYXRhID0gdXBsb2FkQXNzZXRzKCk7XG4gICAgY29uc3Qgc2VydmVyID0gY3JlYXRlU2VydmVyV29ya2VyKCk7XG4gICAgY29uc3Qgcm91dGVyID0gY3JlYXRlUm91dGVyV29ya2VyKCk7XG5cbiAgICByZXR1cm4geyBzZXJ2ZXIsIHJvdXRlciB9O1xuXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVBc3NldE1hbmlmZXN0KCkge1xuICAgICAgcmV0dXJuIG91dHB1dChhcmdzLmFzc2V0cykuYXBwbHkoYXN5bmMgKGFzc2V0cykgPT4ge1xuICAgICAgICAvLyBEZWZpbmUgY29udGVudCBoZWFkZXJzXG4gICAgICAgIGNvbnN0IHZlcnNpb25lZEZpbGVzVFRMID0gMzE1MzYwMDA7IC8vIDEgeWVhclxuICAgICAgICBjb25zdCBub25WZXJzaW9uZWRGaWxlc1RUTCA9IDg2NDAwOyAvLyAxIGRheVxuXG4gICAgICAgIGNvbnN0IG1hbmlmZXN0ID0gW107XG5cbiAgICAgICAgLy8gSGFuZGxlIGVhY2ggY29weSBzb3VyY2VcbiAgICAgICAgZm9yIChjb25zdCBjb3B5IG9mIHBsYW4uYXNzZXRzLmNvcHkpIHtcbiAgICAgICAgICAvLyBCdWlsZCBmaWxlT3B0aW9uc1xuICAgICAgICAgIGNvbnN0IGZpbGVPcHRpb25zOiBCYXNlU2l0ZUZpbGVPcHRpb25zW10gPSBbXG4gICAgICAgICAgICAvLyB1bnZlcnNpb25lZCBmaWxlc1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBmaWxlczogXCIqKlwiLFxuICAgICAgICAgICAgICBpZ25vcmU6IGNvcHkudmVyc2lvbmVkU3ViRGlyXG4gICAgICAgICAgICAgICAgPyBwYXRoLnBvc2l4LmpvaW4oY29weS52ZXJzaW9uZWRTdWJEaXIsIFwiKipcIilcbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgY2FjaGVDb250cm9sOlxuICAgICAgICAgICAgICAgIGFzc2V0cz8ubm9uVmVyc2lvbmVkRmlsZXNDYWNoZUhlYWRlciA/P1xuICAgICAgICAgICAgICAgIGBwdWJsaWMsbWF4LWFnZT0wLHMtbWF4YWdlPSR7bm9uVmVyc2lvbmVkRmlsZXNUVEx9LHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9JHtub25WZXJzaW9uZWRGaWxlc1RUTH1gLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIHZlcnNpb25lZCBmaWxlc1xuICAgICAgICAgICAgLi4uKGNvcHkudmVyc2lvbmVkU3ViRGlyXG4gICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBmaWxlczogcGF0aC5wb3NpeC5qb2luKGNvcHkudmVyc2lvbmVkU3ViRGlyLCBcIioqXCIpLFxuICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6XG4gICAgICAgICAgICAgICAgICAgICAgYXNzZXRzPy52ZXJzaW9uZWRGaWxlc0NhY2hlSGVhZGVyID8/XG4gICAgICAgICAgICAgICAgICAgICAgYHB1YmxpYyxtYXgtYWdlPSR7dmVyc2lvbmVkRmlsZXNUVEx9LGltbXV0YWJsZWAsXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgOiBbXSksXG4gICAgICAgICAgICAuLi4oYXNzZXRzPy5maWxlT3B0aW9ucyA/PyBbXSksXG4gICAgICAgICAgXTtcblxuICAgICAgICAgIC8vIFVwbG9hZCBmaWxlcyBiYXNlZCBvbiBmaWxlT3B0aW9uc1xuICAgICAgICAgIGNvbnN0IGZpbGVzUHJvY2Vzc2VkOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgIGZvciAoY29uc3QgZmlsZU9wdGlvbiBvZiBmaWxlT3B0aW9ucy5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZ2xvYlN5bmMoZmlsZU9wdGlvbi5maWxlcywge1xuICAgICAgICAgICAgICBjd2Q6IHBhdGgucmVzb2x2ZShvdXRwdXRQYXRoLCBjb3B5LmZyb20pLFxuICAgICAgICAgICAgICBub2RpcjogdHJ1ZSxcbiAgICAgICAgICAgICAgZG90OiB0cnVlLFxuICAgICAgICAgICAgICBpZ25vcmU6IGZpbGVPcHRpb24uaWdub3JlLFxuICAgICAgICAgICAgfSkuZmlsdGVyKChmaWxlKSA9PiAhZmlsZXNQcm9jZXNzZWQuaW5jbHVkZXMoZmlsZSkpO1xuICAgICAgICAgICAgZmlsZXNQcm9jZXNzZWQucHVzaCguLi5maWxlcyk7XG5cbiAgICAgICAgICAgIG1hbmlmZXN0LnB1c2goXG4gICAgICAgICAgICAgIC4uLihhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgICAgICAgICBmaWxlcy5tYXAoYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHBhdGgucmVzb2x2ZShvdXRwdXRQYXRoLCBjb3B5LmZyb20sIGZpbGUpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZzLnByb21pc2VzLnJlYWRGaWxlKHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBoYXNoID0gY3J5cHRvXG4gICAgICAgICAgICAgICAgICAgIC5jcmVhdGVIYXNoKFwic2hhMjU2XCIpXG4gICAgICAgICAgICAgICAgICAgIC51cGRhdGUoY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLmRpZ2VzdChcImhleFwiKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBwYXRoLnBvc2l4LmpvaW4oY29weS50bywgZmlsZSksXG4gICAgICAgICAgICAgICAgICAgIGhhc2gsXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogZmlsZU9wdGlvbi5jYWNoZUNvbnRyb2wsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBnZXRDb250ZW50VHlwZShmaWxlLCBcIlVURi04XCIpLFxuICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgKSksXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuaWZlc3Q7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGxvYWRBc3NldHMoKSB7XG4gICAgICByZXR1cm4gbmV3IEt2RGF0YShcbiAgICAgICAgYCR7bmFtZX1Bc3NldEZpbGVzYCxcbiAgICAgICAge1xuICAgICAgICAgIGFjY291bnRJZDogc3N0LmNsb3VkZmxhcmUuREVGQVVMVF9BQ0NPVU5UX0lELFxuICAgICAgICAgIG5hbWVzcGFjZUlkOiBzdG9yYWdlLmlkLFxuICAgICAgICAgIGVudHJpZXM6IGFzc2V0TWFuaWZlc3QuYXBwbHkoKG1hbmlmZXN0KSA9PlxuICAgICAgICAgICAgbWFuaWZlc3QubWFwKChtKSA9PiAoe1xuICAgICAgICAgICAgICBzb3VyY2U6IG0uc291cmNlLFxuICAgICAgICAgICAgICBrZXk6IG0ua2V5LFxuICAgICAgICAgICAgICBoYXNoOiBtLmhhc2gsXG4gICAgICAgICAgICAgIGNhY2hlQ29udHJvbDogbS5jYWNoZUNvbnRyb2wsXG4gICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBtLmNvbnRlbnRUeXBlLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICksXG4gICAgICAgIH0sXG4gICAgICAgIHsgcGFyZW50LCBpZ25vcmVDaGFuZ2VzOiAkZGV2ID8gW1wiKlwiXSA6IHVuZGVmaW5lZCB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDb250ZW50VHlwZShmaWxlbmFtZTogc3RyaW5nLCB0ZXh0RW5jb2Rpbmc6IHN0cmluZykge1xuICAgICAgY29uc3QgZXh0ID0gZmlsZW5hbWUuZW5kc1dpdGgoXCIud2VsbC1rbm93bi9zaXRlLWFzc29jaWF0aW9uLWpzb25cIilcbiAgICAgICAgPyBcIi5qc29uXCJcbiAgICAgICAgOiBwYXRoLmV4dG5hbWUoZmlsZW5hbWUpO1xuICAgICAgY29uc3QgZXh0ZW5zaW9ucyA9IHtcbiAgICAgICAgW1wiLnR4dFwiXTogeyBtaW1lOiBcInRleHQvcGxhaW5cIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5odG1cIl06IHsgbWltZTogXCJ0ZXh0L2h0bWxcIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5odG1sXCJdOiB7IG1pbWU6IFwidGV4dC9odG1sXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIueGh0bWxcIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi94aHRtbCt4bWxcIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5jc3NcIl06IHsgbWltZTogXCJ0ZXh0L2Nzc1wiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLmpzXCJdOiB7IG1pbWU6IFwidGV4dC9qYXZhc2NyaXB0XCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIubWpzXCJdOiB7IG1pbWU6IFwidGV4dC9qYXZhc2NyaXB0XCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuYXBuZ1wiXTogeyBtaW1lOiBcImltYWdlL2FwbmdcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIuYXZpZlwiXTogeyBtaW1lOiBcImltYWdlL2F2aWZcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIuZ2lmXCJdOiB7IG1pbWU6IFwiaW1hZ2UvZ2lmXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLmpwZWdcIl06IHsgbWltZTogXCJpbWFnZS9qcGVnXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLmpwZ1wiXTogeyBtaW1lOiBcImltYWdlL2pwZWdcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIucG5nXCJdOiB7IG1pbWU6IFwiaW1hZ2UvcG5nXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLnN2Z1wiXTogeyBtaW1lOiBcImltYWdlL3N2Zyt4bWxcIiwgaXNUZXh0OiB0cnVlIH0sXG4gICAgICAgIFtcIi5ibXBcIl06IHsgbWltZTogXCJpbWFnZS9ibXBcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIudGlmZlwiXTogeyBtaW1lOiBcImltYWdlL3RpZmZcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIud2VicFwiXTogeyBtaW1lOiBcImltYWdlL3dlYnBcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIuaWNvXCJdOiB7IG1pbWU6IFwiaW1hZ2Uvdm5kLm1pY3Jvc29mdC5pY29uXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLmVvdFwiXTogeyBtaW1lOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1mb250b2JqZWN0XCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLnR0ZlwiXTogeyBtaW1lOiBcImZvbnQvdHRmXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLm90ZlwiXTogeyBtaW1lOiBcImZvbnQvb3RmXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLndvZmZcIl06IHsgbWltZTogXCJmb250L3dvZmZcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIud29mZjJcIl06IHsgbWltZTogXCJmb250L3dvZmYyXCIsIGlzVGV4dDogZmFsc2UgfSxcbiAgICAgICAgW1wiLmpzb25cIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsIGlzVGV4dDogdHJ1ZSB9LFxuICAgICAgICBbXCIuanNvbmxkXCJdOiB7IG1pbWU6IFwiYXBwbGljYXRpb24vbGQranNvblwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLnhtbFwiXTogeyBtaW1lOiBcImFwcGxpY2F0aW9uL3htbFwiLCBpc1RleHQ6IHRydWUgfSxcbiAgICAgICAgW1wiLnBkZlwiXTogeyBtaW1lOiBcImFwcGxpY2F0aW9uL3BkZlwiLCBpc1RleHQ6IGZhbHNlIH0sXG4gICAgICAgIFtcIi56aXBcIl06IHsgbWltZTogXCJhcHBsaWNhdGlvbi96aXBcIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgICBbXCIud2FzbVwiXTogeyBtaW1lOiBcImFwcGxpY2F0aW9uL3dhc21cIiwgaXNUZXh0OiBmYWxzZSB9LFxuICAgICAgfTtcbiAgICAgIGNvbnN0IGV4dGVuc2lvbkRhdGEgPSBleHRlbnNpb25zW2V4dCBhcyBrZXlvZiB0eXBlb2YgZXh0ZW5zaW9uc107XG4gICAgICBjb25zdCBtaW1lID0gZXh0ZW5zaW9uRGF0YT8ubWltZSA/PyBcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiO1xuICAgICAgY29uc3QgY2hhcnNldCA9XG4gICAgICAgIGV4dGVuc2lvbkRhdGE/LmlzVGV4dCAmJiB0ZXh0RW5jb2RpbmcgIT09IFwibm9uZVwiXG4gICAgICAgICAgPyBgO2NoYXJzZXQ9JHt0ZXh0RW5jb2Rpbmd9YFxuICAgICAgICAgIDogXCJcIjtcbiAgICAgIHJldHVybiBgJHttaW1lfSR7Y2hhcnNldH1gO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNlcnZlcldvcmtlcigpIHtcbiAgICAgIHJldHVybiBuZXcgV29ya2VyKFxuICAgICAgICBgJHtuYW1lfVNlcnZlcmAsXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5wbGFuLnNlcnZlcixcbiAgICAgICAgICBlbnZpcm9ubWVudDogb3V0cHV0KGFyZ3MuZW52aXJvbm1lbnQpLmFwcGx5KChlbnZpcm9ubWVudCkgPT4gKHtcbiAgICAgICAgICAgIC4uLmVudmlyb25tZW50LFxuICAgICAgICAgICAgLi4ucGxhbi5zZXJ2ZXIuZW52aXJvbm1lbnQsXG4gICAgICAgICAgfSkpLFxuICAgICAgICAgIGxpbms6IG91dHB1dChhcmdzLmxpbmspLmFwcGx5KChsaW5rKSA9PiBbXG4gICAgICAgICAgICAuLi4ocGxhbi5zZXJ2ZXIubGluayA/PyBbXSksXG4gICAgICAgICAgICAuLi4obGluayA/PyBbXSksXG4gICAgICAgICAgXSksXG4gICAgICAgICAgbGl2ZTogZmFsc2UsXG4gICAgICAgICAgX2lnbm9yZUNvZGVDaGFuZ2VzOiAkZGV2LFxuICAgICAgICB9LFxuICAgICAgICB7IHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVSb3V0ZXJXb3JrZXIoKSB7XG4gICAgICByZXR1cm4gbmV3IFdvcmtlcihcbiAgICAgICAgYCR7bmFtZX1Sb3V0ZXJgLFxuICAgICAgICB7XG4gICAgICAgICAgaGFuZGxlcjogcGF0aC5qb2luKFxuICAgICAgICAgICAgJGNsaS5wYXRocy5wbGF0Zm9ybSxcbiAgICAgICAgICAgIFwiZnVuY3Rpb25zXCIsXG4gICAgICAgICAgICBcImNmLXNzci1zaXRlLXJvdXRlci13b3JrZXJcIixcbiAgICAgICAgICApLFxuICAgICAgICAgIHVybDogdHJ1ZSxcbiAgICAgICAgICBsaXZlOiBmYWxzZSxcbiAgICAgICAgICBkb21haW46IGFyZ3MuZG9tYWluLFxuICAgICAgICAgIGJ1aWxkOiB7XG4gICAgICAgICAgICBlc2J1aWxkOiBhc3NldE1hbmlmZXN0LmFwcGx5KChhc3NldE1hbmlmZXN0KSA9PiAoe1xuICAgICAgICAgICAgICBkZWZpbmU6IHtcbiAgICAgICAgICAgICAgICBTU1RfQVNTRVRfTUFOSUZFU1Q6IEpTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgICAgICAgT2JqZWN0LmZyb21FbnRyaWVzKGFzc2V0TWFuaWZlc3QubWFwKChlKSA9PiBbZS5rZXksIGUuaGFzaF0pKSxcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIFNTVF9ST1VURVM6IEpTT04uc3RyaW5naWZ5KHBsYW4ucm91dGVzKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRyYW5zZm9ybToge1xuICAgICAgICAgICAgd29ya2VyOiAod29ya2VyQXJncykgPT4ge1xuICAgICAgICAgICAgICB3b3JrZXJBcmdzLmt2TmFtZXNwYWNlQmluZGluZ3MgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbmFtZTogXCJBU1NFVFNcIixcbiAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZUlkOiBzdG9yYWdlLmlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgIHdvcmtlckFyZ3Muc2VydmljZUJpbmRpbmdzID0gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IFwiU0VSVkVSXCIsXG4gICAgICAgICAgICAgICAgICBzZXJ2aWNlOiBzZXJ2ZXIubm9kZXMud29ya2VyLm5hbWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgLy8gY3JlYXRlIGRpc3RyaWJ1dGlvbiBhZnRlciBhc3NldHMgYXJlIHVwbG9hZGVkXG4gICAgICAgIHsgZGVwZW5kc09uOiBrdkRhdGEsIHBhcmVudCB9LFxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQbGFuKGlucHV0OiB7XG4gIHNlcnZlcjogVW53cmFwPFdvcmtlckFyZ3M+O1xuICBhc3NldHM6IHtcbiAgICBjb3B5OiB7XG4gICAgICBmcm9tOiBzdHJpbmc7XG4gICAgICB0bzogc3RyaW5nO1xuICAgICAgY2FjaGVkOiBib29sZWFuO1xuICAgICAgdmVyc2lvbmVkU3ViRGlyPzogc3RyaW5nO1xuICAgIH1bXTtcbiAgfTtcbiAgcm91dGVzOiB7XG4gICAgcmVnZXg6IHN0cmluZztcbiAgICBvcmlnaW46IFwic2VydmVyXCIgfCBcImFzc2V0c1wiO1xuICB9W107XG59KSB7XG4gIHJldHVybiBpbnB1dDtcbn1cbiIsICJpbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgcGF0aFRvUmVnZXhwIH0gZnJvbSBcInBhdGgtdG8tcmVnZXhwXCI7XG5pbXBvcnQgeyBDb21wb25lbnRSZXNvdXJjZU9wdGlvbnMsIE91dHB1dCwgYWxsLCBvdXRwdXQgfSBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCB7XG4gIFNzclNpdGVBcmdzLFxuICBjcmVhdGVLdlN0b3JhZ2UsXG4gIGNyZWF0ZVJvdXRlcixcbiAgcHJlcGFyZSxcbiAgdmFsaWRhdGVQbGFuLFxufSBmcm9tIFwiLi9zc3Itc2l0ZS5qc1wiO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudC5qc1wiO1xuaW1wb3J0IHsgSGludCB9IGZyb20gXCIuLi9oaW50LmpzXCI7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2xpbmsuanNcIjtcbmltcG9ydCB7IEt2IH0gZnJvbSBcIi4va3YuanNcIjtcbmltcG9ydCB7IGJ1aWxkQXBwIH0gZnJvbSBcIi4uL2Jhc2UvYmFzZS1zc3Itc2l0ZS5qc1wiO1xuaW1wb3J0IHsgV29ya2VyIH0gZnJvbSBcIi4vd29ya2VyLmpzXCI7XG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwiZXNidWlsZFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlbWl4QXJncyBleHRlbmRzIFNzclNpdGVBcmdzIHtcbiAgLyoqXG4gICAqIENvbmZpZ3VyZSBob3cgdGhlIFJlbWl4IGFwcCBhc3NldHMgYXJlIHVwbG9hZGVkIHRvIFMzLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGlzIGlzIHNldCB0byB0aGUgZm9sbG93aW5nLiBSZWFkIG1vcmUgYWJvdXQgdGhlc2Ugb3B0aW9ucyBiZWxvdy5cbiAgICogYGBganNcbiAgICoge1xuICAgKiAgIGFzc2V0czoge1xuICAgKiAgICAgdGV4dEVuY29kaW5nOiBcInV0Zi04XCIsXG4gICAqICAgICB2ZXJzaW9uZWRGaWxlc0NhY2hlSGVhZGVyOiBcInB1YmxpYyxtYXgtYWdlPTMxNTM2MDAwLGltbXV0YWJsZVwiLFxuICAgKiAgICAgbm9uVmVyc2lvbmVkRmlsZXNDYWNoZUhlYWRlcjogXCJwdWJsaWMsbWF4LWFnZT0wLHMtbWF4YWdlPTg2NDAwLHN0YWxlLXdoaWxlLXJldmFsaWRhdGU9ODY0MFwiXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYXNzZXRzPzogU3NyU2l0ZUFyZ3NbXCJhc3NldHNcIl07XG4gIC8qKlxuICAgKiBUaGUgY29tbWFuZCB1c2VkIGludGVybmFsbHkgdG8gYnVpbGQgeW91ciBSZW1peCBhcHAuXG4gICAqXG4gICAqIEBkZWZhdWx0IER5bmFtaWNhbGx5IGRldGVybWluZWQgYmFzZWQgb24gdGhlIHByZXNlbmNlIG9mIHBhY2thZ2UgbWFuYWdlciBsb2NrIGZpbGVzLiBJZiBcInlhcm4ubG9ja1wiIGlzIGZvdW5kLCBkZWZhdWx0cyB0byBcInlhcm4gcnVuIGJ1aWxkXCIuIElmIFwicG5wbS1sb2NrLnlhbWxcIiBpcyBmb3VuZCwgZGVmYXVsdHMgdG8gXCJwbnBtIHJ1biBidWlsZFwiLiBJZiBcImJ1bi5sb2NrYlwiIGlzIGZvdW5kLCBkZWZhdWx0cyB0byBcImJ1biBydW4gYnVpbGRcIi4gSWYgXCJwYWNrYWdlLWxvY2suanNvblwiIGlzIGZvdW5kLCBkZWZhdWx0cyB0byBcIm5wbSBydW4gYnVpbGRcIi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogSWYgeW91IHdhbnQgdG8gdXNlIGEgZGlmZmVyZW50IGJ1aWxkIGNvbW1hbmQuXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBidWlsZENvbW1hbmQ6IFwibnBtIHJ1biBjdXN0b20tYnVpbGRcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgYnVpbGRDb21tYW5kPzogU3NyU2l0ZUFyZ3NbXCJidWlsZENvbW1hbmRcIl07XG4gIC8qKlxuICAgKiBTZXQgYSBjdXN0b20gZG9tYWluIGZvciB5b3VyIFJlbWl4IGFwcC4gU3VwcG9ydHMgZG9tYWlucyBob3N0ZWQgZWl0aGVyIG9uXG4gICAqIFtSb3V0ZSA1M10oaHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9yb3V0ZTUzLykgb3Igb3V0c2lkZSBBV1MuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIGFsc28gbWlncmF0ZSBhbiBleHRlcm5hbGx5IGhvc3RlZCBkb21haW4gdG8gQW1hem9uIFJvdXRlIDUzIGJ5XG4gICAqIFtmb2xsb3dpbmcgdGhpcyBndWlkZV0oaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL1JvdXRlNTMvbGF0ZXN0L0RldmVsb3Blckd1aWRlL01pZ3JhdGluZ0ROUy5odG1sKS5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBkb21haW46IFwiZG9tYWluLmNvbVwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFNwZWNpZnkgdGhlIFJvdXRlIDUzIGhvc3RlZCB6b25lIGFuZCBhIGB3d3cuYCB2ZXJzaW9uIG9mIHRoZSBjdXN0b20gZG9tYWluLlxuICAgKlxuICAgKiBgYGBqc1xuICAgKiB7XG4gICAqICAgZG9tYWluOiB7XG4gICAqICAgICBkb21haW5OYW1lOiBcImRvbWFpbi5jb21cIixcbiAgICogICAgIGhvc3RlZFpvbmU6IFwiZG9tYWluLmNvbVwiLFxuICAgKiAgICAgcmVkaXJlY3RzOiBbXCJ3d3cuZG9tYWluLmNvbVwiXVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGRvbWFpbj86IFNzclNpdGVBcmdzW1wiZG9tYWluXCJdO1xuICAvKipcbiAgICogU2V0IFtlbnZpcm9ubWVudCB2YXJpYWJsZXNdKGh0dHBzOi8vcmVtaXgucnVuL2RvY3MvZW4vbWFpbi9ndWlkZXMvZW52dmFycykgaW4geW91ciBSZW1peCBhcHAuIFRoZXNlIGFyZSBtYWRlIGF2YWlsYWJsZTpcbiAgICpcbiAgICogMS4gSW4gYHJlbWl4IGJ1aWxkYCwgdGhleSBhcmUgbG9hZGVkIGludG8gYHByb2Nlc3MuZW52YC5cbiAgICogMi4gTG9jYWxseSB3aGlsZSBydW5uaW5nIGBzc3QgZGV2IHJlbWl4IGRldmAuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBZb3UgY2FuIGFsc28gYGxpbmtgIHJlc291cmNlcyB0byB5b3VyIFJlbWl4IGFwcCBhbmQgYWNjZXNzIHRoZW0gaW4gYSB0eXBlLXNhZmUgd2F5IHdpdGggdGhlIFtTREtdKC9kb2NzL3JlZmVyZW5jZS9zZGsvKS4gV2UgcmVjb21tZW5kIGxpbmtpbmcgc2luY2UgaXQncyBtb3JlIHNlY3VyZS5cbiAgICogOjo6XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBlbnZpcm9ubWVudDoge1xuICAgKiAgICAgQVBJX1VSTDogYXBpLnVybCxcbiAgICogICAgIFNUUklQRV9QVUJMSVNIQUJMRV9LRVk6IFwicGtfdGVzdF8xMjNcIlxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIGVudmlyb25tZW50PzogU3NyU2l0ZUFyZ3NbXCJlbnZpcm9ubWVudFwiXTtcbiAgLyoqXG4gICAqIFtMaW5rIHJlc291cmNlc10oL2RvY3MvbGlua2luZy8pIHRvIHlvdXIgUmVtaXggYXBwLiBUaGlzIHdpbGw6XG4gICAqXG4gICAqIDEuIEdyYW50IHRoZSBwZXJtaXNzaW9ucyBuZWVkZWQgdG8gYWNjZXNzIHRoZSByZXNvdXJjZXMuXG4gICAqIDIuIEFsbG93IHlvdSB0byBhY2Nlc3MgaXQgaW4geW91ciBzaXRlIHVzaW5nIHRoZSBbU0RLXSgvZG9jcy9yZWZlcmVuY2Uvc2RrLykuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIFRha2VzIGEgbGlzdCBvZiByZXNvdXJjZXMgdG8gbGluayB0byB0aGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBsaW5rOiBbYnVja2V0LCBzdHJpcGVLZXldXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBsaW5rPzogU3NyU2l0ZUFyZ3NbXCJsaW5rXCJdO1xuICAvKipcbiAgICogUGF0aCB0byB0aGUgZGlyZWN0b3J5IHdoZXJlIHlvdXIgUmVtaXggYXBwIGlzIGxvY2F0ZWQuICBUaGlzIHBhdGggaXMgcmVsYXRpdmUgdG8geW91ciBgc3N0LmNvbmZpZy50c2AuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQgaXQgYXNzdW1lcyB5b3VyIFJlbWl4IGFwcCBpcyBpbiB0aGUgcm9vdCBvZiB5b3VyIFNTVCBhcHAuXG4gICAqIEBkZWZhdWx0IGBcIi5cImBcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogSWYgeW91ciBSZW1peCBhcHAgaXMgaW4gYSBwYWNrYWdlIGluIHlvdXIgbW9ub3JlcG8uXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIHtcbiAgICogICBwYXRoOiBcInBhY2thZ2VzL3dlYlwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBwYXRoPzogU3NyU2l0ZUFyZ3NbXCJwYXRoXCJdO1xufVxuXG4vKipcbiAqIFRoZSBgUmVtaXhgIGNvbXBvbmVudCBsZXRzIHlvdSBkZXBsb3kgYSBbUmVtaXhdKGh0dHBzOi8vcmVtaXgucnVuKSBhcHAgdG8gQVdTLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogIyMjIyBNaW5pbWFsIGV4YW1wbGVcbiAqXG4gKiBEZXBsb3kgYSBSZW1peCBhcHAgdGhhdCdzIGluIHRoZSBwcm9qZWN0IHJvb3QuXG4gKlxuICogYGBganNcbiAqIG5ldyBzc3QuYXdzLlJlbWl4KFwiTXlXZWJcIik7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIENoYW5nZSB0aGUgcGF0aFxuICpcbiAqIERlcGxveXMgdGhlIFJlbWl4IGFwcCBpbiB0aGUgYG15LXJlbWl4LWFwcC9gIGRpcmVjdG9yeS5cbiAqXG4gKiBgYGBqcyB7Mn1cbiAqIG5ldyBzc3QuYXdzLlJlbWl4KFwiTXlXZWJcIiwge1xuICogICBwYXRoOiBcIm15LXJlbWl4LWFwcC9cIlxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiAjIyMjIEFkZCBhIGN1c3RvbSBkb21haW5cbiAqXG4gKiBTZXQgYSBjdXN0b20gZG9tYWluIGZvciB5b3VyIFJlbWl4IGFwcC5cbiAqXG4gKiBgYGBqcyB7Mn1cbiAqIG5ldyBzc3QuYXdzLlJlbWl4KFwiTXlXZWJcIiwge1xuICogICBkb21haW46IFwibXktYXBwLmNvbVwiXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgUmVkaXJlY3Qgd3d3IHRvIGFwZXggZG9tYWluXG4gKlxuICogUmVkaXJlY3QgYHd3dy5teS1hcHAuY29tYCB0byBgbXktYXBwLmNvbWAuXG4gKlxuICogYGBganMgezR9XG4gKiBuZXcgc3N0LmF3cy5SZW1peChcIk15V2ViXCIsIHtcbiAqICAgZG9tYWluOiB7XG4gKiAgICAgZG9tYWluTmFtZTogXCJteS1hcHAuY29tXCIsXG4gKiAgICAgcmVkaXJlY3RzOiBbXCJ3d3cubXktYXBwLmNvbVwiXVxuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqICMjIyMgTGluayByZXNvdXJjZXNcbiAqXG4gKiBbTGluayByZXNvdXJjZXNdKC9kb2NzL2xpbmtpbmcvKSB0byB5b3VyIFJlbWl4IGFwcC4gVGhpcyB3aWxsIGdyYW50IHBlcm1pc3Npb25zXG4gKiB0byB0aGUgcmVzb3VyY2VzIGFuZCBhbGxvdyB5b3UgdG8gYWNjZXNzIGl0IGluIHlvdXIgYXBwLlxuICpcbiAqIGBgYHRzIHs0fVxuICogY29uc3QgYnVja2V0ID0gbmV3IHNzdC5hd3MuQnVja2V0KFwiTXlCdWNrZXRcIik7XG4gKlxuICogbmV3IHNzdC5hd3MuUmVtaXgoXCJNeVdlYlwiLCB7XG4gKiAgIGxpbms6IFtidWNrZXRdXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gdXNlIHRoZSBbU0RLXSgvZG9jcy9yZWZlcmVuY2Uvc2RrLykgdG8gYWNjZXNzIHRoZSBsaW5rZWQgcmVzb3VyY2VzXG4gKiBpbiB5b3VyIFJlbWl4IGFwcC5cbiAqXG4gKiBgYGB0cyB0aXRsZT1cImFwcC9yb290LnRzeFwiXG4gKiBpbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gXCJzc3RcIjtcbiAqXG4gKiBjb25zb2xlLmxvZyhSZXNvdXJjZS5NeUJ1Y2tldC5uYW1lKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUmVtaXggZXh0ZW5kcyBDb21wb25lbnQgaW1wbGVtZW50cyBMaW5rLkxpbmthYmxlIHtcbiAgcHJpdmF0ZSBhc3NldHM6IEt2O1xuICBwcml2YXRlIHJvdXRlcjogT3V0cHV0PFdvcmtlcj47XG4gIHByaXZhdGUgc2VydmVyOiBPdXRwdXQ8V29ya2VyPjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgYXJnczogUmVtaXhBcmdzID0ge30sXG4gICAgb3B0czogQ29tcG9uZW50UmVzb3VyY2VPcHRpb25zID0ge30sXG4gICkge1xuICAgIHN1cGVyKFwic3N0OmNsb3VkZmxhcmU6UmVtaXhcIiwgbmFtZSwgYXJncywgb3B0cyk7XG5cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xuICAgIGNvbnN0IHsgc2l0ZVBhdGggfSA9IHByZXBhcmUoYXJncyk7XG4gICAgY29uc3QgaXNVc2luZ1ZpdGUgPSBjaGVja0lzVXNpbmdWaXRlKCk7XG4gICAgY29uc3Qgc3RvcmFnZSA9IGNyZWF0ZUt2U3RvcmFnZShwYXJlbnQsIG5hbWUsIGFyZ3MpO1xuICAgIGNvbnN0IG91dHB1dFBhdGggPSBidWlsZEFwcChuYW1lLCBhcmdzLCBzaXRlUGF0aCk7XG4gICAgY29uc3QgeyBidWlsZE1ldGEgfSA9IGxvYWRCdWlsZE91dHB1dCgpO1xuICAgIGNvbnN0IHBsYW4gPSBidWlsZFBsYW4oKTtcbiAgICBjb25zdCB7IHJvdXRlciwgc2VydmVyIH0gPSBjcmVhdGVSb3V0ZXIoXG4gICAgICBwYXJlbnQsXG4gICAgICBuYW1lLFxuICAgICAgYXJncyxcbiAgICAgIG91dHB1dFBhdGgsXG4gICAgICBzdG9yYWdlLFxuICAgICAgcGxhbixcbiAgICApO1xuXG4gICAgdGhpcy5hc3NldHMgPSBzdG9yYWdlO1xuICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgIHRoaXMuc2VydmVyID0gc2VydmVyO1xuICAgIGlmICghJGRldikge1xuICAgICAgSGludC5yZWdpc3Rlcih0aGlzLnVybiwgdGhpcy51cmwgYXMgT3V0cHV0PHN0cmluZz4pO1xuICAgIH1cbiAgICB0aGlzLnJlZ2lzdGVyT3V0cHV0cyh7XG4gICAgICBfbWV0YWRhdGE6IHtcbiAgICAgICAgbW9kZTogJGRldiA/IFwicGxhY2Vob2xkZXJcIiA6IFwiZGVwbG95ZWRcIixcbiAgICAgICAgcGF0aDogc2l0ZVBhdGgsXG4gICAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gY2hlY2tJc1VzaW5nVml0ZSgpIHtcbiAgICAgIHJldHVybiBzaXRlUGF0aC5hcHBseShcbiAgICAgICAgKHNpdGVQYXRoKSA9PlxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKHNpdGVQYXRoLCBcInZpdGUuY29uZmlnLnRzXCIpKSB8fFxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKHNpdGVQYXRoLCBcInZpdGUuY29uZmlnLmpzXCIpKSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZEJ1aWxkT3V0cHV0KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYnVpbGRNZXRhOiAkZGV2ID8gbG9hZEJ1aWxkTWV0YWRhdGFQbGFjZWhvbGRlcigpIDogbG9hZEJ1aWxkTWV0YWRhdGEoKSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbG9hZEJ1aWxkTWV0YWRhdGEoKSB7XG4gICAgICByZXR1cm4gYWxsKFtvdXRwdXRQYXRoLCBpc1VzaW5nVml0ZV0pLmFwcGx5KFxuICAgICAgICAoW291dHB1dFBhdGgsIGlzVXNpbmdWaXRlXSkgPT4ge1xuICAgICAgICAgIC8vIFRoZSBwYXRoIGZvciBhbGwgZmlsZXMgdGhhdCBuZWVkIHRvIGJlIGluIHRoZSBcIi9cIiBkaXJlY3RvcnkgKHN0YXRpYyBhc3NldHMpXG4gICAgICAgICAgLy8gaXMgZGlmZmVyZW50IHdoZW4gdXNpbmcgVml0ZS4gVGhlc2Ugd2lsbCBiZSBsb2NhdGVkIGluIHRoZSBcImJ1aWxkL2NsaWVudFwiXG4gICAgICAgICAgLy8gcGF0aCBvZiB0aGUgb3V0cHV0LiBJdCB3aWxsIGJlIHRoZSBcInB1YmxpY1wiIGZvbGRlciB3aGVuIHVzaW5nIHJlbWl4IGNvbmZpZy5cbiAgICAgICAgICBjb25zdCBhc3NldHNQYXRoID0gaXNVc2luZ1ZpdGVcbiAgICAgICAgICAgID8gcGF0aC5qb2luKFwiYnVpbGRcIiwgXCJjbGllbnRcIilcbiAgICAgICAgICAgIDogXCJwdWJsaWNcIjtcbiAgICAgICAgICBjb25zdCBhc3NldHNWZXJzaW9uZWRTdWJEaXIgPSBpc1VzaW5nVml0ZSA/IHVuZGVmaW5lZCA6IFwiYnVpbGRcIjtcblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc3NldHNQYXRoLFxuICAgICAgICAgICAgYXNzZXRzVmVyc2lvbmVkU3ViRGlyLFxuICAgICAgICAgICAgLy8gY3JlYXRlIDEgYmVoYXZpb3VyIGZvciBlYWNoIHRvcCBsZXZlbCBhc3NldCBmaWxlL2ZvbGRlclxuICAgICAgICAgICAgc3RhdGljUm91dGVzOiBmc1xuICAgICAgICAgICAgICAucmVhZGRpclN5bmMocGF0aC5qb2luKG91dHB1dFBhdGgsIGFzc2V0c1BhdGgpKVxuICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGZzXG4gICAgICAgICAgICAgICAgICAuc3RhdFN5bmMocGF0aC5qb2luKG91dHB1dFBhdGgsIGFzc2V0c1BhdGgsIGl0ZW0pKVxuICAgICAgICAgICAgICAgICAgLmlzRGlyZWN0b3J5KClcbiAgICAgICAgICAgICAgICAgID8gYCR7aXRlbX0vKC4qKWBcbiAgICAgICAgICAgICAgICAgIDogaXRlbSxcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkQnVpbGRNZXRhZGF0YVBsYWNlaG9sZGVyKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYXNzZXRzUGF0aDogXCJwbGFjZWhvbGRlclwiLFxuICAgICAgICBhc3NldHNWZXJzaW9uZWRTdWJEaXI6IHVuZGVmaW5lZCxcbiAgICAgICAgc3RhdGljUm91dGVzOiBbXSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRQbGFuKCkge1xuICAgICAgcmV0dXJuIGFsbChbaXNVc2luZ1ZpdGUsIG91dHB1dFBhdGgsIGJ1aWxkTWV0YV0pLmFwcGx5KFxuICAgICAgICAoW2lzVXNpbmdWaXRlLCBvdXRwdXRQYXRoLCBidWlsZE1ldGFdKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHZhbGlkYXRlUGxhbih7XG4gICAgICAgICAgICBzZXJ2ZXI6IGNyZWF0ZVNlcnZlckxhbWJkYUJ1bmRsZShpc1VzaW5nVml0ZSwgb3V0cHV0UGF0aCksXG4gICAgICAgICAgICBhc3NldHM6IHtcbiAgICAgICAgICAgICAgY29weTogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGZyb206IGJ1aWxkTWV0YS5hc3NldHNQYXRoLFxuICAgICAgICAgICAgICAgICAgdG86IFwiXCIsXG4gICAgICAgICAgICAgICAgICBjYWNoZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICB2ZXJzaW9uZWRTdWJEaXI6IGJ1aWxkTWV0YS5hc3NldHNWZXJzaW9uZWRTdWJEaXIsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByb3V0ZXM6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlZ2V4OiBwYXRoVG9SZWdleHAoYnVpbGRNZXRhLnN0YXRpY1JvdXRlcykuc291cmNlLFxuICAgICAgICAgICAgICAgIG9yaWdpbjogXCJhc3NldHNcIiBhcyBjb25zdCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJlZ2V4OiBwYXRoVG9SZWdleHAoXCIoLiopXCIpLnNvdXJjZSxcbiAgICAgICAgICAgICAgICBvcmlnaW46IFwic2VydmVyXCIgYXMgY29uc3QsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVTZXJ2ZXJMYW1iZGFCdW5kbGUoXG4gICAgICBpc1VzaW5nVml0ZTogYm9vbGVhbixcbiAgICAgIG91dHB1dFBhdGg6IHN0cmluZyxcbiAgICApIHtcbiAgICAgIC8vIENyZWF0ZSBhIExhbWJkYUBFZGdlIGhhbmRsZXIgZm9yIHRoZSBSZW1peCBzZXJ2ZXIgYnVuZGxlLlxuICAgICAgLy9cbiAgICAgIC8vIE5vdGU6IFJlbWl4IGRvZXMgcGVyZm9ybSB0aGVpciBvd24gaW50ZXJuYWwgRVNCdWlsZCBwcm9jZXNzLCBidXQgaXRcbiAgICAgIC8vIGRvZXNuJ3QgYnVuZGxlIDNyZCBwYXJ0eSBkZXBlbmRlbmNpZXMgYnkgZGVmYXVsdC4gSW4gdGhlIGludGVyZXN0IG9mXG4gICAgICAvLyBrZWVwaW5nIGRlcGxveW1lbnRzIHNlYW1sZXNzIGZvciB1c2VycyB3ZSB3aWxsIGNyZWF0ZSBhIHNlcnZlciBidW5kbGVcbiAgICAgIC8vIHdpdGggYWxsIGRlcGVuZGVuY2llcyBpbmNsdWRlZC4gV2Ugd2lsbCBzdGlsbCBuZWVkIHRvIGNvbnNpZGVyIGhvdyB0b1xuICAgICAgLy8gYWRkcmVzcyBhbnkgbmVlZCBmb3IgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzLCBhbHRob3VnaCBJIHRoaW5rIHdlIHNob3VsZFxuICAgICAgLy8gcG9zc2libHkgY29uc2lkZXIgdGhpcyBhdCBhIGxhdGVyIGRhdGUuXG5cbiAgICAgIC8vIEluIHRoaXMgcGF0aCB3ZSBhcmUgYXNzdW1pbmcgdGhhdCB0aGUgUmVtaXggYnVpbGQgb25seSBvdXRwdXRzIHRoZVxuICAgICAgLy8gXCJjb3JlIHNlcnZlciBidWlsZFwiLiBXZSBjYW4gc2FmZWx5IGFzc3VtZSB0aGlzIGFzIHdlIGhhdmUgZ3VhcmRlZCB0aGVcbiAgICAgIC8vIHJlbWl4LmNvbmZpZy5qcyB0byBlbnN1cmUgaXQgbWF0Y2hlcyBvdXIgZXhwZWN0YXRpb25zIGZvciB0aGUgYnVpbGRcbiAgICAgIC8vIGNvbmZpZ3VyYXRpb24uXG4gICAgICAvLyBXZSBuZWVkIHRvIGVuc3VyZSB0aGF0IHRoZSBcImNvcmUgc2VydmVyIGJ1aWxkXCIgaXMgd3JhcHBlZCB3aXRoIGFuXG4gICAgICAvLyBhcHByb3ByaWF0ZSBMYW1iZGFARWRnZSBoYW5kbGVyLiBXZSB3aWxsIHV0aWxpc2UgYW4gaW50ZXJuYWwgYXNzZXRcbiAgICAgIC8vIHRlbXBsYXRlIHRvIGNyZWF0ZSB0aGlzIHdyYXBwZXIgd2l0aGluIHRoZSBcImNvcmUgc2VydmVyIGJ1aWxkXCIgb3V0cHV0XG4gICAgICAvLyBkaXJlY3RvcnkuXG5cbiAgICAgIC8vIEVuc3VyZSBidWlsZCBkaXJlY3RvcnkgZXhpc3RzXG4gICAgICBjb25zdCBidWlsZFBhdGggPSBwYXRoLmpvaW4ob3V0cHV0UGF0aCwgXCJidWlsZFwiKTtcbiAgICAgIGZzLm1rZGlyU3luYyhidWlsZFBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuXG4gICAgICAvLyBDb3B5IHRoZSBzZXJ2ZXIgbGFtYmRhIGhhbmRsZXIgYW5kIHByZS1hcHBlbmQgdGhlIGJ1aWxkIGluamVjdGlvbiBiYXNlZFxuICAgICAgLy8gb24gdGhlIGNvbmZpZyBmaWxlIHVzZWQuXG4gICAgICBjb25zdCBjb250ZW50ID0gW1xuICAgICAgICAvLyBXaGVuIHVzaW5nIFZpdGUgY29uZmlnLCB0aGUgb3V0cHV0IGJ1aWxkIHdpbGwgYmUgXCJzZXJ2ZXIvaW5kZXguanNcIlxuICAgICAgICAvLyBhbmQgd2hlbiB1c2luZyBSZW1peCBjb25maWcgaXQgd2lsbCBiZSBgc2VydmVyLmpzYC5cbiAgICAgICAgLy9pc1VzaW5nVml0ZVxuICAgICAgICAvLyAgPyBgaW1wb3J0ICogYXMgcmVtaXhTZXJ2ZXJCdWlsZCBmcm9tIFwiLi9zZXJ2ZXIvaW5kZXguanNcIjtgXG4gICAgICAgIC8vICA6IGBpbXBvcnQgKiBhcyByZW1peFNlcnZlckJ1aWxkIGZyb20gXCIuL2luZGV4LmpzXCI7YCxcbiAgICAgICAgLy9gaW1wb3J0IHsgY3JlYXRlUmVxdWVzdEhhbmRsZXIgfSBmcm9tIFwiQHJlbWl4LXJ1bi9jbG91ZGZsYXJlXCI7YCxcbiAgICAgICAgLy9gaW1wb3J0ICogYXMgcmVtaXhTZXJ2ZXJCdWlsZCBmcm9tIFwiLi9zZXJ2ZXJcIjtgLFxuICAgICAgICAvL2BpbXBvcnQgeyBjcmVhdGVSZXF1ZXN0SGFuZGxlciB9IGZyb20gXCJAcmVtaXgtcnVuL2Nsb3VkZmxhcmVcIjtgLFxuICAgICAgICAvL2BleHBvcnQgZGVmYXVsdCB7YCxcbiAgICAgICAgLy9gICBhc3luYyBmZXRjaChyZXF1ZXN0KSB7YCxcbiAgICAgICAgLy9gICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gY3JlYXRlUmVxdWVzdEhhbmRsZXIocmVtaXhTZXJ2ZXJCdWlsZCk7YCxcbiAgICAgICAgLy9gICAgIHJldHVybiBhd2FpdCByZXF1ZXN0SGFuZGxlcihyZXF1ZXN0KTtgLFxuICAgICAgICAvL2AgIH0sYCxcbiAgICAgICAgLy9gfTtgLFxuICAgICAgICBgaW1wb3J0IHsgY3JlYXRlUmVxdWVzdEhhbmRsZXIgfSBmcm9tIFwiQHJlbWl4LXJ1bi9jbG91ZGZsYXJlXCI7YCxcbiAgICAgICAgYGltcG9ydCAqIGFzIGJ1aWxkIGZyb20gXCIuL3NlcnZlci9pbmRleC5qc1wiO2AsXG4gICAgICAgIGBleHBvcnQgZGVmYXVsdCB7YCxcbiAgICAgICAgYCAgYXN5bmMgZmV0Y2gocmVxdWVzdCkge2AsXG4gICAgICAgIGAgICAgY29uc29sZS5sb2coXCJmZXRjaFwiKTtgLFxuICAgICAgICBgICAgIGNvbnNvbGUubG9nKFwiYnVpbGRcIiwgYnVpbGQpO2AsXG4gICAgICAgIGAgICAgY29uc29sZS5sb2coXCJidWlsZCBtb2RlXCIsIGJ1aWxkLm1vZGUpO2AsXG4gICAgICAgIGAgICAgY29uc3QgaGFuZGxlUmVxdWVzdCA9IGNyZWF0ZVJlcXVlc3RIYW5kbGVyKGJ1aWxkKTtgLFxuICAgICAgICBgICAgIGNvbnNvbGUubG9nKFwiaGFuZGxlUmVxdWVzdFwiLCBoYW5kbGVSZXF1ZXN0KTtgLFxuICAgICAgICBgICAgIHJldHVybiBhd2FpdCBoYW5kbGVSZXF1ZXN0KHJlcXVlc3QpO2AsXG4gICAgICAgIGAgIH0sYCxcbiAgICAgICAgYH07YCxcbiAgICAgIF0uam9pbihcIlxcblwiKTtcbiAgICAgIGZzLndyaXRlRmlsZVN5bmMocGF0aC5qb2luKGJ1aWxkUGF0aCwgXCJzZXJ2ZXIudHNcIiksIGNvbnRlbnQpO1xuXG4gICAgICBjb25zdCBub2RlQnVpbHRJbk1vZHVsZXNQbHVnaW46IFBsdWdpbiA9IHtcbiAgICAgICAgbmFtZTogXCJub2RlOmJ1aWx0LWluOm1vZHVsZXNcIixcbiAgICAgICAgc2V0dXAoYnVpbGQpIHtcbiAgICAgICAgICBidWlsZC5vblJlc29sdmUoeyBmaWx0ZXI6IC9eKHV0aWx8c3RyZWFtKSQvIH0sICh7IGtpbmQsIHBhdGggfSkgPT4ge1xuICAgICAgICAgICAgLy8gdGhpcyBwbHVnaW4gY29udmVydHMgYHJlcXVpcmUoXCJub2RlOipcIilgIGNhbGxzLCB0aG9zZSBhcmUgdGhlIG9ubHkgb25lcyB0aGF0XG4gICAgICAgICAgICAvLyBuZWVkIHVwZGF0aW5nIChlc20gaW1wb3J0cyB0byBcIm5vZGU6KlwiIGFyZSB0b3RhbGx5IHZhbGlkKSwgc28gaGVyZSB3ZSB0YWcgd2l0aCB0aGVcbiAgICAgICAgICAgIC8vIG5vZGUtYnVmZmVyIG5hbWVzcGFjZSBvbmx5IGltcG9ydHMgdGhhdCBhcmUgcmVxdWlyZSBjYWxsc1xuICAgICAgICAgICAgcmV0dXJuIGtpbmQgPT09IFwicmVxdWlyZS1jYWxsXCJcbiAgICAgICAgICAgICAgPyB7IHBhdGgsIG5hbWVzcGFjZTogXCJub2RlLWJ1aWx0LWluLW1vZHVsZXNcIiB9XG4gICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gd2UgY29udmVydCB0aGUgaW1wb3J0cyB3ZSB0YWdnZWQgd2l0aCB0aGUgbm9kZS1idWlsdC1pbi1tb2R1bGVzIG5hbWVzcGFjZSBzbyB0aGF0IGluc3RlYWQgb2YgYHJlcXVpcmUoXCJub2RlOipcIilgXG4gICAgICAgICAgLy8gdGhleSBpbXBvcnQgZnJvbSBgZXhwb3J0ICogZnJvbSBcIm5vZGU6KlwiO2BcbiAgICAgICAgICBidWlsZC5vbkxvYWQoXG4gICAgICAgICAgICB7IGZpbHRlcjogLy4qLywgbmFtZXNwYWNlOiBcIm5vZGUtYnVpbHQtaW4tbW9kdWxlc1wiIH0sXG4gICAgICAgICAgICAoeyBwYXRoIH0pID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjb250ZW50czogYGV4cG9ydCAqIGZyb20gJ25vZGU6JHtwYXRofSdgLFxuICAgICAgICAgICAgICAgIGxvYWRlcjogXCJqc1wiLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaGFuZGxlcjogcGF0aC5qb2luKGJ1aWxkUGF0aCwgXCJzZXJ2ZXIudHNcIiksXG4gICAgICAgIGJ1aWxkOiB7XG4gICAgICAgICAgZXNidWlsZDoge1xuICAgICAgICAgICAgZGVmaW5lOiB7XG4gICAgICAgICAgICAgIHByb2Nlc3M6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBlbnY6IHtcbiAgICAgICAgICAgICAgICAgIC8vTk9ERV9FTlY6IFwicHJvZHVjdGlvblwiLFxuICAgICAgICAgICAgICAgICAgTk9ERV9FTlY6IFwiZGV2ZWxvcG1lbnRcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwbHVnaW5zOiBbbm9kZUJ1aWx0SW5Nb2R1bGVzUGx1Z2luXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIFVSTCBvZiB0aGUgUmVtaXggYXBwLlxuICAgKlxuICAgKiBJZiB0aGUgYGRvbWFpbmAgaXMgc2V0LCB0aGlzIGlzIHRoZSBVUkwgd2l0aCB0aGUgY3VzdG9tIGRvbWFpbi5cbiAgICogT3RoZXJ3aXNlLCBpdCdzIHRoZSBhdXRvZ2VuZXJhdGVkIENsb3VkRnJvbnQgVVJMLlxuICAgKi9cbiAgcHVibGljIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuIHRoaXMucm91dGVyLnVybDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdW5kZXJseWluZyBbcmVzb3VyY2VzXSgvZG9jcy9jb21wb25lbnRzLyNub2RlcykgdGhpcyBjb21wb25lbnQgY3JlYXRlcy5cbiAgICovXG4gIHB1YmxpYyBnZXQgbm9kZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFXUyBMYW1iZGEgc2VydmVyIGZ1bmN0aW9uIHRoYXQgcmVuZGVycyB0aGUgc2l0ZS5cbiAgICAgICAqL1xuICAgICAgc2VydmVyOiB0aGlzLnNlcnZlcixcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFtYXpvbiBTMyBCdWNrZXQgdGhhdCBzdG9yZXMgdGhlIGFzc2V0cy5cbiAgICAgICAqL1xuICAgICAgYXNzZXRzOiB0aGlzLmFzc2V0cyxcbiAgICB9O1xuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBwdWJsaWMgZ2V0U1NUTGluaygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG4iLCAiZXhwb3J0IGNvbnN0IERFRkFVTFRfQUNDT1VOVF9JRCA9IHByb2Nlc3MuZW52LkNMT1VERkxBUkVfREVGQVVMVF9BQ0NPVU5UX0lEITtcbiIsICJleHBvcnQgKiBmcm9tIFwiLi9idWNrZXRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2t2XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zdGF0aWMtc2l0ZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vcmVtaXhcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3dvcmtlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vYWNjb3VudC1pZFwiO1xuIiwgImltcG9ydCB7IFZpc2libGVFcnJvciB9IGZyb20gXCIuL2Vycm9yXCI7XG5pbXBvcnQgeyBvdXRwdXQsIHNlY3JldCB9IGZyb20gXCJAcHVsdW1pL3B1bHVtaVwiO1xuaW1wb3J0IHsgTGluayB9IGZyb20gXCIuL2xpbmtcIjtcbmltcG9ydCB7IENvbXBvbmVudCwgUHJldHRpZnkgfSBmcm9tIFwiLi9jb21wb25lbnRcIjtcblxuZXhwb3J0IGNsYXNzIFNlY3JldE1pc3NpbmdFcnJvciBleHRlbmRzIFZpc2libGVFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBzZWNyZXROYW1lOiBzdHJpbmcpIHtcbiAgICBzdXBlcihcbiAgICAgIGBTZXQgYSB2YWx1ZSBmb3IgJHtzZWNyZXROYW1lfSB3aXRoIFxcYHNzdCBzZWNyZXQgc2V0ICR7c2VjcmV0TmFtZX0gPHZhbHVlPlxcYGAsXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBgU2VjcmV0YCBjb21wb25lbnQgbGV0cyB5b3UgY3JlYXRlIHNlY3JldHMgaW4geW91ciBhcHAuXG4gKlxuICogOjo6bm90ZVxuICogU2VjcmV0cyBhcmUgZW5jcnlwdGVkIHdoZW4gdGhleSBhcmUgc3RvcmVkIGluIHlvdXIgc3RhdGUgZmlsZSBvciBpbiBhIGZ1bmN0aW9uIHBhY2thZ2UuXG4gKiA6OjpcbiAqXG4gKiBTZWNyZXRzIGFyZSBlbmNyeXB0ZWQgYW5kIHN0b3JlZCBpbiBhbiBTMyBCdWNrZXQgaW4geW91ciBBV1MgYWNjb3VudC4gSWYgdXNlZCBpbiB5b3VyIGFwcCBjb25maWcsIHRoZXknbGwgYmUgZW5jcnlwdGVkIGluIHlvdXIgc3RhdGUgZmlsZSBhcyB3ZWxsLiBJZiB1c2VkIGluIHlvdXIgZnVuY3Rpb24gY29kZSwgdGhleSdsbCBiZSBkZWNyeXB0ZWQgYW5kIHN0b3JlZCBpbiB0aGUgZnVuY3Rpb24gcGFja2FnZS5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqICMjIyMgQ3JlYXRlIGEgc2VjcmV0XG4gKiBgYGB0c1xuICogY29uc3Qgc2VjcmV0ID0gbmV3IHNzdC5TZWNyZXQoXCJNeVNlY3JldFwiKTtcbiAqIGBgYFxuICpcbiAqICMjIyMgU2V0IGEgcGxhY2Vob2xkZXJcbiAqXG4gKiBZb3UgY2FuIG9wdGlvbmFsbHkgc2V0IGEgYHBsYWNlaG9sZGVyYC5cbiAqXG4gKiA6Ojp0aXBcbiAqIFVzZWZ1bCBmb3IgY2FzZXMgd2hlcmUgeW91IG1pZ2h0IHVzZSBhIHNlY3JldCBmb3IgdmFsdWVzIHRoYXQgYXJlbid0IHNlbnNpdGl2ZSwgc28geW91IGNhbiBqdXN0IHNldCB0aGVtIGluIGNvZGUuXG4gKiA6OjpcbiAqXG4gKiBgYGB0c1xuICogY29uc3Qgc2VjcmV0ID0gbmV3IHNzdC5TZWNyZXQoXCJNeVNlY3JldFwiLCBcIm15LXNlY3JldC1wbGFjZWhvbGRlci12YWx1ZVwiKTtcbiAqIGBgYFxuICpcbiAqICMjIyMgU2V0IHRoZSB2YWx1ZSBvZiB0aGUgc2VjcmV0XG4gKlxuICogWW91IGNhbiB0aGVuIHNldCB0aGUgdmFsdWUgb2YgYSBzZWNyZXQgdXNpbmcgdGhlIFtDTEldKC9kb2NzL3JlZmVyZW5jZS9jbGkvKS5cbiAqXG4gKiBgYGBzaCB0aXRsZT1cIlRlcm1pbmFsXCJcbiAqIHNzdCBzZWNyZXQgc2V0IE15U2VjcmV0IG15LXNlY3JldC12YWx1ZVxuICogYGBgXG4gKlxuICogOjo6bm90ZVxuICogSWYgeW91IGFyZSBub3QgcnVubmluZyBgc3N0IGRldmAsIHlvdSdsbCBuZWVkIHRvIGBzc3QgZGVwbG95YCB0byBhcHBseSB0aGUgc2VjcmV0LlxuICogOjo6XG4gKlxuICogIyMjIyBVc2UgdGhlIHNlY3JldCBpbiB5b3VyIGFwcCBjb25maWdcbiAqXG4gKiBZb3UgY2FuIG5vdyB1c2UgdGhlIHNlY3JldCBpbiB5b3VyIGFwcCBjb25maWcuXG4gKlxuICogYGBgdHMgdGl0bGU9XCJzc3QuY29uZmlnLnRzXCJcbiAqIGNvbnNvbGUubG9nKG15U2VjcmV0LnZhbHVlKTtcbiAqIGBgYFxuICpcbiAqICMjIyMgTGluayB0aGUgc2VjcmV0IHRvIGEgcmVzb3VyY2VcbiAqXG4gKiBZb3UgY2FuIGxpbmsgdGhlIHNlY3JldCB0byBvdGhlciByZXNvdXJjZXMsIGxpa2UgYSBmdW5jdGlvbiBvciB5b3VyIE5leHQuanMgYXBwLlxuICpcbiAqIGBgYHRzXG4gKiBuZXcgc3N0LmF3cy5OZXh0anMoXCJNeVdlYlwiLCB7XG4gKiAgIGxpbms6IFtzZWNyZXRdXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIE9uY2UgbGlua2VkLCB5b3UgY2FuIHVzZSB0aGUgc2VjcmV0IGluIHlvdXIgZnVuY3Rpb24gY29kZS5cbiAqXG4gKiBgYGB0cyB0aXRsZT1cImFwcC9wYWdlLnRzeFwiXG4gKiBpbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gXCJzc3RcIjtcbiAqXG4gKiBjb25zb2xlLmxvZyhSZXNvdXJjZS5NeVNlY3JldC52YWx1ZSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFNlY3JldCBleHRlbmRzIENvbXBvbmVudCBpbXBsZW1lbnRzIExpbmsuTGlua2FibGUge1xuICBwcml2YXRlIF92YWx1ZTogc3RyaW5nO1xuICBwcml2YXRlIF9uYW1lOiBzdHJpbmc7XG4gIHByaXZhdGUgX3BsYWNlaG9sZGVyPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gcGxhY2Vob2xkZXIgQSBwbGFjZWhvbGRlciB2YWx1ZSBvZiB0aGUgc2VjcmV0LiBUaGlzIGNhbiBiZSB1c2VmdWwgZm9yIGNhc2VzIHdoZXJlIHlvdSBtaWdodCBub3QgYmUgc3RvcmluZyBzZW5zaXRpdmUgdmFsdWVzLlxuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHBsYWNlaG9sZGVyPzogc3RyaW5nKSB7XG4gICAgc3VwZXIoXG4gICAgICBcInNzdDpzc3Q6U2VjcmV0XCIsXG4gICAgICBuYW1lLFxuICAgICAge1xuICAgICAgICBwbGFjZWhvbGRlcixcbiAgICAgIH0sXG4gICAgICB7fSxcbiAgICApO1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX3BsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXI7XG4gICAgY29uc3QgdmFsdWUgPSBwcm9jZXNzLmVudltcIlNTVF9TRUNSRVRfXCIgKyB0aGlzLl9uYW1lXSA/PyB0aGlzLl9wbGFjZWhvbGRlcjtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICB0aHJvdyBuZXcgU2VjcmV0TWlzc2luZ0Vycm9yKHRoaXMuX25hbWUpO1xuICAgIH1cbiAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBzZWNyZXQuXG4gICAqL1xuICBwdWJsaWMgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIG91dHB1dCh0aGlzLl9uYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgb2YgdGhlIHNlY3JldC4gSXQnbGwgYmUgYHVuZGVmaW5lZGAgaWYgdGhlIHNlY3JldCBoYXMgbm90IGJlZW4gc2V0IHRocm91Z2ggdGhlIENMSSBvciBpZiB0aGUgYHBsYWNlaG9sZGVyYCBoYXNuJ3QgYmVlbiBzZXQuXG4gICAqL1xuICBwdWJsaWMgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiBzZWNyZXQodGhpcy5fdmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBwbGFjZWhvbGRlciB2YWx1ZSBvZiB0aGUgc2VjcmV0LlxuICAgKi9cbiAgcHVibGljIGdldCBwbGFjZWhvbGRlcigpIHtcbiAgICByZXR1cm4gb3V0cHV0KHRoaXMuX3BsYWNlaG9sZGVyKTtcbiAgfVxuXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgcHVibGljIGdldFNTVExpbmsoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgdmFsdWU6IHRoaXMudmFsdWUsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cbiIsICJleHBvcnQgKiBhcyBhd3MgZnJvbSBcIi4vYXdzXCI7XG5leHBvcnQgKiBhcyBjbG91ZGZsYXJlIGZyb20gXCIuL2Nsb3VkZmxhcmVcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NlY3JldFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vbGlua1wiO1xuIiwgIi8qKlxuICogVGhlIGBzc3QuY29uZmlnLnRzYCBmaWxlIGlzIHVzZWQgdG8gY29uZmlndXJlIHlvdXIgU1NUIGFwcCBhbmQgaXRzIHJlc291cmNlcy5cbiAqXG4gKiBgYGB0c1xuICogJGNvbmZpZyhpbnB1dDogQ29uZmlnKTogQ29uZmlnXG4gKiBgYGBcbiAqXG4gKiBZb3Ugc3BlY2lmeSBpdCB1c2luZyB0aGUgYCRjb25maWdgIGZ1bmN0aW9uLiBUaGlzIHRha2VzIGFuIG9iamVjdCBvZiB0eXBlIFtgQ29uZmlnYF0oI2NvbmZpZykuXG4gKlxuICogYGBgdHMgdGl0bGU9XCJzc3QuY29uZmlnLnRzXCJcbiAqIC8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLy5zc3QvcGxhdGZvcm0vY29uZmlnLmQudHNcIiAvPlxuICpcbiAqIGV4cG9ydCBkZWZhdWx0ICRjb25maWcoe1xuICogICBhcHAoaW5wdXQpIHtcbiAqICAgICByZXR1cm4ge1xuICogICAgICAgbmFtZTogXCJteS1zc3QtYXBwXCIsXG4gKiAgICAgICBob21lOiBcImF3c1wiXG4gKiAgICAgfTtcbiAqICAgfSxcbiAqICAgYXN5bmMgcnVuKCkge1xuICogICAgIG5ldyBzc3QuYXdzLkJ1Y2tldChcIk15QnVja2V0XCIpO1xuICogICB9XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIFRoZSBgQ29uZmlnYCBvYmplY3QgdGFrZXMgdHdvIGZ1bmN0aW9uczogW2BhcHBgXSgjYXBwLTIpIGFuZCBbYHJ1bmBdKCNydW4pLlxuICpcbiAqIFRoZSBgYXBwYCBmdW5jdGlvbiBpcyBldmFsdWF0ZWQgcmlnaHQgd2hlbiB5b3VyIGFwcCBsb2Fkcy4gSXQncyB1c2VkIHRvIGRlZmluZSB0aGUgYXBwIGNvbmZpZyBhbmQgaXRzIHByb3ZpZGVycy5cbiAqXG4gKiA6Ojpub3RlXG4gKiBZb3UgY2FuIFB1bHVtaSBjb2RlIGluIHRoZSBgcnVuYCBmdW5jdGlvbiBub3QgdGhlIGBhcHBgIGZ1bmN0aW9uLlxuICogOjo6XG4gKlxuICogV2hpbGUgdGhlIGBydW5gIGZ1bmN0aW9uIGlzIHdoZXJlIHlvdSBkZWZpbmUgeW91ciByZXNvdXJjZXMgdXNpbmcgU1NUIG9yIFB1bHVtaSdzIGNvbXBvbmVudHMuXG4gKlxuICogOjo6dGlwXG4gKiBUaGUgW0dsb2JhbF0oL2RvY3MvcmVmZXJlbmNlL2dsb2JhbC8pIGxpYnJhcnkgY2FuIGhlbHAgeW91IHdpdGggeW91ciBhcHAgY29uZmlnIGFuZCByZXNvdXJjZXMuXG4gKiA6OjpcbiAqXG4gKiBUaGUgcnVuIGZ1bmN0aW9uIGFsc28gaGFzIGFjY2VzcyB0byBhIGxpc3Qgb2YgW0dsb2JhbF0oL2RvY3MvcmVmZXJlbmNlL2dsb2JhbC8pIGAkYCB2YXJpYWJsZXMgYW5kIGZ1bmN0aW9ucy4gVGhlc2Ugc2VydmUgYXMgdGhlIGNvbnRleHQgZm9yIHlvdXIgYXBwIGNvbmZpZy5cbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG5leHBvcnQgaW50ZXJmYWNlIEFwcCB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgYXBwLiBUaGlzIGlzIHVzZWQgdG8gcHJlZml4IHRoZSBuYW1lcyBvZiB0aGUgcmVzb3VyY2VzIGluIHlvdXIgYXBwLlxuICAgKlxuICAgKiA6OjpjYXV0aW9uXG4gICAqIElmIHlvdSBjaGFuZ2UgdGhlIG5hbWUgb2YgeW91ciBhcHAsIGl0J2xsIHJlZGVwbG95IHlvdXIgYXBwIHdpdGggbmV3IHJlc291cmNlcy4gVGhlIG9sZCByZXNvdXJjZXMgd2lsbCBiZSBvcnBoYW5lZC5cbiAgICogOjo6XG4gICAqXG4gICAqIFRoaXMgbWVhbnMgdGhhdCB5b3UgZG9uJ3Qgd2FudCB0byBjaGFuZ2UgdGhlIG5hbWUgb2YgeW91ciBhcHAgd2l0aG91dCByZW1vdmluZyB0aGUgb2xkIHJlc291cmNlcyBmaXJzdC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICoge1xuICAgKiAgIG5hbWU6IFwibXktc3N0LWFwcFwiXG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKlxuICAgKiBDb25maWd1cmUgaG93IHlvdXIgcmVzb3VyY2VzIGFyZSBoYW5kbGVkIG9uIGBzc3QgcmVtb3ZlYDpcbiAgICpcbiAgICogLSBgcmVtb3ZlYDogUmVtb3ZlIGFsbCB5b3VyIHJlc291cmNlcyBvbiByZW1vdmUuXG4gICAqIC0gYHJldGFpbmA6IFJldGFpbnMgUzMgYnVja2V0cyBhbmQgRHluYW1vREIgdGFibGVzLCBhbmQgcmVtb3ZlIGFsbCBvdGhlciByZXNvdXJjZXMuXG4gICAqIC0gYHJldGFpbi1hbGxgOiBSZXRhaW5zIGFsbCB5b3VyIHJlc291cmNlcyBvbiByZW1vdmUuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBJdCdzIGEgZ29vZCBpZGVhIHRvIHVzZSBgcmV0YWluYCBmb3IgeW91ciBwcm9kdWN0aW9uIHN0YWdlLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGRlZmF1bHQgYFwicmV0YWluXCJgXG4gICAqIEBleGFtcGxlXG4gICAqIFJldGFpbiByZXNvdXJjZXMgaWYgaXQncyB0aGUgX3Byb2R1Y3Rpb25fIHN0YWdlLCBvdGhlcndpc2UgcmVtb3ZlIGFsbCByZXNvdXJjZXMuXG4gICAqIGBgYHRzXG4gICAqIHtcbiAgICogICByZW1vdmFsOiBpbnB1dC5zdGFnZSA9PT0gXCJwcm9kdWN0aW9uXCIgPyBcInJldGFpblwiIDogXCJyZW1vdmVcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgcmVtb3ZhbD86IFwicmVtb3ZlXCIgfCBcInJldGFpblwiIHwgXCJyZXRhaW4tYWxsXCI7XG4gIC8qKlxuICAgKiBUaGUgcHJvdmlkZXJzIHRoYXQgYXJlIGJlaW5nIHVzZWQgaW4gdGhpcyBhcHAuIFNTVCBzdXBwb3J0cyBhbGwgW1B1bHVtaSdzIHByb3ZpZGVyc10oaHR0cHM6Ly93d3cucHVsdW1pLmNvbS9yZWdpc3RyeS8pLiBUaGlzIGFsbG93cyB5b3UgdG8gdXNlIHRoZSBjb21wb25lbnRzIGZyb20gdGhlc2UgcHJvdmlkZXJzIGluIHlvdXIgYXBwLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgeW91IHVzZSB0aGUgW0FXUyBDbGFzc2ljXShodHRwczovL3d3dy5wdWx1bWkuY29tL3JlZ2lzdHJ5L3BhY2thZ2VzL2F3cy8pIHByb3ZpZGVyLCB5b3UgY2FuIHVzZSB0aGUgYGF3c2AgY29tcG9uZW50cyBpbiB5b3VyIGFwcC5cbiAgICpcbiAgICogYGBgdHNcbiAgICogaW1wb3J0ICogYXMgYXdzIGZyb20gXCJAcHVsdW1pL2F3c1wiO1xuICAgKlxuICAgKiBuZXcgYXdzLnMzLkJ1Y2tldFYyKFwiYlwiLCB7XG4gICAqICAgYnVja2V0OiBcIm15YnVja2V0XCJcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiA6Ojpub3RlXG4gICAqIEJ5IGRlZmF1bHQsIHlvdXIgYGhvbWVgIHByb3ZpZGVyIGlzIGluY2x1ZGVkIGluIHRoZSBgcHJvdmlkZXJzYCBsaXN0LlxuICAgKiA6OjpcbiAgICpcbiAgICogSWYgeW91IGRvbid0IHNldCBhIGBwcm92aWRlcmAgaXQgdXNlcyB5b3VyIGBob21lYCBwcm92aWRlciB3aXRoIHRoZSBkZWZhdWx0IGNvbmZpZy4gU28gaWYgeW91IHNldCBgaG9tZWAgdG8gYGF3c2AsIGl0J3MgdGhlIHNhbWUgYXMgZG9pbmc6XG4gICAqXG4gICAqIGBgYHRzXG4gICAqIHtcbiAgICogICBob21lOiBcImF3c1wiLFxuICAgKiAgIHByb3ZpZGVyczoge1xuICAgKiAgICAgYXdzOiB0cnVlXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBAZGVmYXVsdCBUaGUgYGhvbWVgIHByb3ZpZGVyLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKlxuICAgKiBZb3UgY2FuIGFsc28gY29uZmlndXJlIHRoZSBwcm92aWRlciBwcm9wcy4gSGVyZSdzIHRoZSBjb25maWcgZm9yIHNvbWUgY29tbW9uIHByb3ZpZGVyczpcbiAgICogLSBbQVdTXShodHRwczovL3d3dy5wdWx1bWkuY29tL3JlZ2lzdHJ5L3BhY2thZ2VzL2F3cy9hcGktZG9jcy9wcm92aWRlci8jaW5wdXRzKVxuICAgKiAtIFtDbG91ZGZsYXJlXShodHRwczovL3d3dy5wdWx1bWkuY29tL3JlZ2lzdHJ5L3BhY2thZ2VzL2Nsb3VkZmxhcmUvYXBpLWRvY3MvcHJvdmlkZXIvI2lucHV0cylcbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIHRvIGNoYW5nZSB0aGUgcmVnaW9uIGZvciBBV1MuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIHtcbiAgICogICBwcm92aWRlcnM6IHtcbiAgICogICAgIGF3czoge1xuICAgKiAgICAgICByZWdpb246IFwidXMtd2VzdC0yXCJcbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFlvdSBhbHNvIGFkZCBtdWx0aXBsZSBwcm92aWRlcnMuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIHtcbiAgICogICBwcm92aWRlcnM6IHtcbiAgICogICAgIGF3czogdHJ1ZSxcbiAgICogICAgIGNsb3VkZmxhcmU6IHRydWVcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBwcm92aWRlcnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG4gIC8qKlxuICAgKiBUaGUgcHJvdmlkZXIgU1NUIHdpbGwgdXNlIHRvIHN0b3JlIHRoZSBzdGF0ZSBmb3IgeW91ciBhcHAuIFRoZSBzdGF0ZSBrZWVwcyB0cmFjayBvZiBhbGwgeW91ciByZXNvdXJjZXMgYW5kIHNlY3JldHMuIFRoZSBzdGF0ZSBpcyBnZW5lcmF0ZWQgbG9jYWxseSBhbmQgYmFja2VkIHVwIGluIHlvdXIgY2xvdWQgcHJvdmlkZXIuXG4gICAqXG4gICAqIDo6OnRpcFxuICAgKiBTU1QgdXNlcyB0aGUgYGhvbWVgIHByb3ZpZGVyIHRvIHN0b3JlIHRoZSBzdGF0ZSBmb3IgeW91ciBhcHAuXG4gICAqIDo6OlxuICAgKlxuICAgKiBDdXJyZW50bHkgc3VwcG9ydHMgQVdTIGFuZCBDbG91ZGZsYXJlLlxuICAgKlxuICAgKiBTZXR0aW5nIHRoZSBgaG9tZWAgcHJvdmlkZXIgaXMgdGhlIHNhbWUgYXMgc2V0dGluZyB0aGUgYHByb3ZpZGVyc2AgbGlzdC4gU28gaWYgeW91IHNldCBgaG9tZWAgdG8gYGF3c2AsIGl0J3MgdGhlIHNhbWUgYXMgZG9pbmc6XG4gICAqXG4gICAqIGBgYHRzXG4gICAqIHtcbiAgICogICBob21lOiBcImF3c1wiLFxuICAgKiAgIHByb3ZpZGVyczoge1xuICAgKiAgICAgYXdzOiB0cnVlXG4gICAqICAgfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byBjb25mZ2l1cmUgeW91ciBob21lIHByb3ZpZGVyLCB5b3UgY2FuOlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiB7XG4gICAqICAgaG9tZTogXCJhd3NcIixcbiAgICogICBwcm92aWRlcnM6IHtcbiAgICogICAgIGF3czoge1xuICAgKiAgICAgICByZWdpb246IFwidXMtd2VzdC0yXCJcbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqL1xuICBob21lOiBcImF3c1wiIHwgXCJjbG91ZGZsYXJlXCI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXBwSW5wdXQge1xuICAvKipcbiAgICogVGhlIHN0YWdlIHRoaXMgYXBwIGlzIHJ1bm5pbmcgb24uIFRoaXMgaXMgYSBzdHJpbmcgdGhhdCBjYW4gYmUgcGFzc2VkIGluIHRocm91Z2ggdGhlIENMSS5cbiAgICpcbiAgICogOjo6dGlwXG4gICAqIENoYW5naW5nIHRoZSBzdGFnZSB3aWxsIHJlZGVwbG95IHlvdXIgYXBwIHRvIGEgbmV3IHN0YWdlIHdpdGggbmV3IHJlc291cmNlcy4gVGhlIG9sZCByZXNvdXJjZXMgd2lsbCBzdGlsbCBiZSBhcm91bmQgaW4gdGhlIG9sZCBzdGFnZS5cbiAgICogOjo6XG4gICAqXG4gICAqIElmIG5vdCBwYXNzZWQgaW4sIGl0J2xsIHVzZSB0aGUgdXNlcm5hbWUgb2YgeW91ciBsb2NhbCBtYWNoaW5lLCBvciBwcm9tcHQgeW91IGZvciBpdC5cbiAgICovXG4gIHN0YWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlnIHtcbiAgLyoqXG4gICAqIFRoZSBjb25maWcgZm9yIHlvdXIgYXBwLiBJdCBuZWVkcyB0byByZXR1cm4gYW4gb2JqZWN0IG9mIHR5cGUgW2BBcHBgXSgjYXBwLTEpLlxuICAgKlxuICAgKiA6Ojp0aXBcbiAgICogVGhlIGBhcHBgIGZ1bmN0aW9uIGlzIGV2YWx1YXRlZCB3aGVuIHlvdXIgYXBwIGxvYWRzLlxuICAgKiA6OjpcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICpcbiAgICogYGBgdHNcbiAgICogYXBwKGlucHV0KSB7XG4gICAqICAgcmV0dXJuIHtcbiAgICogICAgIG5hbWU6IFwibXktc3N0LWFwcFwiLFxuICAgKiAgICAgaG9tZTogXCJhd3NcIixcbiAgICogICAgIHByb3ZpZGVyczoge1xuICAgKiAgICAgICBhd3M6IHRydWUsXG4gICAqICAgICAgIGNsb3VkZmxhcmU6IHtcbiAgICogICAgICAgICBhY2NvdW50SWQ6IFwiNmZlZjllZDkwODliYjE1ZGUzZTQxOTg2MTgzODVkZTJcIlxuICAgKiAgICAgICB9XG4gICAqICAgICB9LFxuICAgKiAgICAgcmVtb3ZhbDogaW5wdXQuc3RhZ2UgPT09IFwicHJvZHVjdGlvblwiID8gXCJyZXRhaW5cIiA6IFwicmVtb3ZlXCJcbiAgICogICB9O1xuICAgKiB9LFxuICAgKiBgYGBcbiAgICovXG4gIGFwcChpbnB1dDogQXBwSW5wdXQpOiBBcHA7XG4gIC8qKlxuICAgKiBBbiBhc3luYyBmdW5jdGlvbiB0aGF0IGxldHMgeW91IGRlZmluZSB0aGUgcmVzb3VyY2VzIGluIHlvdXIgYXBwLlxuICAgKlxuICAgKiA6Ojpub3RlXG4gICAqIFlvdSBjYW4gdXNlIFNTVCBhbmQgUHVsdW1pIGNvbXBvbmVudHMgb25seSBpbiB0aGUgYHJ1bmAgZnVuY3Rpb24uXG4gICAqIDo6OlxuICAgKlxuICAgKiBZb3UgY2FuIG9wdGlvbmFsbHkgcmV0dXJuIGFuIG9iamVjdCB0aGF0J2xsIGJlIGRpc3BsYXllZCBhcyB0aGUgb3V0cHV0IGluIHRoZSBDTEkuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqXG4gICAqIFRoaXMnbGwgY3JlYXRlIGFuIFMzIEJ1Y2tldCBhbmQgZGlzcGxheSBpdHMgbmFtZS5cbiAgICpcbiAgICogYGBgdHNcbiAgICogYXN5bmMgcnVuKCkge1xuICAgKiAgIGNvbnN0IGJ1Y2tldCA9IG5ldyBzc3QuYXdzLkJ1Y2tldChcIk15QnVja2V0XCIpO1xuICAgKlxuICAgKiAgIHJldHVybiB7XG4gICAqICAgICBidWNrZXROYW1lOiBidWNrZXQubmFtZVxuICAgKiAgIH07XG4gICAqIH1cbiAgICogYGBgXG4gICAqL1xuICBydW4oKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgdm9pZD47XG59XG5cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiAkY29uZmlnKGlucHV0OiBDb25maWcpOiBDb25maWcge1xuICByZXR1cm4gaW5wdXQ7XG59XG4iLCAiaW1wb3J0ICogYXMgdXRpbCBmcm9tIFwiQHB1bHVtaS9wdWx1bWlcIjtcbmltcG9ydCAqIGFzIHNzdCBmcm9tIFwiLi4vY29tcG9uZW50cy9cIjtcbmltcG9ydCB7IExpbmsgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9saW5rXCI7XG5pbXBvcnQgeyAkY29uZmlnIH0gZnJvbSBcIi4uL2NvbmZpZ1wiO1xuXG5jb25zdCAkc2VjcmV0cyA9IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYuU1NUX1NFQ1JFVFMgfHwgXCJ7fVwiKTtcbmNvbnN0IHsgb3V0cHV0LCBhcHBseSwgYWxsLCBpbnRlcnBvbGF0ZSwgY29uY2F0LCBqc29uUGFyc2UsIGpzb25TdHJpbmdpZnkgfSA9XG4gIHV0aWw7XG5cbmNvbnN0IG1ha2VMaW5rYWJsZSA9IExpbmsubWFrZUxpbmthYmxlO1xuZXhwb3J0IHtcbiAgbWFrZUxpbmthYmxlIGFzIFwiJGxpbmthYmxlXCIsXG4gIG91dHB1dCBhcyBcIiRvdXRwdXRcIixcbiAgYXBwbHkgYXMgXCIkYXBwbHlcIixcbiAgYWxsIGFzIFwiJHJlc29sdmVcIixcbiAgaW50ZXJwb2xhdGUgYXMgXCIkaW50ZXJwb2xhdGVcIixcbiAgY29uY2F0IGFzIFwiJGNvbmNhdFwiLFxuICBqc29uUGFyc2UgYXMgXCIkanNvblBhcnNlXCIsXG4gIGpzb25TdHJpbmdpZnkgYXMgXCIkanNvblN0cmluZ2lmeVwiLFxuICB1dGlsIGFzIFwiJHV0aWxcIixcbiAgc3N0IGFzIFwic3N0XCIsXG4gICRjb25maWcgYXMgXCIkY29uZmlnXCIsXG4gICRzZWNyZXRzIGFzIFwiJHNlY3JldHNcIixcbn07XG4iLCAie1xuICBcIm5hbWVcIjogXCJkb3RlbnZcIixcbiAgXCJ2ZXJzaW9uXCI6IFwiMTYuNC41XCIsXG4gIFwiZGVzY3JpcHRpb25cIjogXCJMb2FkcyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSAuZW52IGZpbGVcIixcbiAgXCJtYWluXCI6IFwibGliL21haW4uanNcIixcbiAgXCJ0eXBlc1wiOiBcImxpYi9tYWluLmQudHNcIixcbiAgXCJleHBvcnRzXCI6IHtcbiAgICBcIi5cIjoge1xuICAgICAgXCJ0eXBlc1wiOiBcIi4vbGliL21haW4uZC50c1wiLFxuICAgICAgXCJyZXF1aXJlXCI6IFwiLi9saWIvbWFpbi5qc1wiLFxuICAgICAgXCJkZWZhdWx0XCI6IFwiLi9saWIvbWFpbi5qc1wiXG4gICAgfSxcbiAgICBcIi4vY29uZmlnXCI6IFwiLi9jb25maWcuanNcIixcbiAgICBcIi4vY29uZmlnLmpzXCI6IFwiLi9jb25maWcuanNcIixcbiAgICBcIi4vbGliL2Vudi1vcHRpb25zXCI6IFwiLi9saWIvZW52LW9wdGlvbnMuanNcIixcbiAgICBcIi4vbGliL2Vudi1vcHRpb25zLmpzXCI6IFwiLi9saWIvZW52LW9wdGlvbnMuanNcIixcbiAgICBcIi4vbGliL2NsaS1vcHRpb25zXCI6IFwiLi9saWIvY2xpLW9wdGlvbnMuanNcIixcbiAgICBcIi4vbGliL2NsaS1vcHRpb25zLmpzXCI6IFwiLi9saWIvY2xpLW9wdGlvbnMuanNcIixcbiAgICBcIi4vcGFja2FnZS5qc29uXCI6IFwiLi9wYWNrYWdlLmpzb25cIlxuICB9LFxuICBcInNjcmlwdHNcIjoge1xuICAgIFwiZHRzLWNoZWNrXCI6IFwidHNjIC0tcHJvamVjdCB0ZXN0cy90eXBlcy90c2NvbmZpZy5qc29uXCIsXG4gICAgXCJsaW50XCI6IFwic3RhbmRhcmRcIixcbiAgICBcImxpbnQtcmVhZG1lXCI6IFwic3RhbmRhcmQtbWFya2Rvd25cIixcbiAgICBcInByZXRlc3RcIjogXCJucG0gcnVuIGxpbnQgJiYgbnBtIHJ1biBkdHMtY2hlY2tcIixcbiAgICBcInRlc3RcIjogXCJ0YXAgdGVzdHMvKi5qcyAtLTEwMCAtUnNwZWNcIixcbiAgICBcInRlc3Q6Y292ZXJhZ2VcIjogXCJ0YXAgLS1jb3ZlcmFnZS1yZXBvcnQ9bGNvdlwiLFxuICAgIFwicHJlcmVsZWFzZVwiOiBcIm5wbSB0ZXN0XCIsXG4gICAgXCJyZWxlYXNlXCI6IFwic3RhbmRhcmQtdmVyc2lvblwiXG4gIH0sXG4gIFwicmVwb3NpdG9yeVwiOiB7XG4gICAgXCJ0eXBlXCI6IFwiZ2l0XCIsXG4gICAgXCJ1cmxcIjogXCJnaXQ6Ly9naXRodWIuY29tL21vdGRvdGxhL2RvdGVudi5naXRcIlxuICB9LFxuICBcImZ1bmRpbmdcIjogXCJodHRwczovL2RvdGVudnguY29tXCIsXG4gIFwia2V5d29yZHNcIjogW1xuICAgIFwiZG90ZW52XCIsXG4gICAgXCJlbnZcIixcbiAgICBcIi5lbnZcIixcbiAgICBcImVudmlyb25tZW50XCIsXG4gICAgXCJ2YXJpYWJsZXNcIixcbiAgICBcImNvbmZpZ1wiLFxuICAgIFwic2V0dGluZ3NcIlxuICBdLFxuICBcInJlYWRtZUZpbGVuYW1lXCI6IFwiUkVBRE1FLm1kXCIsXG4gIFwibGljZW5zZVwiOiBcIkJTRC0yLUNsYXVzZVwiLFxuICBcImRldkRlcGVuZGVuY2llc1wiOiB7XG4gICAgXCJAZGVmaW5pdGVseXR5cGVkL2R0c2xpbnRcIjogXCJeMC4wLjEzM1wiLFxuICAgIFwiQHR5cGVzL25vZGVcIjogXCJeMTguMTEuM1wiLFxuICAgIFwiZGVjYWNoZVwiOiBcIl40LjYuMVwiLFxuICAgIFwic2lub25cIjogXCJeMTQuMC4xXCIsXG4gICAgXCJzdGFuZGFyZFwiOiBcIl4xNy4wLjBcIixcbiAgICBcInN0YW5kYXJkLW1hcmtkb3duXCI6IFwiXjcuMS4wXCIsXG4gICAgXCJzdGFuZGFyZC12ZXJzaW9uXCI6IFwiXjkuNS4wXCIsXG4gICAgXCJ0YXBcIjogXCJeMTYuMy4wXCIsXG4gICAgXCJ0YXJcIjogXCJeNi4xLjExXCIsXG4gICAgXCJ0eXBlc2NyaXB0XCI6IFwiXjQuOC40XCJcbiAgfSxcbiAgXCJlbmdpbmVzXCI6IHtcbiAgICBcIm5vZGVcIjogXCI+PTEyXCJcbiAgfSxcbiAgXCJicm93c2VyXCI6IHtcbiAgICBcImZzXCI6IGZhbHNlXG4gIH1cbn1cbiIsICJjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJylcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcbmNvbnN0IG9zID0gcmVxdWlyZSgnb3MnKVxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJylcbmNvbnN0IHBhY2thZ2VKc29uID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJylcblxuY29uc3QgdmVyc2lvbiA9IHBhY2thZ2VKc29uLnZlcnNpb25cblxuY29uc3QgTElORSA9IC8oPzpefF4pXFxzKig/OmV4cG9ydFxccyspPyhbXFx3Li1dKykoPzpcXHMqPVxccyo/fDpcXHMrPykoXFxzKicoPzpcXFxcJ3xbXiddKSonfFxccypcIig/OlxcXFxcInxbXlwiXSkqXCJ8XFxzKmAoPzpcXFxcYHxbXmBdKSpgfFteI1xcclxcbl0rKT9cXHMqKD86Iy4qKT8oPzokfCQpL21nXG5cbi8vIFBhcnNlIHNyYyBpbnRvIGFuIE9iamVjdFxuZnVuY3Rpb24gcGFyc2UgKHNyYykge1xuICBjb25zdCBvYmogPSB7fVxuXG4gIC8vIENvbnZlcnQgYnVmZmVyIHRvIHN0cmluZ1xuICBsZXQgbGluZXMgPSBzcmMudG9TdHJpbmcoKVxuXG4gIC8vIENvbnZlcnQgbGluZSBicmVha3MgdG8gc2FtZSBmb3JtYXRcbiAgbGluZXMgPSBsaW5lcy5yZXBsYWNlKC9cXHJcXG4/L21nLCAnXFxuJylcblxuICBsZXQgbWF0Y2hcbiAgd2hpbGUgKChtYXRjaCA9IExJTkUuZXhlYyhsaW5lcykpICE9IG51bGwpIHtcbiAgICBjb25zdCBrZXkgPSBtYXRjaFsxXVxuXG4gICAgLy8gRGVmYXVsdCB1bmRlZmluZWQgb3IgbnVsbCB0byBlbXB0eSBzdHJpbmdcbiAgICBsZXQgdmFsdWUgPSAobWF0Y2hbMl0gfHwgJycpXG5cbiAgICAvLyBSZW1vdmUgd2hpdGVzcGFjZVxuICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXG5cbiAgICAvLyBDaGVjayBpZiBkb3VibGUgcXVvdGVkXG4gICAgY29uc3QgbWF5YmVRdW90ZSA9IHZhbHVlWzBdXG5cbiAgICAvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzXG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eKFsnXCJgXSkoW1xcc1xcU10qKVxcMSQvbWcsICckMicpXG5cbiAgICAvLyBFeHBhbmQgbmV3bGluZXMgaWYgZG91YmxlIHF1b3RlZFxuICAgIGlmIChtYXliZVF1b3RlID09PSAnXCInKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xcXFxuL2csICdcXG4nKVxuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXFxcci9nLCAnXFxyJylcbiAgICB9XG5cbiAgICAvLyBBZGQgdG8gb2JqZWN0XG4gICAgb2JqW2tleV0gPSB2YWx1ZVxuICB9XG5cbiAgcmV0dXJuIG9ialxufVxuXG5mdW5jdGlvbiBfcGFyc2VWYXVsdCAob3B0aW9ucykge1xuICBjb25zdCB2YXVsdFBhdGggPSBfdmF1bHRQYXRoKG9wdGlvbnMpXG5cbiAgLy8gUGFyc2UgLmVudi52YXVsdFxuICBjb25zdCByZXN1bHQgPSBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52KHsgcGF0aDogdmF1bHRQYXRoIH0pXG4gIGlmICghcmVzdWx0LnBhcnNlZCkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgTUlTU0lOR19EQVRBOiBDYW5ub3QgcGFyc2UgJHt2YXVsdFBhdGh9IGZvciBhbiB1bmtub3duIHJlYXNvbmApXG4gICAgZXJyLmNvZGUgPSAnTUlTU0lOR19EQVRBJ1xuICAgIHRocm93IGVyclxuICB9XG5cbiAgLy8gaGFuZGxlIHNjZW5hcmlvIGZvciBjb21tYSBzZXBhcmF0ZWQga2V5cyAtIGZvciB1c2Ugd2l0aCBrZXkgcm90YXRpb25cbiAgLy8gZXhhbXBsZTogRE9URU5WX0tFWT1cImRvdGVudjovLzprZXlfMTIzNEBkb3RlbnZ4LmNvbS92YXVsdC8uZW52LnZhdWx0P2Vudmlyb25tZW50PXByb2QsZG90ZW52Oi8vOmtleV83ODkwQGRvdGVudnguY29tL3ZhdWx0Ly5lbnYudmF1bHQ/ZW52aXJvbm1lbnQ9cHJvZFwiXG4gIGNvbnN0IGtleXMgPSBfZG90ZW52S2V5KG9wdGlvbnMpLnNwbGl0KCcsJylcbiAgY29uc3QgbGVuZ3RoID0ga2V5cy5sZW5ndGhcblxuICBsZXQgZGVjcnlwdGVkXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGZ1bGwga2V5XG4gICAgICBjb25zdCBrZXkgPSBrZXlzW2ldLnRyaW0oKVxuXG4gICAgICAvLyBHZXQgaW5zdHJ1Y3Rpb25zIGZvciBkZWNyeXB0XG4gICAgICBjb25zdCBhdHRycyA9IF9pbnN0cnVjdGlvbnMocmVzdWx0LCBrZXkpXG5cbiAgICAgIC8vIERlY3J5cHRcbiAgICAgIGRlY3J5cHRlZCA9IERvdGVudk1vZHVsZS5kZWNyeXB0KGF0dHJzLmNpcGhlcnRleHQsIGF0dHJzLmtleSlcblxuICAgICAgYnJlYWtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gbGFzdCBrZXlcbiAgICAgIGlmIChpICsgMSA+PSBsZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cbiAgICAgIC8vIHRyeSBuZXh0IGtleVxuICAgIH1cbiAgfVxuXG4gIC8vIFBhcnNlIGRlY3J5cHRlZCAuZW52IHN0cmluZ1xuICByZXR1cm4gRG90ZW52TW9kdWxlLnBhcnNlKGRlY3J5cHRlZClcbn1cblxuZnVuY3Rpb24gX2xvZyAobWVzc2FnZSkge1xuICBjb25zb2xlLmxvZyhgW2RvdGVudkAke3ZlcnNpb259XVtJTkZPXSAke21lc3NhZ2V9YClcbn1cblxuZnVuY3Rpb24gX3dhcm4gKG1lc3NhZ2UpIHtcbiAgY29uc29sZS5sb2coYFtkb3RlbnZAJHt2ZXJzaW9ufV1bV0FSTl0gJHttZXNzYWdlfWApXG59XG5cbmZ1bmN0aW9uIF9kZWJ1ZyAobWVzc2FnZSkge1xuICBjb25zb2xlLmxvZyhgW2RvdGVudkAke3ZlcnNpb259XVtERUJVR10gJHttZXNzYWdlfWApXG59XG5cbmZ1bmN0aW9uIF9kb3RlbnZLZXkgKG9wdGlvbnMpIHtcbiAgLy8gcHJpb3JpdGl6ZSBkZXZlbG9wZXIgZGlyZWN0bHkgc2V0dGluZyBvcHRpb25zLkRPVEVOVl9LRVlcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5ET1RFTlZfS0VZICYmIG9wdGlvbnMuRE9URU5WX0tFWS5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMuRE9URU5WX0tFWVxuICB9XG5cbiAgLy8gc2Vjb25kYXJ5IGluZnJhIGFscmVhZHkgY29udGFpbnMgYSBET1RFTlZfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlXG4gIGlmIChwcm9jZXNzLmVudi5ET1RFTlZfS0VZICYmIHByb2Nlc3MuZW52LkRPVEVOVl9LRVkubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwcm9jZXNzLmVudi5ET1RFTlZfS0VZXG4gIH1cblxuICAvLyBmYWxsYmFjayB0byBlbXB0eSBzdHJpbmdcbiAgcmV0dXJuICcnXG59XG5cbmZ1bmN0aW9uIF9pbnN0cnVjdGlvbnMgKHJlc3VsdCwgZG90ZW52S2V5KSB7XG4gIC8vIFBhcnNlIERPVEVOVl9LRVkuIEZvcm1hdCBpcyBhIFVSSVxuICBsZXQgdXJpXG4gIHRyeSB7XG4gICAgdXJpID0gbmV3IFVSTChkb3RlbnZLZXkpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLmNvZGUgPT09ICdFUlJfSU5WQUxJRF9VUkwnKSB7XG4gICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ0lOVkFMSURfRE9URU5WX0tFWTogV3JvbmcgZm9ybWF0LiBNdXN0IGJlIGluIHZhbGlkIHVyaSBmb3JtYXQgbGlrZSBkb3RlbnY6Ly86a2V5XzEyMzRAZG90ZW52eC5jb20vdmF1bHQvLmVudi52YXVsdD9lbnZpcm9ubWVudD1kZXZlbG9wbWVudCcpXG4gICAgICBlcnIuY29kZSA9ICdJTlZBTElEX0RPVEVOVl9LRVknXG4gICAgICB0aHJvdyBlcnJcbiAgICB9XG5cbiAgICB0aHJvdyBlcnJvclxuICB9XG5cbiAgLy8gR2V0IGRlY3J5cHQga2V5XG4gIGNvbnN0IGtleSA9IHVyaS5wYXNzd29yZFxuICBpZiAoIWtleSkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcignSU5WQUxJRF9ET1RFTlZfS0VZOiBNaXNzaW5nIGtleSBwYXJ0JylcbiAgICBlcnIuY29kZSA9ICdJTlZBTElEX0RPVEVOVl9LRVknXG4gICAgdGhyb3cgZXJyXG4gIH1cblxuICAvLyBHZXQgZW52aXJvbm1lbnRcbiAgY29uc3QgZW52aXJvbm1lbnQgPSB1cmkuc2VhcmNoUGFyYW1zLmdldCgnZW52aXJvbm1lbnQnKVxuICBpZiAoIWVudmlyb25tZW50KSB7XG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdJTlZBTElEX0RPVEVOVl9LRVk6IE1pc3NpbmcgZW52aXJvbm1lbnQgcGFydCcpXG4gICAgZXJyLmNvZGUgPSAnSU5WQUxJRF9ET1RFTlZfS0VZJ1xuICAgIHRocm93IGVyclxuICB9XG5cbiAgLy8gR2V0IGNpcGhlcnRleHQgcGF5bG9hZFxuICBjb25zdCBlbnZpcm9ubWVudEtleSA9IGBET1RFTlZfVkFVTFRfJHtlbnZpcm9ubWVudC50b1VwcGVyQ2FzZSgpfWBcbiAgY29uc3QgY2lwaGVydGV4dCA9IHJlc3VsdC5wYXJzZWRbZW52aXJvbm1lbnRLZXldIC8vIERPVEVOVl9WQVVMVF9QUk9EVUNUSU9OXG4gIGlmICghY2lwaGVydGV4dCkge1xuICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgTk9UX0ZPVU5EX0RPVEVOVl9FTlZJUk9OTUVOVDogQ2Fubm90IGxvY2F0ZSBlbnZpcm9ubWVudCAke2Vudmlyb25tZW50S2V5fSBpbiB5b3VyIC5lbnYudmF1bHQgZmlsZS5gKVxuICAgIGVyci5jb2RlID0gJ05PVF9GT1VORF9ET1RFTlZfRU5WSVJPTk1FTlQnXG4gICAgdGhyb3cgZXJyXG4gIH1cblxuICByZXR1cm4geyBjaXBoZXJ0ZXh0LCBrZXkgfVxufVxuXG5mdW5jdGlvbiBfdmF1bHRQYXRoIChvcHRpb25zKSB7XG4gIGxldCBwb3NzaWJsZVZhdWx0UGF0aCA9IG51bGxcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnBhdGggJiYgb3B0aW9ucy5wYXRoLmxlbmd0aCA+IDApIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLnBhdGgpKSB7XG4gICAgICBmb3IgKGNvbnN0IGZpbGVwYXRoIG9mIG9wdGlvbnMucGF0aCkge1xuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlcGF0aCkpIHtcbiAgICAgICAgICBwb3NzaWJsZVZhdWx0UGF0aCA9IGZpbGVwYXRoLmVuZHNXaXRoKCcudmF1bHQnKSA/IGZpbGVwYXRoIDogYCR7ZmlsZXBhdGh9LnZhdWx0YFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvc3NpYmxlVmF1bHRQYXRoID0gb3B0aW9ucy5wYXRoLmVuZHNXaXRoKCcudmF1bHQnKSA/IG9wdGlvbnMucGF0aCA6IGAke29wdGlvbnMucGF0aH0udmF1bHRgXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHBvc3NpYmxlVmF1bHRQYXRoID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICcuZW52LnZhdWx0JylcbiAgfVxuXG4gIGlmIChmcy5leGlzdHNTeW5jKHBvc3NpYmxlVmF1bHRQYXRoKSkge1xuICAgIHJldHVybiBwb3NzaWJsZVZhdWx0UGF0aFxuICB9XG5cbiAgcmV0dXJuIG51bGxcbn1cblxuZnVuY3Rpb24gX3Jlc29sdmVIb21lIChlbnZQYXRoKSB7XG4gIHJldHVybiBlbnZQYXRoWzBdID09PSAnficgPyBwYXRoLmpvaW4ob3MuaG9tZWRpcigpLCBlbnZQYXRoLnNsaWNlKDEpKSA6IGVudlBhdGhcbn1cblxuZnVuY3Rpb24gX2NvbmZpZ1ZhdWx0IChvcHRpb25zKSB7XG4gIF9sb2coJ0xvYWRpbmcgZW52IGZyb20gZW5jcnlwdGVkIC5lbnYudmF1bHQnKVxuXG4gIGNvbnN0IHBhcnNlZCA9IERvdGVudk1vZHVsZS5fcGFyc2VWYXVsdChvcHRpb25zKVxuXG4gIGxldCBwcm9jZXNzRW52ID0gcHJvY2Vzcy5lbnZcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wcm9jZXNzRW52ICE9IG51bGwpIHtcbiAgICBwcm9jZXNzRW52ID0gb3B0aW9ucy5wcm9jZXNzRW52XG4gIH1cblxuICBEb3RlbnZNb2R1bGUucG9wdWxhdGUocHJvY2Vzc0VudiwgcGFyc2VkLCBvcHRpb25zKVxuXG4gIHJldHVybiB7IHBhcnNlZCB9XG59XG5cbmZ1bmN0aW9uIGNvbmZpZ0RvdGVudiAob3B0aW9ucykge1xuICBjb25zdCBkb3RlbnZQYXRoID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICcuZW52JylcbiAgbGV0IGVuY29kaW5nID0gJ3V0ZjgnXG4gIGNvbnN0IGRlYnVnID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMuZGVidWcpXG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5lbmNvZGluZykge1xuICAgIGVuY29kaW5nID0gb3B0aW9ucy5lbmNvZGluZ1xuICB9IGVsc2Uge1xuICAgIGlmIChkZWJ1Zykge1xuICAgICAgX2RlYnVnKCdObyBlbmNvZGluZyBpcyBzcGVjaWZpZWQuIFVURi04IGlzIHVzZWQgYnkgZGVmYXVsdCcpXG4gICAgfVxuICB9XG5cbiAgbGV0IG9wdGlvblBhdGhzID0gW2RvdGVudlBhdGhdIC8vIGRlZmF1bHQsIGxvb2sgZm9yIC5lbnZcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wYXRoKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KG9wdGlvbnMucGF0aCkpIHtcbiAgICAgIG9wdGlvblBhdGhzID0gW19yZXNvbHZlSG9tZShvcHRpb25zLnBhdGgpXVxuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25QYXRocyA9IFtdIC8vIHJlc2V0IGRlZmF1bHRcbiAgICAgIGZvciAoY29uc3QgZmlsZXBhdGggb2Ygb3B0aW9ucy5wYXRoKSB7XG4gICAgICAgIG9wdGlvblBhdGhzLnB1c2goX3Jlc29sdmVIb21lKGZpbGVwYXRoKSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBCdWlsZCB0aGUgcGFyc2VkIGRhdGEgaW4gYSB0ZW1wb3Jhcnkgb2JqZWN0IChiZWNhdXNlIHdlIG5lZWQgdG8gcmV0dXJuIGl0KS4gIE9uY2Ugd2UgaGF2ZSB0aGUgZmluYWxcbiAgLy8gcGFyc2VkIGRhdGEsIHdlIHdpbGwgY29tYmluZSBpdCB3aXRoIHByb2Nlc3MuZW52IChvciBvcHRpb25zLnByb2Nlc3NFbnYgaWYgcHJvdmlkZWQpLlxuICBsZXQgbGFzdEVycm9yXG4gIGNvbnN0IHBhcnNlZEFsbCA9IHt9XG4gIGZvciAoY29uc3QgcGF0aCBvZiBvcHRpb25QYXRocykge1xuICAgIHRyeSB7XG4gICAgICAvLyBTcGVjaWZ5aW5nIGFuIGVuY29kaW5nIHJldHVybnMgYSBzdHJpbmcgaW5zdGVhZCBvZiBhIGJ1ZmZlclxuICAgICAgY29uc3QgcGFyc2VkID0gRG90ZW52TW9kdWxlLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhwYXRoLCB7IGVuY29kaW5nIH0pKVxuXG4gICAgICBEb3RlbnZNb2R1bGUucG9wdWxhdGUocGFyc2VkQWxsLCBwYXJzZWQsIG9wdGlvbnMpXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgIF9kZWJ1ZyhgRmFpbGVkIHRvIGxvYWQgJHtwYXRofSAke2UubWVzc2FnZX1gKVxuICAgICAgfVxuICAgICAgbGFzdEVycm9yID0gZVxuICAgIH1cbiAgfVxuXG4gIGxldCBwcm9jZXNzRW52ID0gcHJvY2Vzcy5lbnZcbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wcm9jZXNzRW52ICE9IG51bGwpIHtcbiAgICBwcm9jZXNzRW52ID0gb3B0aW9ucy5wcm9jZXNzRW52XG4gIH1cblxuICBEb3RlbnZNb2R1bGUucG9wdWxhdGUocHJvY2Vzc0VudiwgcGFyc2VkQWxsLCBvcHRpb25zKVxuXG4gIGlmIChsYXN0RXJyb3IpIHtcbiAgICByZXR1cm4geyBwYXJzZWQ6IHBhcnNlZEFsbCwgZXJyb3I6IGxhc3RFcnJvciB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgcGFyc2VkOiBwYXJzZWRBbGwgfVxuICB9XG59XG5cbi8vIFBvcHVsYXRlcyBwcm9jZXNzLmVudiBmcm9tIC5lbnYgZmlsZVxuZnVuY3Rpb24gY29uZmlnIChvcHRpb25zKSB7XG4gIC8vIGZhbGxiYWNrIHRvIG9yaWdpbmFsIGRvdGVudiBpZiBET1RFTlZfS0VZIGlzIG5vdCBzZXRcbiAgaWYgKF9kb3RlbnZLZXkob3B0aW9ucykubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIERvdGVudk1vZHVsZS5jb25maWdEb3RlbnYob3B0aW9ucylcbiAgfVxuXG4gIGNvbnN0IHZhdWx0UGF0aCA9IF92YXVsdFBhdGgob3B0aW9ucylcblxuICAvLyBkb3RlbnZLZXkgZXhpc3RzIGJ1dCAuZW52LnZhdWx0IGZpbGUgZG9lcyBub3QgZXhpc3RcbiAgaWYgKCF2YXVsdFBhdGgpIHtcbiAgICBfd2FybihgWW91IHNldCBET1RFTlZfS0VZIGJ1dCB5b3UgYXJlIG1pc3NpbmcgYSAuZW52LnZhdWx0IGZpbGUgYXQgJHt2YXVsdFBhdGh9LiBEaWQgeW91IGZvcmdldCB0byBidWlsZCBpdD9gKVxuXG4gICAgcmV0dXJuIERvdGVudk1vZHVsZS5jb25maWdEb3RlbnYob3B0aW9ucylcbiAgfVxuXG4gIHJldHVybiBEb3RlbnZNb2R1bGUuX2NvbmZpZ1ZhdWx0KG9wdGlvbnMpXG59XG5cbmZ1bmN0aW9uIGRlY3J5cHQgKGVuY3J5cHRlZCwga2V5U3RyKSB7XG4gIGNvbnN0IGtleSA9IEJ1ZmZlci5mcm9tKGtleVN0ci5zbGljZSgtNjQpLCAnaGV4JylcbiAgbGV0IGNpcGhlcnRleHQgPSBCdWZmZXIuZnJvbShlbmNyeXB0ZWQsICdiYXNlNjQnKVxuXG4gIGNvbnN0IG5vbmNlID0gY2lwaGVydGV4dC5zdWJhcnJheSgwLCAxMilcbiAgY29uc3QgYXV0aFRhZyA9IGNpcGhlcnRleHQuc3ViYXJyYXkoLTE2KVxuICBjaXBoZXJ0ZXh0ID0gY2lwaGVydGV4dC5zdWJhcnJheSgxMiwgLTE2KVxuXG4gIHRyeSB7XG4gICAgY29uc3QgYWVzZ2NtID0gY3J5cHRvLmNyZWF0ZURlY2lwaGVyaXYoJ2Flcy0yNTYtZ2NtJywga2V5LCBub25jZSlcbiAgICBhZXNnY20uc2V0QXV0aFRhZyhhdXRoVGFnKVxuICAgIHJldHVybiBgJHthZXNnY20udXBkYXRlKGNpcGhlcnRleHQpfSR7YWVzZ2NtLmZpbmFsKCl9YFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IGlzUmFuZ2UgPSBlcnJvciBpbnN0YW5jZW9mIFJhbmdlRXJyb3JcbiAgICBjb25zdCBpbnZhbGlkS2V5TGVuZ3RoID0gZXJyb3IubWVzc2FnZSA9PT0gJ0ludmFsaWQga2V5IGxlbmd0aCdcbiAgICBjb25zdCBkZWNyeXB0aW9uRmFpbGVkID0gZXJyb3IubWVzc2FnZSA9PT0gJ1Vuc3VwcG9ydGVkIHN0YXRlIG9yIHVuYWJsZSB0byBhdXRoZW50aWNhdGUgZGF0YSdcblxuICAgIGlmIChpc1JhbmdlIHx8IGludmFsaWRLZXlMZW5ndGgpIHtcbiAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcignSU5WQUxJRF9ET1RFTlZfS0VZOiBJdCBtdXN0IGJlIDY0IGNoYXJhY3RlcnMgbG9uZyAob3IgbW9yZSknKVxuICAgICAgZXJyLmNvZGUgPSAnSU5WQUxJRF9ET1RFTlZfS0VZJ1xuICAgICAgdGhyb3cgZXJyXG4gICAgfSBlbHNlIGlmIChkZWNyeXB0aW9uRmFpbGVkKSB7XG4gICAgICBjb25zdCBlcnIgPSBuZXcgRXJyb3IoJ0RFQ1JZUFRJT05fRkFJTEVEOiBQbGVhc2UgY2hlY2sgeW91ciBET1RFTlZfS0VZJylcbiAgICAgIGVyci5jb2RlID0gJ0RFQ1JZUFRJT05fRkFJTEVEJ1xuICAgICAgdGhyb3cgZXJyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59XG5cbi8vIFBvcHVsYXRlIHByb2Nlc3MuZW52IHdpdGggcGFyc2VkIHZhbHVlc1xuZnVuY3Rpb24gcG9wdWxhdGUgKHByb2Nlc3NFbnYsIHBhcnNlZCwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGRlYnVnID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMuZGVidWcpXG4gIGNvbnN0IG92ZXJyaWRlID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMub3ZlcnJpZGUpXG5cbiAgaWYgKHR5cGVvZiBwYXJzZWQgIT09ICdvYmplY3QnKSB7XG4gICAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdPQkpFQ1RfUkVRVUlSRUQ6IFBsZWFzZSBjaGVjayB0aGUgcHJvY2Vzc0VudiBhcmd1bWVudCBiZWluZyBwYXNzZWQgdG8gcG9wdWxhdGUnKVxuICAgIGVyci5jb2RlID0gJ09CSkVDVF9SRVFVSVJFRCdcbiAgICB0aHJvdyBlcnJcbiAgfVxuXG4gIC8vIFNldCBwcm9jZXNzLmVudlxuICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhwYXJzZWQpKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm9jZXNzRW52LCBrZXkpKSB7XG4gICAgICBpZiAob3ZlcnJpZGUgPT09IHRydWUpIHtcbiAgICAgICAgcHJvY2Vzc0VudltrZXldID0gcGFyc2VkW2tleV1cbiAgICAgIH1cblxuICAgICAgaWYgKGRlYnVnKSB7XG4gICAgICAgIGlmIChvdmVycmlkZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIF9kZWJ1ZyhgXCIke2tleX1cIiBpcyBhbHJlYWR5IGRlZmluZWQgYW5kIFdBUyBvdmVyd3JpdHRlbmApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX2RlYnVnKGBcIiR7a2V5fVwiIGlzIGFscmVhZHkgZGVmaW5lZCBhbmQgd2FzIE5PVCBvdmVyd3JpdHRlbmApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzc0VudltrZXldID0gcGFyc2VkW2tleV1cbiAgICB9XG4gIH1cbn1cblxuY29uc3QgRG90ZW52TW9kdWxlID0ge1xuICBjb25maWdEb3RlbnYsXG4gIF9jb25maWdWYXVsdCxcbiAgX3BhcnNlVmF1bHQsXG4gIGNvbmZpZyxcbiAgZGVjcnlwdCxcbiAgcGFyc2UsXG4gIHBvcHVsYXRlXG59XG5cbm1vZHVsZS5leHBvcnRzLmNvbmZpZ0RvdGVudiA9IERvdGVudk1vZHVsZS5jb25maWdEb3RlbnZcbm1vZHVsZS5leHBvcnRzLl9jb25maWdWYXVsdCA9IERvdGVudk1vZHVsZS5fY29uZmlnVmF1bHRcbm1vZHVsZS5leHBvcnRzLl9wYXJzZVZhdWx0ID0gRG90ZW52TW9kdWxlLl9wYXJzZVZhdWx0XG5tb2R1bGUuZXhwb3J0cy5jb25maWcgPSBEb3RlbnZNb2R1bGUuY29uZmlnXG5tb2R1bGUuZXhwb3J0cy5kZWNyeXB0ID0gRG90ZW52TW9kdWxlLmRlY3J5cHRcbm1vZHVsZS5leHBvcnRzLnBhcnNlID0gRG90ZW52TW9kdWxlLnBhcnNlXG5tb2R1bGUuZXhwb3J0cy5wb3B1bGF0ZSA9IERvdGVudk1vZHVsZS5wb3B1bGF0ZVxuXG5tb2R1bGUuZXhwb3J0cyA9IERvdGVudk1vZHVsZVxuIiwgIlxuICAgICAgaW1wb3J0IHsgcnVuIH0gZnJvbSBcIi9ob21lL21pY2hhZWwvRG9jdW1lbnRzL3Byb2plY3RzL3NuYXBzaGFyZS8uc3N0L3BsYXRmb3JtL3NyYy9hdXRvL3J1bi50c1wiO1xuICAgICAgaW1wb3J0ICogYXMgYXdzIGZyb20gJ0BwdWx1bWkvYXdzJ1xuZ2xvYmFsVGhpcy5hd3MgPSBhd3NcbiAgICAgIGltcG9ydCBtb2QgZnJvbSBcIi9ob21lL21pY2hhZWwvRG9jdW1lbnRzL3Byb2plY3RzL3NuYXBzaGFyZS9zc3QuY29uZmlnLnRzXCI7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBydW4obW9kLnJ1bilcbiAgICAgIGV4cG9ydCBkZWZhdWx0IHJlc3VsdFxuICAgICIsICJpbXBvcnQgeyBMaW5rIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvbGlua1wiO1xuaW1wb3J0IHsgSGludCB9IGZyb20gXCIuLi9jb21wb25lbnRzL2hpbnRcIjtcbmltcG9ydCB7IFdhcnAgfSBmcm9tIFwiLi4vY29tcG9uZW50cy93YXJwXCI7XG5pbXBvcnQge1xuICBSZXNvdXJjZVRyYW5zZm9ybWF0aW9uQXJncyxcbiAgaW50ZXJwb2xhdGUsXG4gIG1lcmdlT3B0aW9ucyxcbiAgcnVudGltZSxcbiAgYXV0b21hdGlvbixcbn0gZnJvbSBcIkBwdWx1bWkvcHVsdW1pXCI7XG5cbmltcG9ydCBhd3MgZnJvbSBcIkBwdWx1bWkvYXdzXCI7XG5pbXBvcnQgeyBWaXNpYmxlRXJyb3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9lcnJvclwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuKHByb2dyYW06IGF1dG9tYXRpb24uUHVsdW1pRm4pIHtcbiAgcHJvY2Vzcy5jaGRpcigkY2xpLnBhdGhzLnJvb3QpO1xuXG4gIGFkZFRyYW5zZm9ybWF0aW9uVG9SZXRhaW5SZXNvdXJjZXNPbkRlbGV0ZSgpO1xuICBhZGRUcmFuc2Zvcm1hdGlvblRvRW5zdXJlVW5pcXVlQ29tcG9uZW50TmFtZXMoKTtcbiAgYWRkVHJhbnNmb3JtYXRpb25Ub0NoZWNrQnVja2V0c0hhdmVNdWx0aXBsZVBvbGljaWVzKCk7XG5cbiAgTGluay5tYWtlTGlua2FibGUoYXdzLmR5bmFtb2RiLlRhYmxlLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3BlcnRpZXM6IHsgdGFibGVOYW1lOiB0aGlzLm5hbWUgfSxcbiAgICB9O1xuICB9KTtcbiAgTGluay5BV1MubWFrZUxpbmthYmxlKGF3cy5keW5hbW9kYi5UYWJsZSwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBbXG4gICAgICB7XG4gICAgICAgIGFjdGlvbnM6IFtcImR5bmFtb2RiOipcIl0sXG4gICAgICAgIHJlc291cmNlczogW3RoaXMuYXJuLCBpbnRlcnBvbGF0ZWAke3RoaXMuYXJufS8qYF0sXG4gICAgICB9LFxuICAgIF07XG4gIH0pO1xuXG4gIEhpbnQucmVzZXQoKTtcbiAgTGluay5yZXNldCgpO1xuICBXYXJwLnJlc2V0KCk7XG4gIGNvbnN0IG91dHB1dHMgPSAoYXdhaXQgcHJvZ3JhbSgpKSB8fCB7fTtcbiAgb3V0cHV0cy5fbGlua3MgPSBMaW5rLmxpc3QoKTtcbiAgb3V0cHV0cy5faGludHMgPSBIaW50Lmxpc3QoKTtcbiAgb3V0cHV0cy5fd2FycHMgPSBXYXJwLmxpc3QoKTtcbiAgb3V0cHV0cy5fcmVjZWl2ZXJzID0gTGluay5SZWNlaXZlci5saXN0KCk7XG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG5mdW5jdGlvbiBhZGRUcmFuc2Zvcm1hdGlvblRvUmV0YWluUmVzb3VyY2VzT25EZWxldGUoKSB7XG4gIHJ1bnRpbWUucmVnaXN0ZXJTdGFja1RyYW5zZm9ybWF0aW9uKChhcmdzOiBSZXNvdXJjZVRyYW5zZm9ybWF0aW9uQXJncykgPT4ge1xuICAgIGlmIChcbiAgICAgICRhcHAucmVtb3ZhbCA9PT0gXCJyZXRhaW4tYWxsXCIgfHxcbiAgICAgICgkYXBwLnJlbW92YWwgPT09IFwicmV0YWluXCIgJiZcbiAgICAgICAgW1xuICAgICAgICAgIFwiYXdzOnMzL2J1Y2tldDpCdWNrZXRcIixcbiAgICAgICAgICBcImF3czpzMy9idWNrZXRWMjpCdWNrZXRWMlwiLFxuICAgICAgICAgIFwiYXdzOmR5bmFtb2RiL3RhYmxlOlRhYmxlXCIsXG4gICAgICAgIF0uaW5jbHVkZXMoYXJncy50eXBlKSlcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHByb3BzOiBhcmdzLnByb3BzLFxuICAgICAgICBvcHRzOiBtZXJnZU9wdGlvbnMoeyByZXRhaW5PbkRlbGV0ZTogdHJ1ZSB9LCBhcmdzLm9wdHMpLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZFRyYW5zZm9ybWF0aW9uVG9FbnN1cmVVbmlxdWVDb21wb25lbnROYW1lcygpIHtcbiAgY29uc3QgY29tcG9uZW50TmFtZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgcnVudGltZS5yZWdpc3RlclN0YWNrVHJhbnNmb3JtYXRpb24oKGFyZ3M6IFJlc291cmNlVHJhbnNmb3JtYXRpb25BcmdzKSA9PiB7XG4gICAgaWYgKGFyZ3MudHlwZS5zdGFydHNXaXRoKFwicHVsdW1pXCIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNvbXBvbmVudE5hbWVzLmhhcyhhcmdzLm5hbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKFxuICAgICAgICBgSW52YWxpZCBjb21wb25lbnQgbmFtZSBcIiR7YXJncy5uYW1lfVwiLiBDb21wb25lbnQgbmFtZXMgbXVzdCBiZSB1bmlxdWUuYCxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbXBvbmVudE5hbWVzLmFkZChhcmdzLm5hbWUpO1xuXG4gICAgaWYgKCFhcmdzLm5hbWUubWF0Y2goL15bQS1aXVthLXpBLVowLTldKiQvKSkge1xuICAgICAgdGhyb3cgbmV3IFZpc2libGVFcnJvcihcbiAgICAgICAgYEludmFsaWQgY29tcG9uZW50IG5hbWUgXCIke2FyZ3MubmFtZX1cIi4gQ29tcG9uZW50IG5hbWVzIG11c3Qgc3RhcnQgd2l0aCBhbiB1cHBlcmNhc2UgbGV0dGVyIGFuZCBjb250YWluIG9ubHkgYWxwaGFudW1lcmljIGNoYXJhY3RlcnMuYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZFRyYW5zZm9ybWF0aW9uVG9DaGVja0J1Y2tldHNIYXZlTXVsdGlwbGVQb2xpY2llcygpIHtcbiAgY29uc3QgYnVja2V0c1dpdGhQb2xpY3k6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgcnVudGltZS5yZWdpc3RlclN0YWNrVHJhbnNmb3JtYXRpb24oKGFyZ3M6IFJlc291cmNlVHJhbnNmb3JtYXRpb25BcmdzKSA9PiB7XG4gICAgaWYgKGFyZ3MudHlwZSAhPT0gXCJhd3M6czMvYnVja2V0UG9saWN5OkJ1Y2tldFBvbGljeVwiKSByZXR1cm47XG5cbiAgICBhcmdzLnByb3BzLmJ1Y2tldC5hcHBseSgoYnVja2V0OiBzdHJpbmcpID0+IHtcbiAgICAgIGlmIChidWNrZXRzV2l0aFBvbGljeVtidWNrZXRdKVxuICAgICAgICB0aHJvdyBuZXcgVmlzaWJsZUVycm9yKFxuICAgICAgICAgIGBDYW5ub3QgYWRkIGJ1Y2tldCBwb2xpY3kgXCIke2FyZ3MubmFtZX1cIiB0byB0aGUgQVdTIFMzIEJ1Y2tldCBcIiR7YnVja2V0fVwiLiBUaGUgYnVja2V0IGFscmVhZHkgaGFzIGEgcG9saWN5IGF0dGFjaGVkIFwiJHtidWNrZXRzV2l0aFBvbGljeVtidWNrZXRdfVwiLmAsXG4gICAgICAgICk7XG5cbiAgICAgIGJ1Y2tldHNXaXRoUG9saWN5W2J1Y2tldF0gPSBhcmdzLm5hbWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9KTtcbn1cbiIsICIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi8uc3N0L3BsYXRmb3JtL2NvbmZpZy5kLnRzXCIgLz5cblxuaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5kb3RlbnYuY29uZmlnKCk7XG5cbmV4cG9ydCBkZWZhdWx0ICRjb25maWcoe1xuICBhcHAoaW5wdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogXCJzbmFwc2hhcmVcIixcbiAgICAgIHJlbW92YWw6IGlucHV0Py5zdGFnZSA9PT0gXCJwcm9kdWN0aW9uXCIgPyBcInJldGFpblwiIDogXCJyZW1vdmVcIixcbiAgICAgIGhvbWU6IFwiYXdzXCIsXG4gICAgICBwcm92aWRlcnM6IHtcbiAgICAgICAgYXdzOiB7XG4gICAgICAgICAgcmVnaW9uOiBcInVzLXdlc3QtMlwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuICB9LFxuICBhc3luYyBydW4oKSB7XG4gICAgY29uc3QgS2luZGVBdWRpZW5jZSA9IGBzbmFwc2hhcmUtYXBpLSR7JGFwcC5zdGFnZX1gO1xuXG4gICAgY29uc3QgZW52aXJvbm1lbnQgPSB7XG4gICAgICBUVVJTT19DT05ORUNUSU9OX1VSTDogcHJvY2Vzcy5lbnYuVFVSU09fQ09OTkVDVElPTl9VUkwhLFxuICAgIH07XG5cbiAgICBjb25zdCByb3V0ZUFyZ3MgPSB7XG4gICAgICBhdXRoOiB7XG4gICAgICAgIGp3dDoge1xuICAgICAgICAgIGlzc3VlcjogXCJodHRwczovL3NuYXBzaGFyZS5raW5kZS5jb21cIixcbiAgICAgICAgICBhdWRpZW5jZXM6IFtLaW5kZUF1ZGllbmNlXSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIGNvbnN0IHBvc3RIYW5kbGVyID0gXCJhd3MvZnVuY3Rpb25zL3NyYy9wb3N0cy5oYW5kbGVyXCI7XG4gICAgY29uc3QgYXV0aEhhbmRsZXIgPSBcImF3cy9mdW5jdGlvbnMvc3JjL2F1dGguaGFuZGxlclwiO1xuICAgIGNvbnN0IHMzSGFuZGxlciA9IFwiYXdzL2Z1bmN0aW9ucy9zcmMvczMuaGFuZGxlclwiO1xuXG4gICAgY29uc3QgYXNzZXRzQnVja2V0ID0gbmV3IHNzdC5hd3MuQnVja2V0KFwiU25hcHNoYXJlQXNzZXRzXCIpO1xuXG4gICAgY29uc3QgYXBpID0gbmV3IHNzdC5hd3MuQXBpR2F0ZXdheVYyKFwiU25hcFNoYXJlQXBpXCIpO1xuXG4gICAgYXBpLnJvdXRlKFwiR0VUIC9wb3N0c1wiLCB7IGhhbmRsZXI6IHBvc3RIYW5kbGVyLCBlbnZpcm9ubWVudCB9KTtcbiAgICBhcGkucm91dGUoXCJHRVQgL3Bvc3RzL3tpZH1cIiwgeyBoYW5kbGVyOiBwb3N0SGFuZGxlciwgZW52aXJvbm1lbnQgfSk7XG4gICAgYXBpLnJvdXRlKFwiUE9TVCAvcG9zdHNcIiwgeyBoYW5kbGVyOiBwb3N0SGFuZGxlciwgZW52aXJvbm1lbnQgfSwgcm91dGVBcmdzKTtcbiAgICBhcGkucm91dGUoXG4gICAgICBcIkRFTEVURSAvcG9zdHMve2lkfVwiLFxuICAgICAgeyBoYW5kbGVyOiBwb3N0SGFuZGxlciwgZW52aXJvbm1lbnQgfSxcbiAgICAgIHJvdXRlQXJnc1xuICAgICk7XG5cbiAgICBhcGkucm91dGUoXCJQT1NUIC9yZWdpc3RlclwiLCB7XG4gICAgICBoYW5kbGVyOiBhdXRoSGFuZGxlcixcbiAgICAgIGVudmlyb25tZW50LFxuICAgIH0pO1xuICAgIGFwaS5yb3V0ZShcbiAgICAgIFwiUE9TVCAvc2lnbmVkLXVybFwiLFxuICAgICAge1xuICAgICAgICBoYW5kbGVyOiBzM0hhbmRsZXIsXG4gICAgICAgIGVudmlyb25tZW50OiB7XG4gICAgICAgICAgVFVSU09fQ09OTkVDVElPTl9VUkw6IHByb2Nlc3MuZW52LlRVUlNPX0NPTk5FQ1RJT05fVVJMISxcbiAgICAgICAgICBCVUNLRVRfTkFNRTogYXNzZXRzQnVja2V0Lm5hbWUsXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IFthc3NldHNCdWNrZXRdLFxuICAgICAgfSxcbiAgICAgIHJvdXRlQXJnc1xuICAgICk7XG5cbiAgICBuZXcgc3N0LmF3cy5TdGF0aWNTaXRlKFwiU25hcHNoYXJlV2ViXCIsIHtcbiAgICAgIGJ1aWxkOiB7XG4gICAgICAgIGNvbW1hbmQ6IFwibnBtIHJ1biBidWlsZFwiLFxuICAgICAgICBvdXRwdXQ6IFwiZGlzdFwiLFxuICAgICAgfSxcbiAgICAgIGVudmlyb25tZW50OiB7XG4gICAgICAgIFZJVEVfQVBJX1VSTDogYXBpLnVybCxcbiAgICAgICAgVklURV9LSU5ERV9BVURJRU5DRTogS2luZGVBdWRpZW5jZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0sXG59KTtcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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QUFDcEIsVUFBTSxZQUFZO0FBRWxCLFVBQU0sZUFBZSxJQUFJLG1CQUFJLElBQUksT0FBTyxpQkFBaUI7QUFFekQsVUFBTSxNQUFNLElBQUksbUJBQUksSUFBSSxhQUFhLGNBQWM7QUFFbkQsUUFBSSxNQUFNLGNBQWMsRUFBRSxTQUFTLGFBQWEsWUFBWSxDQUFDO0FBQzdELFFBQUksTUFBTSxtQkFBbUIsRUFBRSxTQUFTLGFBQWEsWUFBWSxDQUFDO0FBQ2xFLFFBQUksTUFBTSxlQUFlLEVBQUUsU0FBUyxhQUFhLFlBQVksR0FBRyxTQUFTO0FBQ3pFLFFBQUk7QUFBQSxNQUNGO0FBQUEsTUFDQSxFQUFFLFNBQVMsYUFBYSxZQUFZO0FBQUEsTUFDcEM7QUFBQSxJQUNGO0FBRUEsUUFBSSxNQUFNLGtCQUFrQjtBQUFBLE1BQzFCLFNBQVM7QUFBQSxNQUNUO0FBQUEsSUFDRixDQUFDO0FBQ0QsUUFBSTtBQUFBLE1BQ0Y7QUFBQSxNQUNBO0FBQUEsUUFDRSxTQUFTO0FBQUEsUUFDVCxhQUFhO0FBQUEsVUFDWCxzQkFBc0IsUUFBUSxJQUFJO0FBQUEsVUFDbEMsYUFBYSxhQUFhO0FBQUEsUUFDNUI7QUFBQSxRQUNBLE1BQU0sQ0FBQyxZQUFZO0FBQUEsTUFDckI7QUFBQSxNQUNBO0FBQUEsSUFDRjtBQUVBLFFBQUksbUJBQUksSUFBSSxXQUFXLGdCQUFnQjtBQUFBLE1BQ3JDLE9BQU87QUFBQSxRQUNMLFNBQVM7QUFBQSxRQUNULFFBQVE7QUFBQSxNQUNWO0FBQUEsTUFDQSxhQUFhO0FBQUEsUUFDWCxjQUFjLElBQUk7QUFBQSxRQUNsQixxQkFBcUI7QUFBQSxNQUN2QjtBQUFBLElBQ0YsQ0FBQztBQUFBLEVBQ0g7QUFDRixDQUFDOzs7QUY1RUQsV0FBVyxNQUFNQztBQUVYLElBQU0sU0FBUyxNQUFNLElBQUksbUJBQUksR0FBRztBQUNoQyxJQUFPLGVBQVE7IiwKICAibmFtZXMiOiBbIm91dHB1dCIsICJ0cmFuc2Zvcm0iLCAiYXJncyIsICJwYXRoIiwgImZzIiwgImZpbGUiLCAicmVzdWx0IiwgInJlc3VsdCIsICJyZXN1bHQiLCAiczMiLCAicmVzdWx0IiwgImFzc2V0IiwgIm91dHB1dCIsICJhbGwiLCAiTGluayIsICJidWlsZCIsICJsaW5rcyIsICJtYWtlTGlua2FibGUiLCAiQVdTIiwgImlzTGlua2FibGUiLCAiUmVjZWl2ZXIiLCAibGlzdCIsICJXYXJwIiwgImZzIiwgInBhdGgiLCAiY3J5cHRvIiwgIm91dHB1dCIsICJhbGwiLCAiaW50ZXJwb2xhdGUiLCAicnVudGltZSIsICJkZXYiLCAibmFtZSIsICJsaW5rcyIsICJoYW5kbGVyIiwgImJ1bmRsZSIsICJpbmplY3Rpb25zIiwgInRpbWVvdXQiLCAibWVtb3J5IiwgImVudmlyb25tZW50IiwgInJlc3VsdCIsICJzdHJlYW1pbmciLCAibG9nZ2luZyIsICJ1cmwiLCAiY29weUZpbGVzIiwgInppcFBhdGgiLCAibGlua0RhdGEiLCAiYXJncyIsICJsaW5rUGVybWlzc2lvbnMiLCAicmVnaW9uIiwgIndyYXBwZXIiLCAiZGVmaW5pdGlvbiIsICJkeW5hbWljIiwgIlByb3ZpZGVyIiwgIm91dHB1dCIsICJhd3MiLCAiem9uZUlkIiwgInJlY29yZHMiLCAiYWxsIiwgIkhpbnQiLCAibmFtZSIsICJhbGwiLCAiaW50ZXJwb2xhdGUiLCAib3V0cHV0IiwgImF3cyIsICJhY2Nlc3NMb2ciLCAiZG9tYWluIiwgInBhdGgiLCAiYXV0aEFyZ3MiLCAiaWQiLCAib3V0cHV0IiwgImFyZ3MiLCAib3V0cHV0IiwgImludGVycG9sYXRlIiwgImFsbCIsICJhd3MiLCAiY3JlYXRlQnVja2V0IiwgInB1YmxpY0FjY2VzcyIsICJzdWJzY3JpYmVyIiwgImFyZ3MiLCAib3V0cHV0IiwgImF3cyIsICJhbGwiLCAiaW50ZXJwb2xhdGUiLCAib3V0cHV0IiwgImF3cyIsICJuYW1lIiwgIm91dHB1dCIsICJhd3MiLCAicmVzdWx0IiwgInNjYWxpbmciLCAidmVyc2lvbiIsICJuYW1lIiwgIm91dHB1dCIsICJhd3MiLCAib3V0cHV0IiwgImF3cyIsICJyZXN1bHQiLCAiYWxsIiwgIm91dHB1dCIsICJhd3MiLCAiZHluYW1pYyIsICJQcm92aWRlciIsICJyZXN1bHQiLCAib3V0cHV0IiwgImludGVycG9sYXRlIiwgImF3cyIsICJkb21haW4iLCAiYWxsIiwgIm91dHB1dCIsICJhd3MiLCAicGF0aCIsICJiZWhhdmlvcnMiLCAib3V0cHV0IiwgImF3cyIsICJmcyIsICJkeW5hbWljIiwgIlMzQ2xpZW50IiwgIlByb3ZpZGVyIiwgInMzIiwgImR5bmFtaWMiLCAiQ2xvdWRGcm9udENsaWVudCIsICJQcm92aWRlciIsICJwYXRoIiwgInJlc3VsdCIsICJmcyIsICJwYXRoIiwgImFsbCIsICJvdXRwdXQiLCAic2l0ZVBhdGgiLCAiZW52aXJvbm1lbnQiLCAiaW5kZXhQYWdlIiwgImJ1aWxkIiwgImZzIiwgInBhdGgiLCAiY3J5cHRvIiwgImF3cyIsICJhbGwiLCAiaW50ZXJwb2xhdGUiLCAib3V0cHV0IiwgIm5ld1BvbGljeSIsICJvdXRwdXRQYXRoIiwgImRpc3RyaWJ1dGlvbiIsICJkeW5hbWljIiwgIlByb3ZpZGVyIiwgInBhdGgiLCAiYWxsIiwgImludGVycG9sYXRlIiwgIm91dHB1dCIsICJtb2RlbCIsICJvcGVuQWlBcGlLZXkiLCAiZHluYW1pYyIsICJDbG91ZEZyb250Q2xpZW50IiwgIlByb3ZpZGVyIiwgInBhdGgiLCAiZnMiLCAiZ2xvYlN5bmMiLCAiY3J5cHRvIiwgIm91dHB1dCIsICJhbGwiLCAiaW50ZXJwb2xhdGUiLCAiYXdzIiwgInByZXBhcmUiLCAic2l0ZVBhdGgiLCAicmVnaW9uIiwgIm5ld1BvbGljeSIsICJvdXRwdXRQYXRoIiwgInBsYW4iLCAiYXJncyIsICJvcmlnaW5zIiwgIm5hbWUiLCAib3JpZ2luR3JvdXBzIiwgImRpc3RyaWJ1dGlvbiIsICJkeW5hbWljIiwgIlByb3ZpZGVyIiwgInBhdGgiLCAiZnMiLCAiZXhlY1N5bmMiLCAiYWxsIiwgIm91dHB1dCIsICJidWlsZEFwcCIsICJzaXRlUGF0aCIsICJsaW5rRGF0YSIsICJsaW5rRW52cyIsICJmcyIsICJwYXRoIiwgImFsbCIsICJwcmVwYXJlIiwgImJ1aWxkQXBwIiwgIkhpbnQiLCAib3V0cHV0UGF0aCIsICJidWlsZE1ldGEiLCAiZnMiLCAicGF0aCIsICJhbGwiLCAicHJlcGFyZSIsICJidWlsZEFwcCIsICJIaW50IiwgIm91dHB1dFBhdGgiLCAiYnVpbGRNZXRhIiwgInBsYW4iLCAiZnMiLCAicGF0aCIsICJjcnlwdG8iLCAiZ2xvYlN5bmMiLCAiYWxsIiwgImF3cyIsICJwcmVwYXJlIiwgImJ1aWxkQXBwIiwgIkhpbnQiLCAiYnVpbGRDb21tYW5kIiwgIm91dHB1dFBhdGgiLCAicmVnaW9uIiwgImJ1aWxkSWQiLCAib3Blbk5leHRPdXRwdXQiLCAiYXJncyIsICJyZXZhbGlkYXRpb25UYWJsZSIsICJwcmVyZW5kZXJNYW5pZmVzdCIsICJyb3V0ZXNNYW5pZmVzdCIsICJhcHBQYXRoUm91dGVzTWFuaWZlc3QiLCAiYXBwUGF0aHNNYW5pZmVzdCIsICJwYWdlc01hbmlmZXN0IiwgImZzIiwgInBhdGgiLCAiYWxsIiwgIm91dHB1dCIsICJwcmVwYXJlIiwgImJ1aWxkQXBwIiwgIkhpbnQiLCAiZWRnZSIsICJzaXRlUGF0aCIsICJvdXRwdXRQYXRoIiwgImlzVXNpbmdWaXRlIiwgImJ1aWxkTWV0YSIsICJCdWNrZXQiLCAiaW5pdF9idWNrZXQiLCAiY3JlYXRlQnVja2V0IiwgImNsb3VkZmxhcmUiLCAiZnMiLCAiZHluYW1pYyIsICJQcm92aWRlciIsICJwYXRoIiwgImZzIiwgImVzYnVpbGQiLCAiYnVpbGQiLCAicmVzdWx0IiwgImR5bmFtaWMiLCAiUHJvdmlkZXIiLCAiZHluYW1pYyIsICJQcm92aWRlciIsICJmcyIsICJvdXRwdXQiLCAiYWxsIiwgImpzb25TdHJpbmdpZnkiLCAiaW50ZXJwb2xhdGUiLCAiYXdzIiwgImxpbmtEYXRhIiwgImFyZ3MiLCAicmVzdWx0IiwgImJ1aWxkIiwgImhhbmRsZXIiLCAiaWFtQ3JlZGVudGlhbHMiLCAiZnMiLCAicGF0aCIsICJjcnlwdG8iLCAiYWxsIiwgImdsb2JTeW5jIiwgIlN0YXRpY1NpdGUiLCAiaW5pdF9zdGF0aWNfc2l0ZSIsICJjcmVhdGVLdlN0b3JhZ2UiLCAiY3JlYXRlUm91dGVyIiwgIm91dHB1dFBhdGgiLCAiYXNzZXRNYW5pZmVzdCIsICJyZXN1bHQiLCAicGF0aCIsICJ2YWx1ZSIsICJfYSIsICJwYXRoIiwgImZzIiwgImdsb2JTeW5jIiwgImNyeXB0byIsICJvdXRwdXQiLCAiYWxsIiwgInByZXBhcmUiLCAic2l0ZVBhdGgiLCAib3V0cHV0UGF0aCIsICJwbGFuIiwgImFzc2V0TWFuaWZlc3QiLCAidmFsaWRhdGVQbGFuIiwgImluaXRfc3NyX3NpdGUiLCAiZnMiLCAicGF0aCIsICJhbGwiLCAiUmVtaXgiLCAiaW5pdF9yZW1peCIsICJpbml0X3Nzcl9zaXRlIiwgInByZXBhcmUiLCAiYnVpbGRBcHAiLCAiSGludCIsICJzaXRlUGF0aCIsICJvdXRwdXRQYXRoIiwgImlzVXNpbmdWaXRlIiwgImJ1aWxkTWV0YSIsICJ2YWxpZGF0ZVBsYW4iLCAiYnVpbGQiLCAiQnVja2V0IiwgIlJlbWl4IiwgIlN0YXRpY1NpdGUiLCAiaW5pdF9jbG91ZGZsYXJlIiwgImluaXRfYnVja2V0IiwgImluaXRfc3RhdGljX3NpdGUiLCAiaW5pdF9yZW1peCIsICJvdXRwdXQiLCAic2VjcmV0IiwgImluaXRfY2xvdWRmbGFyZSIsICJmcyIsICJwYXRoIiwgImNyeXB0byIsICJwYXJzZSIsICJyZXN1bHQiLCAiaW50ZXJwb2xhdGUiLCAicnVudGltZSIsICJhd3MiLCAiYXdzIiwgImRvdGVudiIsICJhd3MiXQp9Cg==
